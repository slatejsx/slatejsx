import React,{useState,useMemo,useCallback,useEffect,useLayoutEffect,createContext,useContext,useRef,memo}from"react";import throttle from"lodash/throttle";import ReactDOM from"react-dom";import{DeleteOutlined,CheckSquareOutlined,BorderOutlined,FormatPainterOutlined,LinkOutlined,StarFilled,BoldOutlined,ItalicOutlined,UnderlineOutlined,StrikethroughOutlined,CodeOutlined,BgColorsOutlined,FontColorsOutlined,UnorderedListOutlined,OrderedListOutlined,InfoCircleOutlined,AlignLeftOutlined,AlignCenterOutlined,AlignRightOutlined,TagOutlined,TagsOutlined,SoundOutlined,QuestionCircleOutlined,ThunderboltOutlined,StarOutlined,SettingOutlined,ScheduleOutlined,PushpinOutlined,MessageOutlined,HeartOutlined,EditOutlined,SnippetsOutlined,AliwangwangOutlined,WechatOutlined,WeiboOutlined,WarningOutlined,CaretUpOutlined,CaretDownOutlined,SmileOutlined,CreditCardOutlined,CheckCircleOutlined,ExclamationCircleOutlined,CloseCircleOutlined,FontSizeOutlined,MinusCircleOutlined,PlusCircleOutlined,PictureOutlined,TableOutlined,InsertRowLeftOutlined,DeleteColumnOutlined,InsertRowRightOutlined,InsertRowAboveOutlined,DeleteRowOutlined,InsertRowBelowOutlined,MergeCellsOutlined,SplitCellsOutlined,MinusSquareOutlined,CopyOutlined,CodepenOutlined,VideoCameraOutlined,UpCircleOutlined,DownCircleOutlined}from"@ant-design/icons";import{Tooltip,Rate,Input,message,Button,Alert,Popover,Image as Image$1,Divider as Divider$1,Select as Select$1,Affix}from"antd";import isUrl from"is-url";import Single from"@/components/button/single";import Select from"@/components/button/select";import Muti from"@/components/button/muti";import imageExtensions from"image-extensions";import TableInput from"@/components/table-input";import Prism from"prismjs";import"prismjs/components/prism-sql";import"prismjs/components/prism-go";import"prismjs/components/prism-python";import"prismjs/components/prism-typescript";import"prismjs/components/prism-php";import"prismjs/components/prism-c";import"prismjs/components/prism-java";import"prismjs/components/prism-ruby";import"prismjs/components/prism-json";import"prismjs/components/prism-markdown";import _$1 from"lodash";function ownKeys$b(t,e){var r,n=Object.keys(t);return Object.getOwnPropertySymbols&&(r=Object.getOwnPropertySymbols(t),e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,r)),n}function _objectSpread2(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?ownKeys$b(Object(r),!0).forEach(function(e){_defineProperty$2(t,e,r[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):ownKeys$b(Object(r)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))})}return t}function _defineProperty$2(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function _extends(){return(_extends=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r,n=arguments[t];for(r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function _slicedToArray(e,t){return _arrayWithHoles(e)||_iterableToArrayLimit(e,t)||_unsupportedIterableToArray(e,t)||_nonIterableRest()}function _toConsumableArray(e){return _arrayWithoutHoles(e)||_iterableToArray(e)||_unsupportedIterableToArray(e)||_nonIterableSpread()}function _arrayWithoutHoles(e){if(Array.isArray(e))return _arrayLikeToArray(e)}function _arrayWithHoles(e){if(Array.isArray(e))return e}function _iterableToArray(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}function _iterableToArrayLimit(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,a=[],i=!0,u=!1;try{for(r=r.call(e);!(i=(n=r.next()).done)&&(a.push(n.value),!t||a.length!==t);i=!0);}catch(e){u=!0,o=e}finally{try{i||null==r.return||r.return()}finally{if(u)throw o}}return a}}function _unsupportedIterableToArray(e,t){if(e){if("string"==typeof e)return _arrayLikeToArray(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Map"===(r="Object"===r&&e.constructor?e.constructor.name:r)||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?_arrayLikeToArray(e,t):void 0}}function _arrayLikeToArray(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _createForOfIteratorHelper(e,t){var r,n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=_unsupportedIterableToArray(e))||t&&e&&"number"==typeof e.length)return n&&(e=n),r=0,{s:t=function(){},n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:t};throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,i=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){i=!0,o=e},f:function(){try{a||null==n.return||n.return()}finally{if(i)throw o}}}}function isObject(e){return"[object Object]"===Object.prototype.toString.call(e)}function isPlainObject(e){return!1!==isObject(e)&&(void 0===(e=e.constructor)||!1!==isObject(e=e.prototype)&&!1!==e.hasOwnProperty("isPrototypeOf"))}function n$2(e){for(var t,r=arguments.length,n=Array(1<r?r-1:0),o=1;o<r;o++)n[o-1]=arguments[o];if("production"!==process.env.NODE_ENV)throw t=(t=Y[e])?"function"==typeof t?t.apply(null,n):t:"unknown error nr: "+e,Error("[Immer] "+t);throw Error("[Immer] minified error nr: "+e+(n.length?" "+n.map(function(e){return"'"+e+"'"}).join(","):"")+". Find the full error at: https://bit.ly/3cXEKWf")}function r$1(e){return!!e&&!!e[Q]}function t$1(t){return!!t&&(function(){if(!t||"object"!=typeof t)return!1;var e=Object.getPrototypeOf(t);if(null===e)return!0;e=Object.hasOwnProperty.call(e,"constructor")&&e.constructor;return e===Object||"function"==typeof e&&Function.toString.call(e)===Z}()||Array.isArray(t)||!!t[L]||!!t.constructor[L]||s(t)||v(t))}function i(r,n,t){void 0===t&&(t=!1),0===o(r)?(t?Object.keys:nn)(r).forEach(function(e){t&&"symbol"==typeof e||n(e,r[e],r)}):r.forEach(function(e,t){return n(t,e,r)})}function o(e){var t=e[Q];return t?3<t.i?t.i-4:t.i:Array.isArray(e)?1:s(e)?2:v(e)?3:0}function u(e,t){return 2===o(e)?e.has(t):Object.prototype.hasOwnProperty.call(e,t)}function a(e,t){return 2===o(e)?e.get(t):e[t]}function f(e,t,r){var n=o(e);2===n?e.set(t,r):3===n?(e.delete(t),e.add(r)):e[t]=r}function c(e,t){return e===t?0!==e||1/e==1/t:e!=e&&t!=t}function s(e){return X&&e instanceof Map}function v(e){return q&&e instanceof Set}function p(e){return e.o||e.t}function l(e){if(Array.isArray(e))return Array.prototype.slice.call(e);var t=rn(e);delete t[Q];for(var r=nn(t),n=0;n<r.length;n++){var o=r[n],a=t[o];!1===a.writable&&(a.writable=!0,a.configurable=!0),(a.get||a.set)&&(t[o]={configurable:!0,writable:!0,enumerable:a.enumerable,value:e[o]})}return Object.create(Object.getPrototypeOf(e),t)}function d(e,t){return void 0===t&&(t=!1),y(e)||r$1(e)||!t$1(e)||(1<o(e)&&(e.set=e.add=e.clear=e.delete=h),Object.freeze(e),t&&i(e,function(e,t){return d(t,!0)},!0)),e}function h(){n$2(2)}function y(e){return null==e||"object"!=typeof e||Object.isFrozen(e)}function b(e){var t=tn[e];return t||n$2(18,e),t}function _(){return"production"===process.env.NODE_ENV||U||n$2(0),U}function j(e,t){t&&(b("Patches"),e.u=[],e.s=[],e.v=t)}function O(e){g(e),e.p.forEach(S),e.p=null}function g(e){e===U&&(U=e.l)}function w(e){return U={p:[],l:U,h:e,m:!0,_:0}}function S(e){e=e[Q];0===e.i||1===e.i?e.j():e.O=!0}function P(e,t){t._=t.p.length;var r=t.p[0],n=void 0!==e&&e!==r;return t.h.g||b("ES5").S(t,e,n),n?(r[Q].P&&(O(t),n$2(4)),t$1(e)&&(e=M(t,e),t.l||x(t,e)),t.u&&b("Patches").M(r[Q].t,e,t.u,t.s)):e=M(t,r,[]),O(t),t.u&&t.v(t.u,t.s),e!==H?e:void 0}function M(r,n,o){if(y(n))return n;var a,u=n[Q];return u?u.A!==r?n:u.P?(u.I||(u.I=!0,u.A._--,a=4===u.i||5===u.i?u.o=l(u.k):u.o,i(3===u.i?new Set(a):a,function(e,t){return A(r,u,a,e,t,o)}),x(r,a,!1),o&&r.u&&b("Patches").R(u,o,r.u,r.s)),u.o):(x(r,u.t,!0),u.t):(i(n,function(e,t){return A(r,u,n,e,t,o)},!0),n)}function A(e,t,r,n,o,a){if("production"!==process.env.NODE_ENV&&o===r&&n$2(5),r$1(o)){a=M(e,o,a&&t&&3!==t.i&&!u(t.D,n)?a.concat(n):void 0);if(f(r,n,a),!r$1(a))return;e.m=!1}t$1(o)&&!y(o)&&(!e.h.F&&e._<1||(M(e,o),t&&t.A.l||x(e,o)))}function x(e,t,r){void 0===r&&(r=!1),e.h.F&&e.m&&d(t,r)}function z(e,t){var r=e[Q];return(r?p(r):e)[t]}function I(e,t){if(t in e)for(var r=Object.getPrototypeOf(e);r;){var n=Object.getOwnPropertyDescriptor(r,t);if(n)return n;r=Object.getPrototypeOf(r)}}function k(e){e.P||(e.P=!0,e.l&&k(e.l))}function E(e){e.o||(e.o=l(e.t))}function R(e,t,r){var n,o,a=s(t)?b("MapSet").N(t,r):v(t)?b("MapSet").T(t,r):e.g?(e=t,n=r,a=Array.isArray(e),n={i:a?1:0,A:n?n.A:_(),P:!1,I:!1,D:{},l:n,t:e,k:null,o:null,j:null,C:!1},e=n,o=en,a&&(e=[n],o=on),a=Proxy.revocable(e,o),e=a.revoke,o=a.proxy,n.k=o,n.j=e,o):b("ES5").J(t,r);return(r?r.A:_()).p.push(a),a}function D(e){return r$1(e)||n$2(22,e),function r(e){if(!t$1(e))return e;var n,u=e[Q],t=o(e);if(u){if(!u.P&&(u.i<4||!b("ES5").K(u)))return u.t;u.I=!0,n=F(e,t),u.I=!1}else n=F(e,t);return i(n,function(e,t){u&&a(u.t,e)===t||f(n,e,r(t))}),3===t?new Set(n):n}(e)}function F(e,t){switch(t){case 2:return new Map(e);case 3:return Array.from(e)}return l(e)}var G,U,W="undefined"!=typeof Symbol&&"symbol"==typeof Symbol("x"),X="undefined"!=typeof Map,q="undefined"!=typeof Set,B="undefined"!=typeof Proxy&&void 0!==Proxy.revocable&&"undefined"!=typeof Reflect,H=W?Symbol.for("immer-nothing"):((G={})["immer-nothing"]=!0,G),L=W?Symbol.for("immer-draftable"):"__$immer_draftable",Q=W?Symbol.for("immer-state"):"__$immer_state",Y={0:"Illegal state",1:"Immer drafts cannot have computed properties",2:"This object has been frozen and should not be mutated",3:function(e){return"Cannot use a proxy that has been revoked. Did you pass an object from inside an immer function to an async process? "+e},4:"An immer producer returned a new value *and* modified its draft. Either return a new value *or* modify the draft.",5:"Immer forbids circular references",6:"The first or second argument to `produce` must be a function",7:"The third argument to `produce` must be a function or undefined",8:"First argument to `createDraft` must be a plain object, an array, or an immerable object",9:"First argument to `finishDraft` must be a draft returned by `createDraft`",10:"The given draft is already finalized",11:"Object.defineProperty() cannot be used on an Immer draft",12:"Object.setPrototypeOf() cannot be used on an Immer draft",13:"Immer only supports deleting array indices",14:"Immer only supports setting array indices and the 'length' property",15:function(e){return"Cannot apply patch, path doesn't resolve: "+e},16:'Sets cannot have "replace" patches.',17:function(e){return"Unsupported patch operation: "+e},18:function(e){return"The plugin for '"+e+"' has not been loaded into Immer. To enable the plugin, import and call `enable"+e+"()` when initializing your application."},20:"Cannot use proxies if Proxy, Proxy.revocable or Reflect are not available",21:function(e){return"produce can only be called on things that are draftable: plain objects, arrays, Map, Set or classes that are marked with '[immerable]: true'. Got '"+e+"'"},22:function(e){return"'current' expects a draft, got: "+e},23:function(e){return"'original' expects a draft, got: "+e},24:"Patching reserved attributes like __proto__, prototype and constructor is not allowed"},Z=""+Object.prototype.constructor,nn="undefined"!=typeof Reflect&&Reflect.ownKeys?Reflect.ownKeys:void 0!==Object.getOwnPropertySymbols?function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:Object.getOwnPropertyNames,rn=Object.getOwnPropertyDescriptors||function(t){var r={};return nn(t).forEach(function(e){r[e]=Object.getOwnPropertyDescriptor(t,e)}),r},tn={},en={get:function(e,t){if(t===Q)return e;var r,n=p(e);if(!u(n,t))return r=e,(o=I(n,t))?"value"in o?o.value:null===(o=o.get)||void 0===o?void 0:o.call(r.k):void 0;var o=n[t];return!e.I&&t$1(o)&&o===z(e.t,t)?(E(e),e.o[t]=R(e.A.h,o,e)):o},has:function(e,t){return t in p(e)},ownKeys:function(e){return Reflect.ownKeys(p(e))},set:function(e,t,r){var n=I(p(e),t);if(null!=n&&n.set)return n.set.call(e.k,r),!0;if(!e.P){var n=z(p(e),t),o=null==n?void 0:n[Q];if(o&&o.t===r)return e.o[t]=r,!(e.D[t]=!1);if(c(r,n)&&(void 0!==r||u(e.t,t)))return!0;E(e),k(e)}return e.o[t]===r&&"number"!=typeof r&&(void 0!==r||t in e.o)||(e.o[t]=r,e.D[t]=!0)},deleteProperty:function(e,t){return void 0!==z(e.t,t)||t in e.t?(e.D[t]=!1,E(e),k(e)):delete e.D[t],e.o&&delete e.o[t],!0},getOwnPropertyDescriptor:function(e,t){var r=p(e),n=Reflect.getOwnPropertyDescriptor(r,t);return n&&{writable:!0,configurable:1!==e.i||"length"!==t,enumerable:n.enumerable,value:r[t]}},defineProperty:function(){n$2(11)},getPrototypeOf:function(e){return Object.getPrototypeOf(e.t)},setPrototypeOf:function(){n$2(12)}},on={},un=(i(en,function(e,t){on[e]=function(){return arguments[0]=arguments[0][0],t.apply(this,arguments)}}),on.deleteProperty=function(e,t){return"production"!==process.env.NODE_ENV&&isNaN(parseInt(t))&&n$2(13),on.set.call(this,e,t,void 0)},on.set=function(e,t,r){return"production"!==process.env.NODE_ENV&&"length"!==t&&isNaN(parseInt(t))&&n$2(14),en.set.call(this,e[0],t,r,e[0])},function(){function e(e){var s=this;this.g=B,this.F=!0,this.produce=function(e,a,t){var i,u,r;if("function"==typeof e&&"function"!=typeof a)return i=a,a=e,u=s,function(e){var t=this;void 0===e&&(e=i);for(var r=arguments.length,n=Array(1<r?r-1:0),o=1;o<r;o++)n[o-1]=arguments[o];return u.produce(e,function(e){return a.call.apply(a,[t,e].concat(n))})};if("function"!=typeof a&&n$2(6),void 0!==t&&"function"!=typeof t&&n$2(7),t$1(e)){var n=w(s),o=R(s,e,void 0),l=!0;try{r=a(o),l=!1}finally{(l?O:g)(n)}return"undefined"!=typeof Promise&&r instanceof Promise?r.then(function(e){return j(n,t),P(e,n)},function(e){throw O(n),e}):(j(n,t),P(r,n))}if(!e||"object"!=typeof e)return(r=void 0===(r=a(e))?e:r)===H&&(r=void 0),s.F&&d(r,!0),t&&(o=[],l=[],b("Patches").M(e,r,o,l),t(o,l)),r;n$2(21,e)},this.produceWithPatches=function(o,e){if("function"==typeof o)return function(e){for(var t=arguments.length,r=Array(1<t?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];return s.produceWithPatches(e,function(e){return o.apply(void 0,[e].concat(r))})};var r,n,e=s.produce(o,e,function(e,t){r=e,n=t});return"undefined"!=typeof Promise&&e instanceof Promise?e.then(function(e){return[e,r,n]}):[e,r,n]},"boolean"==typeof(null==e?void 0:e.useProxies)&&this.setUseProxies(e.useProxies),"boolean"==typeof(null==e?void 0:e.autoFreeze)&&this.setAutoFreeze(e.autoFreeze)}var t=e.prototype;return t.createDraft=function(e){t$1(e)||n$2(8),r$1(e)&&(e=D(e));var t=w(this),e=R(this,e,void 0);return e[Q].C=!0,g(t),e},t.finishDraft=function(e,t){e=e&&e[Q],"production"!==process.env.NODE_ENV&&(e&&e.C||n$2(9),e.I&&n$2(10)),e=e.A;return j(e,t),P(void 0,e)},t.setAutoFreeze=function(e){this.F=e},t.setUseProxies=function(e){e&&!B&&n$2(20),this.g=e},t.applyPatches=function(e,t){for(var r=t.length-1;0<=r;r--){var n=t[r];if(0===n.path.length&&"replace"===n.op){e=n.value;break}}-1<r&&(t=t.slice(r+1));var o=b("Patches").$;return r$1(e)?o(e,t):this.produce(e,function(e){return o(e,t)})},e}()),an=new un,fn=an.produce,ln=(an.produceWithPatches.bind(an),an.setAutoFreeze.bind(an),an.setUseProxies.bind(an),an.applyPatches.bind(an),an.createDraft.bind(an)),dn=an.finishDraft.bind(an);function _defineProperty$1(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var DIRTY_PATHS=new WeakMap,DIRTY_PATH_KEYS=new WeakMap,FLUSHING=new WeakMap,NORMALIZING=new WeakMap,PATH_REFS=new WeakMap,POINT_REFS=new WeakMap,RANGE_REFS=new WeakMap;function ownKeys$9(t,e){var r,n=Object.keys(t);return Object.getOwnPropertySymbols&&(r=Object.getOwnPropertySymbols(t),e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,r)),n}function _objectSpread$9(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?ownKeys$9(Object(r),!0).forEach(function(e){_defineProperty$1(t,e,r[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):ownKeys$9(Object(r)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))})}return t}var createEditor=()=>{var d={children:[],operations:[],selection:null,marks:null,isInline:()=>!1,isVoid:()=>!1,onChange:()=>{},apply:e=>{for(var t of Editor.pathRefs(d))PathRef.transform(t,e);for(var r of Editor.pointRefs(d))PointRef.transform(r,e);for(var n of Editor.rangeRefs(d))RangeRef.transform(n,e);var o,a,i,u=DIRTY_PATHS.get(d)||[],l=DIRTY_PATH_KEYS.get(d)||new Set,s=e=>{var t;e&&(t=e.join(","),a.has(t)||(a.add(t),o.push(e)))};if(Path.operationCanTransformPath(e)){o=[],a=new Set;for(var c of u)s(Path.transform(c,e))}else o=u,a=l;for(i of getDirtyPaths(e))s(i);DIRTY_PATHS.set(d,o),DIRTY_PATH_KEYS.set(d,a),Transforms.transform(d,e),d.operations.push(e),Editor.normalize(d),"set_selection"===e.type&&(d.marks=null),FLUSHING.get(d)||(FLUSHING.set(d,!0),Promise.resolve().then(()=>{FLUSHING.set(d,!1),d.onChange(),d.operations=[]}))},addMark:(e,t)=>{var r=d["selection"];r&&(Range.isExpanded(r)?Transforms.setNodes(d,{[e]:t},{match:Text$1.isText,split:!0}):(r=_objectSpread$9(_objectSpread$9({},Editor.marks(d)||{}),{},{[e]:t}),d.marks=r,FLUSHING.get(d)||d.onChange()))},deleteBackward:e=>{var t=d["selection"];t&&Range.isCollapsed(t)&&Transforms.delete(d,{unit:e,reverse:!0})},deleteForward:e=>{var t=d["selection"];t&&Range.isCollapsed(t)&&Transforms.delete(d,{unit:e})},deleteFragment:e=>{var t=d["selection"];t&&Range.isExpanded(t)&&Transforms.delete(d,{reverse:"backward"===e})},getFragment:()=>{var e=d["selection"];return e?Node.fragment(d,e):[]},insertBreak:()=>{Transforms.splitNodes(d,{always:!0})},insertFragment:e=>{Transforms.insertFragment(d,e)},insertNode:e=>{Transforms.insertNodes(d,e)},insertText:e=>{var{selection:t,marks:r}=d;t&&(r?(t=_objectSpread$9({text:e},r),Transforms.insertNodes(d,t)):Transforms.insertText(d,e),d.marks=null)},normalizeNode:e=>{var[t,r]=e;if(!Text$1.isText(t)){if(Element$9.isElement(t)&&0===t.children.length)return void Transforms.insertNodes(d,{text:""},{at:r.concat(0),voids:!0});for(var n=!Editor.isEditor(t)&&(Element$9.isElement(t)&&(d.isInline(t)||0===t.children.length||Text$1.isText(t.children[0])||d.isInline(t.children[0]))),o=0,a=0;a<t.children.length;a++,o++){var i,u,l=Node.get(d,r);Text$1.isText(l)||(i=t.children[a],l=l.children[o-1],u=a===t.children.length-1,(Text$1.isText(i)||Element$9.isElement(i)&&d.isInline(i))!==n?(Transforms.removeNodes(d,{at:r.concat(o),voids:!0}),o--):Element$9.isElement(i)?d.isInline(i)&&(null!=l&&Text$1.isText(l)?u&&(Transforms.insertNodes(d,{text:""},{at:r.concat(o+1),voids:!0}),o++):(Transforms.insertNodes(d,{text:""},{at:r.concat(o),voids:!0}),o++)):null!=l&&Text$1.isText(l)&&(Text$1.equals(i,l,{loose:!0})?(Transforms.mergeNodes(d,{at:r.concat(o),voids:!0}),o--):""===l.text?(Transforms.removeNodes(d,{at:r.concat(o-1),voids:!0}),o--):""===i.text&&(Transforms.removeNodes(d,{at:r.concat(o),voids:!0}),o--)))}}},removeMark:e=>{var t=d["selection"];t&&(Range.isExpanded(t)?Transforms.unsetNodes(d,e,{match:Text$1.isText,split:!0}):(delete(t=_objectSpread$9({},Editor.marks(d)||{}))[e],d.marks=t,FLUSHING.get(d)||d.onChange()))}};return d},getDirtyPaths=e=>{switch(e.type){case"insert_text":case"remove_text":case"set_node":var t=e["path"];return Path.levels(t);case"insert_node":var{node:t,path:r}=e,n=Path.levels(r),t=Text$1.isText(t)?[]:Array.from(Node.nodes(t),e=>{var[,e]=e;return r.concat(e)});return[...n,...t];case"merge_node":n=e["path"],t=Path.ancestors(n),n=Path.previous(n);return[...t,n];case"move_node":var{path:t,newPath:n}=e;if(Path.equals(t,n))return[];var o,a,i=[],u=[];for(o of Path.ancestors(t)){var l=Path.transform(o,e);i.push(l)}for(a of Path.ancestors(n)){var s=Path.transform(a,e);u.push(s)}t=u[u.length-1],n=n[n.length-1],t=t.concat(n);return[...i,...u,t];case"remove_node":n=e["path"];return[...Path.ancestors(n)];case"split_node":t=e["path"],n=Path.levels(t),t=Path.next(t);return[...n,t];default:return[]}};function _objectWithoutPropertiesLoose$1(e,t){if(null==e)return{};for(var r,n={},o=Object.keys(e),a=0;a<o.length;a++)r=o[a],0<=t.indexOf(r)||(n[r]=e[r]);return n}function _objectWithoutProperties$1(e,t){if(null==e)return{};var r,n=_objectWithoutPropertiesLoose$1(e,t);if(Object.getOwnPropertySymbols)for(var o=Object.getOwnPropertySymbols(e),a=0;a<o.length;a++)r=o[a],0<=t.indexOf(r)||Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r]);return n}var CodepointType,getCharacterDistance=function(e){var t,r=1<arguments.length&&void 0!==arguments[1]&&arguments[1],n=!r,r=r?codepointsIteratorRTL(e):e,o=CodepointType.None,a=CodepointType.None,i=0,u=null;for(t of r){var l=t.codePointAt(0);if(!l)break;l=getCodepointType(t,l);if([o,a]=n?[a,l]:[l,o],intersects(o,CodepointType.ZWJ)&&intersects(a,CodepointType.ExtPict)&&!endsWithEmojiZWJ(n?e.substring(0,i):e.substring(0,e.length-i)))break;if(intersects(o,CodepointType.RI)&&intersects(a,CodepointType.RI)&&!(u=null!==u?!u:n||endsWithOddNumberOfRIs(e.substring(0,e.length-i))))break;if(o!==CodepointType.None&&a!==CodepointType.None&&isBoundaryPair(o,a))break;i+=t.length}return i||1},SPACE=/\s/,PUNCTUATION=/[\u0021-\u0023\u0025-\u002A\u002C-\u002F\u003A\u003B\u003F\u0040\u005B-\u005D\u005F\u007B\u007D\u00A1\u00A7\u00AB\u00B6\u00B7\u00BB\u00BF\u037E\u0387\u055A-\u055F\u0589\u058A\u05BE\u05C0\u05C3\u05C6\u05F3\u05F4\u0609\u060A\u060C\u060D\u061B\u061E\u061F\u066A-\u066D\u06D4\u0700-\u070D\u07F7-\u07F9\u0830-\u083E\u085E\u0964\u0965\u0970\u0AF0\u0DF4\u0E4F\u0E5A\u0E5B\u0F04-\u0F12\u0F14\u0F3A-\u0F3D\u0F85\u0FD0-\u0FD4\u0FD9\u0FDA\u104A-\u104F\u10FB\u1360-\u1368\u1400\u166D\u166E\u169B\u169C\u16EB-\u16ED\u1735\u1736\u17D4-\u17D6\u17D8-\u17DA\u1800-\u180A\u1944\u1945\u1A1E\u1A1F\u1AA0-\u1AA6\u1AA8-\u1AAD\u1B5A-\u1B60\u1BFC-\u1BFF\u1C3B-\u1C3F\u1C7E\u1C7F\u1CC0-\u1CC7\u1CD3\u2010-\u2027\u2030-\u2043\u2045-\u2051\u2053-\u205E\u207D\u207E\u208D\u208E\u2329\u232A\u2768-\u2775\u27C5\u27C6\u27E6-\u27EF\u2983-\u2998\u29D8-\u29DB\u29FC\u29FD\u2CF9-\u2CFC\u2CFE\u2CFF\u2D70\u2E00-\u2E2E\u2E30-\u2E3B\u3001-\u3003\u3008-\u3011\u3014-\u301F\u3030\u303D\u30A0\u30FB\uA4FE\uA4FF\uA60D-\uA60F\uA673\uA67E\uA6F2-\uA6F7\uA874-\uA877\uA8CE\uA8CF\uA8F8-\uA8FA\uA92E\uA92F\uA95F\uA9C1-\uA9CD\uA9DE\uA9DF\uAA5C-\uAA5F\uAADE\uAADF\uAAF0\uAAF1\uABEB\uFD3E\uFD3F\uFE10-\uFE19\uFE30-\uFE52\uFE54-\uFE61\uFE63\uFE68\uFE6A\uFE6B\uFF01-\uFF03\uFF05-\uFF0A\uFF0C-\uFF0F\uFF1A\uFF1B\uFF1F\uFF20\uFF3B-\uFF3D\uFF3F\uFF5B\uFF5D\uFF5F-\uFF65]/,CHAMELEON=/['\u2018\u2019]/,getWordDistance=function(e){for(var t=1<arguments.length&&void 0!==arguments[1]&&arguments[1],r=0,n=!1;0<e.length;){var o=getCharacterDistance(e,t),[a,i]=splitByCharacterDistance(e,o,t);if(isWordCharacter(a,i,t))n=!0,r+=o;else{if(n)break;r+=o}e=i}return r},splitByCharacterDistance=(e,t,r)=>{return r?(r=e.length-t,[e.slice(r,e.length),e.slice(0,r)]):[e.slice(0,t),e.slice(t)]},isWordCharacter=function e(t,r){var n=2<arguments.length&&void 0!==arguments[2]&&arguments[2];if(SPACE.test(t))return!1;if(CHAMELEON.test(t)){var o=getCharacterDistance(r,n),[o,a]=splitByCharacterDistance(r,o,n);if(e(o,a,n))return!0}return!PUNCTUATION.test(t)},codepointsIteratorRTL=function*(e){for(var t=e.length-1,r=0;r<e.length;r++){var n=e.charAt(t-r);if(isLowSurrogate(n.charCodeAt(0))){var o=e.charAt(t-r-1);if(isHighSurrogate(o.charCodeAt(0))){yield o+n,r++;continue}}yield n}},isHighSurrogate=e=>55296<=e&&e<=56319,isLowSurrogate=e=>56320<=e&&e<=57343,reExtend=(!function(e){e[e.None=0]="None",e[e.Extend=1]="Extend",e[e.ZWJ=2]="ZWJ",e[e.RI=4]="RI",e[e.Prepend=8]="Prepend",e[e.SpacingMark=16]="SpacingMark",e[e.L=32]="L",e[e.V=64]="V",e[e.T=128]="T",e[e.LV=256]="LV",e[e.LVT=512]="LVT",e[e.ExtPict=1024]="ExtPict",e[e.Any=2048]="Any"}(CodepointType=CodepointType||{}),/^(?:[\u0300-\u036F\u0483-\u0489\u0591-\u05BD\u05BF\u05C1\u05C2\u05C4\u05C5\u05C7\u0610-\u061A\u064B-\u065F\u0670\u06D6-\u06DC\u06DF-\u06E4\u06E7\u06E8\u06EA-\u06ED\u0711\u0730-\u074A\u07A6-\u07B0\u07EB-\u07F3\u07FD\u0816-\u0819\u081B-\u0823\u0825-\u0827\u0829-\u082D\u0859-\u085B\u08D3-\u08E1\u08E3-\u0902\u093A\u093C\u0941-\u0948\u094D\u0951-\u0957\u0962\u0963\u0981\u09BC\u09BE\u09C1-\u09C4\u09CD\u09D7\u09E2\u09E3\u09FE\u0A01\u0A02\u0A3C\u0A41\u0A42\u0A47\u0A48\u0A4B-\u0A4D\u0A51\u0A70\u0A71\u0A75\u0A81\u0A82\u0ABC\u0AC1-\u0AC5\u0AC7\u0AC8\u0ACD\u0AE2\u0AE3\u0AFA-\u0AFF\u0B01\u0B3C\u0B3E\u0B3F\u0B41-\u0B44\u0B4D\u0B55-\u0B57\u0B62\u0B63\u0B82\u0BBE\u0BC0\u0BCD\u0BD7\u0C00\u0C04\u0C3E-\u0C40\u0C46-\u0C48\u0C4A-\u0C4D\u0C55\u0C56\u0C62\u0C63\u0C81\u0CBC\u0CBF\u0CC2\u0CC6\u0CCC\u0CCD\u0CD5\u0CD6\u0CE2\u0CE3\u0D00\u0D01\u0D3B\u0D3C\u0D3E\u0D41-\u0D44\u0D4D\u0D57\u0D62\u0D63\u0D81\u0DCA\u0DCF\u0DD2-\u0DD4\u0DD6\u0DDF\u0E31\u0E34-\u0E3A\u0E47-\u0E4E\u0EB1\u0EB4-\u0EBC\u0EC8-\u0ECD\u0F18\u0F19\u0F35\u0F37\u0F39\u0F71-\u0F7E\u0F80-\u0F84\u0F86\u0F87\u0F8D-\u0F97\u0F99-\u0FBC\u0FC6\u102D-\u1030\u1032-\u1037\u1039\u103A\u103D\u103E\u1058\u1059\u105E-\u1060\u1071-\u1074\u1082\u1085\u1086\u108D\u109D\u135D-\u135F\u1712-\u1714\u1732-\u1734\u1752\u1753\u1772\u1773\u17B4\u17B5\u17B7-\u17BD\u17C6\u17C9-\u17D3\u17DD\u180B-\u180D\u1885\u1886\u18A9\u1920-\u1922\u1927\u1928\u1932\u1939-\u193B\u1A17\u1A18\u1A1B\u1A56\u1A58-\u1A5E\u1A60\u1A62\u1A65-\u1A6C\u1A73-\u1A7C\u1A7F\u1AB0-\u1AC0\u1B00-\u1B03\u1B34-\u1B3A\u1B3C\u1B42\u1B6B-\u1B73\u1B80\u1B81\u1BA2-\u1BA5\u1BA8\u1BA9\u1BAB-\u1BAD\u1BE6\u1BE8\u1BE9\u1BED\u1BEF-\u1BF1\u1C2C-\u1C33\u1C36\u1C37\u1CD0-\u1CD2\u1CD4-\u1CE0\u1CE2-\u1CE8\u1CED\u1CF4\u1CF8\u1CF9\u1DC0-\u1DF9\u1DFB-\u1DFF\u200C\u20D0-\u20F0\u2CEF-\u2CF1\u2D7F\u2DE0-\u2DFF\u302A-\u302F\u3099\u309A\uA66F-\uA672\uA674-\uA67D\uA69E\uA69F\uA6F0\uA6F1\uA802\uA806\uA80B\uA825\uA826\uA82C\uA8C4\uA8C5\uA8E0-\uA8F1\uA8FF\uA926-\uA92D\uA947-\uA951\uA980-\uA982\uA9B3\uA9B6-\uA9B9\uA9BC\uA9BD\uA9E5\uAA29-\uAA2E\uAA31\uAA32\uAA35\uAA36\uAA43\uAA4C\uAA7C\uAAB0\uAAB2-\uAAB4\uAAB7\uAAB8\uAABE\uAABF\uAAC1\uAAEC\uAAED\uAAF6\uABE5\uABE8\uABED\uFB1E\uFE00-\uFE0F\uFE20-\uFE2F\uFF9E\uFF9F]|\uD800[\uDDFD\uDEE0\uDF76-\uDF7A]|\uD802[\uDE01-\uDE03\uDE05\uDE06\uDE0C-\uDE0F\uDE38-\uDE3A\uDE3F\uDEE5\uDEE6]|\uD803[\uDD24-\uDD27\uDEAB\uDEAC\uDF46-\uDF50]|\uD804[\uDC01\uDC38-\uDC46\uDC7F-\uDC81\uDCB3-\uDCB6\uDCB9\uDCBA\uDD00-\uDD02\uDD27-\uDD2B\uDD2D-\uDD34\uDD73\uDD80\uDD81\uDDB6-\uDDBE\uDDC9-\uDDCC\uDDCF\uDE2F-\uDE31\uDE34\uDE36\uDE37\uDE3E\uDEDF\uDEE3-\uDEEA\uDF00\uDF01\uDF3B\uDF3C\uDF3E\uDF40\uDF57\uDF66-\uDF6C\uDF70-\uDF74]|\uD805[\uDC38-\uDC3F\uDC42-\uDC44\uDC46\uDC5E\uDCB0\uDCB3-\uDCB8\uDCBA\uDCBD\uDCBF\uDCC0\uDCC2\uDCC3\uDDAF\uDDB2-\uDDB5\uDDBC\uDDBD\uDDBF\uDDC0\uDDDC\uDDDD\uDE33-\uDE3A\uDE3D\uDE3F\uDE40\uDEAB\uDEAD\uDEB0-\uDEB5\uDEB7\uDF1D-\uDF1F\uDF22-\uDF25\uDF27-\uDF2B]|\uD806[\uDC2F-\uDC37\uDC39\uDC3A\uDD30\uDD3B\uDD3C\uDD3E\uDD43\uDDD4-\uDDD7\uDDDA\uDDDB\uDDE0\uDE01-\uDE0A\uDE33-\uDE38\uDE3B-\uDE3E\uDE47\uDE51-\uDE56\uDE59-\uDE5B\uDE8A-\uDE96\uDE98\uDE99]|\uD807[\uDC30-\uDC36\uDC38-\uDC3D\uDC3F\uDC92-\uDCA7\uDCAA-\uDCB0\uDCB2\uDCB3\uDCB5\uDCB6\uDD31-\uDD36\uDD3A\uDD3C\uDD3D\uDD3F-\uDD45\uDD47\uDD90\uDD91\uDD95\uDD97\uDEF3\uDEF4]|\uD81A[\uDEF0-\uDEF4\uDF30-\uDF36]|\uD81B[\uDF4F\uDF8F-\uDF92\uDFE4]|\uD82F[\uDC9D\uDC9E]|\uD834[\uDD65\uDD67-\uDD69\uDD6E-\uDD72\uDD7B-\uDD82\uDD85-\uDD8B\uDDAA-\uDDAD\uDE42-\uDE44]|\uD836[\uDE00-\uDE36\uDE3B-\uDE6C\uDE75\uDE84\uDE9B-\uDE9F\uDEA1-\uDEAF]|\uD838[\uDC00-\uDC06\uDC08-\uDC18\uDC1B-\uDC21\uDC23\uDC24\uDC26-\uDC2A\uDD30-\uDD36\uDEEC-\uDEEF]|\uD83A[\uDCD0-\uDCD6\uDD44-\uDD4A]|\uD83C[\uDFFB-\uDFFF]|\uDB40[\uDC20-\uDC7F\uDD00-\uDDEF])$/),rePrepend=/^(?:[\u0600-\u0605\u06DD\u070F\u0890\u0891\u08E2\u0D4E]|\uD804[\uDCBD\uDCCD\uDDC2\uDDC3]|\uD806[\uDD3F\uDD41\uDE3A\uDE84-\uDE89]|\uD807\uDD46)$/,reSpacingMark=/^(?:[\u0903\u093B\u093E-\u0940\u0949-\u094C\u094E\u094F\u0982\u0983\u09BF\u09C0\u09C7\u09C8\u09CB\u09CC\u0A03\u0A3E-\u0A40\u0A83\u0ABE-\u0AC0\u0AC9\u0ACB\u0ACC\u0B02\u0B03\u0B40\u0B47\u0B48\u0B4B\u0B4C\u0BBF\u0BC1\u0BC2\u0BC6-\u0BC8\u0BCA-\u0BCC\u0C01-\u0C03\u0C41-\u0C44\u0C82\u0C83\u0CBE\u0CC0\u0CC1\u0CC3\u0CC4\u0CC7\u0CC8\u0CCA\u0CCB\u0D02\u0D03\u0D3F\u0D40\u0D46-\u0D48\u0D4A-\u0D4C\u0D82\u0D83\u0DD0\u0DD1\u0DD8-\u0DDE\u0DF2\u0DF3\u0E33\u0EB3\u0F3E\u0F3F\u0F7F\u1031\u103B\u103C\u1056\u1057\u1084\u1715\u1734\u17B6\u17BE-\u17C5\u17C7\u17C8\u1923-\u1926\u1929-\u192B\u1930\u1931\u1933-\u1938\u1A19\u1A1A\u1A55\u1A57\u1A6D-\u1A72\u1B04\u1B3B\u1B3D-\u1B41\u1B43\u1B44\u1B82\u1BA1\u1BA6\u1BA7\u1BAA\u1BE7\u1BEA-\u1BEC\u1BEE\u1BF2\u1BF3\u1C24-\u1C2B\u1C34\u1C35\u1CE1\u1CF7\uA823\uA824\uA827\uA880\uA881\uA8B4-\uA8C3\uA952\uA953\uA983\uA9B4\uA9B5\uA9BA\uA9BB\uA9BE-\uA9C0\uAA2F\uAA30\uAA33\uAA34\uAA4D\uAAEB\uAAEE\uAAEF\uAAF5\uABE3\uABE4\uABE6\uABE7\uABE9\uABEA\uABEC]|\uD804[\uDC00\uDC02\uDC82\uDCB0-\uDCB2\uDCB7\uDCB8\uDD2C\uDD45\uDD46\uDD82\uDDB3-\uDDB5\uDDBF\uDDC0\uDDCE\uDE2C-\uDE2E\uDE32\uDE33\uDE35\uDEE0-\uDEE2\uDF02\uDF03\uDF3F\uDF41-\uDF44\uDF47\uDF48\uDF4B-\uDF4D\uDF62\uDF63]|\uD805[\uDC35-\uDC37\uDC40\uDC41\uDC45\uDCB1\uDCB2\uDCB9\uDCBB\uDCBC\uDCBE\uDCC1\uDDB0\uDDB1\uDDB8-\uDDBB\uDDBE\uDE30-\uDE32\uDE3B\uDE3C\uDE3E\uDEAC\uDEAE\uDEAF\uDEB6\uDF26]|\uD806[\uDC2C-\uDC2E\uDC38\uDD31-\uDD35\uDD37\uDD38\uDD3D\uDD40\uDD42\uDDD1-\uDDD3\uDDDC-\uDDDF\uDDE4\uDE39\uDE57\uDE58\uDE97]|\uD807[\uDC2F\uDC3E\uDCA9\uDCB1\uDCB4\uDD8A-\uDD8E\uDD93\uDD94\uDD96\uDEF5\uDEF6]|\uD81B[\uDF51-\uDF87\uDFF0\uDFF1]|\uD834[\uDD66\uDD6D])$/,reL=/^[\u1100-\u115F\uA960-\uA97C]$/,reV=/^[\u1160-\u11A7\uD7B0-\uD7C6]$/,reT=/^[\u11A8-\u11FF\uD7CB-\uD7FB]$/,reLV=/^[\uAC00\uAC1C\uAC38\uAC54\uAC70\uAC8C\uACA8\uACC4\uACE0\uACFC\uAD18\uAD34\uAD50\uAD6C\uAD88\uADA4\uADC0\uADDC\uADF8\uAE14\uAE30\uAE4C\uAE68\uAE84\uAEA0\uAEBC\uAED8\uAEF4\uAF10\uAF2C\uAF48\uAF64\uAF80\uAF9C\uAFB8\uAFD4\uAFF0\uB00C\uB028\uB044\uB060\uB07C\uB098\uB0B4\uB0D0\uB0EC\uB108\uB124\uB140\uB15C\uB178\uB194\uB1B0\uB1CC\uB1E8\uB204\uB220\uB23C\uB258\uB274\uB290\uB2AC\uB2C8\uB2E4\uB300\uB31C\uB338\uB354\uB370\uB38C\uB3A8\uB3C4\uB3E0\uB3FC\uB418\uB434\uB450\uB46C\uB488\uB4A4\uB4C0\uB4DC\uB4F8\uB514\uB530\uB54C\uB568\uB584\uB5A0\uB5BC\uB5D8\uB5F4\uB610\uB62C\uB648\uB664\uB680\uB69C\uB6B8\uB6D4\uB6F0\uB70C\uB728\uB744\uB760\uB77C\uB798\uB7B4\uB7D0\uB7EC\uB808\uB824\uB840\uB85C\uB878\uB894\uB8B0\uB8CC\uB8E8\uB904\uB920\uB93C\uB958\uB974\uB990\uB9AC\uB9C8\uB9E4\uBA00\uBA1C\uBA38\uBA54\uBA70\uBA8C\uBAA8\uBAC4\uBAE0\uBAFC\uBB18\uBB34\uBB50\uBB6C\uBB88\uBBA4\uBBC0\uBBDC\uBBF8\uBC14\uBC30\uBC4C\uBC68\uBC84\uBCA0\uBCBC\uBCD8\uBCF4\uBD10\uBD2C\uBD48\uBD64\uBD80\uBD9C\uBDB8\uBDD4\uBDF0\uBE0C\uBE28\uBE44\uBE60\uBE7C\uBE98\uBEB4\uBED0\uBEEC\uBF08\uBF24\uBF40\uBF5C\uBF78\uBF94\uBFB0\uBFCC\uBFE8\uC004\uC020\uC03C\uC058\uC074\uC090\uC0AC\uC0C8\uC0E4\uC100\uC11C\uC138\uC154\uC170\uC18C\uC1A8\uC1C4\uC1E0\uC1FC\uC218\uC234\uC250\uC26C\uC288\uC2A4\uC2C0\uC2DC\uC2F8\uC314\uC330\uC34C\uC368\uC384\uC3A0\uC3BC\uC3D8\uC3F4\uC410\uC42C\uC448\uC464\uC480\uC49C\uC4B8\uC4D4\uC4F0\uC50C\uC528\uC544\uC560\uC57C\uC598\uC5B4\uC5D0\uC5EC\uC608\uC624\uC640\uC65C\uC678\uC694\uC6B0\uC6CC\uC6E8\uC704\uC720\uC73C\uC758\uC774\uC790\uC7AC\uC7C8\uC7E4\uC800\uC81C\uC838\uC854\uC870\uC88C\uC8A8\uC8C4\uC8E0\uC8FC\uC918\uC934\uC950\uC96C\uC988\uC9A4\uC9C0\uC9DC\uC9F8\uCA14\uCA30\uCA4C\uCA68\uCA84\uCAA0\uCABC\uCAD8\uCAF4\uCB10\uCB2C\uCB48\uCB64\uCB80\uCB9C\uCBB8\uCBD4\uCBF0\uCC0C\uCC28\uCC44\uCC60\uCC7C\uCC98\uCCB4\uCCD0\uCCEC\uCD08\uCD24\uCD40\uCD5C\uCD78\uCD94\uCDB0\uCDCC\uCDE8\uCE04\uCE20\uCE3C\uCE58\uCE74\uCE90\uCEAC\uCEC8\uCEE4\uCF00\uCF1C\uCF38\uCF54\uCF70\uCF8C\uCFA8\uCFC4\uCFE0\uCFFC\uD018\uD034\uD050\uD06C\uD088\uD0A4\uD0C0\uD0DC\uD0F8\uD114\uD130\uD14C\uD168\uD184\uD1A0\uD1BC\uD1D8\uD1F4\uD210\uD22C\uD248\uD264\uD280\uD29C\uD2B8\uD2D4\uD2F0\uD30C\uD328\uD344\uD360\uD37C\uD398\uD3B4\uD3D0\uD3EC\uD408\uD424\uD440\uD45C\uD478\uD494\uD4B0\uD4CC\uD4E8\uD504\uD520\uD53C\uD558\uD574\uD590\uD5AC\uD5C8\uD5E4\uD600\uD61C\uD638\uD654\uD670\uD68C\uD6A8\uD6C4\uD6E0\uD6FC\uD718\uD734\uD750\uD76C\uD788]$/,reLVT=/^[\uAC01-\uAC1B\uAC1D-\uAC37\uAC39-\uAC53\uAC55-\uAC6F\uAC71-\uAC8B\uAC8D-\uACA7\uACA9-\uACC3\uACC5-\uACDF\uACE1-\uACFB\uACFD-\uAD17\uAD19-\uAD33\uAD35-\uAD4F\uAD51-\uAD6B\uAD6D-\uAD87\uAD89-\uADA3\uADA5-\uADBF\uADC1-\uADDB\uADDD-\uADF7\uADF9-\uAE13\uAE15-\uAE2F\uAE31-\uAE4B\uAE4D-\uAE67\uAE69-\uAE83\uAE85-\uAE9F\uAEA1-\uAEBB\uAEBD-\uAED7\uAED9-\uAEF3\uAEF5-\uAF0F\uAF11-\uAF2B\uAF2D-\uAF47\uAF49-\uAF63\uAF65-\uAF7F\uAF81-\uAF9B\uAF9D-\uAFB7\uAFB9-\uAFD3\uAFD5-\uAFEF\uAFF1-\uB00B\uB00D-\uB027\uB029-\uB043\uB045-\uB05F\uB061-\uB07B\uB07D-\uB097\uB099-\uB0B3\uB0B5-\uB0CF\uB0D1-\uB0EB\uB0ED-\uB107\uB109-\uB123\uB125-\uB13F\uB141-\uB15B\uB15D-\uB177\uB179-\uB193\uB195-\uB1AF\uB1B1-\uB1CB\uB1CD-\uB1E7\uB1E9-\uB203\uB205-\uB21F\uB221-\uB23B\uB23D-\uB257\uB259-\uB273\uB275-\uB28F\uB291-\uB2AB\uB2AD-\uB2C7\uB2C9-\uB2E3\uB2E5-\uB2FF\uB301-\uB31B\uB31D-\uB337\uB339-\uB353\uB355-\uB36F\uB371-\uB38B\uB38D-\uB3A7\uB3A9-\uB3C3\uB3C5-\uB3DF\uB3E1-\uB3FB\uB3FD-\uB417\uB419-\uB433\uB435-\uB44F\uB451-\uB46B\uB46D-\uB487\uB489-\uB4A3\uB4A5-\uB4BF\uB4C1-\uB4DB\uB4DD-\uB4F7\uB4F9-\uB513\uB515-\uB52F\uB531-\uB54B\uB54D-\uB567\uB569-\uB583\uB585-\uB59F\uB5A1-\uB5BB\uB5BD-\uB5D7\uB5D9-\uB5F3\uB5F5-\uB60F\uB611-\uB62B\uB62D-\uB647\uB649-\uB663\uB665-\uB67F\uB681-\uB69B\uB69D-\uB6B7\uB6B9-\uB6D3\uB6D5-\uB6EF\uB6F1-\uB70B\uB70D-\uB727\uB729-\uB743\uB745-\uB75F\uB761-\uB77B\uB77D-\uB797\uB799-\uB7B3\uB7B5-\uB7CF\uB7D1-\uB7EB\uB7ED-\uB807\uB809-\uB823\uB825-\uB83F\uB841-\uB85B\uB85D-\uB877\uB879-\uB893\uB895-\uB8AF\uB8B1-\uB8CB\uB8CD-\uB8E7\uB8E9-\uB903\uB905-\uB91F\uB921-\uB93B\uB93D-\uB957\uB959-\uB973\uB975-\uB98F\uB991-\uB9AB\uB9AD-\uB9C7\uB9C9-\uB9E3\uB9E5-\uB9FF\uBA01-\uBA1B\uBA1D-\uBA37\uBA39-\uBA53\uBA55-\uBA6F\uBA71-\uBA8B\uBA8D-\uBAA7\uBAA9-\uBAC3\uBAC5-\uBADF\uBAE1-\uBAFB\uBAFD-\uBB17\uBB19-\uBB33\uBB35-\uBB4F\uBB51-\uBB6B\uBB6D-\uBB87\uBB89-\uBBA3\uBBA5-\uBBBF\uBBC1-\uBBDB\uBBDD-\uBBF7\uBBF9-\uBC13\uBC15-\uBC2F\uBC31-\uBC4B\uBC4D-\uBC67\uBC69-\uBC83\uBC85-\uBC9F\uBCA1-\uBCBB\uBCBD-\uBCD7\uBCD9-\uBCF3\uBCF5-\uBD0F\uBD11-\uBD2B\uBD2D-\uBD47\uBD49-\uBD63\uBD65-\uBD7F\uBD81-\uBD9B\uBD9D-\uBDB7\uBDB9-\uBDD3\uBDD5-\uBDEF\uBDF1-\uBE0B\uBE0D-\uBE27\uBE29-\uBE43\uBE45-\uBE5F\uBE61-\uBE7B\uBE7D-\uBE97\uBE99-\uBEB3\uBEB5-\uBECF\uBED1-\uBEEB\uBEED-\uBF07\uBF09-\uBF23\uBF25-\uBF3F\uBF41-\uBF5B\uBF5D-\uBF77\uBF79-\uBF93\uBF95-\uBFAF\uBFB1-\uBFCB\uBFCD-\uBFE7\uBFE9-\uC003\uC005-\uC01F\uC021-\uC03B\uC03D-\uC057\uC059-\uC073\uC075-\uC08F\uC091-\uC0AB\uC0AD-\uC0C7\uC0C9-\uC0E3\uC0E5-\uC0FF\uC101-\uC11B\uC11D-\uC137\uC139-\uC153\uC155-\uC16F\uC171-\uC18B\uC18D-\uC1A7\uC1A9-\uC1C3\uC1C5-\uC1DF\uC1E1-\uC1FB\uC1FD-\uC217\uC219-\uC233\uC235-\uC24F\uC251-\uC26B\uC26D-\uC287\uC289-\uC2A3\uC2A5-\uC2BF\uC2C1-\uC2DB\uC2DD-\uC2F7\uC2F9-\uC313\uC315-\uC32F\uC331-\uC34B\uC34D-\uC367\uC369-\uC383\uC385-\uC39F\uC3A1-\uC3BB\uC3BD-\uC3D7\uC3D9-\uC3F3\uC3F5-\uC40F\uC411-\uC42B\uC42D-\uC447\uC449-\uC463\uC465-\uC47F\uC481-\uC49B\uC49D-\uC4B7\uC4B9-\uC4D3\uC4D5-\uC4EF\uC4F1-\uC50B\uC50D-\uC527\uC529-\uC543\uC545-\uC55F\uC561-\uC57B\uC57D-\uC597\uC599-\uC5B3\uC5B5-\uC5CF\uC5D1-\uC5EB\uC5ED-\uC607\uC609-\uC623\uC625-\uC63F\uC641-\uC65B\uC65D-\uC677\uC679-\uC693\uC695-\uC6AF\uC6B1-\uC6CB\uC6CD-\uC6E7\uC6E9-\uC703\uC705-\uC71F\uC721-\uC73B\uC73D-\uC757\uC759-\uC773\uC775-\uC78F\uC791-\uC7AB\uC7AD-\uC7C7\uC7C9-\uC7E3\uC7E5-\uC7FF\uC801-\uC81B\uC81D-\uC837\uC839-\uC853\uC855-\uC86F\uC871-\uC88B\uC88D-\uC8A7\uC8A9-\uC8C3\uC8C5-\uC8DF\uC8E1-\uC8FB\uC8FD-\uC917\uC919-\uC933\uC935-\uC94F\uC951-\uC96B\uC96D-\uC987\uC989-\uC9A3\uC9A5-\uC9BF\uC9C1-\uC9DB\uC9DD-\uC9F7\uC9F9-\uCA13\uCA15-\uCA2F\uCA31-\uCA4B\uCA4D-\uCA67\uCA69-\uCA83\uCA85-\uCA9F\uCAA1-\uCABB\uCABD-\uCAD7\uCAD9-\uCAF3\uCAF5-\uCB0F\uCB11-\uCB2B\uCB2D-\uCB47\uCB49-\uCB63\uCB65-\uCB7F\uCB81-\uCB9B\uCB9D-\uCBB7\uCBB9-\uCBD3\uCBD5-\uCBEF\uCBF1-\uCC0B\uCC0D-\uCC27\uCC29-\uCC43\uCC45-\uCC5F\uCC61-\uCC7B\uCC7D-\uCC97\uCC99-\uCCB3\uCCB5-\uCCCF\uCCD1-\uCCEB\uCCED-\uCD07\uCD09-\uCD23\uCD25-\uCD3F\uCD41-\uCD5B\uCD5D-\uCD77\uCD79-\uCD93\uCD95-\uCDAF\uCDB1-\uCDCB\uCDCD-\uCDE7\uCDE9-\uCE03\uCE05-\uCE1F\uCE21-\uCE3B\uCE3D-\uCE57\uCE59-\uCE73\uCE75-\uCE8F\uCE91-\uCEAB\uCEAD-\uCEC7\uCEC9-\uCEE3\uCEE5-\uCEFF\uCF01-\uCF1B\uCF1D-\uCF37\uCF39-\uCF53\uCF55-\uCF6F\uCF71-\uCF8B\uCF8D-\uCFA7\uCFA9-\uCFC3\uCFC5-\uCFDF\uCFE1-\uCFFB\uCFFD-\uD017\uD019-\uD033\uD035-\uD04F\uD051-\uD06B\uD06D-\uD087\uD089-\uD0A3\uD0A5-\uD0BF\uD0C1-\uD0DB\uD0DD-\uD0F7\uD0F9-\uD113\uD115-\uD12F\uD131-\uD14B\uD14D-\uD167\uD169-\uD183\uD185-\uD19F\uD1A1-\uD1BB\uD1BD-\uD1D7\uD1D9-\uD1F3\uD1F5-\uD20F\uD211-\uD22B\uD22D-\uD247\uD249-\uD263\uD265-\uD27F\uD281-\uD29B\uD29D-\uD2B7\uD2B9-\uD2D3\uD2D5-\uD2EF\uD2F1-\uD30B\uD30D-\uD327\uD329-\uD343\uD345-\uD35F\uD361-\uD37B\uD37D-\uD397\uD399-\uD3B3\uD3B5-\uD3CF\uD3D1-\uD3EB\uD3ED-\uD407\uD409-\uD423\uD425-\uD43F\uD441-\uD45B\uD45D-\uD477\uD479-\uD493\uD495-\uD4AF\uD4B1-\uD4CB\uD4CD-\uD4E7\uD4E9-\uD503\uD505-\uD51F\uD521-\uD53B\uD53D-\uD557\uD559-\uD573\uD575-\uD58F\uD591-\uD5AB\uD5AD-\uD5C7\uD5C9-\uD5E3\uD5E5-\uD5FF\uD601-\uD61B\uD61D-\uD637\uD639-\uD653\uD655-\uD66F\uD671-\uD68B\uD68D-\uD6A7\uD6A9-\uD6C3\uD6C5-\uD6DF\uD6E1-\uD6FB\uD6FD-\uD717\uD719-\uD733\uD735-\uD74F\uD751-\uD76B\uD76D-\uD787\uD789-\uD7A3]$/,reExtPict=/^(?:[\xA9\xAE\u203C\u2049\u2122\u2139\u2194-\u2199\u21A9\u21AA\u231A\u231B\u2328\u2388\u23CF\u23E9-\u23F3\u23F8-\u23FA\u24C2\u25AA\u25AB\u25B6\u25C0\u25FB-\u25FE\u2600-\u2605\u2607-\u2612\u2614-\u2685\u2690-\u2705\u2708-\u2712\u2714\u2716\u271D\u2721\u2728\u2733\u2734\u2744\u2747\u274C\u274E\u2753-\u2755\u2757\u2763-\u2767\u2795-\u2797\u27A1\u27B0\u27BF\u2934\u2935\u2B05-\u2B07\u2B1B\u2B1C\u2B50\u2B55\u3030\u303D\u3297\u3299]|\uD83C[\uDC00-\uDCFF\uDD0D-\uDD0F\uDD2F\uDD6C-\uDD71\uDD7E\uDD7F\uDD8E\uDD91-\uDD9A\uDDAD-\uDDE5\uDE01-\uDE0F\uDE1A\uDE2F\uDE32-\uDE3A\uDE3C-\uDE3F\uDE49-\uDFFA]|\uD83D[\uDC00-\uDD3D\uDD46-\uDE4F\uDE80-\uDEFF\uDF74-\uDF7F\uDFD5-\uDFFF]|\uD83E[\uDC0C-\uDC0F\uDC48-\uDC4F\uDC5A-\uDC5F\uDC88-\uDC8F\uDCAE-\uDCFF\uDD0C-\uDD3A\uDD3C-\uDD45\uDD47-\uDEFF]|\uD83F[\uDC00-\uDFFD])$/,getCodepointType=(e,t)=>{var r=CodepointType.Any;return-1!==e.search(reExtend)&&(r|=CodepointType.Extend),8205===t&&(r|=CodepointType.ZWJ),127462<=t&&t<=127487&&(r|=CodepointType.RI),-1!==e.search(rePrepend)&&(r|=CodepointType.Prepend),-1!==e.search(reSpacingMark)&&(r|=CodepointType.SpacingMark),-1!==e.search(reL)&&(r|=CodepointType.L),-1!==e.search(reV)&&(r|=CodepointType.V),-1!==e.search(reT)&&(r|=CodepointType.T),-1!==e.search(reLV)&&(r|=CodepointType.LV),-1!==e.search(reLVT)&&(r|=CodepointType.LVT),-1!==e.search(reExtPict)&&(r|=CodepointType.ExtPict),r};function intersects(e,t){return 0!=(e&t)}var NonBoundaryPairs=[[CodepointType.L,CodepointType.L|CodepointType.V|CodepointType.LV|CodepointType.LVT],[CodepointType.LV|CodepointType.V,CodepointType.V|CodepointType.T],[CodepointType.LVT|CodepointType.T,CodepointType.T],[CodepointType.Any,CodepointType.Extend|CodepointType.ZWJ],[CodepointType.Any,CodepointType.SpacingMark],[CodepointType.Prepend,CodepointType.Any],[CodepointType.ZWJ,CodepointType.ExtPict],[CodepointType.RI,CodepointType.RI]];function isBoundaryPair(t,r){return-1===NonBoundaryPairs.findIndex(e=>intersects(t,e[0])&&intersects(r,e[1]))}var endingEmojiZWJ=/(?:[\xA9\xAE\u203C\u2049\u2122\u2139\u2194-\u2199\u21A9\u21AA\u231A\u231B\u2328\u2388\u23CF\u23E9-\u23F3\u23F8-\u23FA\u24C2\u25AA\u25AB\u25B6\u25C0\u25FB-\u25FE\u2600-\u2605\u2607-\u2612\u2614-\u2685\u2690-\u2705\u2708-\u2712\u2714\u2716\u271D\u2721\u2728\u2733\u2734\u2744\u2747\u274C\u274E\u2753-\u2755\u2757\u2763-\u2767\u2795-\u2797\u27A1\u27B0\u27BF\u2934\u2935\u2B05-\u2B07\u2B1B\u2B1C\u2B50\u2B55\u3030\u303D\u3297\u3299]|\uD83C[\uDC00-\uDCFF\uDD0D-\uDD0F\uDD2F\uDD6C-\uDD71\uDD7E\uDD7F\uDD8E\uDD91-\uDD9A\uDDAD-\uDDE5\uDE01-\uDE0F\uDE1A\uDE2F\uDE32-\uDE3A\uDE3C-\uDE3F\uDE49-\uDFFA]|\uD83D[\uDC00-\uDD3D\uDD46-\uDE4F\uDE80-\uDEFF\uDF74-\uDF7F\uDFD5-\uDFFF]|\uD83E[\uDC0C-\uDC0F\uDC48-\uDC4F\uDC5A-\uDC5F\uDC88-\uDC8F\uDCAE-\uDCFF\uDD0C-\uDD3A\uDD3C-\uDD45\uDD47-\uDEFF]|\uD83F[\uDC00-\uDFFD])(?:[\u0300-\u036F\u0483-\u0489\u0591-\u05BD\u05BF\u05C1\u05C2\u05C4\u05C5\u05C7\u0610-\u061A\u064B-\u065F\u0670\u06D6-\u06DC\u06DF-\u06E4\u06E7\u06E8\u06EA-\u06ED\u0711\u0730-\u074A\u07A6-\u07B0\u07EB-\u07F3\u07FD\u0816-\u0819\u081B-\u0823\u0825-\u0827\u0829-\u082D\u0859-\u085B\u08D3-\u08E1\u08E3-\u0902\u093A\u093C\u0941-\u0948\u094D\u0951-\u0957\u0962\u0963\u0981\u09BC\u09BE\u09C1-\u09C4\u09CD\u09D7\u09E2\u09E3\u09FE\u0A01\u0A02\u0A3C\u0A41\u0A42\u0A47\u0A48\u0A4B-\u0A4D\u0A51\u0A70\u0A71\u0A75\u0A81\u0A82\u0ABC\u0AC1-\u0AC5\u0AC7\u0AC8\u0ACD\u0AE2\u0AE3\u0AFA-\u0AFF\u0B01\u0B3C\u0B3E\u0B3F\u0B41-\u0B44\u0B4D\u0B55-\u0B57\u0B62\u0B63\u0B82\u0BBE\u0BC0\u0BCD\u0BD7\u0C00\u0C04\u0C3E-\u0C40\u0C46-\u0C48\u0C4A-\u0C4D\u0C55\u0C56\u0C62\u0C63\u0C81\u0CBC\u0CBF\u0CC2\u0CC6\u0CCC\u0CCD\u0CD5\u0CD6\u0CE2\u0CE3\u0D00\u0D01\u0D3B\u0D3C\u0D3E\u0D41-\u0D44\u0D4D\u0D57\u0D62\u0D63\u0D81\u0DCA\u0DCF\u0DD2-\u0DD4\u0DD6\u0DDF\u0E31\u0E34-\u0E3A\u0E47-\u0E4E\u0EB1\u0EB4-\u0EBC\u0EC8-\u0ECD\u0F18\u0F19\u0F35\u0F37\u0F39\u0F71-\u0F7E\u0F80-\u0F84\u0F86\u0F87\u0F8D-\u0F97\u0F99-\u0FBC\u0FC6\u102D-\u1030\u1032-\u1037\u1039\u103A\u103D\u103E\u1058\u1059\u105E-\u1060\u1071-\u1074\u1082\u1085\u1086\u108D\u109D\u135D-\u135F\u1712-\u1714\u1732-\u1734\u1752\u1753\u1772\u1773\u17B4\u17B5\u17B7-\u17BD\u17C6\u17C9-\u17D3\u17DD\u180B-\u180D\u1885\u1886\u18A9\u1920-\u1922\u1927\u1928\u1932\u1939-\u193B\u1A17\u1A18\u1A1B\u1A56\u1A58-\u1A5E\u1A60\u1A62\u1A65-\u1A6C\u1A73-\u1A7C\u1A7F\u1AB0-\u1AC0\u1B00-\u1B03\u1B34-\u1B3A\u1B3C\u1B42\u1B6B-\u1B73\u1B80\u1B81\u1BA2-\u1BA5\u1BA8\u1BA9\u1BAB-\u1BAD\u1BE6\u1BE8\u1BE9\u1BED\u1BEF-\u1BF1\u1C2C-\u1C33\u1C36\u1C37\u1CD0-\u1CD2\u1CD4-\u1CE0\u1CE2-\u1CE8\u1CED\u1CF4\u1CF8\u1CF9\u1DC0-\u1DF9\u1DFB-\u1DFF\u200C\u20D0-\u20F0\u2CEF-\u2CF1\u2D7F\u2DE0-\u2DFF\u302A-\u302F\u3099\u309A\uA66F-\uA672\uA674-\uA67D\uA69E\uA69F\uA6F0\uA6F1\uA802\uA806\uA80B\uA825\uA826\uA82C\uA8C4\uA8C5\uA8E0-\uA8F1\uA8FF\uA926-\uA92D\uA947-\uA951\uA980-\uA982\uA9B3\uA9B6-\uA9B9\uA9BC\uA9BD\uA9E5\uAA29-\uAA2E\uAA31\uAA32\uAA35\uAA36\uAA43\uAA4C\uAA7C\uAAB0\uAAB2-\uAAB4\uAAB7\uAAB8\uAABE\uAABF\uAAC1\uAAEC\uAAED\uAAF6\uABE5\uABE8\uABED\uFB1E\uFE00-\uFE0F\uFE20-\uFE2F\uFF9E\uFF9F]|\uD800[\uDDFD\uDEE0\uDF76-\uDF7A]|\uD802[\uDE01-\uDE03\uDE05\uDE06\uDE0C-\uDE0F\uDE38-\uDE3A\uDE3F\uDEE5\uDEE6]|\uD803[\uDD24-\uDD27\uDEAB\uDEAC\uDF46-\uDF50]|\uD804[\uDC01\uDC38-\uDC46\uDC7F-\uDC81\uDCB3-\uDCB6\uDCB9\uDCBA\uDD00-\uDD02\uDD27-\uDD2B\uDD2D-\uDD34\uDD73\uDD80\uDD81\uDDB6-\uDDBE\uDDC9-\uDDCC\uDDCF\uDE2F-\uDE31\uDE34\uDE36\uDE37\uDE3E\uDEDF\uDEE3-\uDEEA\uDF00\uDF01\uDF3B\uDF3C\uDF3E\uDF40\uDF57\uDF66-\uDF6C\uDF70-\uDF74]|\uD805[\uDC38-\uDC3F\uDC42-\uDC44\uDC46\uDC5E\uDCB0\uDCB3-\uDCB8\uDCBA\uDCBD\uDCBF\uDCC0\uDCC2\uDCC3\uDDAF\uDDB2-\uDDB5\uDDBC\uDDBD\uDDBF\uDDC0\uDDDC\uDDDD\uDE33-\uDE3A\uDE3D\uDE3F\uDE40\uDEAB\uDEAD\uDEB0-\uDEB5\uDEB7\uDF1D-\uDF1F\uDF22-\uDF25\uDF27-\uDF2B]|\uD806[\uDC2F-\uDC37\uDC39\uDC3A\uDD30\uDD3B\uDD3C\uDD3E\uDD43\uDDD4-\uDDD7\uDDDA\uDDDB\uDDE0\uDE01-\uDE0A\uDE33-\uDE38\uDE3B-\uDE3E\uDE47\uDE51-\uDE56\uDE59-\uDE5B\uDE8A-\uDE96\uDE98\uDE99]|\uD807[\uDC30-\uDC36\uDC38-\uDC3D\uDC3F\uDC92-\uDCA7\uDCAA-\uDCB0\uDCB2\uDCB3\uDCB5\uDCB6\uDD31-\uDD36\uDD3A\uDD3C\uDD3D\uDD3F-\uDD45\uDD47\uDD90\uDD91\uDD95\uDD97\uDEF3\uDEF4]|\uD81A[\uDEF0-\uDEF4\uDF30-\uDF36]|\uD81B[\uDF4F\uDF8F-\uDF92\uDFE4]|\uD82F[\uDC9D\uDC9E]|\uD834[\uDD65\uDD67-\uDD69\uDD6E-\uDD72\uDD7B-\uDD82\uDD85-\uDD8B\uDDAA-\uDDAD\uDE42-\uDE44]|\uD836[\uDE00-\uDE36\uDE3B-\uDE6C\uDE75\uDE84\uDE9B-\uDE9F\uDEA1-\uDEAF]|\uD838[\uDC00-\uDC06\uDC08-\uDC18\uDC1B-\uDC21\uDC23\uDC24\uDC26-\uDC2A\uDD30-\uDD36\uDEEC-\uDEEF]|\uD83A[\uDCD0-\uDCD6\uDD44-\uDD4A]|\uD83C[\uDFFB-\uDFFF]|\uDB40[\uDC20-\uDC7F\uDD00-\uDDEF])*\u200D$/,endsWithEmojiZWJ=e=>-1!==e.search(endingEmojiZWJ),endingRIs=/(?:\uD83C[\uDDE6-\uDDFF])+$/g,endsWithOddNumberOfRIs=e=>{e=e.match(endingRIs);return null!==e&&e[0].length/2%2==1},isElement=e=>isPlainObject(e)&&Node.isNodeList(e.children)&&!Editor.isEditor(e),Element$9={isAncestor(e){return isPlainObject(e)&&Node.isNodeList(e.children)},isElement:isElement,isElementList(e){return Array.isArray(e)&&e.every(e=>Element$9.isElement(e))},isElementProps(e){return void 0!==e.children},isElementType:function(e,t){var r=2<arguments.length&&void 0!==arguments[2]?arguments[2]:"type";return isElement(e)&&e[r]===t},matches(e,t){for(var r in t)if("children"!==r&&e[r]!==t[r])return!1;return!0}},_excluded$4=["text"],_excluded2$3=["text"];function ownKeys$8(t,e){var r,n=Object.keys(t);return Object.getOwnPropertySymbols&&(r=Object.getOwnPropertySymbols(t),e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,r)),n}function _objectSpread$8(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?ownKeys$8(Object(r),!0).forEach(function(e){_defineProperty$1(t,e,r[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):ownKeys$8(Object(r)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))})}return t}var IS_EDITOR_CACHE=new WeakMap,Editor={above(e){var{voids:t=!1,mode:r="lowest",at:n=e.selection,match:o}=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};if(n){var a,i,u=Editor.path(e,n);for([a,i]of Editor.levels(e,{at:u,voids:t,match:o,reverse:"lowest"===r}))if(!Text$1.isText(a)&&!Path.equals(u,i))return[a,i]}},addMark(e,t,r){e.addMark(t,r)},after(e,t){var r,n,o=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{},a={anchor:Editor.point(e,t,{edge:"end"}),focus:Editor.end(e,[])},{distance:i=1}=o,u=0;for(n of Editor.positions(e,_objectSpread$8(_objectSpread$8({},o),{},{at:a}))){if(i<u)break;0!==u&&(r=n),u++}return r},before(e,t){var r,n,o=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{},a={anchor:Editor.start(e,[]),focus:Editor.point(e,t,{edge:"start"})},{distance:i=1}=o,u=0;for(n of Editor.positions(e,_objectSpread$8(_objectSpread$8({},o),{},{at:a,reverse:!0}))){if(i<u)break;0!==u&&(r=n),u++}return r},deleteBackward(e){var{unit:t="character"}=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};e.deleteBackward(t)},deleteForward(e){var{unit:t="character"}=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};e.deleteForward(t)},deleteFragment(e){var{direction:t="forward"}=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};e.deleteFragment(t)},edges(e,t){return[Editor.start(e,t),Editor.end(e,t)]},end(e,t){return Editor.point(e,t,{edge:"end"})},first(e,t){t=Editor.path(e,t,{edge:"start"});return Editor.node(e,t)},fragment(e,t){t=Editor.range(e,t);return Node.fragment(e,t)},hasBlocks(t,e){return e.children.some(e=>Editor.isBlock(t,e))},hasInlines(t,e){return e.children.some(e=>Text$1.isText(e)||Editor.isInline(t,e))},hasTexts(e,t){return t.children.every(e=>Text$1.isText(e))},insertBreak(e){e.insertBreak()},insertFragment(e,t){e.insertFragment(t)},insertNode(e,t){e.insertNode(t)},insertText(e,t){e.insertText(t)},isBlock(e,t){return Element$9.isElement(t)&&!e.isInline(t)},isEditor(e){if(!isPlainObject(e))return!1;var t=IS_EDITOR_CACHE.get(e);if(void 0!==t)return t;t="function"==typeof e.addMark&&"function"==typeof e.apply&&"function"==typeof e.deleteBackward&&"function"==typeof e.deleteForward&&"function"==typeof e.deleteFragment&&"function"==typeof e.insertBreak&&"function"==typeof e.insertFragment&&"function"==typeof e.insertNode&&"function"==typeof e.insertText&&"function"==typeof e.isInline&&"function"==typeof e.isVoid&&"function"==typeof e.normalizeNode&&"function"==typeof e.onChange&&"function"==typeof e.removeMark&&(null===e.marks||isPlainObject(e.marks))&&(null===e.selection||Range.isRange(e.selection))&&Node.isNodeList(e.children)&&Operation.isOperationList(e.operations);return IS_EDITOR_CACHE.set(e,t),t},isEnd(e,t,r){e=Editor.end(e,r);return Point.equals(t,e)},isEdge(e,t,r){return Editor.isStart(e,t,r)||Editor.isEnd(e,t,r)},isEmpty(e,t){var r=t["children"],[n]=r;return 0===r.length||1===r.length&&Text$1.isText(n)&&""===n.text&&!e.isVoid(t)},isInline(e,t){return Element$9.isElement(t)&&e.isInline(t)},isNormalizing(e){e=NORMALIZING.get(e);return void 0===e||e},isStart(e,t,r){if(0!==t.offset)return!1;e=Editor.start(e,r);return Point.equals(t,e)},isVoid(e,t){return Element$9.isElement(t)&&e.isVoid(t)},last(e,t){t=Editor.path(e,t,{edge:"end"});return Editor.node(e,t)},leaf(e,t){var r=Editor.path(e,t,2<arguments.length&&void 0!==arguments[2]?arguments[2]:{});return[Node.leaf(e,r),r]},*levels(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},{at:r=e.selection,reverse:n=!1,voids:o=!1}=t,a=t["match"];if(null==a&&(a=()=>!0),r){var i,u,l=[],t=Editor.path(e,r);for([i,u]of Node.levels(e,t))if(a(i,u)&&(l.push([i,u]),!o&&Editor.isVoid(e,i)))break;n&&l.reverse(),yield*l}},marks(t){var{marks:e,selection:r}=t;if(!r)return null;if(e)return e;if(Range.isExpanded(r))return[e]=Editor.nodes(t,{match:Text$1.isText}),e?([e]=e,_objectWithoutProperties$1(e,_excluded$4)):{};var n,e=r.anchor,r=e.path,[o]=Editor.leaf(t,r);return 0===e.offset&&(e=Editor.previous(t,{at:r,match:Text$1.isText}),r=Editor.above(t,{match:e=>Editor.isBlock(t,e)}),e&&r&&([e,n]=e,[,r]=r,Path.isAncestor(r,n)&&(o=e))),_objectWithoutProperties$1(o,_excluded2$3)},next(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},{mode:r="lowest",voids:n=!1}=t,{match:t,at:o=e.selection}=t;if(o){var a=Editor.after(e,o,{voids:n});if(a){var i,[,u]=Editor.last(e,[]),a=[a.path,u];if(Path.isPath(o)&&0===o.length)throw new Error("Cannot get the next node from the root node!");null==t&&(t=Path.isPath(o)?([i]=Editor.parent(e,o),e=>i.children.includes(e)):()=>!0);var[u]=Editor.nodes(e,{at:a,match:t,mode:r,voids:n});return u}}},node(e,t){var r=Editor.path(e,t,2<arguments.length&&void 0!==arguments[2]?arguments[2]:{});return[Node.get(e,r),r]},*nodes(t){var e,r=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},{at:n=t.selection,mode:o="all",universal:a=!1,reverse:s=!1,voids:c=!1}=r,d=r["match"],d=d||(()=>!0);if(n){r=Span.isSpan(n)?(e=n[0],n[1]):(r=Editor.path(t,n,{edge:"start"}),n=Editor.path(t,n,{edge:"end"}),e=s?n:r,s?r:n);var i,u,f=[];for([i,u]of Node.nodes(t,{reverse:s,from:e,to:r,pass:e=>{var[e]=e;return!c&&Editor.isVoid(t,e)}})){var h=l&&0===Path.compare(u,l[1]);if("highest"!==o||!h)if(d(i,u)){"lowest"===o&&h||(p="lowest"===o?l:[i,u])&&(a?f.push(p):yield p);var p,l=[i,u]}else if(a&&!h&&Text$1.isText(i))return}"lowest"===o&&l&&(a?f.push(l):yield l),a&&(yield*f)}},normalize(i){var e,{force:t=!1}=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},u=e=>DIRTY_PATHS.get(e)||[],l=e=>{var t=u(e).pop(),r=t.join(",");return(DIRTY_PATH_KEYS.get(e)||new Set).delete(r),t};Editor.isNormalizing(i)&&(t&&(t=Array.from(Node.nodes(i),e=>{var[,e]=e;return e}),e=new Set(t.map(e=>e.join(","))),DIRTY_PATHS.set(i,t),DIRTY_PATH_KEYS.set(i,e)),0!==u(i).length&&Editor.withoutNormalizing(i,()=>{for(var e of u(i)){var t,r;Node.has(i,e)&&([t,r]=e=Editor.node(i,e),Element$9.isElement(t)&&0===t.children.length&&i.normalizeNode(e))}for(var n=42*u(i).length,o=0;0!==u(i).length;){if(n<o)throw new Error("\n            Could not completely normalize the editor after ".concat(n," iterations! This is usually due to incorrect normalization logic that leaves a node in an invalid state.\n          "));var a=l(i);Node.has(i,a)&&(a=Editor.node(i,a),i.normalizeNode(a)),o++}}))},parent(e,t){var r=Editor.path(e,t,2<arguments.length&&void 0!==arguments[2]?arguments[2]:{}),r=Path.parent(r);return Editor.node(e,r)},path(e,t){var r,{depth:n,edge:o}=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{};return Path.isPath(t)&&("start"===o?([,r]=Node.first(e,t),t=r):"end"===o&&([,r]=Node.last(e,t),t=r)),Range.isRange(t)&&(t="start"===o?Range.start(t):"end"===o?Range.end(t):Path.common(t.anchor.path,t.focus.path)),Point.isPoint(t)&&(t=t.path),t=null!=n?t.slice(0,n):t},hasPath(e,t){return Node.has(e,t)},pathRef(t,e){var{affinity:r="forward"}=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{},n={current:e,affinity:r,unref(){var e=n["current"];return Editor.pathRefs(t).delete(n),n.current=null,e}};return Editor.pathRefs(t).add(n),n},pathRefs(e){var t=PATH_REFS.get(e);return t||(t=new Set,PATH_REFS.set(e,t)),t},point(e,t){var{edge:r="start"}=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{};if(Path.isPath(t)){n="end"===r?([,n]=Node.last(e,t),n):([,n]=Node.first(e,t),n);var n,o=Node.get(e,n);if(!Text$1.isText(o))throw new Error("Cannot get the ".concat(r," point in the node at path [").concat(t,"] because it has no ").concat(r," text node."));return{path:n,offset:"end"===r?o.text.length:0}}return Range.isRange(t)?([n,o]=Range.edges(t),"start"===r?n:o):t},pointRef(t,e){var{affinity:r="forward"}=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{},n={current:e,affinity:r,unref(){var e=n["current"];return Editor.pointRefs(t).delete(n),n.current=null,e}};return Editor.pointRefs(t).add(n),n},pointRefs(e){var t=POINT_REFS.get(e);return t||(t=new Set,POINT_REFS.set(e,t)),t},*positions(e){var{at:c=e.selection,unit:d="offset",reverse:t=!1,voids:f=!1}=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};if(c){var r,n,h,p=Editor.range(e,c),[E,D]=Range.edges(p),o=t?D:E,g=!1,a="",i=0,u=0,l=0;for([r,n]of Editor.nodes(e,{at:c,reverse:t,voids:f})){if(Element$9.isElement(r)){if(!f&&e.isVoid(r)){yield Editor.start(e,n);continue}if(e.isInline(r))continue;Editor.hasInlines(e,r)&&(h=Path.isAncestor(n,D.path)?D:Editor.end(e,n),s=Path.isAncestor(n,E.path)?E:Editor.start(e,n),a=Editor.string(e,{anchor:s,focus:h},{voids:f}),g=!0)}if(Text$1.isText(r)){var s=Path.equals(n,o.path),l=s?(u=t?o.offset:r.text.length-o.offset,o.offset):(u=r.text.length,t?u:0);for((s||g||"offset"===d)&&(yield{path:n,offset:l},g=!1);;){if(0===i){if(""===a)break;i=function(e,t,r){{if("character"===t)return getCharacterDistance(e,r);if("word"===t)return getWordDistance(e,r);if("line"===t||"block"===t)return e.length}return 1}(a,d,t),a=splitByCharacterDistance(a,i,t)[1]}if(l=t?l-i:l+i,(u-=i)<0){i=-u;break}i=0,yield{path:n,offset:l}}}}}},previous(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},{mode:r="lowest",voids:n=!1}=t,{match:t,at:o=e.selection}=t;if(o){var a=Editor.before(e,o,{voids:n});if(a){var i,[,u]=Editor.first(e,[]),a=[a.path,u];if(Path.isPath(o)&&0===o.length)throw new Error("Cannot get the previous node from the root node!");null==t&&(t=Path.isPath(o)?([i]=Editor.parent(e,o),e=>i.children.includes(e)):()=>!0);var[u]=Editor.nodes(e,{reverse:!0,at:a,match:t,mode:r,voids:n});return u}}},range(e,t,r){return Range.isRange(t)&&!r?t:{anchor:Editor.start(e,t),focus:Editor.end(e,r||t)}},rangeRef(t,e){var{affinity:r="forward"}=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{},n={current:e,affinity:r,unref(){var e=n["current"];return Editor.rangeRefs(t).delete(n),n.current=null,e}};return Editor.rangeRefs(t).add(n),n},rangeRefs(e){var t=RANGE_REFS.get(e);return t||(t=new Set,RANGE_REFS.set(e,t)),t},removeMark(e,t){e.removeMark(t)},setNormalizing(e,t){NORMALIZING.set(e,t)},start(e,t){return Editor.point(e,t,{edge:"start"})},string(e,t){var r,n,{voids:s=!1}=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{},o=Editor.range(e,t),[a,i]=Range.edges(o),u="";for([r,n]of Editor.nodes(e,{at:o,match:Text$1.isText,voids:s})){var l=r.text;Path.equals(n,i.path)&&(l=l.slice(0,i.offset)),u+=l=Path.equals(n,a.path)?l.slice(a.offset):l}return u},unhangRange(t,e){var{voids:r=!1}=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{},[n,o]=Range.edges(e);if(0!==n.offset||0!==o.offset||Range.isCollapsed(e))return e;var a,i,u=Editor.above(t,{at:o,match:e=>Editor.isBlock(t,e)}),s=u?u[1]:[],u=Editor.start(t,n),l=!0;for([a,i]of Editor.nodes(t,{at:{anchor:u,focus:o},match:Text$1.isText,reverse:!0,voids:r}))if(l)l=!1;else if(""!==a.text||Path.isBefore(i,s)){o={path:i,offset:a.text.length};break}return{anchor:n,focus:o}},void(t){return Editor.above(t,_objectSpread$8(_objectSpread$8({},1<arguments.length&&void 0!==arguments[1]?arguments[1]:{}),{},{match:e=>Editor.isVoid(t,e)}))},withoutNormalizing(e,t){var r=Editor.isNormalizing(e);Editor.setNormalizing(e,!1);try{t()}finally{Editor.setNormalizing(e,r)}Editor.normalize(e)}},Span={isSpan(e){return Array.isArray(e)&&2===e.length&&e.every(Path.isPath)}},_excluded$3$1=["children"],_excluded2$2=["text"],IS_NODE_LIST_CACHE=new WeakMap,Node={ancestor(e,t){e=Node.get(e,t);if(Text$1.isText(e))throw new Error("Cannot get the ancestor node at path [".concat(t,"] because it refers to a text node instead: ").concat(e));return e},*ancestors(e,t){var r;for(r of Path.ancestors(t,2<arguments.length&&void 0!==arguments[2]?arguments[2]:{}))yield[Node.ancestor(e,r),r]},child(e,t){if(Text$1.isText(e))throw new Error("Cannot get the child of a text node: ".concat(JSON.stringify(e)));var r=e.children[t];if(null==r)throw new Error("Cannot get child at index `".concat(t,"` in node: ").concat(JSON.stringify(e)));return r},*children(e,t){for(var{reverse:r=!1}=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{},n=Node.ancestor(e,t),o=n["children"],a=r?o.length-1:0;r?0<=a:a<o.length;)yield[Node.child(n,a),t.concat(a)],a=r?a-1:a+1},common(e,t,r){t=Path.common(t,r);return[Node.get(e,t),t]},descendant(e,t){e=Node.get(e,t);if(Editor.isEditor(e))throw new Error("Cannot get the descendant node at path [".concat(t,"] because it refers to the root editor node instead: ").concat(e));return e},*descendants(e){var t,r;for([t,r]of Node.nodes(e,1<arguments.length&&void 0!==arguments[1]?arguments[1]:{}))0!==r.length&&(yield[t,r])},*elements(e){var t,r;for([t,r]of Node.nodes(e,1<arguments.length&&void 0!==arguments[1]?arguments[1]:{}))Element$9.isElement(t)&&(yield[t,r])},extractProps(e){return Element$9.isAncestor(e)?_objectWithoutProperties$1(e,_excluded$3$1):_objectWithoutProperties$1(e,_excluded2$2)},first(e,t){for(var r=t.slice(),n=Node.get(e,r);n&&!Text$1.isText(n)&&0!==n.children.length;)n=n.children[0],r.push(0);return[n,r]},fragment(e,i){if(Text$1.isText(e))throw new Error("Cannot get a fragment starting from a root text node: ".concat(JSON.stringify(e)));return fn({children:e.children},e=>{var t,r,n,[o,a]=Range.edges(i);for([,t]of Node.nodes(e,{reverse:!0,pass:e=>{var[,e]=e;return!Range.includes(i,e)}}))Range.includes(i,t)||(r=Node.parent(e,t),n=t[t.length-1],r.children.splice(n,1)),Path.equals(t,a.path)&&((r=Node.leaf(e,t)).text=r.text.slice(0,a.offset)),Path.equals(t,o.path)&&((n=Node.leaf(e,t)).text=n.text.slice(o.offset));Editor.isEditor(e)&&(e.selection=null)}).children},get(e,t){for(var r=e,n=0;n<t.length;n++){var o=t[n];if(Text$1.isText(r)||!r.children[o])throw new Error("Cannot find a descendant at path [".concat(t,"] in node: ").concat(JSON.stringify(e)));r=r.children[o]}return r},has(e,t){for(var r=e,n=0;n<t.length;n++){var o=t[n];if(Text$1.isText(r)||!r.children[o])return!1;r=r.children[o]}return!0},isNode(e){return Text$1.isText(e)||Element$9.isElement(e)||Editor.isEditor(e)},isNodeList(e){if(!Array.isArray(e))return!1;var t=IS_NODE_LIST_CACHE.get(e);if(void 0!==t)return t;t=e.every(e=>Node.isNode(e));return IS_NODE_LIST_CACHE.set(e,t),t},last(e,t){for(var r=t.slice(),n=Node.get(e,r);n&&!Text$1.isText(n)&&0!==n.children.length;){var o=n.children.length-1,n=n.children[o];r.push(o)}return[n,r]},leaf(e,t){e=Node.get(e,t);if(!Text$1.isText(e))throw new Error("Cannot get the leaf node at path [".concat(t,"] because it refers to a non-leaf node: ").concat(e));return e},*levels(e,t){var r;for(r of Path.levels(t,2<arguments.length&&void 0!==arguments[2]?arguments[2]:{}))yield[Node.get(e,r),r]},matches(e,t){return Element$9.isElement(e)&&Element$9.isElementProps(t)&&Element$9.matches(e,t)||Text$1.isText(e)&&Text$1.isTextProps(t)&&Text$1.matches(e,t)},*nodes(e){for(var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},{pass:r,reverse:n=!1}=t,{from:s=[],to:o}=t,a=new Set,i=[],u=e;!(o&&(n?Path.isBefore(i,o):Path.isAfter(i,o)));)if(a.has(u)||(yield[u,i]),a.has(u)||Text$1.isText(u)||0===u.children.length||null!=r&&!1!==r([u,i])){if(0===i.length)break;if(!n){var l=Path.next(i);if(Node.has(e,l)){u=Node.get(e,i=l);continue}}n&&0!==i[i.length-1]?(i=Path.previous(i),u=Node.get(e,i)):(i=Path.parent(i),u=Node.get(e,i),a.add(u))}else{a.add(u);l=n?u.children.length-1:0;Path.isAncestor(i,s)&&(l=s[i.length]),i=i.concat(l),u=Node.get(e,i)}},parent(e,t){var r=Path.parent(t),e=Node.get(e,r);if(Text$1.isText(e))throw new Error("Cannot get the parent of path [".concat(t,"] because it does not exist in the root."));return e},string(e){return Text$1.isText(e)?e.text:e.children.map(Node.string).join("")},*texts(e){var t,r;for([t,r]of Node.nodes(e,1<arguments.length&&void 0!==arguments[1]?arguments[1]:{}))Text$1.isText(t)&&(yield[t,r])}};function ownKeys$7(t,e){var r,n=Object.keys(t);return Object.getOwnPropertySymbols&&(r=Object.getOwnPropertySymbols(t),e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,r)),n}function _objectSpread$7(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?ownKeys$7(Object(r),!0).forEach(function(e){_defineProperty$1(t,e,r[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):ownKeys$7(Object(r)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))})}return t}var Operation={isNodeOperation(e){return Operation.isOperation(e)&&e.type.endsWith("_node")},isOperation(e){if(!isPlainObject(e))return!1;switch(e.type){case"insert_node":return Path.isPath(e.path)&&Node.isNode(e.node);case"insert_text":return"number"==typeof e.offset&&"string"==typeof e.text&&Path.isPath(e.path);case"merge_node":return"number"==typeof e.position&&Path.isPath(e.path)&&isPlainObject(e.properties);case"move_node":return Path.isPath(e.path)&&Path.isPath(e.newPath);case"remove_node":return Path.isPath(e.path)&&Node.isNode(e.node);case"remove_text":return"number"==typeof e.offset&&"string"==typeof e.text&&Path.isPath(e.path);case"set_node":return Path.isPath(e.path)&&isPlainObject(e.properties)&&isPlainObject(e.newProperties);case"set_selection":return null===e.properties&&Range.isRange(e.newProperties)||null===e.newProperties&&Range.isRange(e.properties)||isPlainObject(e.properties)&&isPlainObject(e.newProperties);case"split_node":return Path.isPath(e.path)&&"number"==typeof e.position&&isPlainObject(e.properties);default:return!1}},isOperationList(e){return Array.isArray(e)&&e.every(e=>Operation.isOperation(e))},isSelectionOperation(e){return Operation.isOperation(e)&&e.type.endsWith("_selection")},isTextOperation(e){return Operation.isOperation(e)&&e.type.endsWith("_text")},inverse(e){switch(e.type){case"insert_node":return _objectSpread$7(_objectSpread$7({},e),{},{type:"remove_node"});case"insert_text":return _objectSpread$7(_objectSpread$7({},e),{},{type:"remove_text"});case"merge_node":return _objectSpread$7(_objectSpread$7({},e),{},{type:"split_node",path:Path.previous(e.path)});case"move_node":var{newPath:t,path:r}=e;if(Path.equals(t,r))return e;if(Path.isSibling(r,t))return _objectSpread$7(_objectSpread$7({},e),{},{path:t,newPath:r});t=Path.transform(r,e),r=Path.transform(Path.next(r),e);return _objectSpread$7(_objectSpread$7({},e),{},{path:t,newPath:r});case"remove_node":return _objectSpread$7(_objectSpread$7({},e),{},{type:"insert_node"});case"remove_text":return _objectSpread$7(_objectSpread$7({},e),{},{type:"insert_text"});case"set_node":var{properties:t,newProperties:r}=e;return _objectSpread$7(_objectSpread$7({},e),{},{properties:r,newProperties:t});case"set_selection":var{properties:r,newProperties:t}=e;return _objectSpread$7(_objectSpread$7({},e),{},null==r?{properties:t,newProperties:null}:null==t?{properties:null,newProperties:r}:{properties:t,newProperties:r});case"split_node":return _objectSpread$7(_objectSpread$7({},e),{},{type:"merge_node",path:Path.next(e.path)})}}},Path={ancestors(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},{reverse:r=!1}=t,t=Path.levels(e,t);return t=r?t.slice(1):t.slice(0,-1)},common(e,t){for(var r=[],n=0;n<e.length&&n<t.length;n++){var o=e[n];if(o!==t[n])break;r.push(o)}return r},compare(e,t){for(var r=Math.min(e.length,t.length),n=0;n<r;n++){if(e[n]<t[n])return-1;if(e[n]>t[n])return 1}return 0},endsAfter(e,t){var r=e.length-1,n=e.slice(0,r),o=t.slice(0,r),e=e[r],t=t[r];return Path.equals(n,o)&&t<e},endsAt(e,t){var r=e.length,e=e.slice(0,r),t=t.slice(0,r);return Path.equals(e,t)},endsBefore(e,t){var r=e.length-1,n=e.slice(0,r),o=t.slice(0,r),e=e[r],t=t[r];return Path.equals(n,o)&&e<t},equals(e,r){return e.length===r.length&&e.every((e,t)=>e===r[t])},hasPrevious(e){return 0<e[e.length-1]},isAfter(e,t){return 1===Path.compare(e,t)},isAncestor(e,t){return e.length<t.length&&0===Path.compare(e,t)},isBefore(e,t){return-1===Path.compare(e,t)},isChild(e,t){return e.length===t.length+1&&0===Path.compare(e,t)},isCommon(e,t){return e.length<=t.length&&0===Path.compare(e,t)},isDescendant(e,t){return e.length>t.length&&0===Path.compare(e,t)},isParent(e,t){return e.length+1===t.length&&0===Path.compare(e,t)},isPath(e){return Array.isArray(e)&&(0===e.length||"number"==typeof e[0])},isSibling(e,t){if(e.length!==t.length)return!1;var r=e.slice(0,-1),n=t.slice(0,-1);return e[e.length-1]!==t[t.length-1]&&Path.equals(r,n)},levels(e){for(var{reverse:t=!1}=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},r=[],n=0;n<=e.length;n++)r.push(e.slice(0,n));return t&&r.reverse(),r},next(e){if(0===e.length)throw new Error("Cannot get the next path of a root path [".concat(e,"], because it has no next index."));var t=e[e.length-1];return e.slice(0,-1).concat(t+1)},operationCanTransformPath(e){switch(e.type){case"insert_node":case"remove_node":case"merge_node":case"split_node":case"move_node":return!0;default:return!1}},parent(e){if(0===e.length)throw new Error("Cannot get the parent path of the root path [".concat(e,"]."));return e.slice(0,-1)},previous(e){if(0===e.length)throw new Error("Cannot get the previous path of a root path [".concat(e,"], because it has no previous index."));var t=e[e.length-1];if(t<=0)throw new Error("Cannot get the previous path of a first child path [".concat(e,"] because it would result in a negative index."));return e.slice(0,-1).concat(t-1)},relative(e,t){if(!Path.isAncestor(t,e)&&!Path.equals(e,t))throw new Error("Cannot get the relative path of [".concat(e,"] inside ancestor [").concat(t,"], because it is not above or equal to the path."));return e.slice(t.length)},transform(a,i){var u=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{};return fn(a,e=>{var{affinity:t="forward"}=u;if(a&&0!==(null==a?void 0:a.length)){if(null===e)return null;switch(i.type){case"insert_node":var r=i["path"];(Path.equals(r,e)||Path.endsBefore(r,e)||Path.isAncestor(r,e))&&(e[r.length-1]+=1);break;case"remove_node":r=i["path"];if(Path.equals(r,e)||Path.isAncestor(r,e))return null;Path.endsBefore(r,e)&&--e[r.length-1];break;case"merge_node":var{path:r,position:n}=i;Path.equals(r,e)||Path.endsBefore(r,e)?--e[r.length-1]:Path.isAncestor(r,e)&&(--e[r.length-1],e[r.length]+=n);break;case"split_node":var{path:r,position:n}=i;if(Path.equals(r,e)){if("forward"===t)e[e.length-1]+=1;else if("backward"!==t)return null}else Path.endsBefore(r,e)?e[r.length-1]+=1:Path.isAncestor(r,e)&&a[r.length]>=n&&(e[r.length-1]+=1,e[r.length]-=n);break;case"move_node":var o,{path:r,newPath:n}=i;if(Path.equals(r,n))return;if(Path.isAncestor(r,e)||Path.equals(r,e))return o=n.slice(),Path.endsBefore(r,n)&&r.length<n.length&&--o[r.length-1],o.concat(e.slice(r.length));Path.isSibling(r,n)&&(Path.isAncestor(n,e)||Path.equals(n,e))?Path.endsBefore(r,e)?--e[r.length-1]:e[r.length-1]+=1:Path.endsBefore(n,e)||Path.equals(n,e)||Path.isAncestor(n,e)?(Path.endsBefore(r,e)&&--e[r.length-1],e[n.length-1]+=1):Path.endsBefore(r,e)&&(Path.equals(n,e)&&(e[n.length-1]+=1),--e[r.length-1])}}})}},PathRef={transform(e,t){var{current:r,affinity:n}=e;null!=r&&(r=Path.transform(r,t,{affinity:n}),null==(e.current=r)&&e.unref())}};function ownKeys$6(t,e){var r,n=Object.keys(t);return Object.getOwnPropertySymbols&&(r=Object.getOwnPropertySymbols(t),e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,r)),n}function _objectSpread$6(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?ownKeys$6(Object(r),!0).forEach(function(e){_defineProperty$1(t,e,r[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):ownKeys$6(Object(r)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))})}return t}var Point={compare(e,t){var r=Path.compare(e.path,t.path);return 0===r?e.offset<t.offset?-1:e.offset>t.offset?1:0:r},isAfter(e,t){return 1===Point.compare(e,t)},isBefore(e,t){return-1===Point.compare(e,t)},equals(e,t){return e.offset===t.offset&&Path.equals(e.path,t.path)},isPoint(e){return isPlainObject(e)&&"number"==typeof e.offset&&Path.isPath(e.path)},transform(e,o){var a=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{};return fn(e,e=>{if(null===e)return null;var{affinity:t="forward"}=a,{path:r,offset:n}=e;switch(o.type){case"insert_node":case"move_node":e.path=Path.transform(r,o,a);break;case"insert_text":Path.equals(o.path,r)&&o.offset<=n&&(e.offset+=o.text.length);break;case"merge_node":Path.equals(o.path,r)&&(e.offset+=o.position),e.path=Path.transform(r,o,a);break;case"remove_text":Path.equals(o.path,r)&&o.offset<=n&&(e.offset-=Math.min(n-o.offset,o.text.length));break;case"remove_node":if(Path.equals(o.path,r)||Path.isAncestor(o.path,r))return null;e.path=Path.transform(r,o,a);break;case"split_node":if(Path.equals(o.path,r)){if(o.position===n&&null==t)return null;(o.position<n||o.position===n&&"forward"===t)&&(e.offset-=o.position,e.path=Path.transform(r,o,_objectSpread$6(_objectSpread$6({},a),{},{affinity:"forward"})))}else e.path=Path.transform(r,o,a)}})}},PointRef={transform(e,t){var{current:r,affinity:n}=e;null!=r&&(r=Point.transform(r,t,{affinity:n}),null==(e.current=r)&&e.unref())}},_excluded$2$1=["anchor","focus"];function ownKeys$5(t,e){var r,n=Object.keys(t);return Object.getOwnPropertySymbols&&(r=Object.getOwnPropertySymbols(t),e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,r)),n}function _objectSpread$5(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?ownKeys$5(Object(r),!0).forEach(function(e){_defineProperty$1(t,e,r[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):ownKeys$5(Object(r)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))})}return t}var Range={edges(e){var{reverse:t=!1}=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},{anchor:r,focus:n}=e;return Range.isBackward(e)===t?[r,n]:[n,r]},end(e){var[,e]=Range.edges(e);return e},equals(e,t){return Point.equals(e.anchor,t.anchor)&&Point.equals(e.focus,t.focus)},includes(e,t){if(Range.isRange(t)){if(Range.includes(e,t.anchor)||Range.includes(e,t.focus))return!0;var[r,n]=Range.edges(e),[o,a]=Range.edges(t);return Point.isBefore(r,o)&&Point.isAfter(n,a)}var[r,o]=Range.edges(e),n=!1,a=!1,a=Point.isPoint(t)?(n=0<=Point.compare(t,r),Point.compare(t,o)<=0):(n=0<=Path.compare(t,r.path),Path.compare(t,o.path)<=0);return n&&a},intersection(e,t){var r=_objectWithoutProperties$1(e,_excluded$2$1),[e,n]=Range.edges(e),[t,o]=Range.edges(t),t=Point.isBefore(e,t)?t:e,e=Point.isBefore(n,o)?n:o;return Point.isBefore(e,t)?null:_objectSpread$5({anchor:t,focus:e},r)},isBackward(e){var{anchor:e,focus:t}=e;return Point.isAfter(e,t)},isCollapsed(e){var{anchor:e,focus:t}=e;return Point.equals(e,t)},isExpanded(e){return!Range.isCollapsed(e)},isForward(e){return!Range.isBackward(e)},isRange(e){return isPlainObject(e)&&Point.isPoint(e.anchor)&&Point.isPoint(e.focus)},*points(e){yield[e.anchor,"anchor"],yield[e.focus,"focus"]},start(e){var[e]=Range.edges(e);return e},transform(e,o){var a=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{};return fn(e,e=>{return null===e?null:({affinity:r="inward"}=a,t="inward"===r?(t=Range.isCollapsed(e),Range.isForward(e)?(n="forward",t?n:"backward"):(n="backward",t?n:"forward")):"outward"===r?Range.isForward(e)?(n="backward","forward"):(n="forward","backward"):n=r,r=Point.transform(e.anchor,o,{affinity:n}),n=Point.transform(e.focus,o,{affinity:t}),r&&n?(e.anchor=r,void(e.focus=n)):null);var t,r,n})}},RangeRef={transform(e,t){var{current:r,affinity:n}=e;null!=r&&(r=Range.transform(r,t,{affinity:n}),null==(e.current=r)&&e.unref())}},isDeepEqual=(e,t)=>{for(var r in e){var n=e[r],o=t[r];if(isPlainObject(n)&&isPlainObject(o)){if(!isDeepEqual(n,o))return!1}else if(Array.isArray(n)&&Array.isArray(o)){if(n.length!==o.length)return!1;for(var a=0;a<n.length;a++)if(n[a]!==o[a])return!1}else if(n!==o)return!1}for(var i in t)if(void 0===e[i]&&void 0!==t[i])return!1;return!0},_excluded$1$1=["text"],_excluded2$1=["anchor","focus"];function ownKeys$4(t,e){var r,n=Object.keys(t);return Object.getOwnPropertySymbols&&(r=Object.getOwnPropertySymbols(t),e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,r)),n}function _objectSpread$4(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?ownKeys$4(Object(r),!0).forEach(function(e){_defineProperty$1(t,e,r[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):ownKeys$4(Object(r)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))})}return t}var Text$1={equals(e,t){var{loose:r=!1}=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{};function n(e){return _objectWithoutProperties$1(e,_excluded$1$1)}return isDeepEqual(r?n(e):e,r?n(t):t)},isText(e){return isPlainObject(e)&&"string"==typeof e.text},isTextList(e){return Array.isArray(e)&&e.every(e=>Text$1.isText(e))},isTextProps(e){return void 0!==e.text},matches(e,t){for(var r in t)if("text"!==r&&(!e.hasOwnProperty(r)||e[r]!==t[r]))return!1;return!0},decorations(c,d){var f,h=[_objectSpread$4({},c)];for(f of d){var e,p=_objectWithoutProperties$1(f,_excluded2$1),[t,r]=Range.edges(f),n=[],o=0;for(e of h){var a,i,u,l=e.text["length"],s=o;o+=l,t.offset<=s&&r.offset>=o?(Object.assign(e,p),n.push(e)):t.offset!==r.offset&&(t.offset===o||r.offset===s)||t.offset>o||r.offset<s||r.offset===s&&0!==s?n.push(e):(l=e,a=u=void 0,r.offset<o&&(i=r.offset-s,a=_objectSpread$4(_objectSpread$4({},l),{},{text:l.text.slice(i)}),l=_objectSpread$4(_objectSpread$4({},l),{},{text:l.text.slice(0,i)})),t.offset>s&&(i=t.offset-s,u=_objectSpread$4(_objectSpread$4({},l),{},{text:l.text.slice(0,i)}),l=_objectSpread$4(_objectSpread$4({},l),{},{text:l.text.slice(i)})),Object.assign(l,p),u&&n.push(u),n.push(l),a&&n.push(a))}h=n}return h}};function ownKeys$3(t,e){var r,n=Object.keys(t);return Object.getOwnPropertySymbols&&(r=Object.getOwnPropertySymbols(t),e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,r)),n}function _objectSpread$3(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?ownKeys$3(Object(r),!0).forEach(function(e){_defineProperty$1(t,e,r[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):ownKeys$3(Object(r)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))})}return t}var applyToDraft=(e,t,r)=>{switch(r.type){case"insert_node":var{path:n,node:o}=r,a=Node.parent(e,n),i=n[n.length-1];if(i>a.children.length)throw new Error('Cannot apply an "insert_node" operation at path ['.concat(n,"] because the destination is past the end of the node."));if(a.children.splice(i,0,o),t)for(var[c,d]of Range.points(t))t[d]=Point.transform(c,r);break;case"insert_text":var{path:n,offset:a,text:i}=r;if(0===i.length)break;o=Node.leaf(e,n),n=o.text.slice(0,a),a=o.text.slice(a);if(o.text=n+i+a,t)for(var[f,h]of Range.points(t))t[h]=Point.transform(f,r);break;case"merge_node":var o=r["path"],n=Node.get(e,o),i=Path.previous(o),a=Node.get(e,i),i=Node.parent(e,o),u=o[o.length-1];if(Text$1.isText(n)&&Text$1.isText(a))a.text+=n.text;else{if(Text$1.isText(n)||Text$1.isText(a))throw new Error('Cannot apply a "merge_node" operation at path ['.concat(o,"] to nodes of different interfaces: ").concat(n," ").concat(a));a.children.push(...n.children)}if(i.children.splice(u,1),t)for(var[p,E]of Range.points(t))t[E]=Point.transform(p,r);break;case"move_node":var{path:o,newPath:a}=r;if(Path.isAncestor(o,a))throw new Error("Cannot move a path [".concat(o,"] to new path [").concat(a,"] because the destination is inside itself."));n=Node.get(e,o),i=Node.parent(e,o),u=o[o.length-1],a=(i.children.splice(u,1),Path.transform(o,r)),i=Node.get(e,Path.parent(a)),u=a[a.length-1];if(i.children.splice(u,0,n),t)for(var[D,g]of Range.points(t))t[g]=Point.transform(D,r);break;case"remove_node":var l=r["path"],o=l[l.length-1];if(Node.parent(e,l).children.splice(o,1),t)for(var[C,m]of Range.points(t)){var v=Point.transform(C,r);if(null!=t&&null!=v)t[m]=v;else{var y,A,B=void 0,s=void 0;for([y,A]of Node.texts(e)){if(-1!==Path.compare(A,l)){s=[y,A];break}B=[y,A]}m=!1;B&&s&&(m=Path.equals(s[1],l)?!Path.hasPrevious(s[1]):Path.common(B[1],l).length<Path.common(s[1],l).length),B&&!m?(C.path=B[1],C.offset=B[0].text.length):s?(C.path=s[1],C.offset=0):t=null}}break;case"remove_text":var{path:a,offset:i,text:u}=r;if(0===u.length)break;n=Node.leaf(e,a),o=n.text.slice(0,i),a=n.text.slice(i+u.length);if(n.text=o+a,t)for(var[b,F]of Range.points(t))t[F]=Point.transform(b,r);break;case"set_node":var{path:i,properties:u,newProperties:R}=r;if(0===i.length)throw new Error("Cannot set properties on the root node!");var O,w,T=Node.get(e,i);for(O in R){if("children"===O||"text"===O)throw new Error('Cannot set the "'.concat(O,'" property of nodes!'));var P=R[O];null==P?delete T[O]:T[O]=P}for(w in u)R.hasOwnProperty(w)||delete T[w];break;case"set_selection":var x=r["newProperties"];if(null==x)t=x;else{if(null==t){if(!Range.isRange(x))throw new Error('Cannot apply an incomplete "set_selection" operation properties '.concat(JSON.stringify(x)," when there is no current selection."));t=_objectSpread$3({},x)}for(var S in x){var _=x[S];if(null==_){if("anchor"===S||"focus"===S)throw new Error('Cannot remove the "'.concat(S,'" selection property'));delete t[S]}else t[S]=_}}break;case"split_node":var{path:n,position:o,properties:a}=r;if(0===n.length)throw new Error('Cannot apply a "split_node" operation at path ['.concat(n,"] because the root node cannot be split."));var N,k,i=Node.get(e,n),u=Node.parent(e,n),n=n[n.length-1],o=Text$1.isText(i)?(N=i.text.slice(0,o),k=i.text.slice(o),i.text=N,_objectSpread$3(_objectSpread$3({},a),{},{text:k})):(N=i.children.slice(0,o),k=i.children.slice(o),i.children=N,_objectSpread$3(_objectSpread$3({},a),{},{children:k}));if(u.children.splice(n+1,0,o),t)for(var[I,$]of Range.points(t))t[$]=Point.transform(I,r)}return t},GeneralTransforms={transform(e,t){e.children=ln(e.children);var r=e.selection&&ln(e.selection);try{r=applyToDraft(e,r,t)}finally{e.children=dn(e.children),e.selection=r?r$1(r)?dn(r):r:null}}},_excluded$5=["text"],_excluded2$4=["children"];function ownKeys$2$1(t,e){var r,n=Object.keys(t);return Object.getOwnPropertySymbols&&(r=Object.getOwnPropertySymbols(t),e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,r)),n}function _objectSpread$2$1(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?ownKeys$2$1(Object(r),!0).forEach(function(e){_defineProperty$1(t,e,r[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):ownKeys$2$1(Object(r)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))})}return t}var NodeTransforms={insertNodes(d,f){var h=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{};Editor.withoutNormalizing(d,()=>{var{hanging:e=!1,voids:t=!1,mode:r="lowest"}=h,{at:n,match:o,select:a}=h;if(0!==(f=Node.isNode(f)?[f]:f).length){var[i]=f;if(n||(n=d.selection||(0<d.children.length?Editor.end(d,[]):[0]),a=!0),null==a&&(a=!1),Range.isRange(n)&&(e||(n=Editor.unhangRange(d,n)),n=Range.isCollapsed(n)?n.anchor:([,e]=Range.edges(n),e=Editor.pointRef(d,e),Transforms.delete(d,{at:n}),e.unref())),Point.isPoint(n)){null==o&&(o=Text$1.isText(i)?e=>Text$1.isText(e):d.isInline(i)?e=>Text$1.isText(e)||Editor.isInline(d,e):e=>Editor.isBlock(d,e));var[e]=Editor.nodes(d,{at:n.path,match:o,mode:r,voids:t});if(!e)return;var[,i]=e,e=Editor.pathRef(d,i),i=Editor.isEnd(d,n,i),o=(Transforms.splitNodes(d,{at:n,match:o,mode:r,voids:t}),e.unref()),n=i?Path.next(o):o}var u=Path.parent(n),l=n[n.length-1];if(t||!Editor.void(d,{at:u})){for(var s of f){var c=u.concat(l);l++,d.apply({type:"insert_node",path:c,node:s}),n=Path.next(n)}n=Path.previous(n),!a||(r=Editor.end(d,n))&&Transforms.select(d,r)}}})},liftNodes(c){var d=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};Editor.withoutNormalizing(c,()=>{var{at:e=c.selection,mode:t="lowest",voids:r=!1}=d,n=d["match"];if(null==n&&(n=Path.isPath(e)?matchPath(c,e):e=>Editor.isBlock(c,e)),e){var o,e=Editor.nodes(c,{at:e,match:n,mode:t,voids:r});for(o of Array.from(e,e=>{var[,e]=e;return Editor.pathRef(c,e)})){var a=o.unref();if(a.length<2)throw new Error("Cannot lift node at a path [".concat(a,"] because it has a depth of less than `2`."));var i,[u,l]=Editor.node(c,Path.parent(a)),s=a[a.length-1],u=u.children["length"];1===u?(i=Path.next(l),Transforms.moveNodes(c,{at:a,to:i,voids:r}),Transforms.removeNodes(c,{at:l,voids:r})):0===s?Transforms.moveNodes(c,{at:a,to:l,voids:r}):s===u-1?(i=Path.next(l),Transforms.moveNodes(c,{at:a,to:i,voids:r})):(s=Path.next(a),u=Path.next(l),Transforms.splitNodes(c,{at:s,voids:r}),Transforms.moveNodes(c,{at:a,to:u,voids:r}))}}})},mergeNodes(h){var p=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};Editor.withoutNormalizing(h,()=>{var{match:e,at:t=h.selection}=p,{hanging:r=!1,voids:n=!1,mode:o="lowest"}=p;if(t){null==e&&(e=Path.isPath(t)?([a]=Editor.parent(h,t),e=>a.children.includes(e)):e=>Editor.isBlock(h,e)),!r&&Range.isRange(t)&&(t=Editor.unhangRange(h,t)),Range.isRange(t)&&(Range.isCollapsed(t)?t=t.anchor:([,r]=Range.edges(t),r=Editor.pointRef(h,r),Transforms.delete(h,{at:t}),t=r.unref(),null==p.at&&Transforms.select(h,t)));var a,[r]=Editor.nodes(h,{at:t,match:e,voids:n,mode:o}),t=Editor.previous(h,{at:t,match:e,voids:n,mode:o});if(r&&t){var[e,o]=r,[r,t]=t;if(0!==o.length&&0!==t.length){var i=Path.next(t),u=Path.common(o,t),c=Path.isSibling(o,t),d=Array.from(Editor.levels(h,{at:o}),e=>{var[e]=e;return e}).slice(u.length).slice(0,-1),u=Editor.above(h,{at:o,mode:"highest",match:e=>d.includes(e)&&hasSingleChildNest(h,e)}),u=u&&Editor.pathRef(h,u[1]);if(Text$1.isText(e)&&Text$1.isText(r))var l=_objectWithoutProperties$1(e,_excluded$5),s=r.text.length,f=l;else{if(!Element$9.isElement(e)||!Element$9.isElement(r))throw new Error("Cannot merge the node at path [".concat(o,"] with the previous sibling because it is not the same kind: ").concat(JSON.stringify(e)," ").concat(JSON.stringify(r)));l=_objectWithoutProperties$1(e,_excluded2$4);s=r.children.length,f=l}c||Transforms.moveNodes(h,{at:o,to:i,voids:n}),u&&Transforms.removeNodes(h,{at:u.current,voids:n}),Element$9.isElement(r)&&Editor.isEmpty(h,r)||Text$1.isText(r)&&""===r.text&&0!==t[t.length-1]?Transforms.removeNodes(h,{at:t,voids:n}):h.apply({type:"merge_node",path:i,position:s,properties:f}),u&&u.unref()}}}})},moveNodes(s,c){Editor.withoutNormalizing(s,()=>{var{to:e,at:t=s.selection,mode:r="lowest",voids:n=!1}=c,o=c["match"];if(t){null==o&&(o=Path.isPath(t)?matchPath(s,t):e=>Editor.isBlock(s,e));var a,i=Editor.pathRef(s,e),e=Editor.nodes(s,{at:t,match:o,mode:r,voids:n});for(a of Array.from(e,e=>{var[,e]=e;return Editor.pathRef(s,e)})){var u=a.unref(),l=i.current;0!==u.length&&s.apply({type:"move_node",path:u,newPath:l}),i.current&&Path.isSibling(l,u)&&Path.isAfter(l,u)&&(i.current=Path.next(i.current))}i.unref()}})},removeNodes(l){var s=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};Editor.withoutNormalizing(l,()=>{var{hanging:e=!1,voids:t=!1,mode:r="lowest"}=s,{at:n=l.selection,match:o}=s;if(n){null==o&&(o=Path.isPath(n)?matchPath(l,n):e=>Editor.isBlock(l,e)),!e&&Range.isRange(n)&&(n=Editor.unhangRange(l,n));var a,e=Editor.nodes(l,{at:n,match:o,mode:r,voids:t});for(a of Array.from(e,e=>{var[,e]=e;return Editor.pathRef(l,e)})){var i,u=a.unref();u&&([i]=Editor.node(l,u),l.apply({type:"remove_node",path:u,node:i}))}}})},setNodes(E,D){var g=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{};Editor.withoutNormalizing(E,()=>{var{match:e,at:t=E.selection}=g,{hanging:r=!1,mode:n="lowest",split:o=!1,voids:a=!1}=g;if(t){if(null==e&&(e=Path.isPath(t)?matchPath(E,t):e=>Editor.isBlock(E,e)),!r&&Range.isRange(t)&&(t=Editor.unhangRange(E,t)),o&&Range.isRange(t)){if(Range.isCollapsed(t)&&0<Editor.leaf(E,t.anchor)[0].text.length)return;var r=Editor.rangeRef(E,t,{affinity:"inward"}),[o,i]=Range.edges(t),u="lowest"===n?"lowest":"highest",c=Editor.isEnd(E,i,i.path),i=(Transforms.splitNodes(E,{at:i,match:e,mode:u,voids:a,always:!c}),Editor.isStart(E,o,o.path));Transforms.splitNodes(E,{at:o,match:e,mode:u,voids:a,always:!i}),t=r.unref(),null==g.at&&Transforms.select(E,t)}for(var[l,d]of Editor.nodes(E,{at:t,match:e,mode:n,voids:a})){var f={},h={};if(0!==d.length){var s,p=!1;for(s in D)"children"!==s&&"text"!==s&&D[s]!==l[s]&&(p=!0,l.hasOwnProperty(s)&&(f[s]=l[s]),null!=D[s]&&(h[s]=D[s]));p&&E.apply({type:"set_node",path:d,properties:f,newProperties:h})}}}})},splitNodes(g){var C=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};Editor.withoutNormalizing(g,()=>{var c,{mode:e="lowest",voids:t=!1}=C,{match:r,at:n=g.selection,height:o=0,always:a=!1}=C;if(null==r&&(r=e=>Editor.isBlock(g,e)),Range.isRange(n)&&(n=deleteRange(g,n)),Path.isPath(n)&&(i=n,l=Editor.point(g,i),[c]=Editor.parent(g,i),r=e=>e===c,o=l.path.length-i.length+1,n=l,a=!0),n){var d=Editor.pointRef(g,n,{affinity:"backward"}),[i]=Editor.nodes(g,{at:n,match:r,mode:e,voids:t});if(i){var f,u,l=Editor.void(g,{at:n,mode:"highest"}),r=(!t&&l&&([r,e]=l,Element$9.isElement(r)&&g.isInline(r)&&((l=Editor.after(g,e))||(r=Path.next(e),Transforms.insertNodes(g,{text:""},{at:r,voids:t}),l=Editor.point(g,r)),n=l,a=!0),o=1+(n.path.length-e.length),a=!0),Editor.pointRef(g,n)),l=n.path.length-o,[,h]=i,e=n.path.slice(0,l),p=0===o?n.offset:n.path[l]+0;for([f,u]of Editor.levels(g,{at:e,reverse:!0,voids:t})){var E=!1;if(u.length<h.length||0===u.length||!t&&Editor.isVoid(g,f))break;var s=d.current,D=Editor.isEnd(g,s,u);!a&&d&&Editor.isEdge(g,s,u)||(E=!0,s=Node.extractProps(f),g.apply({type:"split_node",path:u,position:p,properties:s})),p=u[u.length-1]+(E||D?1:0)}null==C.at&&(i=r.current||Editor.end(g,[]),Transforms.select(g,i)),d.unref(),r.unref()}}})},unsetNodes(e,t){var r,n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{},o={};for(r of t=Array.isArray(t)?t:[t])o[r]=null;Transforms.setNodes(e,o,n)},unwrapNodes(u){var l=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};Editor.withoutNormalizing(u,()=>{var{mode:e="lowest",split:r=!1,voids:n=!1}=l,{at:t=u.selection,match:o}=l;if(t){null==o&&(o=Path.isPath(t)?matchPath(u,t):e=>Editor.isBlock(u,e)),Path.isPath(t)&&(t=Editor.range(u,t));var a,i=Range.isRange(t)?Editor.rangeRef(u,t):null,t=Editor.nodes(u,{at:t,match:o,mode:e,voids:n});for(a of Array.from(t,e=>{var[,e]=e;return Editor.pathRef(u,e)}).reverse())!function(e){var e=e.unref(),[t]=Editor.node(u,e),e=Editor.range(u,e);r&&i&&(e=Range.intersection(i.current,e)),Transforms.liftNodes(u,{at:e,match:e=>Element$9.isAncestor(t)&&t.children.includes(e),voids:n})}(a);i&&i.unref()}})},wrapNodes(c,d){var f=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{};Editor.withoutNormalizing(c,()=>{var e,t,r,{mode:n="lowest",split:o=!1,voids:a=!1}=f,{match:i,at:u=c.selection}=f;if(u){null==i&&(i=Path.isPath(u)?matchPath(c,u):c.isInline(d)?e=>Editor.isInline(c,e)||Text$1.isText(e):e=>Editor.isBlock(c,e)),o&&Range.isRange(u)&&([o,e]=Range.edges(u),t=Editor.rangeRef(c,u,{affinity:"inward"}),Transforms.splitNodes(c,{at:e,match:i,voids:a}),Transforms.splitNodes(c,{at:o,match:i,voids:a}),u=t.unref(),null==f.at&&Transforms.select(c,u));for([,r]of Array.from(Editor.nodes(c,{at:u,match:c.isInline(d)?e=>Editor.isBlock(c,e):e=>Editor.isEditor(e),mode:"lowest",voids:a}))){var l,s=Range.isRange(u)?Range.intersection(u,Editor.range(c,r)):u;s&&(0<(l=Array.from(Editor.nodes(c,{at:s,match:i,mode:n,voids:a}))).length&&function(){var[e]=l,[,e]=e,[,t]=l[l.length-1];if(0===e.length&&0===t.length)return;var r=Path.equals(e,t)?Path.parent(e):Path.common(e,t),e=Editor.range(c,e,t),[n]=Editor.node(c,r),r=r.length+1,t=Path.next(t.slice(0,r)),r=_objectSpread$2$1(_objectSpread$2$1({},d),{},{children:[]});Transforms.insertNodes(c,r,{at:t,voids:a}),Transforms.moveNodes(c,{at:e,match:e=>Element$9.isAncestor(n)&&n.children.includes(e),to:t.concat(0),voids:a})}())}}})}},hasSingleChildNest=(e,t)=>{var r;return Element$9.isElement(t)?!!Editor.isVoid(e,r=t)||1===r.children.length&&hasSingleChildNest(e,r.children[0]):!Editor.isEditor(t)},deleteRange=(e,t)=>{var r;return Range.isCollapsed(t)?t.anchor:([,r]=Range.edges(t),r=Editor.pointRef(e,r),Transforms.delete(e,{at:t}),r.unref())},matchPath=(e,t)=>{var[r]=Editor.node(e,t);return e=>e===r};function ownKeys$1$1(t,e){var r,n=Object.keys(t);return Object.getOwnPropertySymbols&&(r=Object.getOwnPropertySymbols(t),e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,r)),n}function _objectSpread$1$1(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?ownKeys$1$1(Object(r),!0).forEach(function(e){_defineProperty$1(t,e,r[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):ownKeys$1$1(Object(r)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))})}return t}var SelectionTransforms={collapse(e){var t,{edge:r="anchor"}=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},n=e["selection"];n&&("anchor"===r?Transforms.select(e,n.anchor):"focus"===r?Transforms.select(e,n.focus):"start"===r?([t]=Range.edges(n),Transforms.select(e,t)):"end"===r&&([,t]=Range.edges(n),Transforms.select(e,t)))},deselect(e){var t=e["selection"];t&&e.apply({type:"set_selection",properties:t,newProperties:null})},move(e){var t,r,n=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},o=e["selection"],{distance:a=1,unit:i="character",reverse:u=!1}=n,{edge:n=null}=n;o&&({anchor:r,focus:t}=o,a={distance:a,unit:i},i={},null!=(n="end"===(n="start"===n?Range.isBackward(o)?"focus":"anchor":n)?Range.isBackward(o)?"anchor":"focus":n)&&"anchor"!==n||(o=u?Editor.before(e,r,a):Editor.after(e,r,a))&&(i.anchor=o),null!=n&&"focus"!==n||(r=u?Editor.before(e,t,a):Editor.after(e,t,a))&&(i.focus=r),Transforms.setSelection(e,i))},select(e,t){var r=e["selection"];if(t=Editor.range(e,t),r)Transforms.setSelection(e,t);else{if(!Range.isRange(t))throw new Error("When setting the selection and the current selection is `null` you must provide at least an `anchor` and `focus`, but you passed: ".concat(JSON.stringify(t)));e.apply({type:"set_selection",properties:r,newProperties:t})}},setPoint(e,t){var r,n=e["selection"],{edge:o="both"}=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{};n&&("end"===(o="start"===o?Range.isBackward(n)?"focus":"anchor":o)&&(o=Range.isBackward(n)?"anchor":"focus"),{anchor:n,focus:r}=n,Transforms.setSelection(e,{["anchor"===o?"anchor":"focus"]:_objectSpread$1$1(_objectSpread$1$1({},"anchor"===o?n:r),t)}))},setSelection(e,t){var r=e["selection"],n={},o={};if(r){for(var a in t)("anchor"===a&&null!=t.anchor&&!Point.equals(t.anchor,r.anchor)||"focus"===a&&null!=t.focus&&!Point.equals(t.focus,r.focus)||"anchor"!==a&&"focus"!==a&&t[a]!==r[a])&&(n[a]=r[a],o[a]=t[a]);0<Object.keys(n).length&&e.apply({type:"set_selection",properties:n,newProperties:o})}}},TextTransforms={delete(v){var y=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};Editor.withoutNormalizing(v,()=>{var{reverse:c=!1,unit:d="character",distance:e=1,voids:t=!1}=y,{at:r=v.selection,hanging:n=!1}=y;if(r)if(Range.isRange(r)&&Range.isCollapsed(r)&&(r=r.anchor),Point.isPoint(r)&&(i=Editor.void(v,{at:r,mode:"highest"}),!t&&i?([,i]=i,r=i):(i={unit:d,distance:e},r={anchor:r,focus:c?Editor.before(v,r,i)||Editor.start(v,[]):Editor.after(v,r,i)||Editor.end(v,[])},n=!0)),Path.isPath(r))Transforms.removeNodes(v,{at:r,voids:t});else if(!Range.isCollapsed(r)){n||([,d]=Range.edges(r),e=Editor.end(v,[]),Point.equals(d,e)||(r=Editor.unhangRange(v,r,{voids:t})));var f,h,[o,a]=Range.edges(r),i=Editor.above(v,{match:e=>Editor.isBlock(v,e),at:o,voids:t}),n=Editor.above(v,{match:e=>Editor.isBlock(v,e),at:a,voids:t}),d=i&&n&&!Path.equals(i[1],n[1]),e=Path.equals(o.path,a.path),u=t?null:Editor.void(v,{at:o,mode:"highest"}),p=t?null:Editor.void(v,{at:a,mode:"highest"}),E=(!u||(s=Editor.before(v,o))&&i&&Path.isAncestor(i[1],s.path)&&(o=s),!p||(i=Editor.after(v,a))&&n&&Path.isAncestor(n[1],i.path)&&(a=i),[]);for(h of Editor.nodes(v,{at:r,voids:t})){var[D,g]=h;f&&0===Path.compare(g,f)||(!t&&Editor.isVoid(v,D)||!Path.isCommon(g,o.path)&&!Path.isCommon(g,a.path))&&(E.push(h),f=g)}var C,l,s=Array.from(E,e=>{var[,e]=e;return Editor.pathRef(v,e)}),n=Editor.pointRef(v,o),i=Editor.pointRef(v,a);e||u||(r=n.current,[u]=Editor.leaf(v,r),r=r["path"],l=o["offset"],0<(u=u.text.slice(l)).length&&v.apply({type:"remove_text",path:r,offset:l,text:u}));for(C of s){var m=C.unref();Transforms.removeNodes(v,{at:m,voids:t})}p||(r=i.current,[l]=Editor.leaf(v,r),u=r["path"],s=e?o.offset:0,0<(p=l.text.slice(s,a.offset)).length&&v.apply({type:"remove_text",path:u,offset:s,text:p})),!e&&d&&i.current&&n.current&&Transforms.mergeNodes(v,{at:i.current,hanging:!0,voids:t});r=c?n.unref()||i.unref():i.unref()||n.unref();null==y.at&&r&&Transforms.select(v,r)}})},insertFragment(A,B){var b=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{};Editor.withoutNormalizing(A,()=>{var{hanging:e=!1,voids:t=!1}=b,{at:r=A.selection}=b;if(B.length&&r){if(Range.isRange(r))if(e||(r=Editor.unhangRange(A,r)),Range.isCollapsed(r))r=r.anchor;else{var[,e]=Range.edges(r);if(!t&&Editor.void(A,{at:e}))return;e=Editor.pointRef(A,e);Transforms.delete(A,{at:r}),r=e.unref()}else Path.isPath(r)&&(r=Editor.start(A,r));if(t||!Editor.void(A,{at:r})){e=Editor.above(A,{at:r,match:e=>Editor.isInline(A,e),mode:"highest",voids:t});e&&([,e]=e,Editor.isEnd(A,r,e)?r=Editor.after(A,e):Editor.isStart(A,r,e)&&(r=Editor.before(A,e)));var n,[,e]=Editor.above(A,{match:e=>Editor.isBlock(A,e),at:r,voids:t}),o=Editor.isStart(A,r,e),a=Editor.isEnd(A,r,e),c=o&&a,d=!o||a,f=!a,[,h]=Node.first({children:B},[]),[,p]=Node.last({children:B},[]),E=[],D=e=>{var[e,t]=e;return 0!==t.length&&(!!c||!(d&&Path.isAncestor(t,h)&&Element$9.isElement(e)&&!A.isVoid(e)&&!A.isInline(e))&&!(f&&Path.isAncestor(t,p)&&Element$9.isElement(e)&&!A.isVoid(e)&&!A.isInline(e)))};for(n of Node.nodes({children:B},{pass:D}))D(n)&&E.push(n);var i,g=[],u=[],l=[],C=!0,m=!1;for([i]of E)Element$9.isElement(i)&&!A.isInline(i)?(m=!(C=!1),u.push(i)):(C?g:l).push(i);var[o]=Editor.nodes(A,{at:r,match:e=>Text$1.isText(e)||Editor.isInline(A,e),mode:"highest",voids:t}),[,o]=o,v=Editor.isStart(A,r,o),s=Editor.isEnd(A,r,o),a=Editor.pathRef(A,a?Path.next(e):e),y=Editor.pathRef(A,s?Path.next(o):o),e=Editor.pathRef(A,e),r=(Transforms.splitNodes(A,{at:r,match:e=>m?Editor.isBlock(A,e):Text$1.isText(e)||Editor.isInline(A,e),mode:m?"lowest":"highest",voids:t}),Editor.pathRef(A,!v||s?Path.next(o):o));Transforms.insertNodes(A,g,{at:r.current,match:e=>Text$1.isText(e)||Editor.isInline(A,e),mode:"highest",voids:t}),c&&u.length&&Transforms.delete(A,{at:e.unref(),voids:t}),Transforms.insertNodes(A,u,{at:a.current,match:e=>Editor.isBlock(A,e),mode:"lowest",voids:t}),Transforms.insertNodes(A,l,{at:y.current,match:e=>Text$1.isText(e)||Editor.isInline(A,e),mode:"highest",voids:t}),b.at||(v=0<l.length?Path.previous(y.current):0<u.length?Path.previous(a.current):Path.previous(r.current),s=Editor.end(A,v),Transforms.select(A,s)),r.unref(),a.unref(),y.unref()}}})},insertText(n,o){var a=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{};Editor.withoutNormalizing(n,()=>{var{voids:e=!1}=a,{at:t=n.selection}=a;if(t){if(Path.isPath(t)&&(t=Editor.range(n,t)),Range.isRange(t))if(Range.isCollapsed(t))t=t.anchor;else{var r=Range.end(t);if(!e&&Editor.void(n,{at:r}))return;var r=Range.start(t),r=Editor.pointRef(n,r);Transforms.delete(n,{at:t,voids:e}),t=r.unref(),Transforms.setSelection(n,{anchor:t,focus:t})}!e&&Editor.void(n,{at:t})||({path:r,offset:e}=t,0<o.length&&n.apply({type:"insert_text",path:r,offset:e,text:o}))}})}};function ownKeys$a(t,e){var r,n=Object.keys(t);return Object.getOwnPropertySymbols&&(r=Object.getOwnPropertySymbols(t),e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,r)),n}function _objectSpread$a(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?ownKeys$a(Object(r),!0).forEach(function(e){_defineProperty$1(t,e,r[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):ownKeys$a(Object(r)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))})}return t}var Transforms=_objectSpread$a(_objectSpread$a(_objectSpread$a(_objectSpread$a({},GeneralTransforms),NodeTransforms),SelectionTransforms),TextTransforms),direction_1=direction,RTL="֑-߿יִ-﷽ﹰ-ﻼ",LTR="A-Za-zÀ-ÖØ-öø-ʸ̀-֐ࠀ-῿‎Ⰰ-﬜︀-﹯﻽-￿",rtl=new RegExp("^[^"+LTR+"]*["+RTL+"]"),ltr=new RegExp("^[^"+RTL+"]*["+LTR+"]");function direction(e){return e=String(e||""),rtl.test(e)?"rtl":ltr.test(e)?"ltr":"neutral"}function t(e){return"object"==typeof e&&null!=e&&1===e.nodeType}function e(e,t){return(!t||"hidden"!==e)&&"visible"!==e&&"clip"!==e}function n$1(t,r){var n;return(t.clientHeight<t.scrollHeight||t.clientWidth<t.scrollWidth)&&(e((n=getComputedStyle(t,null)).overflowY,r)||e(n.overflowX,r)||!!(r=function(e){if(!e.ownerDocument||!e.ownerDocument.defaultView)return null;try{return e.ownerDocument.defaultView.frameElement}catch(e){return null}}(n=t))&&(r.clientHeight<n.scrollHeight||r.clientWidth<n.scrollWidth))}function r(e,t,r,n,o,a,i,u){return a<e&&t<i||e<a&&i<t?0:a<=e&&u<=r||t<=i&&r<=u?a-e-n:t<i&&u<r||a<e&&r<u?i-t+o:0}function compute(f,e){var h=window,p=e.scrollMode,n=e.block,o=e.inline,E=e.boundary,D=e.skipOverflowHiddenElements,g="function"==typeof E?E:function(e){return e!==E};if(!t(f))throw new TypeError("Invalid target");for(var C=document.scrollingElement||document.documentElement,m=[],a=f;t(a)&&g(a);){if((a=a.parentElement)===C){m.push(a);break}null!=a&&a===document.body&&n$1(a)&&!n$1(document.documentElement)||null!=a&&n$1(a,D)&&m.push(a)}for(var v=h.visualViewport?h.visualViewport.width:innerWidth,y=h.visualViewport?h.visualViewport.height:innerHeight,A=window.scrollX||pageXOffset,B=window.scrollY||pageYOffset,e=f.getBoundingClientRect(),b=e.height,F=e.width,R=e.top,O=e.right,w=e.bottom,T=e.left,i="start"===n||"nearest"===n?R:"end"===n?w:R+b/2,u="center"===o?T+F/2:"end"===o?O:T,P=[],x=0;x<m.length;x++){var l=m[x],s=l.getBoundingClientRect(),S=s.height,_=s.width,N=s.top,k=s.right,I=s.bottom,s=s.left;if("if-needed"===p&&0<=R&&0<=T&&w<=y&&O<=v&&N<=R&&w<=I&&s<=T&&O<=k)return P;var c=getComputedStyle(l),$=parseInt(c.borderLeftWidth,10),M=parseInt(c.borderTopWidth,10),j=parseInt(c.borderRightWidth,10),c=parseInt(c.borderBottomWidth,10),d=0,L=0,H="offsetWidth"in l?l.offsetWidth-l.clientWidth-$-j:0,W="offsetHeight"in l?l.offsetHeight-l.clientHeight-M-c:0;C===l?(d="start"===n?i:"end"===n?i-y:"nearest"===n?r(B,B+y,y,M,c,B+i,B+i+b,b):i-y/2,L="start"===o?u:"center"===o?u-v/2:"end"===o?u-v:r(A,A+v,v,$,j,A+u,A+u+F,F),d=Math.max(0,d+B),L=Math.max(0,L+A)):(d="start"===n?i-N-M:"end"===n?i-I+c+W:"nearest"===n?r(N,I,S,M,c+W,i,i+b,b):i-(N+S/2)+W/2,L="start"===o?u-s-$:"center"===o?u-(s+_/2)+H/2:"end"===o?u-k+j+H:r(s,k,_,$,j+H,u,u+F,F),I=l.scrollLeft,i+=(M=l.scrollTop)-(d=Math.max(0,Math.min(M+d,l.scrollHeight-S+W))),u+=I-(L=Math.max(0,Math.min(I+L,l.scrollWidth-_+H)))),P.push({el:l,top:d,left:L})}return P}function isOptionsObject(e){return e===Object(e)&&0!==Object.keys(e).length}function defaultBehavior(e,n){void 0===n&&(n="auto");var o="scrollBehavior"in document.body.style;e.forEach(function(e){var t=e.el,r=e.top,e=e.left;t.scroll&&o?t.scroll({top:r,left:e,behavior:n}):(t.scrollTop=r,t.scrollLeft=e)})}function getOptions(e){return!1===e?{block:"end",inline:"nearest"}:isOptionsObject(e)?e:{block:"start",inline:"nearest"}}function scrollIntoView(e,t){var r=e.isConnected||e.ownerDocument.documentElement.contains(e);if(isOptionsObject(t)&&"function"==typeof t.behavior)return t.behavior(r?compute(e,t):[]);if(r)return r=getOptions(t),defaultBehavior(compute(e,r),r.behavior)}function unwrapExports(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function createCommonjsModule(e,t){return e(t={exports:{}},t.exports),t.exports}var lib=createCommonjsModule(function(u,e){Object.defineProperty(e,"__esModule",{value:!0});for(var t="undefined"!=typeof window&&/Mac|iPod|iPhone|iPad/.test(window.navigator.platform),p={alt:"altKey",control:"ctrlKey",meta:"metaKey",shift:"shiftKey"},l={add:"+",break:"pause",cmd:"meta",command:"meta",ctl:"control",ctrl:"control",del:"delete",down:"arrowdown",esc:"escape",ins:"insert",left:"arrowleft",mod:t?"meta":"control",opt:"alt",option:"alt",return:"enter",right:"arrowright",space:" ",spacebar:" ",up:"arrowup",win:"meta",windows:"meta"},r={backspace:8,tab:9,enter:13,shift:16,control:17,alt:18,pause:19,capslock:20,escape:27," ":32,pageup:33,pagedown:34,end:35,home:36,arrowleft:37,arrowup:38,arrowright:39,arrowdown:40,insert:45,delete:46,meta:91,numlock:144,scrolllock:145,";":186,"=":187,",":188,"-":189,".":190,"/":191,"`":192,"[":219,"\\":220,"]":221,"'":222},n=1;n<20;n++)r["f"+n]=111+n;function o(e,t,r){!t||"byKey"in t||(r=t,t=null);function n(t){return o.some(function(e){return i(e,t)})}var o=(e=Array.isArray(e)?e:[e]).map(function(e){return a(e,t)});return null==r?n:n(r)}function a(t,e){var r,c=e&&e.byKey,n={},e=(t=t.replace("++","+add")).split("+"),d=e.length;for(r in p)n[p[r]]=!1;var o=!0,t=!1,a=void 0;try{for(var i,u=e[Symbol.iterator]();!(o=(i=u.next()).done);o=!0){var l=i.value,f=l.endsWith("?")&&1<l.length,h=D(l=f?l.slice(0,-1):l),s=p[h];1!==d&&s||(c?n.key=h:n.which=E(l)),s&&(n[s]=!f||null)}}catch(e){t=!0,a=e}finally{try{!o&&u.return&&u.return()}finally{if(t)throw a}}return n}function i(e,t){for(var r in e){var n=e[r],o=void 0;if(null!=n&&((null!=(o="key"===r&&null!=t.key?t.key.toLowerCase():"which"===r?91===n&&93===t.which?91:t.which:t[r])||!1!==n)&&o!==n))return!1}return!0}function E(e){return e=D(e),r[e]||e.toUpperCase().charCodeAt(0)}function D(e){return e=e.toLowerCase(),e=l[e]||e}e.default=o,e.isHotkey=o,e.isCodeHotkey=function(e,t){return o(e,t)},e.isKeyHotkey=function(e,t){return o(e,{byKey:!0},t)},e.parseHotkey=a,e.compareHotkey=i,e.toKeyCode=E,e.toKeyName=D}),lib_3=(unwrapExports(lib),lib.isHotkey,lib.isCodeHotkey,lib.isKeyHotkey);function _defineProperty(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function _objectWithoutPropertiesLoose(e,t){if(null==e)return{};for(var r,n={},o=Object.keys(e),a=0;a<o.length;a++)r=o[a],0<=t.indexOf(r)||(n[r]=e[r]);return n}function _objectWithoutProperties(e,t){if(null==e)return{};var r,n=_objectWithoutPropertiesLoose(e,t);if(Object.getOwnPropertySymbols)for(var o=Object.getOwnPropertySymbols(e),a=0;a<o.length;a++)r=o[a],0<=t.indexOf(r)||Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r]);return n}lib.parseHotkey,lib.compareHotkey,lib.toKeyCode,lib.toKeyName;var String$1=e=>{var{isLast:e,leaf:t,parent:r,text:n}=e,o=useSlateStatic(),a=ReactEditor.findPath(o,n),a=Path.parent(a);return o.isVoid(r)?React.createElement(ZeroWidthString,{length:Node.string(r).length}):""!==t.text||r.children[r.children.length-1]!==n||o.isInline(r)||""!==Editor.string(o,a)?""===t.text?React.createElement(ZeroWidthString,null):e&&"\n"===t.text.slice(-1)?React.createElement(TextString,{isTrailing:!0,text:t.text}):React.createElement(TextString,{text:t.text}):React.createElement(ZeroWidthString,{isLineBreak:!0})},TextString=e=>{var{text:e,isTrailing:t=!1}=e,r=useRef(null),n=useRef(0);return r.current&&r.current.textContent!==e&&(n.current+=1),React.createElement("span",{"data-slate-string":!0,ref:r,key:n.current},e,t?"\n":null)},ZeroWidthString=e=>{var{length:e=0,isLineBreak:t=!1}=e;return React.createElement("span",{"data-slate-zero-width":t?"n":"z","data-slate-length":e},"\ufeff",t?React.createElement("br",null):null)},NODE_TO_INDEX=new WeakMap,NODE_TO_PARENT=new WeakMap,EDITOR_TO_WINDOW=new WeakMap,EDITOR_TO_ELEMENT=new WeakMap,ELEMENT_TO_NODE=new WeakMap,NODE_TO_ELEMENT=new WeakMap,NODE_TO_KEY=new WeakMap,EDITOR_TO_KEY_TO_ELEMENT=new WeakMap,IS_READ_ONLY=new WeakMap,IS_FOCUSED=new WeakMap,EDITOR_TO_ON_CHANGE=new WeakMap,EDITOR_TO_RESTORE_DOM=new WeakMap,PLACEHOLDER_SYMBOL=Symbol("placeholder"),Leaf$2=e=>{var{leaf:e,isLast:t,text:r,parent:n,renderPlaceholder:o,renderLeaf:a=e=>React.createElement(DefaultLeaf,Object.assign({},e))}=e,i=useRef(null),t=(useEffect(()=>{var e=null==i?void 0:i.current,t=document.querySelector('[data-slate-editor="true"]');if(e&&t)return t.style.minHeight="".concat(e.clientHeight,"px"),()=>{t.style.minHeight="auto"}},[i,e]),React.createElement(String$1,{isLast:t,leaf:e,parent:n,text:r}));e[PLACEHOLDER_SYMBOL]&&(n={children:e.placeholder,attributes:{"data-slate-placeholder":!0,style:{position:"absolute",pointerEvents:"none",width:"100%",maxWidth:"100%",display:"block",opacity:"0.333",userSelect:"none",textDecoration:"none"},contentEditable:!1,ref:i}},t=React.createElement(React.Fragment,null,o(n),t));return a({attributes:{"data-slate-leaf":!0},children:t,leaf:e,text:r})},MemoizedLeaf=React.memo(Leaf$2,(e,t)=>t.parent===e.parent&&t.isLast===e.isLast&&t.renderLeaf===e.renderLeaf&&t.renderPlaceholder===e.renderPlaceholder&&t.text===e.text&&Text$1.equals(t.leaf,e.leaf)&&t.leaf[PLACEHOLDER_SYMBOL]===e.leaf[PLACEHOLDER_SYMBOL]),DefaultLeaf=e=>{var{attributes:e,children:t}=e;return React.createElement("span",Object.assign({},e),t)},IS_IOS="undefined"!=typeof navigator&&"undefined"!=typeof window&&/iPad|iPhone|iPod/.test(navigator.userAgent)&&!window.MSStream,IS_APPLE="undefined"!=typeof navigator&&/Mac OS X/.test(navigator.userAgent),IS_ANDROID="undefined"!=typeof navigator&&/Android/.test(navigator.userAgent),IS_FIREFOX="undefined"!=typeof navigator&&/^(?!.*Seamonkey)(?=.*Firefox).*/i.test(navigator.userAgent),IS_SAFARI="undefined"!=typeof navigator&&/Version\/[\d\.]+.*Safari/.test(navigator.userAgent),IS_EDGE_LEGACY="undefined"!=typeof navigator&&/Edge?\/(?:[0-6][0-9]|[0-7][0-8])/i.test(navigator.userAgent),IS_CHROME="undefined"!=typeof navigator&&/Chrome/i.test(navigator.userAgent),IS_CHROME_LEGACY="undefined"!=typeof navigator&&/Chrome?\/(?:[0-7][0-5]|[0-6][0-9])/i.test(navigator.userAgent),IS_FIREFOX_LEGACY="undefined"!=typeof navigator&&/^(?!.*Seamonkey)(?=.*Firefox\/(?:[0-7][0-9]|[0-8][0-6])).*/i.test(navigator.userAgent),IS_QQBROWSER="undefined"!=typeof navigator&&/.*QQBrowser/.test(navigator.userAgent),CAN_USE_DOM=!("undefined"==typeof window||void 0===window.document||void 0===window.document.createElement),HAS_BEFORE_INPUT_SUPPORT=!IS_CHROME_LEGACY&&!IS_EDGE_LEGACY&&"undefined"!=typeof globalThis&&globalThis.InputEvent&&"function"==typeof globalThis.InputEvent.prototype.getTargetRanges,useIsomorphicLayoutEffect=CAN_USE_DOM?useLayoutEffect:useEffect,_excluded$3=["anchor","focus"],_excluded2=["anchor","focus"],shallowCompare=(t,r)=>Object.keys(t).length===Object.keys(r).length&&Object.keys(t).every(e=>r.hasOwnProperty(e)&&t[e]===r[e]),isDecoratorRangeListEqual=(e,t)=>{if(e.length!==t.length)return!1;for(var r=0;r<e.length;r++){var n=e[r],o=t[r],a=_objectWithoutProperties(n,_excluded$3),i=_objectWithoutProperties(o,_excluded2);if(!Range.equals(n,o)||n[PLACEHOLDER_SYMBOL]!==o[PLACEHOLDER_SYMBOL]||!shallowCompare(a,i))return!1}return!0},Text=e=>{for(var{decorations:e,isLast:t,parent:r,renderPlaceholder:c,renderLeaf:d,text:n}=e,o=useSlateStatic(),a=useRef(null),i=Text$1.decorations(n,e),u=ReactEditor.findKey(o,n),l=[],s=0;s<i.length;s++){var f=i[s];l.push(React.createElement(MemoizedLeaf,{isLast:t&&s===i.length-1,key:"".concat(u.id,"-").concat(s),renderPlaceholder:c,leaf:f,text:n,parent:r,renderLeaf:d}))}return useIsomorphicLayoutEffect(()=>{var e=EDITOR_TO_KEY_TO_ELEMENT.get(o);a.current?(null!=e&&e.set(u,a.current),NODE_TO_ELEMENT.set(n,a.current),ELEMENT_TO_NODE.set(a.current,n)):(null!=e&&e.delete(u),NODE_TO_ELEMENT.delete(n))}),React.createElement("span",{"data-slate-node":"text",ref:a},l)},MemoizedText=React.memo(Text,(e,t)=>t.parent===e.parent&&t.isLast===e.isLast&&t.renderLeaf===e.renderLeaf&&t.text===e.text&&isDecoratorRangeListEqual(t.decorations,e.decorations)),Element$8=e=>{var{decorations:e,element:t,renderElement:r=e=>React.createElement(DefaultElement,Object.assign({},e)),renderPlaceholder:n,renderLeaf:o,selection:a}=e,i=useRef(null),u=useSlateStatic(),l=useReadOnly(),s=u.isInline(t),c=ReactEditor.findKey(u,t),e=useChildren({decorations:e,node:t,renderElement:r,renderPlaceholder:n,renderLeaf:o,selection:a}),o={"data-slate-node":"element",ref:i};return s&&(o["data-slate-inline"]=!0),!s&&Editor.hasInlines(u,t)&&(a=Node.string(t),"rtl"===(a=direction_1(a))&&(o.dir=a)),Editor.isVoid(u,t)&&(o["data-slate-void"]=!0,!l&&s&&(o.contentEditable=!1),a=s?"span":"div",[[s]]=Node.texts(t),e=l?null:React.createElement(a,{"data-slate-spacer":!0,style:{height:"0",color:"transparent",outline:"none",position:"absolute"}},React.createElement(MemoizedText,{renderPlaceholder:n,decorations:[],isLast:!1,parent:t,text:s})),NODE_TO_INDEX.set(s,0),NODE_TO_PARENT.set(s,t)),useIsomorphicLayoutEffect(()=>{var e=EDITOR_TO_KEY_TO_ELEMENT.get(u);i.current?(null!=e&&e.set(c,i.current),NODE_TO_ELEMENT.set(t,i.current),ELEMENT_TO_NODE.set(i.current,t)):(null!=e&&e.delete(c),NODE_TO_ELEMENT.delete(t))}),r({attributes:o,children:e,element:t})},MemoizedElement=React.memo(Element$8,(e,t)=>e.element===t.element&&e.renderElement===t.renderElement&&e.renderLeaf===t.renderLeaf&&isDecoratorRangeListEqual(e.decorations,t.decorations)&&(e.selection===t.selection||!!e.selection&&!!t.selection&&Range.equals(e.selection,t.selection))),DefaultElement=e=>{var{attributes:e,children:t,element:r}=e,r=useSlateStatic().isInline(r)?"span":"div";return React.createElement(r,Object.assign({},e,{style:{position:"relative"}}),t)},EditorContext=createContext(null),useSlateStatic=()=>{var e=useContext(EditorContext);if(!e)throw new Error("The `useSlateStatic` hook must be used inside the <Slate> component's context.");return e},DecorateContext=createContext(()=>[]),useDecorate=()=>useContext(DecorateContext),SelectedContext=createContext(!1),useSelected=()=>useContext(SelectedContext),useChildren=c=>{for(var{decorations:d,node:e,renderElement:f,renderPlaceholder:t,renderLeaf:r,selection:n}=c,h=useDecorate(),o=useSlateStatic(),p=ReactEditor.findPath(o,e),a=[],E=Element$9.isElement(e)&&!o.isInline(e)&&Editor.hasInlines(o,e),i=0;i<e.children.length;i++){var D,g=p.concat(i),u=e.children[i],l=ReactEditor.findKey(o,u),C=Editor.range(o,g),m=n&&Range.intersection(C,n),s=h([u,g]);for(D of d){var v=Range.intersection(D,C);v&&s.push(v)}Element$9.isElement(u)?a.push(React.createElement(SelectedContext.Provider,{key:"provider-".concat(l.id),value:!!m},React.createElement(MemoizedElement,{decorations:s,element:u,key:l.id,renderElement:f,renderPlaceholder:t,renderLeaf:r,selection:m}))):a.push(React.createElement(MemoizedText,{decorations:s,key:l.id,isLast:E&&i===e.children.length-1,parent:e,renderPlaceholder:t,renderLeaf:r,text:u})),NODE_TO_INDEX.set(u,i),NODE_TO_PARENT.set(u,e)}return a},HOTKEYS={bold:"mod+b",compose:["down","left","right","up","backspace","enter"],moveBackward:"left",moveForward:"right",moveWordBackward:"ctrl+left",moveWordForward:"ctrl+right",deleteBackward:"shift?+backspace",deleteForward:"shift?+delete",extendBackward:"shift+left",extendForward:"shift+right",italic:"mod+i",splitBlock:"shift?+enter",undo:"mod+z"},APPLE_HOTKEYS={moveLineBackward:"opt+up",moveLineForward:"opt+down",moveWordBackward:"opt+left",moveWordForward:"opt+right",deleteBackward:["ctrl+backspace","ctrl+h"],deleteForward:["ctrl+delete","ctrl+d"],deleteLineBackward:"cmd+shift?+backspace",deleteLineForward:["cmd+shift?+delete","ctrl+k"],deleteWordBackward:"opt+shift?+backspace",deleteWordForward:"opt+shift?+delete",extendLineBackward:"opt+shift+up",extendLineForward:"opt+shift+down",redo:"cmd+shift+z",transposeCharacter:"ctrl+t"},WINDOWS_HOTKEYS={deleteWordBackward:"ctrl+shift?+backspace",deleteWordForward:"ctrl+shift?+delete",redo:["ctrl+y","ctrl+shift+z"]},create=e=>{var t=HOTKEYS[e],r=APPLE_HOTKEYS[e],e=WINDOWS_HOTKEYS[e],n=t&&lib_3(t),o=r&&lib_3(r),a=e&&lib_3(e);return e=>!(!n||!n(e))||(!!(IS_APPLE&&o&&o(e))||!(IS_APPLE||!a||!a(e)))},Hotkeys={isBold:create("bold"),isCompose:create("compose"),isMoveBackward:create("moveBackward"),isMoveForward:create("moveForward"),isDeleteBackward:create("deleteBackward"),isDeleteForward:create("deleteForward"),isDeleteLineBackward:create("deleteLineBackward"),isDeleteLineForward:create("deleteLineForward"),isDeleteWordBackward:create("deleteWordBackward"),isDeleteWordForward:create("deleteWordForward"),isExtendBackward:create("extendBackward"),isExtendForward:create("extendForward"),isExtendLineBackward:create("extendLineBackward"),isExtendLineForward:create("extendLineForward"),isItalic:create("italic"),isMoveLineBackward:create("moveLineBackward"),isMoveLineForward:create("moveLineForward"),isMoveWordBackward:create("moveWordBackward"),isMoveWordForward:create("moveWordForward"),isRedo:create("redo"),isSplitBlock:create("splitBlock"),isTransposeCharacter:create("transposeCharacter"),isUndo:create("undo")},ReadOnlyContext=createContext(!1),useReadOnly=()=>useContext(ReadOnlyContext),SlateContext=createContext(null),useSlate=()=>{var e=useContext(SlateContext);if(!e)throw new Error("The `useSlate` hook must be used inside the <Slate> component's context.");var[e]=e;return e},getDefaultView=e=>e&&e.ownerDocument&&e.ownerDocument.defaultView||null,isDOMComment=e=>isDOMNode(e)&&8===e.nodeType,isDOMElement=e=>isDOMNode(e)&&1===e.nodeType,isDOMNode=e=>{var t=getDefaultView(e);return!!t&&e instanceof t.Node},isDOMSelection=e=>{var t=e&&e.anchorNode&&getDefaultView(e.anchorNode);return!!t&&e instanceof t.Selection},isDOMText=e=>isDOMNode(e)&&3===e.nodeType,isPlainTextOnlyPaste=e=>e.clipboardData&&""!==e.clipboardData.getData("text/plain")&&1===e.clipboardData.types.length,normalizeDOMPoint=e=>{var[t,e]=e;if(isDOMElement(t)&&t.childNodes.length){var r=e===t.childNodes.length,n=r?e-1:e;for([t,n]=getEditableChildAndIndex(t,n,r?"backward":"forward"),r=n<e;isDOMElement(t)&&t.childNodes.length;)var o=r?t.childNodes.length-1:0,t=getEditableChild(t,o,r?"backward":"forward");e=r&&null!=t.textContent?t.textContent.length:0}return[t,e]},hasShadowRoot=()=>!(!window.document.activeElement||!window.document.activeElement.shadowRoot),getEditableChildAndIndex=(e,t,r)=>{for(var n=e["childNodes"],o=n[t],a=t,i=!1,u=!1;(isDOMComment(o)||isDOMElement(o)&&0===o.childNodes.length||isDOMElement(o)&&"false"===o.getAttribute("contenteditable"))&&(!i||!u);)a>=n.length?(i=!0,a=t-1,r="backward"):a<0?(u=!0,a=t+1,r="forward"):(o=n[a],t=a,a+="forward"===r?1:-1);return[o,t]},getEditableChild=(e,t,r)=>{var[e]=getEditableChildAndIndex(e,t,r);return e},getPlainText=e=>{var t="";if(isDOMText(e)&&e.nodeValue)return e.nodeValue;if(isDOMElement(e)){for(var r of Array.from(e.childNodes))t+=getPlainText(r);var n=getComputedStyle(e).getPropertyValue("display");"block"!==n&&"list"!==n&&"BR"!==e.tagName||(t+="\n")}return t},catchSlateFragment=/data-slate-fragment="(.+?)"/m,getSlateFragmentAttribute=e=>{var[,e]=e.getData("text/html").match(catchSlateFragment)||[];return e},getClipboardData=t=>{if(!t.getData("application/x-slate-fragment")){var r,e=getSlateFragmentAttribute(t);if(e)return r=new DataTransfer,t.types.forEach(e=>{r.setData(e,t.getData(e))}),r.setData("application/x-slate-fragment",e),r}return t},AS_NATIVE=new WeakMap,NATIVE_OPERATIONS=new WeakMap,asNative=function(e,t){var r=(2<arguments.length&&void 0!==arguments[2]?arguments[2]:{})["onFlushed"],n=AS_NATIVE.get(e);AS_NATIVE.set(e,!0);try{t()}finally{void 0!==n&&AS_NATIVE.set(e,n)}NATIVE_OPERATIONS.get(e)||null!=r&&r()},flushNativeEvents=t=>{var e=NATIVE_OPERATIONS.get(t);NATIVE_OPERATIONS.delete(t),e&&Editor.withoutNormalizing(t,()=>{e.forEach(e=>{t.apply(e)})})},_excluded$2=["autoFocus","decorate","onDOMBeforeInput","placeholder","readOnly","renderElement","renderLeaf","renderPlaceholder","scrollSelectionIntoView","style","as"];function ownKeys$2(t,e){var r,n=Object.keys(t);return Object.getOwnPropertySymbols&&(r=Object.getOwnPropertySymbols(t),e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,r)),n}function _objectSpread$2(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?ownKeys$2(Object(r),!0).forEach(function(e){_defineProperty(t,e,r[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):ownKeys$2(Object(r)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))})}return t}var Children=e=>React.createElement(React.Fragment,null,useChildren(e)),Editable$1=e=>{var{autoFocus:t,decorate:o=defaultDecorate,onDOMBeforeInput:d,placeholder:f,readOnly:u=!1,renderElement:h,renderLeaf:p,renderPlaceholder:E=e=>React.createElement(DefaultPlaceholder,Object.assign({},e)),scrollSelectionIntoView:D=defaultScrollSelectionIntoView,style:g={},as:C="div"}=e,a=_objectWithoutProperties(e,_excluded$2),l=useSlate(),[e,s]=useState(!1),i=useRef(null),c=(IS_READ_ONLY.set(l,u),useMemo(()=>({isComposing:!1,hasInsertPrefixInCompositon:!1,isDraggingInternally:!1,isUpdatingSelection:!1,latestElement:null}),[])),r=(useIsomorphicLayoutEffect(()=>{var e=(i.current&&(e=getDefaultView(i.current))?(EDITOR_TO_WINDOW.set(l,e),EDITOR_TO_ELEMENT.set(l,i.current),NODE_TO_ELEMENT.set(l,i.current),ELEMENT_TO_NODE.set(i.current,l)):NODE_TO_ELEMENT.delete(l),l)["selection"],t=ReactEditor.findDocumentOrShadowRoot(l).getSelection();if(!c.isComposing&&t&&ReactEditor.isFocused(l)){var r="None"!==t.type;if(e||r){var n,o=EDITOR_TO_ELEMENT.get(l),a=!1;if(o.contains(t.anchorNode)&&o.contains(t.focusNode)&&(a=!0),r&&a&&e){o=ReactEditor.toSlateRange(l,t,{exactMatch:!1});if(o&&Range.equals(o,e))return}!e||ReactEditor.hasRange(l,e)?(c.isUpdatingSelection=!0,(n=e&&ReactEditor.toDOMRange(l,e))?(Range.isBackward(e)?t.setBaseAndExtent(n.endContainer,n.endOffset,n.startContainer,n.startOffset):t.setBaseAndExtent(n.startContainer,n.startOffset,n.endContainer,n.endOffset),D(l,n)):t.removeAllRanges(),setTimeout(()=>{n&&IS_FIREFOX&&ReactEditor.toDOMNode(l,l).focus(),c.isUpdatingSelection=!1})):l.selection=ReactEditor.toSlateRange(l,t,{exactMatch:!1})}}}),useEffect(()=>{i.current&&t&&i.current.focus()},[t]),useCallback(e=>{if(!u&&hasEditableTarget(l,e.target)&&!isDOMEventHandled(e,d)){var t=l["selection"],r=e["inputType"],n=e.dataTransfer||e.data||void 0;if("insertCompositionText"!==r&&"deleteCompositionText"!==r){var o,a=!1;if("insertText"===r&&t&&Range.isCollapsed(t)&&e.data&&1===e.data.length&&/[a-z ]/i.test(e.data)&&0!==t.anchor.offset&&(a=!0,l.marks&&(a=!1),o=t["anchor"],(o=Editor.above(l,{at:o,match:e=>Editor.isInline(l,e),mode:"highest"}))&&([,o]=o,Editor.isEnd(l,t.anchor,o)&&(a=!1))),a||e.preventDefault(),r.startsWith("delete")&&!r.startsWith("deleteBy")||([o]=e.getTargetRanges(),o&&(o=ReactEditor.toSlateRange(l,o,{exactMatch:!1}),t&&Range.equals(t,o)||Transforms.select(l,o))),t&&Range.isExpanded(t)&&r.startsWith("delete"))return o=r.endsWith("Backward")?"backward":"forward",void Editor.deleteFragment(l,{direction:o});switch(r){case"deleteByComposition":case"deleteByCut":case"deleteByDrag":Editor.deleteFragment(l);break;case"deleteContent":case"deleteContentForward":Editor.deleteForward(l);break;case"deleteContentBackward":Editor.deleteBackward(l);break;case"deleteEntireSoftLine":Editor.deleteBackward(l,{unit:"line"}),Editor.deleteForward(l,{unit:"line"});break;case"deleteHardLineBackward":Editor.deleteBackward(l,{unit:"block"});break;case"deleteSoftLineBackward":Editor.deleteBackward(l,{unit:"line"});break;case"deleteHardLineForward":Editor.deleteForward(l,{unit:"block"});break;case"deleteSoftLineForward":Editor.deleteForward(l,{unit:"line"});break;case"deleteWordBackward":Editor.deleteBackward(l,{unit:"word"});break;case"deleteWordForward":Editor.deleteForward(l,{unit:"word"});break;case"insertLineBreak":case"insertParagraph":Editor.insertBreak(l);break;case"insertFromComposition":case"insertFromDrop":case"insertFromPaste":case"insertFromYank":case"insertReplacementText":case"insertText":"insertFromComposition"===r&&(c.isComposing&&s(!1),c.isComposing=!1);var i=ReactEditor.getWindow(l);n instanceof i.DataTransfer?ReactEditor.insertData(l,n):"string"==typeof n&&(a?asNative(l,()=>Editor.insertText(l,n),{onFlushed:()=>e.preventDefault()}):Editor.insertText(l,n))}}}},[u,d])),m=(useIsomorphicLayoutEffect(()=>(i.current&&HAS_BEFORE_INPUT_SUPPORT&&i.current.addEventListener("beforeinput",r),()=>{i.current&&HAS_BEFORE_INPUT_SUPPORT&&i.current.removeEventListener("beforeinput",r)}),[r]),useCallback(throttle(()=>{if(!(u||c.isComposing||c.isUpdatingSelection||c.isDraggingInternally)){var e=ReactEditor.findDocumentOrShadowRoot(l),t=e["activeElement"],r=ReactEditor.toDOMNode(l,l),e=e.getSelection();if(t===r?(c.latestElement=t,IS_FOCUSED.set(l,!0)):IS_FOCUSED.delete(l),!e)return Transforms.deselect(l);var{anchorNode:r,focusNode:t}=e,r=hasEditableTarget(l,r)||isTargetInsideVoid(l,r),t=hasEditableTarget(l,t)||isTargetInsideVoid(l,t);r&&t?(r=ReactEditor.toSlateRange(l,e,{exactMatch:!1}),Transforms.select(l,r)):Transforms.deselect(l)}},100),[u])),n=useCallback(()=>setTimeout(m),[m]),v=(useIsomorphicLayoutEffect(()=>{var e=ReactEditor.getWindow(l);return e.document.addEventListener("selectionchange",n),()=>{e.document.removeEventListener("selectionchange",n)}},[n]),o([l,[]]));return f&&1===l.children.length&&1===Array.from(Node.texts(l)).length&&""===Node.string(l)&&!e&&(e=Editor.start(l,[]),v.push({[PLACEHOLDER_SYMBOL]:!0,placeholder:f,anchor:e,focus:e})),React.createElement(ReadOnlyContext.Provider,{value:u},React.createElement(DecorateContext.Provider,{value:o},React.createElement(C,Object.assign({"data-gramm":!1,role:u?void 0:"textbox"},a,{spellCheck:!!HAS_BEFORE_INPUT_SUPPORT&&a.spellCheck,autoCorrect:HAS_BEFORE_INPUT_SUPPORT?a.autoCorrect:"false",autoCapitalize:HAS_BEFORE_INPUT_SUPPORT?a.autoCapitalize:"false","data-slate-editor":!0,"data-slate-node":"value",contentEditable:!u||void 0,suppressContentEditableWarning:!0,ref:i,style:_objectSpread$2({position:"relative",outline:"none",whiteSpace:"pre-wrap",wordWrap:"break-word"},g),onBeforeInput:useCallback(e=>{HAS_BEFORE_INPUT_SUPPORT||u||isEventHandled(e,a.onBeforeInput)||!hasEditableTarget(l,e.target)||(e.preventDefault(),c.isComposing||(e=e.data,Editor.insertText(l,e)))},[u]),onInput:useCallback(e=>{flushNativeEvents(l)},[]),onBlur:useCallback(e=>{if(!u&&!c.isUpdatingSelection&&hasEditableTarget(l,e.target)&&!isEventHandled(e,a.onBlur)){var t=ReactEditor.findDocumentOrShadowRoot(l);if(c.latestElement!==t.activeElement){var e=e["relatedTarget"],r=ReactEditor.toDOMNode(l,l);if(!(e===r||isDOMElement(e)&&e.hasAttribute("data-slate-spacer"))){if(null!=e&&isDOMNode(e)&&ReactEditor.hasDOMNode(l,e)){r=ReactEditor.toSlateNode(l,e);if(Element$9.isElement(r)&&!l.isVoid(r))return}!IS_SAFARI||null!=(e=t.getSelection())&&e.removeAllRanges(),IS_FOCUSED.delete(l)}}}},[u,a.onBlur]),onClick:useCallback(e=>{var t,r;!u&&hasTarget(l,e.target)&&!isEventHandled(e,a.onClick)&&isDOMNode(e.target)&&(e=ReactEditor.toSlateNode(l,e.target),e=ReactEditor.findPath(l,e),t=Editor.start(l,e),e=Editor.end(l,e),r=Editor.void(l,{at:t}),e=Editor.void(l,{at:e}),r&&e&&Path.equals(r[1],e[1])&&(r=Editor.range(l,t),Transforms.select(l,r)))},[u,a.onClick]),onCompositionEnd:useCallback(e=>{var t;hasEditableTarget(l,e.target)&&!isEventHandled(e,a.onCompositionEnd)&&(c.isComposing&&s(!1),c.isComposing=!1,IS_SAFARI||IS_FIREFOX_LEGACY||IS_IOS||IS_QQBROWSER||!e.data||Editor.insertText(l,e.data),l.selection&&Range.isCollapsed(l.selection)&&(e=l.selection.anchor.path,t=Node.leaf(l,e),c.hasInsertPrefixInCompositon&&(c.hasInsertPrefixInCompositon=!1,Editor.withoutNormalizing(l,()=>{var e=t.text.replace(/^\uFEFF/,"");Transforms.delete(l,{distance:t.text.length,reverse:!0}),Transforms.insertText(l,e)}))))},[a.onCompositionEnd]),onCompositionUpdate:useCallback(e=>{hasEditableTarget(l,e.target)&&!isEventHandled(e,a.onCompositionUpdate)&&(c.isComposing||s(!0),c.isComposing=!0)},[a.onCompositionUpdate]),onCompositionStart:useCallback(e=>{var t,r;hasEditableTarget(l,e.target)&&!isEventHandled(e,a.onCompositionStart)&&({selection:e,marks:t}=l,e&&(Range.isExpanded(e)?Editor.deleteFragment(l):((r=Editor.above(l,{match:e=>Editor.isInline(l,e),mode:"highest"}))&&([,r]=r,Editor.isEnd(l,e.anchor,r)&&(e=Editor.after(l,r),Transforms.setSelection(l,{anchor:e,focus:e}))),t&&(c.hasInsertPrefixInCompositon=!0,Transforms.insertNodes(l,_objectSpread$2({text:"\ufeff"},t),{select:!0})))))},[a.onCompositionStart]),onCopy:useCallback(e=>{hasEditableTarget(l,e.target)&&!isEventHandled(e,a.onCopy)&&(e.preventDefault(),ReactEditor.setFragmentData(l,e.clipboardData))},[a.onCopy]),onCut:useCallback(e=>{u||!hasEditableTarget(l,e.target)||isEventHandled(e,a.onCut)||(e.preventDefault(),ReactEditor.setFragmentData(l,e.clipboardData),e=l["selection"],e&&(Range.isExpanded(e)?Editor.deleteFragment(l):(e=Node.parent(l,e.anchor.path),Editor.isVoid(l,e)&&Transforms.delete(l))))},[u,a.onCut]),onDragOver:useCallback(e=>{var t;hasTarget(l,e.target)&&!isEventHandled(e,a.onDragOver)&&(t=ReactEditor.toSlateNode(l,e.target),Editor.isVoid(l,t)&&e.preventDefault())},[a.onDragOver]),onDragStart:useCallback(e=>{var t,r;hasTarget(l,e.target)&&!isEventHandled(e,a.onDragStart)&&(r=ReactEditor.toSlateNode(l,e.target),t=ReactEditor.findPath(l,r),(Editor.isVoid(l,r)||Editor.void(l,{at:t,voids:!0}))&&(r=Editor.range(l,t),Transforms.select(l,r)),c.isDraggingInternally=!0,ReactEditor.setFragmentData(l,e.dataTransfer))},[a.onDragStart]),onDrop:useCallback(e=>{var t,r;u||!hasTarget(l,e.target)||isEventHandled(e,a.onDrop)||(e.preventDefault(),t=l.selection,r=ReactEditor.findEventRange(l,e),e=e.dataTransfer,Transforms.select(l,r),c.isDraggingInternally&&(t&&Transforms.delete(l,{at:t}),c.isDraggingInternally=!1),ReactEditor.insertData(l,e),ReactEditor.isFocused(l)||ReactEditor.focus(l))},[u,a.onDrop]),onDragEnd:useCallback(e=>{!u&&c.isDraggingInternally&&hasTarget(l,e.target)&&!isEventHandled(e,a.onDragEnd)&&(c.isDraggingInternally=!1)},[u,a.onDragEnd]),onFocus:useCallback(e=>{var t,r;u||c.isUpdatingSelection||!hasEditableTarget(l,e.target)||isEventHandled(e,a.onFocus)||(t=ReactEditor.toDOMNode(l,l),r=ReactEditor.findDocumentOrShadowRoot(l),c.latestElement=r.activeElement,IS_FIREFOX&&e.target!==t?t.focus():IS_FOCUSED.set(l,!0))},[u,a.onFocus]),onKeyDown:useCallback(e=>{if(!u&&!c.isComposing&&hasEditableTarget(l,e.target)&&!isEventHandled(e,a.onKeyDown)){var t,r=e["nativeEvent"],n=l["selection"],o=l.children[null!==n?n.focus.path[0]:0],o="rtl"===direction_1(Node.string(o));if(Hotkeys.isRedo(r))return e.preventDefault(),void("function"==typeof(t=l).redo&&t.redo());if(Hotkeys.isUndo(r))return e.preventDefault(),void("function"==typeof(t=l).undo&&t.undo());if(Hotkeys.isMoveLineBackward(r))return e.preventDefault(),void Transforms.move(l,{unit:"line",reverse:!0});if(Hotkeys.isMoveLineForward(r))return e.preventDefault(),void Transforms.move(l,{unit:"line"});if(Hotkeys.isExtendLineBackward(r))return e.preventDefault(),void Transforms.move(l,{unit:"line",edge:"focus",reverse:!0});if(Hotkeys.isExtendLineForward(r))return e.preventDefault(),void Transforms.move(l,{unit:"line",edge:"focus"});if(Hotkeys.isMoveBackward(r))return e.preventDefault(),void(n&&Range.isCollapsed(n)?Transforms.move(l,{reverse:!o}):Transforms.collapse(l,{edge:"start"}));if(Hotkeys.isMoveForward(r))return e.preventDefault(),void(n&&Range.isCollapsed(n)?Transforms.move(l,{reverse:o}):Transforms.collapse(l,{edge:"end"}));if(Hotkeys.isMoveWordBackward(r))return e.preventDefault(),n&&Range.isExpanded(n)&&Transforms.collapse(l,{edge:"focus"}),void Transforms.move(l,{unit:"word",reverse:!o});if(Hotkeys.isMoveWordForward(r))return e.preventDefault(),n&&Range.isExpanded(n)&&Transforms.collapse(l,{edge:"focus"}),void Transforms.move(l,{unit:"word",reverse:o});if(HAS_BEFORE_INPUT_SUPPORT)(IS_CHROME||IS_SAFARI)&&n&&(Hotkeys.isDeleteBackward(r)||Hotkeys.isDeleteForward(r))&&Range.isCollapsed(n)&&(t=Node.parent(l,n.anchor.path),Element$9.isElement(t)&&Editor.isVoid(l,t)&&Editor.isInline(l,t)&&(e.preventDefault(),Editor.deleteBackward(l,{unit:"block"})));else{if(!(Hotkeys.isBold(r)||Hotkeys.isItalic(r)||Hotkeys.isTransposeCharacter(r)))return Hotkeys.isSplitBlock(r)?(e.preventDefault(),void Editor.insertBreak(l)):Hotkeys.isDeleteBackward(r)?(e.preventDefault(),void(n&&Range.isExpanded(n)?Editor.deleteFragment(l,{direction:"backward"}):Editor.deleteBackward(l))):Hotkeys.isDeleteForward(r)?(e.preventDefault(),void(n&&Range.isExpanded(n)?Editor.deleteFragment(l,{direction:"forward"}):Editor.deleteForward(l))):Hotkeys.isDeleteLineBackward(r)?(e.preventDefault(),void(n&&Range.isExpanded(n)?Editor.deleteFragment(l,{direction:"backward"}):Editor.deleteBackward(l,{unit:"line"}))):Hotkeys.isDeleteLineForward(r)?(e.preventDefault(),void(n&&Range.isExpanded(n)?Editor.deleteFragment(l,{direction:"forward"}):Editor.deleteForward(l,{unit:"line"}))):Hotkeys.isDeleteWordBackward(r)?(e.preventDefault(),void(n&&Range.isExpanded(n)?Editor.deleteFragment(l,{direction:"backward"}):Editor.deleteBackward(l,{unit:"word"}))):void(Hotkeys.isDeleteWordForward(r)&&(e.preventDefault(),n&&Range.isExpanded(n)?Editor.deleteFragment(l,{direction:"forward"}):Editor.deleteForward(l,{unit:"word"})));e.preventDefault()}}},[u,a.onKeyDown]),onPaste:useCallback(e=>{u||!hasEditableTarget(l,e.target)||isEventHandled(e,a.onPaste)||HAS_BEFORE_INPUT_SUPPORT&&!isPlainTextOnlyPaste(e.nativeEvent)||(e.preventDefault(),ReactEditor.insertData(l,e.clipboardData))},[u,a.onPaste])}),React.createElement(Children,{decorations:v,node:l,renderElement:h,renderPlaceholder:E,renderLeaf:p,selection:l.selection}))))},DefaultPlaceholder=e=>{var{attributes:e,children:t}=e;return React.createElement("span",Object.assign({},e),t)},defaultDecorate=()=>[],defaultScrollSelectionIntoView=(e,t)=>{var r=t.startContainer.parentElement;r.getBoundingClientRect=t.getBoundingClientRect.bind(t),scrollIntoView(r,{scrollMode:"if-needed"}),delete r.getBoundingClientRect},hasTarget=(e,t)=>isDOMNode(t)&&ReactEditor.hasDOMNode(e,t),hasEditableTarget=(e,t)=>isDOMNode(t)&&ReactEditor.hasDOMNode(e,t,{editable:!0}),isTargetInsideVoid=(e,t)=>{t=hasTarget(e,t)&&ReactEditor.toSlateNode(e,t);return Editor.isVoid(e,t)},isEventHandled=(e,t)=>{if(!t)return!1;t=t(e);return null!=t?t:e.isDefaultPrevented()||e.isPropagationStopped()},isDOMEventHandled=(e,t)=>{if(!t)return!1;t=t(e);return null!=t?t:e.defaultPrevented},n=0;class Key{constructor(){this.id="".concat(n++)}}var ReactEditor={getWindow(e){e=EDITOR_TO_WINDOW.get(e);if(!e)throw new Error("Unable to find a host window element for this editor");return e},findKey(e,t){var r=NODE_TO_KEY.get(t);return r||(r=new Key,NODE_TO_KEY.set(t,r)),r},findPath(e,t){for(var r=[],n=t;;){var o=NODE_TO_PARENT.get(n);if(null==o){if(Editor.isEditor(n))return r;break}var a=NODE_TO_INDEX.get(n);if(null==a)break;r.unshift(a),n=o}throw new Error("Unable to find the path for Slate node: ".concat(JSON.stringify(t)))},findDocumentOrShadowRoot(e){var e=ReactEditor.toDOMNode(e,e),t=e.getRootNode();return(t instanceof Document||t instanceof ShadowRoot)&&null!=t.getSelection?t:e.ownerDocument},isFocused(e){return!!IS_FOCUSED.get(e)},isReadOnly(e){return!!IS_READ_ONLY.get(e)},blur(e){var t=ReactEditor.toDOMNode(e,e),r=ReactEditor.findDocumentOrShadowRoot(e);IS_FOCUSED.set(e,!1),r.activeElement===t&&t.blur()},focus(e){var t=ReactEditor.toDOMNode(e,e),r=ReactEditor.findDocumentOrShadowRoot(e);IS_FOCUSED.set(e,!0),r.activeElement!==t&&t.focus({preventScroll:!0})},deselect(e){ReactEditor.toDOMNode(e,e);var t=e["selection"],r=ReactEditor.findDocumentOrShadowRoot(e).getSelection();r&&0<r.rangeCount&&r.removeAllRanges(),t&&Transforms.deselect(e)},hasDOMNode(e,t){var r,{editable:n=!1}=2<arguments.length&&void 0!==arguments[2]?arguments[2]:{},o=ReactEditor.toDOMNode(e,e);try{r=isDOMElement(t)?t:t.parentElement}catch(e){if(!e.message.includes('Permission denied to access property "nodeType"'))throw e}return!!r&&(r.closest("[data-slate-editor]")===o&&(!n||r.isContentEditable||!!r.getAttribute("data-slate-zero-width")))},insertData(e,t){e.insertData(t)},setFragmentData(e,t){e.setFragmentData(t)},toDOMNode(e,t){var r=EDITOR_TO_KEY_TO_ELEMENT.get(e),r=Editor.isEditor(t)?EDITOR_TO_ELEMENT.get(e):null==r?void 0:r.get(ReactEditor.findKey(e,t));if(!r)throw new Error("Cannot resolve a DOM node from Slate node: ".concat(JSON.stringify(t)));return r},toDOMPoint(e,t){var r,[n]=Editor.node(e,t.path),n=ReactEditor.toDOMNode(e,n),o=(Editor.void(e,{at:t})&&(t={path:t.path,offset:0}),0);for(r of Array.from(n.querySelectorAll("[data-slate-string], [data-slate-zero-width]"))){var a=r.childNodes[0];if(null!=a&&null!=a.textContent){var i=a.textContent["length"],u=r.getAttribute("data-slate-length"),u=o+(null==u?i:parseInt(u,10));if(t.offset<=u){var l=[a,Math.min(i,Math.max(0,t.offset-o))];break}o=u}}if(!l)throw new Error("Cannot resolve a DOM point from Slate point: ".concat(JSON.stringify(t)));return l},toDOMRange(e,t){var{anchor:r,focus:n}=t,o=Range.isBackward(t),r=ReactEditor.toDOMPoint(e,r),t=Range.isCollapsed(t)?r:ReactEditor.toDOMPoint(e,n),n=ReactEditor.getWindow(e).document.createRange(),[e,a]=o?t:r,[o,r]=o?r:t,t=!!(isDOMElement(e)?e:e.parentElement).getAttribute("data-slate-zero-width"),i=!!(isDOMElement(o)?o:o.parentElement).getAttribute("data-slate-zero-width");return n.setStart(e,t?1:a),n.setEnd(o,i?1:r),n},toSlateNode(e,t){var t=isDOMElement(t)?t:t.parentElement,r=(t=t&&!t.hasAttribute("data-slate-node")?t.closest("[data-slate-node]"):t)?ELEMENT_TO_NODE.get(t):null;if(!r)throw new Error("Cannot resolve a Slate node from DOM node: ".concat(t));return r},findEventRange(e,t){var{clientX:r,clientY:n,target:o}=t="nativeEvent"in t?t.nativeEvent:t;if(null==r||null==n)throw new Error("Cannot resolve a Slate range from a DOM event: ".concat(t));var a,i=ReactEditor.toSlateNode(e,t.target),u=ReactEditor.findPath(e,i);if(Editor.isVoid(e,i)){o=o.getBoundingClientRect(),i=e.isInline(i)?r-o.left<o.left+o.width-r:n-o.top<o.top+o.height-n,o=Editor.point(e,u,{edge:i?"start":"end"}),u=i?Editor.before(e,o):Editor.after(e,o);if(u)return Editor.range(e,u)}i=window.document;if(i.caretRangeFromPoint?a=i.caretRangeFromPoint(r,n):(o=i.caretPositionFromPoint(r,n))&&((a=i.createRange()).setStart(o.offsetNode,o.offset),a.setEnd(o.offsetNode,o.offset)),!a)throw new Error("Cannot resolve a Slate range from a DOM event: ".concat(t));return ReactEditor.toSlateRange(e,a,{exactMatch:!1})},toSlatePoint(e,t,c){var r,n,o,a,d,[i,f]=c?t:normalizeDOMPoint(t),u=i.parentNode,l=null,s=0;if(u&&(n=u.closest('[data-slate-void="true"]'),a=null,(o=u.closest("[data-slate-leaf]"))?(l=o.closest('[data-slate-node="text"]'),(d=ReactEditor.getWindow(e).document.createRange()).setStart(l,0),d.setEnd(i,f),i=d.cloneContents(),[...Array.prototype.slice.call(i.querySelectorAll("[data-slate-zero-width]")),...Array.prototype.slice.call(i.querySelectorAll("[contenteditable=false]"))].forEach(e=>{e.parentNode.removeChild(e)}),s=i.textContent.length,a=l):n&&((o=n.querySelector("[data-slate-leaf]"))?(l=o.closest('[data-slate-node="text"]'),s=(a=o).textContent.length,a.querySelectorAll("[data-slate-zero-width]").forEach(e=>{s-=e.textContent.length})):s=1),a&&s===a.textContent.length&&(u.hasAttribute("data-slate-zero-width")||IS_FIREFOX&&null!==(r=a.textContent)&&void 0!==r&&r.endsWith("\n\n"))&&s--),!l){if(c)return null;throw new Error("Cannot resolve a Slate point from DOM point: ".concat(t))}f=ReactEditor.toSlateNode(e,l);return{path:ReactEditor.findPath(e,f),offset:s}},toSlateRange(e,t,r){var n,o,a,r=r["exactMatch"];if((isDOMSelection(t)?t.anchorNode:t.startContainer)&&(a=isDOMSelection(t)?(i=t.anchorNode,u=t.anchorOffset,n=t.focusNode,o=t.focusOffset,IS_CHROME&&hasShadowRoot()?t.anchorNode===t.focusNode&&t.anchorOffset===t.focusOffset:t.isCollapsed):(i=t.startContainer,u=t.startOffset,n=t.endContainer,o=t.endOffset,t.collapsed)),null==i||null==n||null==u||null==o)throw new Error("Cannot resolve a Slate range from DOM range: ".concat(t));t=ReactEditor.toSlatePoint(e,[i,u],r);if(!t)return null;var i=a?t:ReactEditor.toSlatePoint(e,[n,o],r);if(!i)return null;var u={anchor:t,focus:i};return u=Range.isExpanded(u)&&Range.isForward(u)&&isDOMElement(n)&&Editor.void(e,{at:u.focus,mode:"highest"})?Editor.unhangRange(e,u,{voids:!0}):u},hasRange(e,t){var{anchor:t,focus:r}=t;return Editor.hasPath(e,t.path)&&Editor.hasPath(e,r.path)}};function getDiffStart(e,t){for(var r=Math.min(e.length,t.length),n=0;n<r;n++)if(e.charAt(n)!==t.charAt(n))return n;return e.length!==t.length?r:null}function getDiffEnd(e,t,r){for(var n=e.length,o=t.length,a=Math.min(n,o,r),i=0;i<a;i++)if(e.charAt(n-i-1)!==t.charAt(o-i-1))return i;return e.length!==t.length?a:null}function getDiffOffsets(e,t){if(e===t)return null;var r=getDiffStart(e,t);if(null===r)return null;e=getDiffEnd(e,t,Math.min(e.length-r,t.length-r));return null===e?null:{start:r,end:e}}function sliceText(e,t){return e.slice(t.start,e.length-t.end)}function diffText(e,t){if(void 0===e||void 0===t)return null;var r=getDiffOffsets(e,t);if(null==r)return null;var t=sliceText(t,r),n=sliceText(e,r);return{start:r.start,end:e.length-r.end,insertText:t,removeText:n}}function combineInsertedText(e){return e.reduce((e,t)=>{t=t.text;return"".concat(e).concat(t.insertText)},"")}function getTextInsertion(e,t){var r=ReactEditor.toSlateNode(e,t);if(Text$1.isText(r)){var n=r.text,t=t.textContent;if((t=t.endsWith("\n")?t.slice(0,t.length-1):t)!==n){n=diffText(n,t);if(null!==n)return{text:n,path:ReactEditor.findPath(e,r)}}}}function normalizeTextInsertionRange(e,t,r){var{path:r,text:n}=r,o={anchor:{path:r,offset:n.start},focus:{path:r,offset:n.end}};if(!t||!Range.isCollapsed(t))return o;var{insertText:n,removeText:a}=n;if((1===n.length||1===a.length)&&Path.equals(t.anchor.path,r)){var[e]=Array.from(Editor.nodes(e,{at:t,match:Text$1.isText}));if(e){var[e]=e,i=t["anchor"],u=e.text[i.offset-1],e=e.text[i.offset];if(1===n.length&&n===e)return t;if(1===a.length&&a===u)return{anchor:{path:r,offset:i.offset-1},focus:{path:r,offset:i.offset}}}}return o}function gatherMutationData(n,e){var o=[],a=[],i=[],u=[];return e.forEach(e=>{switch(e.type){case"childList":e.addedNodes.length&&e.addedNodes.forEach(e=>{o.push(e)}),e.removedNodes.forEach(e=>{a.push(e)});break;case"characterData":u.push(e);var t=e.target["parentNode"];if(!t)return;var r=getTextInsertion(n,t);if(!r)return;if(i.some(e=>{e=e.path;return Path.equals(e,r.path)}))return;i.push(r)}}),{addedNodes:o,removedNodes:a,insertedText:i,characterDataMutations:u}}var isLineBreak=(e,t)=>{var t=t["addedNodes"],r=e["selection"],r=r?Node.parent(e,r.anchor.path):null,n=r?ReactEditor.toDOMNode(e,r):null;return!!n&&t.some(e=>e instanceof HTMLElement&&e.tagName===(null==n?void 0:n.tagName))},isDeletion=(e,t)=>{t=t.removedNodes;return 0<t.length},isReplaceExpandedSelection=(e,t)=>{e=e.selection,t=t.removedNodes;return!!e&&(Range.isExpanded(e)&&0<t.length)},isTextInsertion=(e,t)=>{t=t.insertedText;return 0<t.length},isRemoveLeafNodes=(e,t)=>{var{addedNodes:t,characterDataMutations:r,removedNodes:n}=t;return 0<n.length&&0===t.length&&0<r.length};function restoreDOM(e){try{var t=EDITOR_TO_RESTORE_DOM.get(e);t&&t()}catch(e){console.error(e)}}function ownKeys$1(t,e){var r,n=Object.keys(t);return Object.getOwnPropertySymbols&&(r=Object.getOwnPropertySymbols(t),e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,r)),n}function _objectSpread$1(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?ownKeys$1(Object(r),!0).forEach(function(e){_defineProperty(t,e,r[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):ownKeys$1(Object(r)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))})}return t}class AndroidInputManager{constructor(e){this.editor=e,this.flush=e=>{try{this.reconcileMutations(e)}catch(e){console.error(e),restoreDOM(this.editor)}},this.reconcileMutations=e=>{var t,e=gatherMutationData(this.editor,e),{insertedText:r,removedNodes:n}=e;isReplaceExpandedSelection(this.editor,e)?(t=combineInsertedText(r),this.replaceExpandedSelection(t)):isLineBreak(this.editor,e)?this.insertBreak():isRemoveLeafNodes(this.editor,e)?this.removeLeafNodes(n):isDeletion(this.editor,e)?this.deleteBackward():isTextInsertion(this.editor,e)&&this.insertText(r)},this.insertText=e=>{var{selection:n,marks:o}=this.editor;e.forEach(e=>{var t,r=e.text.insertText,e=normalizeTextInsertionRange(this.editor,n,e);o?(t=_objectSpread$1({text:r},o),Transforms.insertNodes(this.editor,t,{match:Text$1.isText,at:e,select:!0}),this.editor.marks=null):Transforms.insertText(this.editor,r,{at:e})})},this.insertBreak=()=>{var e=this.editor["selection"];Editor.insertBreak(this.editor),restoreDOM(this.editor),e&&setTimeout(()=>{this.editor.selection&&Range.equals(e,this.editor.selection)&&Transforms.move(this.editor)},100)},this.replaceExpandedSelection=e=>{Editor.deleteFragment(this.editor),e.length&&Editor.insertText(this.editor,e),restoreDOM(this.editor)},this.deleteBackward=()=>{Editor.deleteBackward(this.editor),ReactEditor.focus(this.editor),restoreDOM(this.editor)},this.removeLeafNodes=e=>{for(var t of e){var t=ReactEditor.toSlateNode(this.editor,t);t&&(t=ReactEditor.findPath(this.editor,t),Transforms.delete(this.editor,{at:t}),restoreDOM(this.editor))}},this.editor=e}}function useMutationObserver(e,t,r){var[n]=useState(()=>new MutationObserver(t));useIsomorphicLayoutEffect(()=>{n.disconnect()}),useEffect(()=>{if(!e.current)throw new Error("Failed to attach MutationObserver, `node` is undefined");return n.observe(e.current,r),n.disconnect.bind(n)})}function useTrackUserInput(){var t=useSlateStatic(),r=useRef(!1),n=useRef(null),e=useCallback(()=>{var e;!1===r.current&&(e=ReactEditor.getWindow(t),r.current=!0,n.current&&e.cancelAnimationFrame(n.current),n.current=e.requestAnimationFrame(()=>{r.current=!1,n.current=null}))},[]);return useEffect(()=>{r.current&&(r.current=!1)}),{receivedUserInput:r,onUserInput:e}}var MUTATION_OBSERVER_CONFIG={childList:!0,characterData:!0,characterDataOldValue:!0,subtree:!0};function useAndroidInputManager(e){var t=useSlateStatic(),[r]=useState(()=>new AndroidInputManager(t)),{receivedUserInput:n,onUserInput:o}=useTrackUserInput(),a=useRef(null),i=useRef(!1);return useMutationObserver(e,useCallback(e=>{n.current&&(i.current=!0,r.flush(e),a.current&&clearTimeout(a.current),a.current=setTimeout(()=>{i.current=!1,a.current=null},250))},[]),MUTATION_OBSERVER_CONFIG),{isReconciling:i,onUserInput:o}}var _excluded$1=["autoFocus","decorate","onDOMBeforeInput","placeholder","readOnly","renderElement","renderLeaf","renderPlaceholder","style","as"];function ownKeys(t,e){var r,n=Object.keys(t);return Object.getOwnPropertySymbols&&(r=Object.getOwnPropertySymbols(t),e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),n.push.apply(n,r)),n}function _objectSpread(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?ownKeys(Object(r),!0).forEach(function(e){_defineProperty(t,e,r[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):ownKeys(Object(r)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))})}return t}var AndroidEditable=e=>{var t,{autoFocus:r,decorate:n=defaultDecorate,onDOMBeforeInput:o,placeholder:i,readOnly:s=!1,renderElement:u,renderLeaf:l,renderPlaceholder:h=e=>React.createElement(DefaultPlaceholder,Object.assign({},e)),style:p={},as:E="div"}=e,a=_objectWithoutProperties(e,_excluded$1),c=useSlate(),d=useRef(null),D=useAndroidInputManager(d),f=(IS_READ_ONLY.set(c,s),useMemo(()=>({isUpdatingSelection:!1,latestElement:null}),[])),[e,g]=useState(0),C=useCallback(()=>{g(e=>e+1)},[e]),m=(useIsomorphicLayoutEffect(()=>{var e;d.current&&(e=getDefaultView(d.current))?(EDITOR_TO_WINDOW.set(c,e),EDITOR_TO_ELEMENT.set(c,d.current),NODE_TO_ELEMENT.set(c,d.current),ELEMENT_TO_NODE.set(d.current,c),EDITOR_TO_RESTORE_DOM.set(c,C)):(NODE_TO_ELEMENT.delete(c),EDITOR_TO_RESTORE_DOM.delete(c));try{var t=c["selection"],r=ReactEditor.findDocumentOrShadowRoot(c).getSelection();if(!r||!ReactEditor.isFocused(c))return;var n="None"!==r.type;if(!t&&!n)return;var o=EDITOR_TO_ELEMENT.get(c),a=!1;if(o.contains(r.anchorNode)&&o.contains(r.focusNode)&&(a=!0),n&&a&&t){var i=ReactEditor.toSlateRange(c,r,{exactMatch:!0});if(i&&Range.equals(i,t))return}if(t&&!ReactEditor.hasRange(c,t))return void(c.selection=ReactEditor.toSlateRange(c,r,{exactMatch:!1}));var u,l=ReactEditor.toDOMNode(c,c),s=(f.isUpdatingSelection=!0,t&&ReactEditor.toDOMRange(c,t));s?(Range.isBackward(t)?r.setBaseAndExtent(s.endContainer,s.endOffset,s.startContainer,s.startOffset):r.setBaseAndExtent(s.startContainer,s.startOffset,s.endContainer,s.endOffset),(u=s.startContainer.parentElement).getBoundingClientRect=s.getBoundingClientRect.bind(s),scrollIntoView(u,{scrollMode:"if-needed",boundary:l}),delete u.getBoundingClientRect):r.removeAllRanges(),setTimeout(()=>{f.isUpdatingSelection=!1})}catch(e){f.isUpdatingSelection=!1}}),useEffect(()=>{d.current&&r&&d.current.focus()},[r]),useCallback(e=>{s||!hasEditableTarget(c,e.target)||isDOMEventHandled(e,o)||D.onUserInput()},[s,o])),v=(useIsomorphicLayoutEffect(()=>{var e=d.current;return null!=e&&e.addEventListener("beforeinput",m),()=>null==e?void 0:e.removeEventListener("beforeinput",m)},[e,o]),useCallback(throttle(()=>{try{if(!s&&!f.isUpdatingSelection&&!D.isReconciling.current){var e=ReactEditor.findDocumentOrShadowRoot(c),t=e["activeElement"],r=ReactEditor.toDOMNode(c,c),n=e.getSelection();if(t===r?(f.latestElement=t,IS_FOCUSED.set(c,!0)):IS_FOCUSED.delete(c),!n)return Transforms.deselect(c);var o,{anchorNode:a,focusNode:i}=n,u=hasEditableTarget(c,a)||isTargetInsideVoid(c,a),l=hasEditableTarget(c,i)||isTargetInsideVoid(c,i);u&&l?(o=ReactEditor.toSlateRange(c,n,{exactMatch:!1}),Transforms.select(c,o)):Transforms.deselect(c)}}catch(e){}},100),[s])),y=(useIsomorphicLayoutEffect(()=>{var e=ReactEditor.getWindow(c);return e.document.addEventListener("selectionchange",v),()=>{e.document.removeEventListener("selectionchange",v)}}),n([c,[]]));return i&&1===c.children.length&&1===Array.from(Node.texts(c)).length&&""===Node.string(c)&&(t=Editor.start(c,[]),y.push({[PLACEHOLDER_SYMBOL]:!0,placeholder:i,anchor:t,focus:t})),React.createElement(ReadOnlyContext.Provider,{value:s},React.createElement(DecorateContext.Provider,{value:n},React.createElement(E,Object.assign({key:e,role:s?void 0:"textbox"},a,{spellCheck:a.spellCheck,autoCorrect:a.autoCorrect,autoCapitalize:a.autoCapitalize,"data-slate-editor":!0,"data-slate-node":"value",contentEditable:!s||void 0,suppressContentEditableWarning:!0,ref:d,style:_objectSpread({position:"relative",outline:"none",whiteSpace:"pre-wrap",wordWrap:"break-word"},p),onCopy:useCallback(e=>{hasEditableTarget(c,e.target)&&!isEventHandled(e,a.onCopy)&&(e.preventDefault(),ReactEditor.setFragmentData(c,e.clipboardData))},[a.onCopy]),onCut:useCallback(e=>{s||!hasEditableTarget(c,e.target)||isEventHandled(e,a.onCut)||(e.preventDefault(),ReactEditor.setFragmentData(c,e.clipboardData),e=c["selection"],e&&(Range.isExpanded(e)?Editor.deleteFragment(c):(e=Node.parent(c,e.anchor.path),Editor.isVoid(c,e)&&Transforms.delete(c))))},[s,a.onCut]),onFocus:useCallback(e=>{s||f.isUpdatingSelection||!hasEditableTarget(c,e.target)||isEventHandled(e,a.onFocus)||(e=ReactEditor.findDocumentOrShadowRoot(c),f.latestElement=e.activeElement,IS_FOCUSED.set(c,!0))},[s,a.onFocus]),onBlur:useCallback(e=>{if(!s&&!f.isUpdatingSelection&&hasEditableTarget(c,e.target)&&!isEventHandled(e,a.onBlur)){var t=ReactEditor.findDocumentOrShadowRoot(c);if(f.latestElement!==t.activeElement){t=e["relatedTarget"],e=ReactEditor.toDOMNode(c,c);if(!(t===e||isDOMElement(t)&&t.hasAttribute("data-slate-spacer"))){if(null!=t&&isDOMNode(t)&&ReactEditor.hasDOMNode(c,t)){e=ReactEditor.toSlateNode(c,t);if(Element$9.isElement(e)&&!c.isVoid(e))return}IS_FOCUSED.delete(c)}}}},[s,a.onBlur]),onPaste:useCallback(e=>{e.clipboardData=getClipboardData(e.clipboardData),!hasEditableTarget(c,e.target)||isEventHandled(e,a.onPaste)||s||(e.preventDefault(),ReactEditor.insertData(c,e.clipboardData))},[s,a.onPaste])}),useChildren({decorations:y,node:c,renderElement:u,renderPlaceholder:h,renderLeaf:l,selection:c.selection}))))},FocusedContext=createContext(!1),useFocused=()=>useContext(FocusedContext),_excluded=["editor","children","onChange","value"],Slate=e=>{var{editor:t,children:r,onChange:n,value:o}=e,a=_objectWithoutProperties(e,_excluded),[i,u]=useState(0),e=useMemo(()=>{if(!Node.isNodeList(o))throw new Error("[Slate] value is invalid! Expected a list of elements"+"but got: ".concat(JSON.stringify(o)));if(!Editor.isEditor(t))throw new Error("[Slate] editor is invalid! you passed:"+"".concat(JSON.stringify(t)));return t.children=o,Object.assign(t,a),[t]},[i,o,...Object.values(a)]),l=useCallback(()=>{n(t.children),u(i+1)},[i,n]),[l,s]=(EDITOR_TO_ON_CHANGE.set(t,l),useEffect(()=>()=>{EDITOR_TO_ON_CHANGE.set(t,()=>{})},[]),useState(ReactEditor.isFocused(t)));return useEffect(()=>{s(ReactEditor.isFocused(t))}),useIsomorphicLayoutEffect(()=>{var e=()=>s(ReactEditor.isFocused(t));return document.addEventListener("focus",e,!0),()=>document.removeEventListener("focus",e,!0)},[]),useIsomorphicLayoutEffect(()=>{var e=()=>s(ReactEditor.isFocused(t));return document.addEventListener("blur",e,!0),()=>document.removeEventListener("blur",e,!0)},[]),React.createElement(SlateContext.Provider,{value:e},React.createElement(EditorContext.Provider,{value:t},React.createElement(FocusedContext.Provider,{value:l},r)))},doRectsIntersect=(e,t)=>{t=(t.top+t.bottom)/2;return e.top<=t&&e.bottom>=t},areRangesSameLine=(e,t,r)=>{t=ReactEditor.toDOMRange(e,t).getBoundingClientRect(),e=ReactEditor.toDOMRange(e,r).getBoundingClientRect();return doRectsIntersect(t,e)&&doRectsIntersect(e,t)},findCurrentLineRange=(e,t)=>{var r=Editor.range(e,Range.end(t)),n=Array.from(Editor.positions(e,{at:t})),o=0,a=n.length,i=Math.floor(a/2);if(areRangesSameLine(e,Editor.range(e,n[o]),r))return Editor.range(e,n[o],r);if(n.length<2)return Editor.range(e,n[n.length-1],r);for(;i!==n.length&&i!==o;)areRangesSameLine(e,Editor.range(e,n[i]),r)?a=i:o=i,i=Math.floor((o+a)/2);return Editor.range(e,n[a],r)},withReact=f=>{var h=f,{apply:p,onChange:t,deleteBackward:r}=h;return EDITOR_TO_KEY_TO_ELEMENT.set(h,new WeakMap),h.deleteBackward=e=>{if("line"!==e)return r(e);f.selection&&Range.isCollapsed(f.selection)&&((e=Editor.above(f,{match:e=>Editor.isBlock(f,e),at:f.selection}))&&([,e]=e,e=Editor.range(f,e,f.selection.anchor),e=findCurrentLineRange(h,e),Range.isCollapsed(e)||Transforms.delete(f,{at:e})))},h.apply=e=>{var t;if("insert_text"!==e.type&&(AS_NATIVE.set(f,!1),flushNativeEvents(f)),AS_NATIVE.get(f))(t=NATIVE_OPERATIONS.get(f))?t.push(e):NATIVE_OPERATIONS.set(f,[e]);else{var r,n,o=[];switch(e.type){case"insert_text":case"remove_text":case"set_node":for(var[a,i]of Editor.levels(h,{at:e.path})){a=ReactEditor.findKey(h,a);o.push([i,a])}break;case"insert_node":case"remove_node":case"merge_node":case"split_node":for(var[u,l]of Editor.levels(h,{at:Path.parent(e.path)})){u=ReactEditor.findKey(h,u);o.push([l,u])}break;case"move_node":for(var[s,c]of Editor.levels(h,{at:Path.common(Path.parent(e.path),Path.parent(e.newPath))})){s=ReactEditor.findKey(h,s);o.push([c,s])}}p(e);for([r,n]of o){var[d]=Editor.node(h,r);NODE_TO_KEY.set(d,n)}}},h.setFragmentData=e=>{var t=h["selection"];if(t){var r,n,[o,a]=Range.edges(t),o=Editor.void(h,{at:o.path}),a=Editor.void(h,{at:a.path});if(!Range.isCollapsed(t)||o)return r=(t=ReactEditor.toDOMRange(h,t)).cloneContents(),n=r.childNodes[0],r.childNodes.forEach(e=>{e.textContent&&""!==e.textContent.trim()&&(n=e)}),a&&([a]=a,t=t.cloneRange(),a=ReactEditor.toDOMNode(h,a),t.setEndAfter(a),r=t.cloneContents()),o&&(n=r.querySelector("[data-slate-spacer]")),Array.from(r.querySelectorAll("[data-slate-zero-width]")).forEach(e=>{var t="n"===e.getAttribute("data-slate-zero-width");e.textContent=t?"\n":""}),isDOMText(n)&&((a=document.createElement("span")).style.whiteSpace="pre",a.appendChild(n),r.appendChild(a),n=a),t=h.getFragment(),o=JSON.stringify(t),a=window.btoa(encodeURIComponent(o)),n.setAttribute("data-slate-fragment",a),e.setData("application/x-slate-fragment",a),(t=document.createElement("div")).appendChild(r),t.setAttribute("hidden","true"),document.body.appendChild(t),e.setData("text/html",t.innerHTML),e.setData("text/plain",getPlainText(t)),document.body.removeChild(t),e}},h.insertData=e=>{var t=e.getData("application/x-slate-fragment")||getSlateFragmentAttribute(e);if(t)return t=decodeURIComponent(window.atob(t)),t=JSON.parse(t),void h.insertFragment(t);t=e.getData("text/plain");if(t){var r,n=!1;for(r of t.split(/\r\n|\r|\n/))n&&Transforms.splitNodes(h,{always:!0}),h.insertText(r),n=!0}},h.onChange=()=>{ReactDOM.unstable_batchedUpdates(()=>{var e=EDITOR_TO_ON_CHANGE.get(h);e&&e(),t()})},h},Editable=IS_ANDROID?AndroidEditable:Editable$1,History={isHistory(e){return isPlainObject(e)&&Array.isArray(e.redos)&&Array.isArray(e.undos)&&(0===e.redos.length||Operation.isOperationList(e.redos[0]))&&(0===e.undos.length||Operation.isOperationList(e.undos[0]))}},SAVING=new WeakMap,MERGING=new WeakMap,HistoryEditor={isHistoryEditor(e){return History.isHistory(e.history)&&Editor.isEditor(e)},isMerging(e){return MERGING.get(e)},isSaving(e){return SAVING.get(e)},redo(e){e.redo()},undo(e){e.undo()},withoutMerging(e,t){var r=HistoryEditor.isMerging(e);MERGING.set(e,!1),t(),MERGING.set(e,r)},withoutSaving(e,t){var r=HistoryEditor.isSaving(e);SAVING.set(e,!1),t(),SAVING.set(e,r)}},withHistory=e=>{var s=e,c=s["apply"];return s.history={undos:[],redos:[]},s.redo=()=>{var t,e=s["history"],r=e["redos"];0<r.length&&(t=r[r.length-1],HistoryEditor.withoutSaving(s,()=>{Editor.withoutNormalizing(s,()=>{for(var e of t)s.apply(e)})}),e.redos.pop(),e.undos.push(t))},s.undo=()=>{var t,e=s["history"],r=e["undos"];0<r.length&&(t=r[r.length-1],HistoryEditor.withoutSaving(s,()=>{Editor.withoutNormalizing(s,()=>{var e;for(e of t.map(Operation.inverse).reverse())s.apply(e)})}),e.redos.push(t),e.undos.pop())},s.apply=e=>{var{operations:t,history:r}=s,n=r["undos"],o=n[n.length-1],a=o&&o[o.length-1],i=shouldOverwrite(e,a),u=HistoryEditor.isSaving(s),l=HistoryEditor.isMerging(s);if(u=null==u?shouldSave(e):u){for(null==l&&(l=null!=o&&(0!==t.length||(shouldMerge(e,a)||i))),o&&l?(i&&o.pop(),o.push(e)):n.push([e]);100<n.length;)n.shift();shouldClear(e)&&(r.redos=[])}c(e)},s},shouldMerge=(e,t)=>"set_selection"===e.type||(!(!t||"insert_text"!==e.type||"insert_text"!==t.type||e.offset!==t.offset+t.text.length||!Path.equals(e.path,t.path))||!(!t||"remove_text"!==e.type||"remove_text"!==t.type||e.offset+e.text.length!==t.offset||!Path.equals(e.path,t.path))),shouldSave=(e,t)=>"set_selection"!==e.type||null!=e.properties&&null!=e.newProperties,shouldOverwrite=(e,t)=>!(!t||"set_selection"!==e.type||"set_selection"!==t.type),shouldClear=e=>"set_selection"!==e.type,getLetterByOrder=function(e){for(var t=[];e;){var r=e%26;r||(r=26,--e),t.push(String.fromCodePoint(r+64)),e=~~(e/26)}return t.reverse().join("")},orderUse=function(e,t){e%=3;return 0==e?t:1==e?getLetterByOrder(t):getLetterByOrder(t).toLowerCase()},uListUse=function(e){e%=4;return 0==e?"•":1==e?"◦":2==e?"▪":"▫"},setNodeTag$6=function(e,t,r,n){var o=4<arguments.length&&void 0!==arguments[4]?arguments[4]:null;o?Transforms.setNodes(e,_defineProperty$2({},r,n),{at:o}):t?(o=ReactEditor.findPath(e,t),Transforms.setNodes(e,_defineProperty$2({},r,n),{at:o})):Transforms.setNodes(e,_defineProperty$2({},r,n))},setChecked=function(e,t,r){setNodeTag$6(e,t,"checked",r)},setTitle=function(e,t,r){setNodeTag$6(e,t,"title",r)},setTextAlign$3=function(e,t,r){setNodeTag$6(e,t,"textAlign",r)},setQuote=function(e,t,r){setNodeTag$6(e,t,"quote",r)},setListOrder=function(t,e,r){var n,o=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;setNodeTag$6(t,e,"listOrder",r,o),o?setNextListOrder(t,e,o,r+1):e?(o=ReactEditor.findPath(t,e),setNextListOrder(t,e,o,r+1)):(o=t.selection)&&Range.isCollapsed(o)&&((o=Editor.above(t,{match:function(e){return Editor.isBlock(t,e)}}))&&(n=(o=_slicedToArray(o,2))[0],o=o[1],setNextListOrder(t,n,o,r+1)))},setNextListOrder=function(e,t,r,n){var o,r=Editor.next(e,{at:r});r&&(o=(r=_slicedToArray(r,2))[0],r=r[1],o.type&&"paragraph"!=o.type||o.list&&"ol"==o.list&&(t.indentation||0)==(o.indentation||0)&&setListOrder(e,o,n,r))},setList=function(e,t,r){r?(setNodeTag$6(e,t,"list",r),"checkbox"!=r&&setNodeTag$6(e,t,"checked",null),"ol"!=r&&setNodeTag$6(e,t,"listOrder",null)):(setNodeTag$6(e,t,"list",null),setNodeTag$6(e,t,"checked",null),setNodeTag$6(e,t,"listOrder",null))},setIndentation=function(e,t,r){var n=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;setNodeTag$6(e,t,"indentation",!r||r<=0?null:r,n)},wrapLink=function(e){var t=e.selection;t&&(Range.isCollapsed(t)||Transforms.wrapNodes(e,{type:"link",url:"http://",target:"_self",children:[]},{split:!0}))},unWrapLink=function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:null;t?(t=ReactEditor.findPath(e,t),Transforms.unwrapNodes(e,{match:function(e){return!Editor.isEditor(e)&&Element$9.isElement(e)&&"link"===e.type},at:t})):Transforms.unwrapNodes(e,{match:function(e){return!Editor.isEditor(e)&&Element$9.isElement(e)&&"link"===e.type}})},setURL=function(e,t,r){t.type&&"link"===t.type&&setNodeTag$6(e,t,"url",r)},setLinkTarget=function(e,t,r){t.type&&"link"===t.type&&setNodeTag$6(e,t,"target",r)},setStarNum=function(e,t,r){setNodeTag$6(e,t,"number",r)},insertStar=function(e){Transforms.insertNodes(e,{type:"star",number:5,children:[{text:""}]})},IndentationText=function(e){var t=e.children,r=e.icon,e=e.offset;return r?React.createElement("div",{style:{display:"flex"}},React.createElement("div",{contentEditable:!1,style:{marginLeft:"".concat(20*e,"px"),minWidth:"10px",textAlign:"right",marginRight:"5px",userSelect:"none"}},r),React.createElement("div",{style:{flex:1}},t)):React.createElement("div",{style:{display:"flex"}},React.createElement("div",{style:{flex:1,marginLeft:"".concat(20*e,"px")}},t))},Element$7=React.memo(function(e){var t=e.children,r=e.element,e=e.attributes,n=r.title,o=r.textAlign,a=r.list,c=r.quote,i=r.checked,d=r.indentation,u=r.listOrder,l=d||0,s=useSlate();return a&&("checkbox"===a&&(t=React.createElement(function(e){function t(e){s.readOnly||(e.preventDefault(),setChecked(s,r,!i))}return React.createElement(IndentationText,{offset:l,icon:React.createElement(function(){return React.createElement("span",{style:{cursor:"pointer"},onMouseDown:t},i?React.createElement(CheckSquareOutlined,null):React.createElement(BorderOutlined,null))},null)},i?React.createElement("s",{style:{color:"#B7BAC6"}},e.children):e.children)},null,t)),"ul"===a&&(t=React.createElement(IndentationText,{offset:l,icon:React.createElement("span",{style:{color:"#4E61E8"}},uListUse(l))},t)),"ol"===a&&u&&(t=React.createElement(IndentationText,{offset:l,icon:React.createElement("span",{style:{color:"#4E61E8"}},orderUse(l,u),".")},t))),n&&("h1"===n&&(t=React.createElement("h1",{style:{fontSize:"28px"}},t)),"h2"===n&&(t=React.createElement("h2",{style:{fontSize:"26px"}},t)),"h3"===n&&(t=React.createElement("h3",{style:{fontSize:"24px"}},t)),"h4"===n&&(t=React.createElement("h4",{style:{fontSize:"22px"}},t)),"h5"===n&&(t=React.createElement("h5",{style:{fontSize:"20px"}},t))),a||(t=React.createElement(IndentationText,{offset:l},t)),c&&(t=React.createElement("div",{style:{padding:"0px 0 0px 10px",borderLeft:"1px solid #2447F5",color:"#A5A6A6"}},t)),React.createElement("div",_extends({style:{wordBreak:"break-all",textAlign:o||"left"}},e),t)}),LinkElement=function(e){function t(e){var t=_slicedToArray(useState(a),2),r=t[0],n=t[1];return React.createElement(React.Fragment,null,React.createElement("div",{style:{display:"inline-block",width:"280px"}},React.createElement(Input,{value:r,onChange:function(e){n(e.target.value)}}))," ",React.createElement(Single,{selected:!0,description:"修改链接",content:"修改",onClick:function(){setURL(u,o,r),message.info("修改链接成功")}}),React.createElement(Single,{selected:!0,description:"清除链接",content:React.createElement(DeleteOutlined,null),onClick:function(){unWrapLink(u,o)}}),React.createElement("div",{style:{marginTop:"10px"}},React.createElement("font",{style:{color:"black"}},"打开方式:")," ",React.createElement(Select,{selected:i,notNull:!0,onChange:function(e){setLinkTarget(u,o,e)},buttons:[{key:"_self",content:"本页面",description:"会在本页面跳转链接"},{key:"_blank",content:"新页面",description:"会在新页面跳转链接"}]})))}var o=e.element,r=e.attributes,e=e.children,a=o.url,i=o.target,u=useSlate();return u.readOnly?React.createElement("a",_extends({onMouseDown:function(){isUrl(a)&&window.open(a,i)}},r),e):React.createElement(Tooltip,{title:React.createElement(t,null),color:"white",overlayStyle:{minWidth:"400px"},destroyTooltipOnHide:!0},React.createElement("a",_extends({onMouseDown:function(){isUrl(a)&&window.open(a,i)}},r),e))},StarElement=function(e){var t=e.attributes,r=e.children,n=e.element,o=useSlate(),e=useSelected(),a=useFocused();return React.createElement("span",t,r,React.createElement("span",{contentEditable:!1,style:{display:"inline-block",borderRadius:"2px",boxShadow:e&&a?"0 0 0 2px #B4D5FF":"none"}},React.createElement(Rate,{disabled:o.readOnly,allowClear:!0,value:n.number,onChange:function(e){setStarNum(o,n,e)}})))},Leaf$1=function(e){var t=e.attributes,r=e.children,e=e.leaf,n=(e.bold&&(r=React.createElement("b",null,r)),e.italic&&(r=React.createElement("i",null,r)),e.underline&&(r=React.createElement("u",null,r)),e.strikethrough&&(r=React.createElement("s",null,r)),e.code&&(r=React.createElement("span",{style:{backgroundColor:"#DCDCDC",borderRadius:"5px"}},React.createElement("span",{style:{marginLeft:"5px",marginRight:"5px"}},r))),e.fontColor&&(r=React.createElement("span",{style:{color:e.fontColor}},r)),"");return e.backgroundColor&&(n=e.backgroundColor),React.createElement("span",_extends({style:{backgroundColor:n}},t),r)},isColorActive=function(e,t,r){var n=e.selection;return(!n||!Range.isCollapsed(n))&&!!_slicedToArray(Editor.nodes(e,{match:function(e){return e[t]===r},mode:"all"}),1)[0]},isFormatActive=function(e,t){var r=e.selection;return(!r||!Range.isCollapsed(r))&&!!_slicedToArray(Editor.nodes(e,{match:function(e){return!0===e[t]},mode:"all"}),1)[0]},isLinkActive=function(e){var t=e.selection;return(!t||!Range.isCollapsed(t))&&!!_slicedToArray(Editor.nodes(e,{match:function(e){return!Editor.isEditor(e)&&Element$9.isElement(e)&&"link"===e.type}}),1)[0]},backgroundColorList=["#ffd666","#ffccc7","#95de64","#91d5ff","#d3adf7","#bfbfbf"],fontColorList=["#f5222d","#d4b106","#389e0d","#096dd9","#722ed1","#595959"],normalConfig=[{key:"bold",description:"加粗",content:React.createElement(BoldOutlined,null)},{key:"italic",description:"斜体",content:React.createElement(ItalicOutlined,null)},{key:"underline",description:"下划线",content:React.createElement(UnderlineOutlined,null)},{key:"strikethrough",description:"删除线",content:React.createElement(StrikethroughOutlined,null)},{key:"code",description:"代码",content:React.createElement(CodeOutlined,null)}],execCoy$1=function(e){var t=document.createElement("TEXTAREA");t.style.opacity=0,t.style.position="absolute",t.style.left="-100000px",document.body.appendChild(t),t.value=e,t.select(),t.setSelectionRange(0,e.length),document.execCommand("copy"),document.body.removeChild(t)},LeafBar$1=function(e){function a(e,t){for(var r=0;r<t.length;r++){var n=t[r];if(isColorActive(i,e,n))return n}return""}function t(t,e){for(var r=[],n=0;n<e.length;n++){var o=e[n];r.push({key:o,description:o,content:"backgroundColor"===t?React.createElement(BgColorsOutlined,{style:{color:o,backgroundColor:o}}):React.createElement(FontColorsOutlined,{style:{color:o}})})}return React.createElement(Select,{selected:a(t,e),notNull:!1,onChange:function(e){Editor.addMark(i,t,e)},buttons:r})}function r(){for(var e=[],t=0;t<normalConfig.length;t++){var r=normalConfig[t].key;isFormatActive(i,r)&&e.push(r)}return e}var i=useSlate();return React.createElement(React.Fragment,null,React.createElement("span",null,t("backgroundColor",backgroundColorList)),React.createElement("span",null,t("fontColor",fontColorList)),React.createElement("hr",{style:{border:"1px solid #91d5ff"}}),React.createElement("span",null,React.createElement(Muti,{selectedKeys:r(),onChange:function(e){Editor.addMark(i,e,!isFormatActive(i,e)||null)},buttons:normalConfig})),"  ",React.createElement(Single,{selected:!1,description:"点击复制样式到剪贴板，选中其他文本ctrl+v即可复用样式",content:React.createElement("span",{style:{color:"#003a8c"}},React.createElement(FormatPainterOutlined,{style:{color:"#d4380d"}})," 格式刷"),onClick:function(){var e;(e={}).backgroundColor=a("backgroundColor",backgroundColorList),e.fontColor=a("fontColor",fontColorList),e.normal=r(),execCoy$1("&_FORMAT_CACHE"+JSON.stringify(e)),message.info("样式已经复制到剪贴板")}}),"  ")},LinkBar=function(e){var t=useSlate(),r=isLinkActive(t);return React.createElement(React.Fragment,null,React.createElement(Single,{selected:r,description:"加入超链接，点击后悬停于文字上修改链接内容",content:React.createElement(LinkOutlined,{style:{color:"#0000cc"}}),onClick:function(){(r?unWrapLink:wrapLink)(t)}}),"  ")},StarBar=function(e){var t=useSlate();return React.createElement(React.Fragment,null,React.createElement(Single,{selected:!1,description:"新增评分",content:React.createElement(StarFilled,{style:{color:"#fadb14"}}),onClick:function(){insertStar(t)}}),"  ")},formatPrinter=function(e,t){if(0<t.normal.length)for(var r=t.normal,n=0;n<r.length;n++)Editor.addMark(e,r[n],!0);t.fontColor&&Editor.addMark(e,"fontColor",t.fontColor),t.backgroundColor&&Editor.addMark(e,"backgroundColor",t.backgroundColor)},insertEndBreak=function(e,t,r){var n=_objectSpread2(_objectSpread2({},t),{},{children:[{text:""}]}),r=Path.next(r),n=(Transforms.insertNodes(e,n,{at:r}),t.title&&Transforms.setNodes(e,_defineProperty$2({},"title",null),{at:r}),Editor.start(e,r));Transforms.select(e,{anchor:n,focus:n})},withParagraph=function(a){var i=a.insertText,u=a.insertBreak,o=a.deleteBackward,n=a.insertData,l=a.getFragment,r=a.isEmpty,s=a.onTabDown,c=a.normalizeNode;return a.normalizeNode=function(e){var t,e=_slicedToArray(e,2),r=e[0],e=e[1];return 0===e.length&&("paragraph"===(t=a.children[0]).type&&"h1"===t.title||Transforms.insertNodes(a,{type:"paragraph",title:"h1",children:[{text:""}]},{at:[0]})),c([r,e])},a.getFragment=function(){for(var e=l();;){if(1<e.length){var t,r=!0,n=_createForOfIteratorHelper(e);try{for(n.s();!(t=n.n()).done;)if("paragraph"!==t.value.type){r=!1;break}}catch(e){n.e(e)}finally{n.f()}if(r)return e;break}if(0===e.length)break;var o=e[0];if(!o.type||!o.children)break;if("paragraph"===o.type)return e;e=o.children}return l()},a.insertText=function(e){var t=a.selection,r=Editor.above(a,{match:function(e){return Editor.isBlock(a,e)}}),n=Range.isCollapsed(t);if(r){var r=_slicedToArray(r,2),o=r[0],r=r[1];if(" "===e&&"paragraph"===o.type&&n){o={anchor:t.anchor,focus:Editor.start(a,r)},t=Editor.string(a,o),r=markdownKeys[t];if(r){if(Transforms.select(a,o),Transforms.delete(a),"title"===r.key)return void setTitle(a,null,r.value);if("quote"===r.key)return void setQuote(a,null,r.value);if("list"===r.key)return void setList(a,null,r.value)}r=t.split(".");if(2===r.length&&/^\+?[1-9][0-9]*$/.test(r[0])){t=parseInt(r[0]);if(0<t)return Transforms.select(a,o),Transforms.delete(a),setList(a,null,"ol"),void setListOrder(a,null,t)}}}if(!n&&0===e.indexOf("&_FORMAT_CACHE")){r=JSON.parse(e.split("&_FORMAT_CACHE")[1]);if(r)return void formatPrinter(a,r)}i(e)},a.insertData=function(e){var t=e.getData("text/plain"),r=a.selection;if(!Range.isCollapsed(r)&&0===t.indexOf("&_FORMAT_CACHE")){r=JSON.parse(t.split("&_FORMAT_CACHE")[1]);if(r)return void formatPrinter(a,r)}n(e)},a.insertBreak=function(){var e=Editor.above(a,{match:function(e){return Editor.isBlock(a,e)}});if(e){var e=_slicedToArray(e,2),t=e[0],e=e[1];if("paragraph"===t.type){var r=a.selection;if(t.list&&r&&Range.isCollapsed(r)){var n=r.anchor,o=Editor.start(a,e);if(Range.isCollapsed({anchor:n,focus:o}))return void(!t.indentation||t.indentation<=0?setList(a,null,null):setIndentation(a,null,t.indentation-1,e))}n=Editor.end(a,e);if(t.list&&"ol"===t.list)return Point.equals(r.anchor,n)?insertEndBreak(a,t,e):u(),void setListOrder(a,null,t.listOrder+1);if(Point.equals(r.anchor,n))return void insertEndBreak(a,t,e)}}u()},a.deleteBackward=function(){var e=Editor.above(a,{match:function(e){return Editor.isBlock(a,e)}});if(e){var e=_slicedToArray(e,2),t=e[0],e=e[1];if("paragraph"===t.type){var r=a.selection;if(r&&Range.isCollapsed(r)){var r=r.anchor,n=Editor.start(a,e);if(Range.isCollapsed({anchor:r,focus:n})){if(t.list)return void setList(a,null,null);if(t.indentation&&0<t.indentation)return void setIndentation(a,null,t.indentation-1,e)}}}}o.apply(void 0,arguments)},a.isEmpty=function(e){var t;return"paragraph"===e.type?(t=ReactEditor.findPath(a,e),""===Editor.string(a,t)&&(!(e.list||e.quote||e.title||e.textAlign||e.indentation||e.listOrder)&&!(e.children&&1<e.children.length))):r(e)},a.onTabDown=function(){var e=Editor.above(a,{match:function(e){return Editor.isBlock(a,e)}});if(e){var e=_slicedToArray(e,2),t=e[0],e=e[1];if(!t.type||"paragraph"===t.type)return t=t.indentation||0,setIndentation(a,null,t+1,e),!0}return!!s&&s()},a},withLink=function(e){var t=e.isInline;return e.isInline=function(e){return"link"===e.type||t(e)},e},withStar=function(e){var t=e.isInline,r=e.isVoid,n=e.isEmpty;return e.isInline=function(e){return"star"===e.type||t(e)},e.isVoid=function(e){return"star"===e.type||r(e)},e.isEmpty=function(e){return"star"!==e.type&&n(e)},e},markdownKeys={"#":{key:"title",value:"h1"},"##":{key:"title",value:"h2"},"###":{key:"title",value:"h3"},"####":{key:"title",value:"h4"},"#####":{key:"title",value:"h5"},">":{key:"quote",value:"quote"},"》":{key:"quote",value:"quote"},"*":{key:"list",value:"ul"},"+":{key:"list",value:"ul"},"-":{key:"list",value:"ul"},"[]":{key:"list",value:"checkbox"},"【】":{key:"list",value:"checkbox"}},Menu$1=function(e){var t=e.element,r=useSlate();return React.createElement(React.Fragment,null,React.createElement(Select,{selected:t.title,buttons:titleButtonList,onChange:function(e){setTitle(r,t,e)}}),React.createElement("hr",{style:{border:"1px solid #f5f5f5"}}),React.createElement(Select,{selected:t.list,buttons:listButtonList,onChange:function(e){setList(r,t,e),"ol"===e&&setListOrder(r,t,1)}}),"    ",React.createElement(Select,{selected:t.quote,buttons:quoteButtonList,onChange:function(e){setQuote(r,t,e)}}),React.createElement("hr",{style:{border:"1px solid #f5f5f5"}}),React.createElement(Select,{selected:t.textAlign,buttons:textAlignButtonList$3,onChange:function(e){setTextAlign$3(r,t,e)}}))},titleButtonList=[{key:"h1",content:"h1",description:"标题1; MarkDown:#"},{key:"h2",content:"h2",description:"标题2; MarkDown:##"},{key:"h3",content:"h3",description:"标题3; MarkDown:###"},{key:"h4",content:"h4",description:"标题4; MarkDown:####"},{key:"h5",content:"h5",description:"标题5; MarkDown:#####"}],listButtonList=[{key:"ul",content:React.createElement(UnorderedListOutlined,null),description:"无序列表; MarkDown:-/+/*"},{key:"ol",content:React.createElement(OrderedListOutlined,null),description:"有序列表; MarkDown:1."},{key:"checkbox",content:React.createElement(CheckSquareOutlined,null),description:"checkbox; MarkDown:[]"}],quoteButtonList=[{key:"quote",content:React.createElement(InfoCircleOutlined,null),description:"引用; MarkDown:>"}],textAlignButtonList$3=[{key:"left",content:React.createElement(AlignLeftOutlined,null),description:"左对齐"},{key:"center",content:React.createElement(AlignCenterOutlined,null),description:"居中"},{key:"right",content:React.createElement(AlignRightOutlined,null),description:"右对齐"}],Paragraph={type:"paragraph",IsBlock:!0,AddMenu:Menu$1,EditMenu:Menu$1,Element:Element$7,Leaf:Leaf$1,LeafBar:LeafBar$1,Plugin:withParagraph},Link={type:"link",IsBlock:!1,Element:LinkElement,Plugin:withLink,LeafBar:LinkBar},Star={type:"star",IsBlock:!1,Element:StarElement,Plugin:withStar,LeafBar:StarBar},setNodeTag$5=function(e,t,r,n){var o=4<arguments.length&&void 0!==arguments[4]?arguments[4]:null;o?Transforms.setNodes(e,_defineProperty$2({},r,n),{at:o}):t?(o=ReactEditor.findPath(e,t),Transforms.setNodes(e,_defineProperty$2({},r,n),{at:o})):Transforms.setNodes(e,_defineProperty$2({},r,n))},setIcon=function(e,t,r){setNodeTag$5(e,t,"icon",r)},setIconColor=function(e,t,r){setNodeTag$5(e,t,"iconColor",r)},setCardType=function(e,t,r){setNodeTag$5(e,t,"cardType",r)},setCard=function(e,t){t&&(t=ReactEditor.findPath(e,t),Transforms.removeNodes(e,{at:t}),Transforms.insertNodes(e,{type:"card",cardType:"success",icon:"tag",children:[{type:"paragraph",children:[{text:""}]}]},{at:t}))},iconMap={tag:function(e){return React.createElement(TagOutlined,{style:{color:e}})},tags:function(e){return React.createElement(TagsOutlined,{style:{color:e}})},sound:function(e){return React.createElement(SoundOutlined,{style:{color:e}})},question:function(e){return React.createElement(QuestionCircleOutlined,{style:{color:e}})},thunderbolt:function(e){return React.createElement(ThunderboltOutlined,{style:{color:e}})},star:function(e){return React.createElement(StarOutlined,{style:{color:e}})},setting:function(e){return React.createElement(SettingOutlined,{style:{color:e}})},schedule:function(e){return React.createElement(ScheduleOutlined,{style:{color:e}})},pushpin:function(e){return React.createElement(PushpinOutlined,{style:{color:e}})},message:function(e){return React.createElement(MessageOutlined,{style:{color:e}})},heart:function(e){return React.createElement(HeartOutlined,{style:{color:e}})},edit:function(e){return React.createElement(EditOutlined,{style:{color:e}})},snipets:function(e){return React.createElement(SnippetsOutlined,{style:{color:e}})},aliwangwang:function(e){return React.createElement(AliwangwangOutlined,{style:{color:e}})},wechat:function(e){return React.createElement(WechatOutlined,{style:{color:e}})},weibo:function(e){return React.createElement(WeiboOutlined,{style:{color:e}})},warning:function(e){return React.createElement(WarningOutlined,{style:{color:e}})},careUP:function(e){return React.createElement(CaretUpOutlined,{style:{color:e}})},careDown:function(e){return React.createElement(CaretDownOutlined,{style:{color:e}})},smile:function(e){return React.createElement(SmileOutlined,{style:{color:e}})}},iconColorList=["#cf1322","#fadb14","#08979c","#096dd9","#000000"],cardTypeList=[{key:"success",content:React.createElement(CheckCircleOutlined,null),description:"success"},{key:"info",content:React.createElement(InfoCircleOutlined,null),description:"info"},{key:"warning",content:React.createElement(ExclamationCircleOutlined,null),description:"warning"},{key:"error",content:React.createElement(CloseCircleOutlined,null),description:"error"}],EditMenu$4=function(e){var r=e.element,n=useSlate();return React.createElement(React.Fragment,null,React.createElement(Select,{selected:r.cardType,notNull:!0,onChange:function(e){setCardType(n,r,e)},buttons:cardTypeList}),React.createElement("hr",{style:{border:"1px solid #f5f5f5"}}),function(){var e,t=[];for(e in iconMap)t.push({key:e,content:iconMap[e](r.iconColor),description:e});return React.createElement(Select,{selected:r.icon,notNull:!1,onChange:function(e){setIcon(n,r,e)},buttons:t})}(),React.createElement("hr",{style:{border:"1px solid #f5f5f5"}}),function(){for(var e=[],t=0;t<iconColorList.length;t++)e.push({key:iconColorList[t],content:React.createElement(FontSizeOutlined,{style:{color:iconColorList[t]}}),description:iconColorList[t]});return React.createElement(Select,{selected:r.iconColor,notNull:!1,onChange:function(e){setIconColor(n,r,e)},buttons:e})}())},AddMenu$6=function(e){var t=useSlate(),r=e.element;return React.createElement(Button,{type:"text",icon:React.createElement(CreditCardOutlined,{style:{color:"#ad4e00"}}),style:{width:"100%",textAlign:"left"},onMouseDown:function(){setCard(t,r)}},"卡片")},Element$6=memo(function(e){var t=e.attributes,r=e.children,e=e.element,n=null;return e.icon&&iconMap[e.icon]&&(n=iconMap[e.icon](e.iconColor)),React.createElement("div",_extends({},t,{style:{paddingTop:"5px",paddingBottom:"5px"}}),React.createElement(Alert,{type:e.cardType,message:r,icon:n,showIcon:!!n}))}),withCard=function(e){var t=e.isEmpty;return e.isEmpty=function(e){return"card"!==e.type&&t(e)},e},Card={type:"card",IsBlock:!0,AddMenu:AddMenu$6,EditMenu:EditMenu$4,Element:Element$6,Plugin:withCard},setNodeTag$4=function(e,t,r,n){var o=4<arguments.length&&void 0!==arguments[4]?arguments[4]:null;o?Transforms.setNodes(e,_defineProperty$2({},r,n),{at:o}):t?(o=ReactEditor.findPath(e,t),Transforms.setNodes(e,_defineProperty$2({},r,n),{at:o})):Transforms.setNodes(e,_defineProperty$2({},r,n))},setImage=function(e,t,r){t&&(t=ReactEditor.findPath(e,t),Transforms.setNodes(e,{type:"image",src:r,width:300,children:[{text:""}]},{at:t}))},insertImage=function(t,e){var r=Editor.above(t,{match:function(e){return Editor.isBlock(t,e)}});r&&(r=_slicedToArray(r,1)[0],e={type:"image",width:300,src:e,children:[{text:""}]},t.isEmpty(r)?Transforms.setNodes(t,e):Transforms.insertNodes(t,e))},getInsertImageCallBack=function(t,e){return function(e){insertImage(t,e)}},setTextAlign$2=function(e,t,r){setNodeTag$4(e,t,"textAlign",r)},setWidth$1=function(e,t,r){r<40||2e3<r||setNodeTag$4(e,t,"width",r)},isImageUrl=function(e){if(!e)return!1;if(!isUrl(e))return!1;e=new URL(e).pathname.split(".").pop();return imageExtensions.includes(e)},EditMenu$3=function(e){var t=useSlate(),r=e.element;return React.createElement(React.Fragment,null,React.createElement(Select,{selected:r.textAlign,buttons:textAlignButtonList$2,onChange:function(e){setTextAlign$2(t,r,e)}}),React.createElement("hr",{style:{border:"1px solid #f5f5f5"}}),React.createElement(Button,{size:"small",type:"text",icon:React.createElement(MinusCircleOutlined,{style:{color:"#389e0d"}}),onMouseDown:function(){setWidth$1(t,r,r.width-20)}}),React.createElement(Button,{size:"small",type:"text",icon:React.createElement(PlusCircleOutlined,{style:{color:"#f5222d"}}),onMouseDown:function(){setWidth$1(t,r,r.width+20)}}))},AddMenu$5=function(e){var o=useSlate(),a=e.element;return React.createElement(Popover,{content:React.createElement(React.Fragment,null,React.createElement(function(e){var t=_slicedToArray(useState(""),2),r=t[0],n=t[1];return React.createElement(React.Fragment,null,React.createElement("div",{style:{display:"inline-block",width:"280px"}},React.createElement(Input,{value:r,placeholder:"输入图片地址",onChange:function(e){return n(e.target.value)}}))," ",React.createElement(Single,{selected:!0,description:"使用图片的url",content:"确认",onClick:function(){isImageUrl(r)?setImage(o,a,r):message.error("输入有效的图片地址")}}))},null)),placement:"topRight"},React.createElement(Button,{type:"text",icon:React.createElement(PictureOutlined,{style:{color:"#fadb14"}}),style:{width:"100%",textAlign:"left"}},"图片"))},textAlignButtonList$2=[{key:"left",content:React.createElement(AlignLeftOutlined,null),description:"左对齐"},{key:"center",content:React.createElement(AlignCenterOutlined,null),description:"居中"},{key:"right",content:React.createElement(AlignRightOutlined,null),description:"右对齐"}],config={fallback:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAMIAAADDCAYAAADQvc6UAAABRWlDQ1BJQ0MgUHJvZmlsZQAAKJFjYGASSSwoyGFhYGDIzSspCnJ3UoiIjFJgf8LAwSDCIMogwMCcmFxc4BgQ4ANUwgCjUcG3awyMIPqyLsis7PPOq3QdDFcvjV3jOD1boQVTPQrgSkktTgbSf4A4LbmgqISBgTEFyFYuLykAsTuAbJEioKOA7DkgdjqEvQHEToKwj4DVhAQ5A9k3gGyB5IxEoBmML4BsnSQk8XQkNtReEOBxcfXxUQg1Mjc0dyHgXNJBSWpFCYh2zi+oLMpMzyhRcASGUqqCZ16yno6CkYGRAQMDKMwhqj/fAIcloxgHQqxAjIHBEugw5sUIsSQpBobtQPdLciLEVJYzMPBHMDBsayhILEqEO4DxG0txmrERhM29nYGBddr//5/DGRjYNRkY/l7////39v///y4Dmn+LgeHANwDrkl1AuO+pmgAAADhlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAAqACAAQAAAABAAAAwqADAAQAAAABAAAAwwAAAAD9b/HnAAAHlklEQVR4Ae3dP3PTWBSGcbGzM6GCKqlIBRV0dHRJFarQ0eUT8LH4BnRU0NHR0UEFVdIlFRV7TzRksomPY8uykTk/zewQfKw/9znv4yvJynLv4uLiV2dBoDiBf4qP3/ARuCRABEFAoBEgghggQAQZQKAnYEaQBAQaASKIAQJEkAEEegJmBElAoBEgghggQAQZQKAnYEaQBAQaASKIAQJEkAEEegJmBElAoBEgghggQAQZQKAnYEaQBAQaASKIAQJEkAEEegJmBElAoBEgghggQAQZQKAnYEaQBAQaASKIAQJEkAEEegJmBElAoBEgghggQAQZQKAnYEaQBAQaASKIAQJEkAEEegJmBElAoBEgghggQAQZQKAnYEaQBAQaASKIAQJEkAEEegJmBElAoBEgghggQAQZQKAnYEaQBAQaASKIAQJEkAEEegJmBElAoBEgghggQAQZQKAnYEaQBAQaASKIAQJEkAEEegJmBElAoBEgghggQAQZQKAnYEaQBAQaASKIAQJEkAEEegJmBElAoBEgghggQAQZQKAnYEaQBAQaASKIAQJEkAEEegJmBElAoBEgghggQAQZQKAnYEaQBAQaASKIAQJEkAEEegJmBElAoBEgghggQAQZQKAnYEaQBAQaASKIAQJEkAEEegJmBElAoBEgghgg0Aj8i0JO4OzsrPv69Wv+hi2qPHr0qNvf39+iI97soRIh4f3z58/u7du3SXX7Xt7Z2enevHmzfQe+oSN2apSAPj09TSrb+XKI/f379+08+A0cNRE2ANkupk+ACNPvkSPcAAEibACyXUyfABGm3yNHuAECRNgAZLuYPgEirKlHu7u7XdyytGwHAd8jjNyng4OD7vnz51dbPT8/7z58+NB9+/bt6jU/TI+AGWHEnrx48eJ/EsSmHzx40L18+fLyzxF3ZVMjEyDCiEDjMYZZS5wiPXnyZFbJaxMhQIQRGzHvWR7XCyOCXsOmiDAi1HmPMMQjDpbpEiDCiL358eNHurW/5SnWdIBbXiDCiA38/Pnzrce2YyZ4//59F3ePLNMl4PbpiL2J0L979+7yDtHDhw8vtzzvdGnEXdvUigSIsCLAWavHp/+qM0BcXMd/q25n1vF57TYBp0a3mUzilePj4+7k5KSLb6gt6ydAhPUzXnoPR0dHl79WGTNCfBnn1uvSCJdegQhLI1vvCk+fPu2ePXt2tZOYEV6/fn31dz+shwAR1sP1cqvLntbEN9MxA9xcYjsxS1jWR4AIa2Ibzx0tc44fYX/16lV6NDFLXH+YL32jwiACRBiEbf5KcXoTIsQSpzXx4N28Ja4BQoK7rgXiydbHjx/P25TaQAJEGAguWy0+2Q8PD6/Ki4R8EVl+bzBOnZY95fq9rj9zAkTI2SxdidBHqG9+skdw43borCXO/ZcJdraPWdv22uIEiLA4q7nvvCug8WTqzQveOH26fodo7g6uFe/a17W3+nFBAkRYENRdb1vkkz1CH9cPsVy/jrhr27PqMYvENYNlHAIesRiBYwRy0V+8iXP8+/fvX11Mr7L7ECueb/r48eMqm7FuI2BGWDEG8cm+7G3NEOfmdcTQw4h9/55lhm7DekRYKQPZF2ArbXTAyu4kDYB2YxUzwg0gi/41ztHnfQG26HbGel/crVrm7tNY+/1btkOEAZ2M05r4FB7r9GbAIdxaZYrHdOsgJ/wCEQY0J74TmOKnbxxT9n3FgGGWWsVdowHtjt9Nnvf7yQM2aZU/TIAIAxrw6dOnAWtZZcoEnBpNuTuObWMEiLAx1HY0ZQJEmHJ3HNvGCBBhY6jtaMoEiJB0Z29vL6ls58vxPcO8/zfrdo5qvKO+d3Fx8Wu8zf1dW4p/cPzLly/dtv9Ts/EbcvGAHhHyfBIhZ6NSiIBTo0LNNtScABFyNiqFCBChULMNNSdAhJyNSiECRCjUbEPNCRAhZ6NSiAARCjXbUHMCRMjZqBQiQIRCzTbUnAARcjYqhQgQoVCzDTUnQIScjUohAkQo1GxDzQkQIWejUogAEQo121BzAkTI2agUIkCEQs021JwAEXI2KoUIEKFQsw01J0CEnI1KIQJEKNRsQ80JECFno1KIABEKNdtQcwJEyNmoFCJAhELNNtScABFyNiqFCBChULMNNSdAhJyNSiECRCjUbEPNCRAhZ6NSiAARCjXbUHMCRMjZqBQiQIRCzTbUnAARcjYqhQgQoVCzDTUnQIScjUohAkQo1GxDzQkQIWejUogAEQo121BzAkTI2agUIkCEQs021JwAEXI2KoUIEKFQsw01J0CEnI1KIQJEKNRsQ80JECFno1KIABEKNdtQcwJEyNmoFCJAhELNNtScABFyNiqFCBChULMNNSdAhJyNSiECRCjUbEPNCRAhZ6NSiAARCjXbUHMCRMjZqBQiQIRCzTbUnAARcjYqhQgQoVCzDTUnQIScjUohAkQo1GxDzQkQIWejUogAEQo121BzAkTI2agUIkCEQs021JwAEXI2KoUIEKFQsw01J0CEnI1KIQJEKNRsQ80JECFno1KIABEKNdtQcwJEyNmoFCJAhELNNtScABFyNiqFCBChULMNNSdAhJyNSiEC/wGgKKC4YMA4TAAAAABJRU5ErkJggg=="},Element$5=memo(function(e){var t=e.attributes,r=e.children,e=e.element;return React.createElement("div",_extends({},t,{style:{textAlign:e.textAlign||"left"}}),React.createElement(Image$1,{src:e.src,style:{maxWidth:"100%",width:"".concat(e.width,"px")},fallback:config.fallback}),r)}),withImage=function(l){var t=l.isEmpty,r=l.isVoid,s=l.insertData;return l.isEmpty=function(e){return"image"!==e.type&&t(e)},l.isVoid=function(e){return"image"===e.type||r(e)},l.insertData=function(e){var t=e.files;if(t&&0<t.length){var r,n=_createForOfIteratorHelper(t);try{for(n.s();!(r=n.n()).done;){var o,a,i,u=r.value;if("image"===_slicedToArray(u.type.split("/"),1)[0])return void(!(o=l.param.onUploadImage)||(a=Editor.above(l,{match:function(e){return Editor.isBlock(l,e)}}))&&(i=_slicedToArray(a,1)[0],o(u,getInsertImageCallBack(l,i))))}}catch(e){n.e(e)}finally{n.f()}}s(e)},l},Image={type:"image",IsBlock:!0,AddMenu:AddMenu$5,EditMenu:EditMenu$3,Element:Element$5,Plugin:withImage},setTable=function(e,t,r,n){if(t){for(var t=ReactEditor.findPath(e,t),o=[],a=0;a<r;a++){for(var i=[],u=0;u<n;u++)i.push({type:"table-cell",width:100,children:[{type:"paragraph",children:[{text:""}]}]});o.push({type:"table-row",children:i})}var l={type:"table",children:o};Transforms.removeNodes(e,{at:t}),Transforms.insertNodes(e,l,{at:t})}},addRow=function(e,t){for(var s=!(2<arguments.length&&void 0!==arguments[2])||arguments[2],r=getTableFromCell(e,t),n=Path.parent(t),c=(s&&(n=Path.next(n)),Path.parent(n)),d=n[n.length-1],f=[],o=0;o<d;o++)for(var h=r.children[o],a=0;a<h.children.length;a++){var i=h.children[a];if(i.rowSpan&&!(o+i.rowSpan<=d)){Transforms.setNodes(e,_defineProperty$2({},"rowSpan",i.rowSpan+1),{at:[].concat(_toConsumableArray(c),[o,a])});var p=1;i.colSpan&&(p=i.colSpan);for(var u=0;u<p;u++)f.push(a+u)}}var E,D=[],g=0,l=_createForOfIteratorHelper(r.children[0].children);try{for(l.s();!(E=l.n()).done;){var C=E.value,m={type:"table-cell",width:C.width,children:[{type:"paragraph",children:[{text:""}]}]};-1<f.indexOf(g)&&(m={type:"table-cell-merged",width:C.width,children:[{text:""}]}),D.push(m),g++}}catch(e){l.e(e)}finally{l.f()}Transforms.insertNodes(e,{type:"table-row",children:D},{at:n})},deleteRow=function(e,t){var r=getTableFromCell(e,t);if(!(r.children.length<=1)){for(var t=Path.parent(t),n=t[t.length-1],o=Path.parent(t),a=0;a<=n;a++)for(var c=r.children[a],i=0;i<c.children.length;i++){var u,l,s=c.children[i];!s.rowSpan||a+s.rowSpan<=n||(1===(u=s.rowSpan-1)&&(u=null),a===n?(l={type:"table-cell",width:s.width,children:s.children},u&&(l.rowSpan=u),s.colSpan&&(l.colSpan=s.colSpan),Transforms.removeNodes(e,{at:[].concat(_toConsumableArray(o),[a+1,i])}),Transforms.insertNodes(e,l,{at:[].concat(_toConsumableArray(o),[a+1,i])})):Transforms.setNodes(e,_defineProperty$2({},"rowSpan",u),{at:[].concat(_toConsumableArray(o),[a,i])}))}Transforms.removeNodes(e,{at:t})}},addCol=function(e,t){for(var s=!(2<arguments.length&&void 0!==arguments[2])||arguments[2],r=getTableFromCell(e,t),n=_slicedToArray(getCellPathInTable(t),2)[1],c=Path.parent(Path.parent(t)),d=(s&&n++,[]),o=0;o<r.children.length;o++)for(var f=r.children[o],a=0;a<n;a++){var i=f.children[a];if(i.colSpan&&!(a+i.colSpan<=n)){Transforms.setNodes(e,_defineProperty$2({},"colSpan",i.colSpan+1),{at:[].concat(_toConsumableArray(c),[o,a])});var h=1;i.rowSpan&&(h=i.rowSpan);for(var u=0;u<h;u++)d.push(o+u)}}for(var l=0;l<r.children.length;l++){var p=[].concat(_toConsumableArray(c),[l,n]),E={type:"table-cell",width:100,children:[{type:"paragraph",children:[{text:""}]}]};-1<d.indexOf(l)&&(E={type:"table-cell-merged",width:100,children:[{text:""}]}),Transforms.insertNodes(e,E,{at:p})}},deleteCol=function(e,t){if(!(getRowFromCell(e,t).children.length<=1)){for(var r=getTableFromCell(e,t),n=_slicedToArray(getCellPathInTable(t),2)[1],o=Path.parent(Path.parent(t)),a=0;a<r.children.length;a++)for(var c=r.children[a],i=0;i<=n;i++){var u,l,s=c.children[i];!s.colSpan||i+s.colSpan<=n||(1===(u=s.colSpan-1)&&(u=null),i===n?(l={type:"table-cell",width:s.width,children:s.children},u&&(l.colSpan=u),s.rowSpan&&(l.rowSpan=s.rowSpan),Transforms.removeNodes(e,{at:[].concat(_toConsumableArray(o),[a,i+1])}),Transforms.insertNodes(e,l,{at:[].concat(_toConsumableArray(o),[a,i+1])})):Transforms.setNodes(e,_defineProperty$2({},"colSpan",u),{at:[].concat(_toConsumableArray(o),[a,i])}))}for(var d=0;d<r.children.length;d++){var f=[].concat(_toConsumableArray(o),[d,n]);Transforms.removeNodes(e,{at:f})}}},setColWidth=function(e,t,r){if(!(r<40))for(var n=getTableFromCell(e,t),o=_slicedToArray(getCellPathInTable(t),2)[1],a=Path.parent(Path.parent(t)),i=0;i<n.children.length;i++){var u=[].concat(_toConsumableArray(a),[i,o]);Transforms.setNodes(e,_defineProperty$2({},"width",r),{at:u})}},splitCells=function(e){var t=e.selection;if(t&&Range.isCollapsed(t)){for(var r=t.anchor,t=t.focus,n=_slicedToArray(Editor.node(e,{}),1)[0],o=_toConsumableArray(_slicedToArray(Node.common(n,r.path,t.path),2)[1]);;){if(o.length<3)return;var a=Node.get(n,o);if(a.type&&"table-cell"==a.type)break;o=Path.parent(o)}var i=Path.parent(Path.parent(o)),u=getCellPathInTable(o),c=Node.get(n,i),r=Node.get(c,u);if(r.rowSpan||r.colSpan){Transforms.setNodes(e,(_defineProperty$2(t={},"rowSpan",null),_defineProperty$2(t,"colSpan",null),t),{at:o});for(var d=r.rowSpan||1,f=r.colSpan||1,l=u[0];l<=u[0]+d-1;l++)for(var h,s=u[1];s<=u[1]+f-1;s++)l===u[0]&&s===u[1]||(h={type:"table-cell",width:Node.get(c,[l,s]).width,children:[{type:"paragraph",children:[{text:""}]}]},Transforms.removeNodes(e,{at:[].concat(_toConsumableArray(i),[l,s])}),Transforms.insertNodes(e,h,{at:[].concat(_toConsumableArray(i),[l,s])}))}}},mergeCells=function(e){var t=e.tableSelection;if(t){var r=t.start,t=t.end,n=getCellPathInTable(r),o=getCellPathInTable(t),a=Path.parent(Path.parent(r)),t=_slicedToArray(Editor.node(e,{}),1)[0],c=Node.get(t,a),i=[],t=Node.get(c,n);i.push.apply(i,_toConsumableArray(t.children));for(var u=n[0];u<=o[0];u++)for(var l,s=n[1];s<=o[1];s++)u===n[0]&&s===n[1]||("table-cell"===(l=Node.get(c,[u,s])).type&&0<Node.string(l).length&&i.push.apply(i,_toConsumableArray(l.children)),l={type:"table-cell-merged",width:l.width,children:[{text:""}]},Transforms.removeNodes(e,{at:[].concat(_toConsumableArray(a),[u,s])}),Transforms.insertNodes(e,l,{at:[].concat(_toConsumableArray(a),[u,s])}));var d=o[0]-n[0]+1,f=o[1]-n[1]+1,t={type:"table-cell",width:t.width,children:i};1<d&&(t.rowSpan=d),1<f&&(t.colSpan=f),Transforms.removeNodes(e,{at:r}),Transforms.insertNodes(e,t,{at:r})}},clearTableSelection=function(e,t){for(var r=t.start,t=t.end,n=getCellPathInTable(r),o=getCellPathInTable(t),a=Path.parent(Path.parent(r)),i=Node.get(e,a),u=n[0];u<=o[0];u++)for(var l=n[1];l<=o[1];l++){var s=_objectSpread2({},Node.get(i,[u,l]));"table-cell"===s.type?s.children=[{type:"paragraph",children:[{text:""}]}]:s.children=[{text:""}],Transforms.removeNodes(e,{at:[].concat(_toConsumableArray(a),[u,l])}),Transforms.insertNodes(e,s,{at:[].concat(_toConsumableArray(a),[u,l])})}},getAllSpanCells=function(e){for(var t=[],r=0;r<e.children.length;r++)for(var n=e.children[r],o=0;o<n.children.length;o++){var a=n.children[o];(a.rowSpan||a.colSpan)&&t.push([[r-1,o-1],[r+(a.rowSpan||1)-1,o+(a.colSpan||1)-1]])}return t},getTableSelection=function(e){var t=e.selection;if(!t||Range.isCollapsed(t))return null;for(var r=t.anchor,t=t.focus,c=_slicedToArray(Editor.node(e,{}),1)[0],n=_toConsumableArray(_slicedToArray(Node.common(c,r.path,t.path),2)[1]);;){if(0==n.length)return null;var d=Node.get(c,n);if(d.type&&"table"==d.type)break;n=Path.parent(n)}var e=Node.get(c,n),f=getAllSpanCells(e),h=e.children.length,p=e.children[0].children.length,e=n.length,r=[r.path[e],r.path[e+1]],t=[t.path[e],t.path[e+1]];if(Path.equals(r,t))return null;var e=[r[0],t[0]],o=e[0],a=e[1],e=(t[0]<r[0]&&(o=(e=[t[0],r[0]])[0],a=e[1]),[r[1],t[1]]),i=e[0],u=e[1],t=(t[1]<r[1]&&(i=(e=[t[1],r[1]])[0],u=e[1]),[o-1,i-1]);for(o=t[0],i=t[1];;){var l=_slicedToArray(getCuerrentSelection([o,i,a,u],f,h,p),4),E=l[0],D=l[1],g=l[2],l=l[3],s=!1;if(E<o&&(o=E,s=!0),a<g&&(a=g,s=!0),D<i&&(i=D,s=!0),u<l&&(u=l,s=!0),!s)break}return{start:[].concat(_toConsumableArray(n),[o+1,i+1]),end:[].concat(_toConsumableArray(n),[a,u])}},isCellInTableSelection=function(e,t){var r=e.tableSelection;if(!r)return!1;for(var t=ReactEditor.findPath(e,t),n=r.start,r=r.end,o=_slicedToArray(Editor.node(e,{}),1)[0],a=_toConsumableArray(_slicedToArray(Node.common(o,t,n),2)[1]);;){if(0==a.length)return!1;var i=Node.get(o,a);if(i.type&&"table"==i.type)break;a=Path.parent(a)}if(a.length+2!=t.length||a.length+2!=n.length)return!1;e=getCellPathInTable(t),t=getCellPathInTable(n),n=getCellPathInTable(r);return t[0]<=e[0]&&t[1]<=e[1]&&e[0]<=n[0]&&e[1]<=n[1]},getCuerrentSelection=function(e,t,c,d){for(var e=_slicedToArray(e,4),r=e[0],n=e[1],o=e[2],a=e[3],i=r;-1<=i&&isLineCrossAnyCells([[r=i,n],[i,a]],t);i--);for(var u=o;u<=c&&isLineCrossAnyCells([[o=u,n],[u,a]],t);u++);for(var l=n;-1<=l&&isLineCrossAnyCells([[r,n=l],[o,l]],t);l--);for(var s=a;s<=d&&isLineCrossAnyCells([[r,a=s],[o,s]],t);s++);return[r,n,o,a]},isLineCrossAnyCells=function(e,t){var r,n=_createForOfIteratorHelper(t);try{for(n.s();!(r=n.n()).done;){var o=r.value;if(isLineCrossCell(e,o))return!0}}catch(e){n.e(e)}finally{n.f()}return!1},isLineCrossCell=function(e,t){var e=_slicedToArray(e,2),r=e[0],e=e[1],t=_slicedToArray(t,2),n=t[0],t=t[1];return!(r[0]>=t[0]||e[0]<=n[0])&&!(r[1]>=t[1]||e[1]<=n[1])},getRowFromCell=function(e,t){e=_slicedToArray(Editor.node(e,[]),1)[0],t=Path.parent(t);return Node.get(e,t)},getTableFromCell=function(e,t){e=_slicedToArray(Editor.node(e,[]),1)[0],t=Path.parent(t),t=Path.parent(t);return Node.get(e,t)},getCellPathInTable=function(e){var t=e.length;return[e[t-2],e[t-1]]},AddMenu$4=function(e){var r=useSlate(),n=e.element,e=_slicedToArray(useState("0行0列"),2),t=e[0],o=e[1];return React.createElement(Popover,{title:t,content:React.createElement(TableInput,{onChange:function(e,t){o("".concat(e,"行").concat(t,"列"))},onClick:function(e,t){setTable(r,n,e,t)}}),placement:"topRight"},React.createElement(Button,{type:"text",icon:React.createElement(TableOutlined,{style:{color:"#91d5ff"}}),style:{width:"100%",textAlign:"left"}},"表格"))},Element$4=memo(function(e){for(var t=e.attributes,r=e.children,e=e.element,n=useSlate(),o=(n.tableSelection=getTableSelection(n),0),a=e.children[0],i=0;i<a.children.length;i++)o+=a.children[i].width;return React.createElement("div",{style:{marginTop:"10px",marginBottom:"10px",overflow:"auto"}},React.createElement("table",{style:{borderCollapse:"collapse",width:"".concat(o,"px")}},React.createElement("tbody",t,r)))}),RowElement=function(e){var t=e.attributes,r=e.children,n=e.element,o=useSlate(),a=ReactEditor.findPath(o,n),i=a[a.length-1];return React.createElement(React.Fragment,null,function(){if(0!==i)return null;for(var e=[React.createElement("td",{key:"-1",style:{width:"7px",height:"6px"}})],t=0;t<n.children.length;t++){var r=n.children[t].width;e.push(React.createElement(Popover,{key:t,content:function(e,t){return React.createElement(React.Fragment,null,React.createElement(Button,{size:"small",type:"text",icon:React.createElement(InsertRowLeftOutlined,{style:{color:"#096dd9"}}),onMouseDown:function(){addCol(o,[].concat(_toConsumableArray(a),[e]),!1)}}),React.createElement(Button,{size:"small",type:"text",icon:React.createElement(MinusCircleOutlined,{style:{color:"#389e0d"}}),onMouseDown:function(){setColWidth(o,[].concat(_toConsumableArray(a),[e]),t-20)}}),React.createElement(Button,{size:"small",type:"text",icon:React.createElement(DeleteColumnOutlined,{style:{color:"#f5222d"}}),onMouseDown:function(){deleteCol(o,[].concat(_toConsumableArray(a),[e]))}}),React.createElement(Button,{size:"small",type:"text",icon:React.createElement(PlusCircleOutlined,{style:{color:"#389e0d"}}),onMouseDown:function(){setColWidth(o,[].concat(_toConsumableArray(a),[e]),t+20)}}),React.createElement(Button,{size:"small",type:"text",icon:React.createElement(InsertRowRightOutlined,{style:{color:"#096dd9"}}),onMouseDown:function(){addCol(o,[].concat(_toConsumableArray(a),[e]),!0)}}),React.createElement("br",null))}(t,r),placement:"topLeft"},React.createElement("td",{key:t,style:{width:"".concat(r,"px"),border:"1px solid #d9d9d9",backgroundColor:"#f0f0f0",cursor:"pointer"}},React.createElement("div",{style:{height:"6px"}}))))}return React.createElement("tr",{contentEditable:!1},e)}(),React.createElement("tr",_extends({},t,{style:{textAlign:"left",border:"1px solid #d9d9d9"}}),r))},RowEditor=function(e){var e=e.element,t=useSlate(),r=ReactEditor.findPath(t,e);if(0!==_slicedToArray(getCellPathInTable(r),2)[1])return null;return React.createElement(Popover,{content:React.createElement(React.Fragment,null,React.createElement(Button,{size:"small",type:"text",icon:React.createElement(InsertRowAboveOutlined,{style:{color:"#096dd9"}}),onMouseDown:function(){return addRow(t,r,!1)}}),React.createElement("br",null),React.createElement(Button,{size:"small",type:"text",icon:React.createElement(DeleteRowOutlined,{style:{color:"#f5222d"}}),onMouseDown:function(){return deleteRow(t,r)}}),React.createElement("br",null),React.createElement(Button,{size:"small",type:"text",icon:React.createElement(InsertRowBelowOutlined,{style:{color:"#096dd9"}}),onMouseDown:function(){return addRow(t,r,!0)}})),placement:"leftTop"},React.createElement("td",{contentEditable:!1,style:{border:"1px solid #d9d9d9",backgroundColor:"#f0f0f0",cursor:"pointer"}},React.createElement("div",{style:{width:"6px"}})))},CellElement=function(e){var t=e.attributes,c=e.children,r=e.element,n=r.colSpan,o=r.rowSpan,a=useSlate(),i={border:"1px solid #d9d9d9",verticalAlign:"top",textAlign:"left"},i=(isCellInTableSelection(a,r)&&(i.backgroundColor="#f0f5ff"),{style:i}),u=r.width;if(n){i.colSpan=n;for(var d=_slicedToArray(Editor.node(a,{}),1)[0],l=ReactEditor.findPath(a,r),s=2;s<=n;s++){l=Path.next(l);u+=Node.get(d,l).width+1}}return o&&(i.rowSpan=o),React.createElement(React.Fragment,null,React.createElement(RowEditor,e),React.createElement("td",i,React.createElement("div",_extends({},t,{style:{padding:"8px",width:"".concat(u,"px"),overflow:"auto"}}),c)))},MergedElement=function(e){var t=e.attributes,r=e.children;return React.createElement(React.Fragment,null,React.createElement(RowEditor,e),React.createElement("td",_extends({},t,{style:{display:"none"}}),r))},withTable=function(E){var t=E.isEmpty,D=E.getFragment,a=E.insertFragment,r=E.deleteFragment;return E.tableSelection=null,E.deleteFragment=function(){var e=E.tableSelection;if(e)clearTableSelection(E,e);else{e=E.selection;if(e){var t=e.anchor,e=e.focus;if(2<Node.common(E,t.path,e.path)[1].length)return void r();t=Node.get(E,[t.path[0]]),e=Node.get(E,[e.path[0]]);if("table"===t.type||"table"===e.type)return void message.error("选中区域边缘包含表格，无法删除")}r()}},E.insertFragment=function(e){if(E.tableSelection)message.error("禁止向table拷贝");else if(Array.isArray(e)){var t,r,n=!1,o=_createForOfIteratorHelper(e);try{for(o.s();!(t=o.n()).done;)"table"===t.value.type&&(n=!0)}catch(e){o.e(e)}finally{o.f()}n?!(r=E.selection)||Range.isCollapsed(r)?(r=r.anchor,Transforms.insertNodes(E,e,{at:[r.path[0]+1]})):message.error("拷贝内容含有表格，只能粘贴到光标上"):a(e)}else a(e)},E.getFragment=function(){if(E.tableSelection){for(var e=E.tableSelection,t=e.start,e=e.end,r=Path.parent(Path.parent(t)),t=_slicedToArray(getCellPathInTable(t),2),c=t[0],d=t[1],t=_slicedToArray(getCellPathInTable(e),2),f=t[0],h=t[1],n=[],o=c;o<=f;o++){for(var a=[],i=d;i<=h;i++){var p=Node.get(E,[].concat(_toConsumableArray(r),[o,i]));a.push(p)}n.push({type:"table-row",children:a})}return[{type:"table",children:n}]}var u=D();if(u.length<2)return u;if("table"!==u[0].type&&"table"!==u[u.length-1].type)return u;for(var l=[],s=0;s<u.length;s++)(0!=s&&s!=u.length-1||"table"!==u[s].type)&&l.push(u[s]);return l},E.isEmpty=function(e){return"table"!==e.type&&t(e)},E},withTableRow=function(e){return e},withTableCell=function(n){var o=n.deleteBackward,a=n.deleteForward;return n.deleteBackward=function(e){var t=n.selection;if(t&&Range.isCollapsed(t)){var r=_slicedToArray(Editor.nodes(n,{match:function(e){return!Editor.isEditor(e)&&Element$9.isElement(e)&&"table-cell"===e.type}}),1)[0];if(r){r=_slicedToArray(r,2)[1],r=Editor.start(n,r);if(Point.equals(t.anchor,r))return}}o(e)},n.deleteForward=function(e){var t=n.selection;if(t&&Range.isCollapsed(t)){var r=_slicedToArray(Editor.nodes(n,{match:function(e){return!Editor.isEditor(e)&&Element$9.isElement(e)&&"table-cell"===e.type}}),1)[0];if(r){r=_slicedToArray(r,2)[1],r=Editor.end(n,r);if(Point.equals(t.anchor,r))return}}a(e)},n},withTableCellMerged=function(e){var t=e.isVoid;return e.isVoid=function(e){return"table-cell-merged"===e.type||t(e)},e},LeafBar=function(e){var t=useSlate();return React.createElement(React.Fragment,null,React.createElement(Single,{selected:!1,description:"合并单元格",content:React.createElement(MergeCellsOutlined,{style:{color:"#237804"}}),onClick:function(){mergeCells(t)}}),React.createElement(Single,{selected:!1,description:"拆分单元格",content:React.createElement(SplitCellsOutlined,{style:{color:"#237804"}}),onClick:function(){splitCells(t)}}))},Table={type:"table",IsBlock:!0,Level:1,AddMenu:AddMenu$4,Element:Element$4,Plugin:withTable,LeafBar:LeafBar},TableRow={type:"table-row",IsBlock:!1,Element:RowElement,Plugin:withTableRow},TableCell={type:"table-cell",IsBlock:!1,Element:CellElement,Plugin:withTableCell},TableCellMerged={type:"table-cell-merged",IsBlock:!1,Element:MergedElement,Plugin:withTableCellMerged},setNodeTag$3=function(e,t,r,n){var o=4<arguments.length&&void 0!==arguments[4]?arguments[4]:null;o?Transforms.setNodes(e,_defineProperty$2({},r,n),{at:o}):t?(o=ReactEditor.findPath(e,t),Transforms.setNodes(e,_defineProperty$2({},r,n),{at:o})):Transforms.setNodes(e,_defineProperty$2({},r,n))},setDivider=function(e,t){setNodeTag$3(e,t,"type","divider")},setTextAlign$1=function(e,t,r){setNodeTag$3(e,t,"textAlign",r)},EditMenu$2=function(e){var t=useSlate(),r=e.element;return React.createElement(Select,{selected:r.textAlign,buttons:textAlignButtonList$1,onChange:function(e){setTextAlign$1(t,r,e)}})},AddMenu$3=function(e){var t=useSlate(),r=e.element;return React.createElement(Button,{type:"text",icon:React.createElement(MinusSquareOutlined,{style:{color:"#237804"}}),style:{width:"100%",textAlign:"left"},onMouseDown:function(){setDivider(t,r)}},"文字分割线")},textAlignButtonList$1=[{key:"left",content:React.createElement(AlignLeftOutlined,null),description:"左对齐"},{key:"center",content:React.createElement(AlignCenterOutlined,null),description:"居中"},{key:"right",content:React.createElement(AlignRightOutlined,null),description:"右对齐"}],Element$3=memo(function(e){var t=e.attributes,r=e.children,e=e.element;return React.createElement("div",t,React.createElement(Divider$1,{orientation:e.textAlign||"center",style:{color:"#262626"}},r))}),withDivider=function(e){var t=e.isEmpty;return e.isEmpty=function(e){return"divider"!==e.type&&t(e)},e},Divider={type:"divider",IsBlock:!0,Level:1,AddMenu:AddMenu$3,EditMenu:EditMenu$2,Element:Element$3,Plugin:withDivider},setNodeTag$2=function(e,t,r,n){var o=4<arguments.length&&void 0!==arguments[4]?arguments[4]:null;o?Transforms.setNodes(e,_defineProperty$2({},r,n),{at:o}):t?(o=ReactEditor.findPath(e,t),Transforms.setNodes(e,_defineProperty$2({},r,n),{at:o})):Transforms.setNodes(e,_defineProperty$2({},r,n))},setHr=function(e,t){setNodeTag$2(e,t,"type","hr")},AddMenu$2=function(e){var t=useSlate(),r=e.element;return React.createElement(Button,{type:"text",icon:React.createElement(MinusCircleOutlined,{style:{color:"#d48806"}}),style:{width:"100%",textAlign:"left"},onMouseDown:function(){setHr(t,r)}},"纯分割线")},Element$2=memo(function(e){var t=e.attributes,e=e.children;return React.createElement("div",_extends({},t,{style:{height:"10px"}}),React.createElement(Divider$1,null),e)}),withHr=function(e){var t=e.isEmpty,r=e.isVoid;return e.isEmpty=function(e){return"hr"!==e.type&&t(e)},e.isVoid=function(e){return"hr"===e.type||r(e)},e},Hr={type:"hr",IsBlock:!0,Level:1,AddMenu:AddMenu$2,Element:Element$2,Plugin:withHr},execCoy=function(e){var t=document.createElement("TEXTAREA");t.style.opacity=0,t.style.position="absolute",t.style.left="-100000px",document.body.appendChild(t),t.value=e,t.select(),t.setSelectionRange(0,e.length),document.execCommand("copy"),document.body.removeChild(t)},Element$1=memo(function(e){var a=e.element,t=e.children,e=e.attributes,r=_slicedToArray(useState(),2),n=r[0],o=r[1],i=useSlate();return React.createElement("div",_extends({style:{backgroundColor:"#fafafa",width:"100%",padding:"10px",color:"#000000",fontSize:"1em",tabSize:4,marginTop:"10px",marginBottom:"10px",position:"relative"},onMouseOver:function(){o(!0)},onMouseLeave:function(){o(!1)}},e),React.createElement("div",{contentEditable:!1,onClick:function(){var e,t=[],r=_createForOfIteratorHelper(a.children);try{for(r.s();!(e=r.n()).done;){var n=e.value,o=ReactEditor.findPath(i,n);t.push(Editor.string(i,o))}}catch(e){r.e(e)}finally{r.f()}execCoy(t.join("\n")),message.success("代码拷贝成功～")},style:{display:n?"inline":"none",position:"absolute",top:"0.5em",right:"0.5em"}},React.createElement(Button,{icon:React.createElement(CopyOutlined,{style:{color:"#5b8c00"}})},a.language)),React.createElement("div",{style:{overflowX:"auto"}},t))}),CodeLineElement=function(e){var t=e.children,e=e.attributes;return React.createElement("div",_extends({style:{minWidth:"3000px",fontFamily:"monospace"}},e),t)},setNodeTag$1=function(e,t,r,n){var o=4<arguments.length&&void 0!==arguments[4]?arguments[4]:null;o?Transforms.setNodes(e,_defineProperty$2({},r,n),{at:o}):t?(o=ReactEditor.findPath(e,t),Transforms.setNodes(e,_defineProperty$2({},r,n),{at:o})):Transforms.setNodes(e,_defineProperty$2({},r,n))},setLanguage=function(e,t,r){setNodeTag$1(e,t,["language"],r)},setCode=function(e,t){t=ReactEditor.findPath(e,t);Transforms.removeNodes(e,{at:t}),Transforms.insertNodes(e,{type:"code",language:"",children:[{type:"codeLine",children:[{text:""}]}]},{at:t})},Option=Select$1.Option,EditMenu$1=function(e){var t,r=e.element,n=useSlate(),o=[];for(t in Prism.languages)o.push(React.createElement(Option,{key:t,value:t},t));return React.createElement(Select$1,{value:r.language,onChange:function(e){setLanguage(n,r,e)},showSearch:!0,style:{width:"100%"},placeholder:"搜索语言",optionFilterProp:"children",filterOption:function(e,t){return 0<=t.children.toLowerCase().indexOf(e.toLowerCase())},filterSort:function(e,t){return e.children.toLowerCase().localeCompare(t.children.toLowerCase())}},o)},AddMenu$1=function(e){var t=useSlate(),r=e.element;return React.createElement(Button,{type:"text",icon:React.createElement(CodepenOutlined,{style:{color:"#262626"}}),style:{width:"100%",textAlign:"left"},onMouseDown:function(){setCode(t,r)}},"代码块")},withCode=function(f){var t=f.isEmpty,o=f.deleteBackward,h=f.insertFragment;return f.isEmpty=function(e){return"code"!==e.type&&t(e)},f.insertFragment=function(e){if(Array.isArray(e)){var t=f.selection;if(!t)return h(e);for(var c=t.anchor,t=t.focus,r=_toConsumableArray(Node.common(f,c.path,t.path)[1]);;){if(0==r.length)return h(e);var n=Node.get(f,r);if(n.type&&"code"==n.type)break;r=Path.parent(r)}var o,a=[],i=_createForOfIteratorHelper(e);try{for(i.s();!(o=i.n()).done;){var u=o.value;if("code"===u.type){var l,s=_createForOfIteratorHelper(u.children);try{for(s.s();!(l=s.n()).done;){var d=l.value;a.push({type:"codeLine",children:[{text:Node.string(d)}]})}}catch(e){s.e(e)}finally{s.f()}}else a.push({type:"codeLine",children:[{text:Node.string(u)}]})}}catch(e){i.e(e)}finally{i.f()}Transforms.insertNodes(f,a)}else h(e)},f.deleteBackward=function(e){var t=f.selection;if(t&&Range.isCollapsed(t)){var r=_slicedToArray(Editor.nodes(f,{match:function(e){return!Editor.isEditor(e)&&Element$9.isElement(e)&&"code"===e.type}}),1)[0];if(r){var r=_slicedToArray(r,2)[1],n=Editor.start(f,r);if(Point.equals(t.anchor,n))return Transforms.setNodes(f,{type:"paragraph"},{at:[].concat(_toConsumableArray(r),[0])}),void o(e)}}o(e)},f},withCodeLine=function(a){var t=a.isEmpty,i=a.insertBreak,u=a.insertText,r=a.onTabDown;return a.isEmpty=function(e){return"codeLine"!==e.type&&t(e)},a.onTabDown=function(){var e=Editor.above(a,{match:function(e){return Editor.isBlock(a,e)}});if(e){var e=_slicedToArray(e,2),t=e[0];if(e[1],!t.type||"codeLine"===t.type)return u("\t"),!0}return!!r&&r()},a.insertBreak=function(){var e=Editor.above(a,{match:function(e){return Editor.isBlock(a,e)}});if(e){var e=_slicedToArray(e,2),t=e[0],e=e[1];if(t.type&&"codeLine"==t.type){var r=Editor.string(a,e).split(/\t/);if(1===r.length)i();else{for(var n=[],o=0;o<r.length-1&&""==r[o];o++)n.push("\t");i(),0<n.length&&u(n.join(""))}return}}i()},a},CodeDcorate=function(e,t){var t=_slicedToArray(t,2),r=t[0],l=t[1];if(!r.language)return[];t=Prism.languages[r.language];if(!t)return[];if(!r.children)return[];for(var n=[],o=0;o<r.children.length;o++)var a=l.concat(o),n=n.concat(Editor.string(e,a));var t=Prism.tokenize(n.join("\n"),t),s=[],c=0,d=0;return function i(e){var u=1<arguments.length&&void 0!==arguments[1]?arguments[1]:null;e.forEach(function(e,t){if("string"==typeof e){if(-1<e.indexOf("\n"))return r=e.split(/\n/),c=r[r.length-1].length,void(d+=r.length-1);u&&(r=l.concat(d),s.push({anchor:{path:r,offset:c},focus:{path:r,offset:c+e.length},codeType:u})),c+=e.length}else if("string"==typeof e.content){var r=e.content;if(-1<r.indexOf("\n"))for(var n=r.split(/\n/),o=0;o<n.length;o++){var a=l.concat(d);0===o?s.push({anchor:{path:a,offset:c},focus:{path:a,offset:c+n[o].length},codeType:e.type}):(s.push({anchor:{path:a,offset:0},focus:{path:a,offset:c+n[o].length},codeType:e.type}),c=n[o].length),o<n.length-1&&d++}else{r=l.concat(d);s.push({anchor:{path:r,offset:c},focus:{path:r,offset:c+e.length},codeType:e.type}),c+=e.length}}else i(e.content,e.alias||e.type)})}(t),s},codeColorConfig={comment:"slategray",operator:"#9a6e3a",url:"#9a6e3a",keyword:"#07a",variable:"#e90",regex:"#e90",number:"#905",boolean:"#905",tag:"#905",constant:"#905",symbol:"#905",selector:"#905","attr-name":"#905",punctuation:"#999",string:"#690",char:"#690",function:"#dd4a68","class-name":"#dd4a68",builtin:"#1d39c4"},Leaf=function(e){var t=e.attributes,r=e.children,e=e.leaf;return e.codeType&&codeColorConfig[e.codeType]?React.createElement("span",_extends({style:{color:codeColorConfig[e.codeType]}},t),r):React.createElement("span",t,r)},Code={type:"code",IsBlock:!0,AddMenu:AddMenu$1,EditMenu:EditMenu$1,Element:Element$1,Plugin:withCode,Decorate:CodeDcorate,Leaf:Leaf},CodeLine={type:"codeLine",IsBlock:!1,Element:CodeLineElement,Plugin:withCodeLine},setNodeTag=function(e,t,r,n){var o=4<arguments.length&&void 0!==arguments[4]?arguments[4]:null;o?Transforms.setNodes(e,_defineProperty$2({},r,n),{at:o}):t?(o=ReactEditor.findPath(e,t),Transforms.setNodes(e,_defineProperty$2({},r,n),{at:o})):Transforms.setNodes(e,_defineProperty$2({},r,n))},setVideo=function(e,t,r){t&&(t=ReactEditor.findPath(e,t),Transforms.setNodes(e,{type:"video",src:r,width:700,children:[{text:""}]},{at:t}))},setTextAlign=function(e,t,r){setNodeTag(e,t,"textAlign",r)},setWidth=function(e,t,r){r<40||2e3<r||setNodeTag(e,t,"width",r)},EditMenu=function(e){var t=useSlate(),r=e.element;return React.createElement(React.Fragment,null,React.createElement(Select,{selected:r.textAlign,buttons:textAlignButtonList,onChange:function(e){setTextAlign(t,r,e)}}),React.createElement("hr",{style:{border:"1px solid #f5f5f5"}}),React.createElement(Button,{size:"small",type:"text",icon:React.createElement(MinusCircleOutlined,{style:{color:"#389e0d"}}),onMouseDown:function(){setWidth(t,r,r.width-20)}}),React.createElement(Button,{size:"small",type:"text",icon:React.createElement(PlusCircleOutlined,{style:{color:"#f5222d"}}),onMouseDown:function(){setWidth(t,r,r.width+20)}}))},AddMenu=function(e){var o=useSlate(),a=e.element;return React.createElement(Popover,{content:React.createElement(React.Fragment,null,React.createElement(function(e){var t=_slicedToArray(useState(""),2),r=t[0],n=t[1];return React.createElement(React.Fragment,null,React.createElement("div",{style:{display:"inline-block",width:"280px"}},React.createElement(Input,{value:r,placeholder:"输入视频地址",onChange:function(e){return n(e.target.value)}}))," ",React.createElement(Single,{selected:!0,description:"video的url",content:"确认",onClick:function(){setVideo(o,a,r)}}))},null)),placement:"topRight"},React.createElement(Button,{type:"text",icon:React.createElement(VideoCameraOutlined,{style:{color:"#00474f"}}),style:{width:"100%",textAlign:"left"}},"视频"))},textAlignButtonList=[{key:"left",content:React.createElement(AlignLeftOutlined,null),description:"左对齐"},{key:"center",content:React.createElement(AlignCenterOutlined,null),description:"居中"},{key:"right",content:React.createElement(AlignRightOutlined,null),description:"右对齐"}],Element=memo(function(e){var t=e.attributes,r=e.children,e=e.element;return React.createElement("div",_extends({},t,{style:{width:"100%",textAlign:e.textAlign||"left"}}),React.createElement("iframe",{src:e.src,scrolling:"no",border:0,frameBorder:"no",framespacing:0,allowFullScreen:!0,style:{width:"".concat(e.width,"px"),height:"".concat(.7*e.width,"px"),maxWidth:"100%"}}),r)}),withVideo=function(e){var t=e.isEmpty,r=e.isVoid;return e.isEmpty=function(e){return"video"!==e.type&&t(e)},e.isVoid=function(e){return"video"===e.type||r(e)},e},Video={type:"video",IsBlock:!0,AddMenu:AddMenu,EditMenu:EditMenu,Element:Element,Plugin:withVideo},deleteNode=function(e,t){var r=(r=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null)||ReactEditor.findPath(e,t),n=_slicedToArray(Editor.node(e,{}),1)[0];1<getFromNodeEntry(n,Path.parent(r)).children.length?Transforms.removeNodes(e,{at:r}):(Transforms.removeNodes(e,{at:r}),Transforms.insertNodes(e,{type:"paragraph",children:[{text:""}]},{at:r}))},insertNextEmptyNode=function(e,t){t=ReactEditor.findPath(e,t);Transforms.insertNodes(e,{type:"paragraph",children:[{text:""}]},{at:Path.next(t)})},insertPreviousEmptyNode=function(e,t){t=ReactEditor.findPath(e,t);Transforms.insertNodes(e,{type:"paragraph",children:[{text:""}]},{at:t})},getFromNodeEntry=function(e,t){var r,n=e,o=_createForOfIteratorHelper(t);try{for(o.s();!(r=o.n()).done;)var a=r.value,n=n.children[a]}catch(e){o.e(e)}finally{o.f()}return n},Menu=function(e){function t(){return n?React.createElement(PlusCircleOutlined,null):React.createElement(EditOutlined,null)}function c(){return n?React.createElement(f,e):React.createElement(h,e)}var o=e.element,d=e.children,a=e.plugins,r=e.editMenu,i=useSlate(),n=i.isEmpty(o),f=function(e){for(var t=ReactEditor.findPath(i,o).length,r=[],n=0;n<a.length;n++)a[n].IsBlock&&(a[n].Level&&a[n].Level<t||(r.push(React.createElement("span",{key:n},a[n].AddMenu(e))),r.push(React.createElement("hr",{key:"".concat(n,"hr"),style:{border:"1px solid #f5f5f5"}}))));return React.createElement("div",{style:{width:"200px"}},r)},h=function(e){return React.createElement("div",{style:{width:"200px"}},r?r(e):null,r?React.createElement("hr",{style:{border:"1px solid #f5f5f5"}}):null,React.createElement(Button,{type:"text",icon:React.createElement(DeleteOutlined,{style:{color:"red"}}),style:{width:"100%",textAlign:"left"},onMouseDown:function(){return deleteNode(i,o)}},"清空当前行"),React.createElement("hr",{style:{border:"1px solid #f5f5f5"}}),React.createElement(Button,{type:"text",icon:React.createElement(UpCircleOutlined,{style:{color:"#096dd9"}}),style:{width:"100%",textAlign:"left"},onMouseDown:function(){return insertPreviousEmptyNode(i,o)}},"上方插入空白行"),React.createElement("hr",{style:{border:"1px solid #f5f5f5"}}),React.createElement(Button,{type:"text",icon:React.createElement(DownCircleOutlined,{style:{color:"#237804"}}),style:{width:"100%",textAlign:"left"},onMouseDown:function(){return insertNextEmptyNode(i,o)}},"下方插入空白行"))},u=_slicedToArray(useState(!1),2),l=u[0],s=u[1];return React.createElement(Popover,{content:React.createElement(function(){return React.createElement("div",{onMouseOver:function(){return s(!0)},onMouseLeave:function(){return s(!1)}},l?React.createElement(c,null):React.createElement(t,null))},null),placement:"leftTop"},React.createElement("div",{style:{backgroundColor:l?"#e6f7ff":""}},d))},defaultPlugins=[Paragraph,Link,Star,Card,Image,Table,TableRow,TableCell,TableCellMerged,Code,CodeLine,Divider,Hr,Video],withCommon=function(e){e.readOnly=!1,e.param={};var t=e.onChange,r=_$1.throttle(t,16);return e.onChange=function(){r()},e},SEditor=function(e){function t(e){for(var t=[],r=0;r<i.length;r++)i[r].LeafBar&&t.push(React.createElement("span",{key:i[r].type},i[r].LeafBar(e)));return React.createElement("div",null,t)}var r=e.value,n=e.onChange,o=e.plugins,a=e.param,e=!!e.readOnly,i=[].concat(defaultPlugins,_toConsumableArray(o)),u=useMemo(function(){for(var e=withCommon(withHistory(withReact(createEditor()))),t=i.length-1;0<=t;t--)i[t].Plugin&&(e=i[t].Plugin(e));return e},[]),o=(u.readOnly=e,u.param=a,useCallback(function(e){var t=e.attributes,r=e.children,n=e.element;n.type||(n.type="paragraph");for(var o=0;o<i.length;o++){var a=i[o].Element;if(i[o].type===n.type)return i[o].IsBlock?React.createElement(Menu,{element:n,plugins:i,editMenu:i[o].EditMenu},React.createElement(a,{attributes:t,children:r,element:n})):React.createElement(a,{attributes:t,children:r,element:n})}return React.createElement("span",t,r)},[])),a=useCallback(function(e){var t=e.attributes,r=e.children,n=e.element;n.type||(n.type="paragraph");for(var o=0;o<i.length;o++)if(i[o].type===n.type)return i[o].Element({attributes:t,children:r,element:n});return React.createElement("span",t,r)},[]),l=useCallback(function(e){for(var t=e.attributes,r=e.children,n=e.leaf,o=0;o<i.length;o++)i[o].Leaf&&(r=i[o].Leaf({attributes:t,children:r,leaf:n}));return React.createElement("span",t,r)},[]),s=useCallback(function(e){"Tab"==e.key&&u.onTabDown&&u.onTabDown()&&e.preventDefault()},[]),c=useCallback(function(e){for(var e=_slicedToArray(e,2),t=e[0],r=e[1],n=0;n<i.length;n++)if(i[n].Decorate&&i[n].type===t.type)return i[n].Decorate(u,[t,r]);return[]},[]);return React.createElement(Slate,{editor:u,value:r,onChange:n},e?null:React.createElement(React.Fragment,null,React.createElement(Affix,{offsetTop:0},React.createElement("div",{style:{padding:"10px",background:"#bae7ff"}},React.createElement(t,null))),React.createElement("br",null)),React.createElement(Editable,{style:{fontSize:"16px",fontFamily:"-apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial,\n                    'Noto Sans', sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol',\n                    'Noto Color Emoji'"},renderElement:e?a:o,renderLeaf:l,onKeyDown:s,decorate:c,spellCheck:!1,readOnly:e,scrollSelectionIntoView:function(e,t){},placeholder:"输入文本"}))};export{SEditor as default};
//# sourceMappingURL=index.js.map

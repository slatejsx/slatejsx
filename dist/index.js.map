{"version":3,"file":"index.js","sources":["../node_modules/is-plain-object/dist/is-plain-object.mjs","../node_modules/immer/dist/immer.esm.js","../node_modules/slate/dist/index.es.js","../node_modules/direction/index.js","../node_modules/compute-scroll-into-view/dist/index.module.js","../node_modules/scroll-into-view-if-needed/es/index.js","../node_modules/is-hotkey/lib/index.js","../node_modules/slate-react/dist/index.es.js","../node_modules/slate-history/dist/index.es.js","../src/plugins/paragraph/utils/list.jsx","../src/plugins/paragraph/utils/node.jsx","../src/plugins/paragraph/element.jsx","../src/plugins/paragraph/leaf.jsx","../src/plugins/paragraph/utils/active.jsx","../src/plugins/paragraph/toolbar.jsx","../src/plugins/paragraph/plugin.jsx","../src/plugins/paragraph/menu.jsx","../src/plugins/paragraph/index.jsx","../src/plugins/card/utils/node.jsx","../src/plugins/card/utils/icon.jsx","../src/plugins/card/menu.jsx","../src/plugins/card/element.jsx","../src/plugins/card/plugin.jsx","../src/plugins/card/index.jsx","../src/plugins/image/utils/node.jsx","../src/plugins/image/menu.jsx","../src/plugins/image/utils/config.jsx","../src/plugins/image/element.jsx","../src/plugins/image/plugin.jsx","../src/plugins/image/index.jsx","../src/plugins/table/utils/node.jsx","../src/plugins/table/menu.jsx","../src/plugins/table/element.jsx","../src/plugins/table/plugin.jsx","../src/plugins/table/toolbar.jsx","../src/plugins/table/index.jsx","../src/plugins/divider/utils/node.jsx","../src/plugins/divider/menu.jsx","../src/plugins/divider/element.jsx","../src/plugins/divider/plugin.jsx","../src/plugins/divider/index.jsx","../src/plugins/hr/utils/node.jsx","../src/plugins/hr/menu.jsx","../src/plugins/hr/element.jsx","../src/plugins/hr/plugin.jsx","../src/plugins/hr/index.jsx","../src/plugins/code/element.jsx","../src/plugins/code/utils/node.jsx","../src/plugins/code/menu.jsx","../src/plugins/code/plugin.jsx","../src/plugins/code/deorate.jsx","../src/plugins/code/utils/config.jsx","../src/plugins/code/leaf.jsx","../src/plugins/code/index.jsx","../src/plugins/video/utils/node.jsx","../src/plugins/video/menu.jsx","../src/plugins/video/element.jsx","../src/plugins/video/plugin.jsx","../src/plugins/video/index.jsx","../src/node.js","../src/menu.jsx","../src/index.jsx"],"sourcesContent":["/*!\n * is-plain-object <https://github.com/jonschlinkert/is-plain-object>\n *\n * Copyright (c) 2014-2017, Jon Schlinkert.\n * Released under the MIT License.\n */\n\nfunction isObject(o) {\n  return Object.prototype.toString.call(o) === '[object Object]';\n}\n\nfunction isPlainObject(o) {\n  var ctor,prot;\n\n  if (isObject(o) === false) return false;\n\n  // If has modified constructor\n  ctor = o.constructor;\n  if (ctor === undefined) return true;\n\n  // If has modified prototype\n  prot = ctor.prototype;\n  if (isObject(prot) === false) return false;\n\n  // If constructor does not have an Object-specific method\n  if (prot.hasOwnProperty('isPrototypeOf') === false) {\n    return false;\n  }\n\n  // Most likely a plain Object\n  return true;\n}\n\nexport { isPlainObject };\n","function n(n){for(var r=arguments.length,t=Array(r>1?r-1:0),e=1;e<r;e++)t[e-1]=arguments[e];if(\"production\"!==process.env.NODE_ENV){var i=Y[n],o=i?\"function\"==typeof i?i.apply(null,t):i:\"unknown error nr: \"+n;throw Error(\"[Immer] \"+o)}throw Error(\"[Immer] minified error nr: \"+n+(t.length?\" \"+t.map((function(n){return\"'\"+n+\"'\"})).join(\",\"):\"\")+\". Find the full error at: https://bit.ly/3cXEKWf\")}function r(n){return!!n&&!!n[Q]}function t(n){return!!n&&(function(n){if(!n||\"object\"!=typeof n)return!1;var r=Object.getPrototypeOf(n);if(null===r)return!0;var t=Object.hasOwnProperty.call(r,\"constructor\")&&r.constructor;return t===Object||\"function\"==typeof t&&Function.toString.call(t)===Z}(n)||Array.isArray(n)||!!n[L]||!!n.constructor[L]||s(n)||v(n))}function e(t){return r(t)||n(23,t),t[Q].t}function i(n,r,t){void 0===t&&(t=!1),0===o(n)?(t?Object.keys:nn)(n).forEach((function(e){t&&\"symbol\"==typeof e||r(e,n[e],n)})):n.forEach((function(t,e){return r(e,t,n)}))}function o(n){var r=n[Q];return r?r.i>3?r.i-4:r.i:Array.isArray(n)?1:s(n)?2:v(n)?3:0}function u(n,r){return 2===o(n)?n.has(r):Object.prototype.hasOwnProperty.call(n,r)}function a(n,r){return 2===o(n)?n.get(r):n[r]}function f(n,r,t){var e=o(n);2===e?n.set(r,t):3===e?(n.delete(r),n.add(t)):n[r]=t}function c(n,r){return n===r?0!==n||1/n==1/r:n!=n&&r!=r}function s(n){return X&&n instanceof Map}function v(n){return q&&n instanceof Set}function p(n){return n.o||n.t}function l(n){if(Array.isArray(n))return Array.prototype.slice.call(n);var r=rn(n);delete r[Q];for(var t=nn(r),e=0;e<t.length;e++){var i=t[e],o=r[i];!1===o.writable&&(o.writable=!0,o.configurable=!0),(o.get||o.set)&&(r[i]={configurable:!0,writable:!0,enumerable:o.enumerable,value:n[i]})}return Object.create(Object.getPrototypeOf(n),r)}function d(n,e){return void 0===e&&(e=!1),y(n)||r(n)||!t(n)?n:(o(n)>1&&(n.set=n.add=n.clear=n.delete=h),Object.freeze(n),e&&i(n,(function(n,r){return d(r,!0)}),!0),n)}function h(){n(2)}function y(n){return null==n||\"object\"!=typeof n||Object.isFrozen(n)}function b(r){var t=tn[r];return t||n(18,r),t}function m(n,r){tn[n]||(tn[n]=r)}function _(){return\"production\"===process.env.NODE_ENV||U||n(0),U}function j(n,r){r&&(b(\"Patches\"),n.u=[],n.s=[],n.v=r)}function O(n){g(n),n.p.forEach(S),n.p=null}function g(n){n===U&&(U=n.l)}function w(n){return U={p:[],l:U,h:n,m:!0,_:0}}function S(n){var r=n[Q];0===r.i||1===r.i?r.j():r.O=!0}function P(r,e){e._=e.p.length;var i=e.p[0],o=void 0!==r&&r!==i;return e.h.g||b(\"ES5\").S(e,r,o),o?(i[Q].P&&(O(e),n(4)),t(r)&&(r=M(e,r),e.l||x(e,r)),e.u&&b(\"Patches\").M(i[Q].t,r,e.u,e.s)):r=M(e,i,[]),O(e),e.u&&e.v(e.u,e.s),r!==H?r:void 0}function M(n,r,t){if(y(r))return r;var e=r[Q];if(!e)return i(r,(function(i,o){return A(n,e,r,i,o,t)}),!0),r;if(e.A!==n)return r;if(!e.P)return x(n,e.t,!0),e.t;if(!e.I){e.I=!0,e.A._--;var o=4===e.i||5===e.i?e.o=l(e.k):e.o;i(3===e.i?new Set(o):o,(function(r,i){return A(n,e,o,r,i,t)})),x(n,o,!1),t&&n.u&&b(\"Patches\").R(e,t,n.u,n.s)}return e.o}function A(e,i,o,a,c,s){if(\"production\"!==process.env.NODE_ENV&&c===o&&n(5),r(c)){var v=M(e,c,s&&i&&3!==i.i&&!u(i.D,a)?s.concat(a):void 0);if(f(o,a,v),!r(v))return;e.m=!1}if(t(c)&&!y(c)){if(!e.h.F&&e._<1)return;M(e,c),i&&i.A.l||x(e,c)}}function x(n,r,t){void 0===t&&(t=!1),n.h.F&&n.m&&d(r,t)}function z(n,r){var t=n[Q];return(t?p(t):n)[r]}function I(n,r){if(r in n)for(var t=Object.getPrototypeOf(n);t;){var e=Object.getOwnPropertyDescriptor(t,r);if(e)return e;t=Object.getPrototypeOf(t)}}function k(n){n.P||(n.P=!0,n.l&&k(n.l))}function E(n){n.o||(n.o=l(n.t))}function R(n,r,t){var e=s(r)?b(\"MapSet\").N(r,t):v(r)?b(\"MapSet\").T(r,t):n.g?function(n,r){var t=Array.isArray(n),e={i:t?1:0,A:r?r.A:_(),P:!1,I:!1,D:{},l:r,t:n,k:null,o:null,j:null,C:!1},i=e,o=en;t&&(i=[e],o=on);var u=Proxy.revocable(i,o),a=u.revoke,f=u.proxy;return e.k=f,e.j=a,f}(r,t):b(\"ES5\").J(r,t);return(t?t.A:_()).p.push(e),e}function D(e){return r(e)||n(22,e),function n(r){if(!t(r))return r;var e,u=r[Q],c=o(r);if(u){if(!u.P&&(u.i<4||!b(\"ES5\").K(u)))return u.t;u.I=!0,e=F(r,c),u.I=!1}else e=F(r,c);return i(e,(function(r,t){u&&a(u.t,r)===t||f(e,r,n(t))})),3===c?new Set(e):e}(e)}function F(n,r){switch(r){case 2:return new Map(n);case 3:return Array.from(n)}return l(n)}function N(){function t(n,r){var t=s[n];return t?t.enumerable=r:s[n]=t={configurable:!0,enumerable:r,get:function(){var r=this[Q];return\"production\"!==process.env.NODE_ENV&&f(r),en.get(r,n)},set:function(r){var t=this[Q];\"production\"!==process.env.NODE_ENV&&f(t),en.set(t,n,r)}},t}function e(n){for(var r=n.length-1;r>=0;r--){var t=n[r][Q];if(!t.P)switch(t.i){case 5:a(t)&&k(t);break;case 4:o(t)&&k(t)}}}function o(n){for(var r=n.t,t=n.k,e=nn(t),i=e.length-1;i>=0;i--){var o=e[i];if(o!==Q){var a=r[o];if(void 0===a&&!u(r,o))return!0;var f=t[o],s=f&&f[Q];if(s?s.t!==a:!c(f,a))return!0}}var v=!!r[Q];return e.length!==nn(r).length+(v?0:1)}function a(n){var r=n.k;if(r.length!==n.t.length)return!0;var t=Object.getOwnPropertyDescriptor(r,r.length-1);if(t&&!t.get)return!0;for(var e=0;e<r.length;e++)if(!r.hasOwnProperty(e))return!0;return!1}function f(r){r.O&&n(3,JSON.stringify(p(r)))}var s={};m(\"ES5\",{J:function(n,r){var e=Array.isArray(n),i=function(n,r){if(n){for(var e=Array(r.length),i=0;i<r.length;i++)Object.defineProperty(e,\"\"+i,t(i,!0));return e}var o=rn(r);delete o[Q];for(var u=nn(o),a=0;a<u.length;a++){var f=u[a];o[f]=t(f,n||!!o[f].enumerable)}return Object.create(Object.getPrototypeOf(r),o)}(e,n),o={i:e?5:4,A:r?r.A:_(),P:!1,I:!1,D:{},l:r,t:n,k:i,o:null,O:!1,C:!1};return Object.defineProperty(i,Q,{value:o,writable:!0}),i},S:function(n,t,o){o?r(t)&&t[Q].A===n&&e(n.p):(n.u&&function n(r){if(r&&\"object\"==typeof r){var t=r[Q];if(t){var e=t.t,o=t.k,f=t.D,c=t.i;if(4===c)i(o,(function(r){r!==Q&&(void 0!==e[r]||u(e,r)?f[r]||n(o[r]):(f[r]=!0,k(t)))})),i(e,(function(n){void 0!==o[n]||u(o,n)||(f[n]=!1,k(t))}));else if(5===c){if(a(t)&&(k(t),f.length=!0),o.length<e.length)for(var s=o.length;s<e.length;s++)f[s]=!1;else for(var v=e.length;v<o.length;v++)f[v]=!0;for(var p=Math.min(o.length,e.length),l=0;l<p;l++)o.hasOwnProperty(l)||(f[l]=!0),void 0===f[l]&&n(o[l])}}}}(n.p[0]),e(n.p))},K:function(n){return 4===n.i?o(n):a(n)}})}function T(){function e(n){if(!t(n))return n;if(Array.isArray(n))return n.map(e);if(s(n))return new Map(Array.from(n.entries()).map((function(n){return[n[0],e(n[1])]})));if(v(n))return new Set(Array.from(n).map(e));var r=Object.create(Object.getPrototypeOf(n));for(var i in n)r[i]=e(n[i]);return u(n,L)&&(r[L]=n[L]),r}function f(n){return r(n)?e(n):n}var c=\"add\";m(\"Patches\",{$:function(r,t){return t.forEach((function(t){for(var i=t.path,u=t.op,f=r,s=0;s<i.length-1;s++){var v=o(f),p=\"\"+i[s];0!==v&&1!==v||\"__proto__\"!==p&&\"constructor\"!==p||n(24),\"function\"==typeof f&&\"prototype\"===p&&n(24),\"object\"!=typeof(f=a(f,p))&&n(15,i.join(\"/\"))}var l=o(f),d=e(t.value),h=i[i.length-1];switch(u){case\"replace\":switch(l){case 2:return f.set(h,d);case 3:n(16);default:return f[h]=d}case c:switch(l){case 1:return\"-\"===h?f.push(d):f.splice(h,0,d);case 2:return f.set(h,d);case 3:return f.add(d);default:return f[h]=d}case\"remove\":switch(l){case 1:return f.splice(h,1);case 2:return f.delete(h);case 3:return f.delete(t.value);default:return delete f[h]}default:n(17,u)}})),r},R:function(n,r,t,e){switch(n.i){case 0:case 4:case 2:return function(n,r,t,e){var o=n.t,s=n.o;i(n.D,(function(n,i){var v=a(o,n),p=a(s,n),l=i?u(o,n)?\"replace\":c:\"remove\";if(v!==p||\"replace\"!==l){var d=r.concat(n);t.push(\"remove\"===l?{op:l,path:d}:{op:l,path:d,value:p}),e.push(l===c?{op:\"remove\",path:d}:\"remove\"===l?{op:c,path:d,value:f(v)}:{op:\"replace\",path:d,value:f(v)})}}))}(n,r,t,e);case 5:case 1:return function(n,r,t,e){var i=n.t,o=n.D,u=n.o;if(u.length<i.length){var a=[u,i];i=a[0],u=a[1];var s=[e,t];t=s[0],e=s[1]}for(var v=0;v<i.length;v++)if(o[v]&&u[v]!==i[v]){var p=r.concat([v]);t.push({op:\"replace\",path:p,value:f(u[v])}),e.push({op:\"replace\",path:p,value:f(i[v])})}for(var l=i.length;l<u.length;l++){var d=r.concat([l]);t.push({op:c,path:d,value:f(u[l])})}i.length<u.length&&e.push({op:\"replace\",path:r.concat([\"length\"]),value:i.length})}(n,r,t,e);case 3:return function(n,r,t,e){var i=n.t,o=n.o,u=0;i.forEach((function(n){if(!o.has(n)){var i=r.concat([u]);t.push({op:\"remove\",path:i,value:n}),e.unshift({op:c,path:i,value:n})}u++})),u=0,o.forEach((function(n){if(!i.has(n)){var o=r.concat([u]);t.push({op:c,path:o,value:n}),e.unshift({op:\"remove\",path:o,value:n})}u++}))}(n,r,t,e)}},M:function(n,r,t,e){t.push({op:\"replace\",path:[],value:r===H?void 0:r}),e.push({op:\"replace\",path:[],value:n})}})}function C(){function r(n,r){function t(){this.constructor=n}a(n,r),n.prototype=(t.prototype=r.prototype,new t)}function e(n){n.o||(n.D=new Map,n.o=new Map(n.t))}function o(n){n.o||(n.o=new Set,n.t.forEach((function(r){if(t(r)){var e=R(n.A.h,r,n);n.p.set(r,e),n.o.add(e)}else n.o.add(r)})))}function u(r){r.O&&n(3,JSON.stringify(p(r)))}var a=function(n,r){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var t in r)r.hasOwnProperty(t)&&(n[t]=r[t])})(n,r)},f=function(){function n(n,r){return this[Q]={i:2,l:r,A:r?r.A:_(),P:!1,I:!1,o:void 0,D:void 0,t:n,k:this,C:!1,O:!1},this}r(n,Map);var o=n.prototype;return Object.defineProperty(o,\"size\",{get:function(){return p(this[Q]).size}}),o.has=function(n){return p(this[Q]).has(n)},o.set=function(n,r){var t=this[Q];return u(t),p(t).has(n)&&p(t).get(n)===r||(e(t),k(t),t.D.set(n,!0),t.o.set(n,r),t.D.set(n,!0)),this},o.delete=function(n){if(!this.has(n))return!1;var r=this[Q];return u(r),e(r),k(r),r.t.has(n)?r.D.set(n,!1):r.D.delete(n),r.o.delete(n),!0},o.clear=function(){var n=this[Q];u(n),p(n).size&&(e(n),k(n),n.D=new Map,i(n.t,(function(r){n.D.set(r,!1)})),n.o.clear())},o.forEach=function(n,r){var t=this;p(this[Q]).forEach((function(e,i){n.call(r,t.get(i),i,t)}))},o.get=function(n){var r=this[Q];u(r);var i=p(r).get(n);if(r.I||!t(i))return i;if(i!==r.t.get(n))return i;var o=R(r.A.h,i,r);return e(r),r.o.set(n,o),o},o.keys=function(){return p(this[Q]).keys()},o.values=function(){var n,r=this,t=this.keys();return(n={})[V]=function(){return r.values()},n.next=function(){var n=t.next();return n.done?n:{done:!1,value:r.get(n.value)}},n},o.entries=function(){var n,r=this,t=this.keys();return(n={})[V]=function(){return r.entries()},n.next=function(){var n=t.next();if(n.done)return n;var e=r.get(n.value);return{done:!1,value:[n.value,e]}},n},o[V]=function(){return this.entries()},n}(),c=function(){function n(n,r){return this[Q]={i:3,l:r,A:r?r.A:_(),P:!1,I:!1,o:void 0,t:n,k:this,p:new Map,O:!1,C:!1},this}r(n,Set);var t=n.prototype;return Object.defineProperty(t,\"size\",{get:function(){return p(this[Q]).size}}),t.has=function(n){var r=this[Q];return u(r),r.o?!!r.o.has(n)||!(!r.p.has(n)||!r.o.has(r.p.get(n))):r.t.has(n)},t.add=function(n){var r=this[Q];return u(r),this.has(n)||(o(r),k(r),r.o.add(n)),this},t.delete=function(n){if(!this.has(n))return!1;var r=this[Q];return u(r),o(r),k(r),r.o.delete(n)||!!r.p.has(n)&&r.o.delete(r.p.get(n))},t.clear=function(){var n=this[Q];u(n),p(n).size&&(o(n),k(n),n.o.clear())},t.values=function(){var n=this[Q];return u(n),o(n),n.o.values()},t.entries=function(){var n=this[Q];return u(n),o(n),n.o.entries()},t.keys=function(){return this.values()},t[V]=function(){return this.values()},t.forEach=function(n,r){for(var t=this.values(),e=t.next();!e.done;)n.call(r,e.value,e.value,this),e=t.next()},n}();m(\"MapSet\",{N:function(n,r){return new f(n,r)},T:function(n,r){return new c(n,r)}})}function J(){N(),C(),T()}function K(n){return n}function $(n){return n}var G,U,W=\"undefined\"!=typeof Symbol&&\"symbol\"==typeof Symbol(\"x\"),X=\"undefined\"!=typeof Map,q=\"undefined\"!=typeof Set,B=\"undefined\"!=typeof Proxy&&void 0!==Proxy.revocable&&\"undefined\"!=typeof Reflect,H=W?Symbol.for(\"immer-nothing\"):((G={})[\"immer-nothing\"]=!0,G),L=W?Symbol.for(\"immer-draftable\"):\"__$immer_draftable\",Q=W?Symbol.for(\"immer-state\"):\"__$immer_state\",V=\"undefined\"!=typeof Symbol&&Symbol.iterator||\"@@iterator\",Y={0:\"Illegal state\",1:\"Immer drafts cannot have computed properties\",2:\"This object has been frozen and should not be mutated\",3:function(n){return\"Cannot use a proxy that has been revoked. Did you pass an object from inside an immer function to an async process? \"+n},4:\"An immer producer returned a new value *and* modified its draft. Either return a new value *or* modify the draft.\",5:\"Immer forbids circular references\",6:\"The first or second argument to `produce` must be a function\",7:\"The third argument to `produce` must be a function or undefined\",8:\"First argument to `createDraft` must be a plain object, an array, or an immerable object\",9:\"First argument to `finishDraft` must be a draft returned by `createDraft`\",10:\"The given draft is already finalized\",11:\"Object.defineProperty() cannot be used on an Immer draft\",12:\"Object.setPrototypeOf() cannot be used on an Immer draft\",13:\"Immer only supports deleting array indices\",14:\"Immer only supports setting array indices and the 'length' property\",15:function(n){return\"Cannot apply patch, path doesn't resolve: \"+n},16:'Sets cannot have \"replace\" patches.',17:function(n){return\"Unsupported patch operation: \"+n},18:function(n){return\"The plugin for '\"+n+\"' has not been loaded into Immer. To enable the plugin, import and call `enable\"+n+\"()` when initializing your application.\"},20:\"Cannot use proxies if Proxy, Proxy.revocable or Reflect are not available\",21:function(n){return\"produce can only be called on things that are draftable: plain objects, arrays, Map, Set or classes that are marked with '[immerable]: true'. Got '\"+n+\"'\"},22:function(n){return\"'current' expects a draft, got: \"+n},23:function(n){return\"'original' expects a draft, got: \"+n},24:\"Patching reserved attributes like __proto__, prototype and constructor is not allowed\"},Z=\"\"+Object.prototype.constructor,nn=\"undefined\"!=typeof Reflect&&Reflect.ownKeys?Reflect.ownKeys:void 0!==Object.getOwnPropertySymbols?function(n){return Object.getOwnPropertyNames(n).concat(Object.getOwnPropertySymbols(n))}:Object.getOwnPropertyNames,rn=Object.getOwnPropertyDescriptors||function(n){var r={};return nn(n).forEach((function(t){r[t]=Object.getOwnPropertyDescriptor(n,t)})),r},tn={},en={get:function(n,r){if(r===Q)return n;var e=p(n);if(!u(e,r))return function(n,r,t){var e,i=I(r,t);return i?\"value\"in i?i.value:null===(e=i.get)||void 0===e?void 0:e.call(n.k):void 0}(n,e,r);var i=e[r];return n.I||!t(i)?i:i===z(n.t,r)?(E(n),n.o[r]=R(n.A.h,i,n)):i},has:function(n,r){return r in p(n)},ownKeys:function(n){return Reflect.ownKeys(p(n))},set:function(n,r,t){var e=I(p(n),r);if(null==e?void 0:e.set)return e.set.call(n.k,t),!0;if(!n.P){var i=z(p(n),r),o=null==i?void 0:i[Q];if(o&&o.t===t)return n.o[r]=t,n.D[r]=!1,!0;if(c(t,i)&&(void 0!==t||u(n.t,r)))return!0;E(n),k(n)}return n.o[r]===t&&\"number\"!=typeof t&&(void 0!==t||r in n.o)||(n.o[r]=t,n.D[r]=!0,!0)},deleteProperty:function(n,r){return void 0!==z(n.t,r)||r in n.t?(n.D[r]=!1,E(n),k(n)):delete n.D[r],n.o&&delete n.o[r],!0},getOwnPropertyDescriptor:function(n,r){var t=p(n),e=Reflect.getOwnPropertyDescriptor(t,r);return e?{writable:!0,configurable:1!==n.i||\"length\"!==r,enumerable:e.enumerable,value:t[r]}:e},defineProperty:function(){n(11)},getPrototypeOf:function(n){return Object.getPrototypeOf(n.t)},setPrototypeOf:function(){n(12)}},on={};i(en,(function(n,r){on[n]=function(){return arguments[0]=arguments[0][0],r.apply(this,arguments)}})),on.deleteProperty=function(r,t){return\"production\"!==process.env.NODE_ENV&&isNaN(parseInt(t))&&n(13),on.set.call(this,r,t,void 0)},on.set=function(r,t,e){return\"production\"!==process.env.NODE_ENV&&\"length\"!==t&&isNaN(parseInt(t))&&n(14),en.set.call(this,r[0],t,e,r[0])};var un=function(){function e(r){var e=this;this.g=B,this.F=!0,this.produce=function(r,i,o){if(\"function\"==typeof r&&\"function\"!=typeof i){var u=i;i=r;var a=e;return function(n){var r=this;void 0===n&&(n=u);for(var t=arguments.length,e=Array(t>1?t-1:0),o=1;o<t;o++)e[o-1]=arguments[o];return a.produce(n,(function(n){var t;return(t=i).call.apply(t,[r,n].concat(e))}))}}var f;if(\"function\"!=typeof i&&n(6),void 0!==o&&\"function\"!=typeof o&&n(7),t(r)){var c=w(e),s=R(e,r,void 0),v=!0;try{f=i(s),v=!1}finally{v?O(c):g(c)}return\"undefined\"!=typeof Promise&&f instanceof Promise?f.then((function(n){return j(c,o),P(n,c)}),(function(n){throw O(c),n})):(j(c,o),P(f,c))}if(!r||\"object\"!=typeof r){if(void 0===(f=i(r))&&(f=r),f===H&&(f=void 0),e.F&&d(f,!0),o){var p=[],l=[];b(\"Patches\").M(r,f,p,l),o(p,l)}return f}n(21,r)},this.produceWithPatches=function(n,r){if(\"function\"==typeof n)return function(r){for(var t=arguments.length,i=Array(t>1?t-1:0),o=1;o<t;o++)i[o-1]=arguments[o];return e.produceWithPatches(r,(function(r){return n.apply(void 0,[r].concat(i))}))};var t,i,o=e.produce(n,r,(function(n,r){t=n,i=r}));return\"undefined\"!=typeof Promise&&o instanceof Promise?o.then((function(n){return[n,t,i]})):[o,t,i]},\"boolean\"==typeof(null==r?void 0:r.useProxies)&&this.setUseProxies(r.useProxies),\"boolean\"==typeof(null==r?void 0:r.autoFreeze)&&this.setAutoFreeze(r.autoFreeze)}var i=e.prototype;return i.createDraft=function(e){t(e)||n(8),r(e)&&(e=D(e));var i=w(this),o=R(this,e,void 0);return o[Q].C=!0,g(i),o},i.finishDraft=function(r,t){var e=r&&r[Q];\"production\"!==process.env.NODE_ENV&&(e&&e.C||n(9),e.I&&n(10));var i=e.A;return j(i,t),P(void 0,i)},i.setAutoFreeze=function(n){this.F=n},i.setUseProxies=function(r){r&&!B&&n(20),this.g=r},i.applyPatches=function(n,t){var e;for(e=t.length-1;e>=0;e--){var i=t[e];if(0===i.path.length&&\"replace\"===i.op){n=i.value;break}}e>-1&&(t=t.slice(e+1));var o=b(\"Patches\").$;return r(n)?o(n,t):this.produce(n,(function(n){return o(n,t)}))},e}(),an=new un,fn=an.produce,cn=an.produceWithPatches.bind(an),sn=an.setAutoFreeze.bind(an),vn=an.setUseProxies.bind(an),pn=an.applyPatches.bind(an),ln=an.createDraft.bind(an),dn=an.finishDraft.bind(an);export default fn;export{un as Immer,pn as applyPatches,K as castDraft,$ as castImmutable,ln as createDraft,D as current,J as enableAllPlugins,N as enableES5,C as enableMapSet,T as enablePatches,dn as finishDraft,d as freeze,L as immerable,r as isDraft,t as isDraftable,H as nothing,e as original,fn as produce,cn as produceWithPatches,sn as setAutoFreeze,vn as setUseProxies};\n//# sourceMappingURL=immer.esm.js.map\n","import { isPlainObject } from 'is-plain-object';\nimport { produce, createDraft, finishDraft, isDraft } from 'immer';\n\nfunction _defineProperty(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n}\n\nvar DIRTY_PATHS = new WeakMap();\nvar DIRTY_PATH_KEYS = new WeakMap();\nvar FLUSHING = new WeakMap();\nvar NORMALIZING = new WeakMap();\nvar PATH_REFS = new WeakMap();\nvar POINT_REFS = new WeakMap();\nvar RANGE_REFS = new WeakMap();\n\nfunction ownKeys$9(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) { symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); } keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread$9(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys$9(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys$9(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n/**\r\n * Create a new Slate `Editor` object.\r\n */\n\nvar createEditor = () => {\n  var editor = {\n    children: [],\n    operations: [],\n    selection: null,\n    marks: null,\n    isInline: () => false,\n    isVoid: () => false,\n    onChange: () => {},\n    apply: op => {\n      for (var ref of Editor.pathRefs(editor)) {\n        PathRef.transform(ref, op);\n      }\n\n      for (var _ref of Editor.pointRefs(editor)) {\n        PointRef.transform(_ref, op);\n      }\n\n      for (var _ref2 of Editor.rangeRefs(editor)) {\n        RangeRef.transform(_ref2, op);\n      }\n\n      var oldDirtyPaths = DIRTY_PATHS.get(editor) || [];\n      var oldDirtyPathKeys = DIRTY_PATH_KEYS.get(editor) || new Set();\n      var dirtyPaths;\n      var dirtyPathKeys;\n\n      var add = path => {\n        if (path) {\n          var key = path.join(',');\n\n          if (!dirtyPathKeys.has(key)) {\n            dirtyPathKeys.add(key);\n            dirtyPaths.push(path);\n          }\n        }\n      };\n\n      if (Path.operationCanTransformPath(op)) {\n        dirtyPaths = [];\n        dirtyPathKeys = new Set();\n\n        for (var path of oldDirtyPaths) {\n          var newPath = Path.transform(path, op);\n          add(newPath);\n        }\n      } else {\n        dirtyPaths = oldDirtyPaths;\n        dirtyPathKeys = oldDirtyPathKeys;\n      }\n\n      var newDirtyPaths = getDirtyPaths(op);\n\n      for (var _path of newDirtyPaths) {\n        add(_path);\n      }\n\n      DIRTY_PATHS.set(editor, dirtyPaths);\n      DIRTY_PATH_KEYS.set(editor, dirtyPathKeys);\n      Transforms.transform(editor, op);\n      editor.operations.push(op);\n      Editor.normalize(editor); // Clear any formats applied to the cursor if the selection changes.\n\n      if (op.type === 'set_selection') {\n        editor.marks = null;\n      }\n\n      if (!FLUSHING.get(editor)) {\n        FLUSHING.set(editor, true);\n        Promise.resolve().then(() => {\n          FLUSHING.set(editor, false);\n          editor.onChange();\n          editor.operations = [];\n        });\n      }\n    },\n    addMark: (key, value) => {\n      var {\n        selection\n      } = editor;\n\n      if (selection) {\n        if (Range.isExpanded(selection)) {\n          Transforms.setNodes(editor, {\n            [key]: value\n          }, {\n            match: Text.isText,\n            split: true\n          });\n        } else {\n          var marks = _objectSpread$9(_objectSpread$9({}, Editor.marks(editor) || {}), {}, {\n            [key]: value\n          });\n\n          editor.marks = marks;\n\n          if (!FLUSHING.get(editor)) {\n            editor.onChange();\n          }\n        }\n      }\n    },\n    deleteBackward: unit => {\n      var {\n        selection\n      } = editor;\n\n      if (selection && Range.isCollapsed(selection)) {\n        Transforms.delete(editor, {\n          unit,\n          reverse: true\n        });\n      }\n    },\n    deleteForward: unit => {\n      var {\n        selection\n      } = editor;\n\n      if (selection && Range.isCollapsed(selection)) {\n        Transforms.delete(editor, {\n          unit\n        });\n      }\n    },\n    deleteFragment: direction => {\n      var {\n        selection\n      } = editor;\n\n      if (selection && Range.isExpanded(selection)) {\n        Transforms.delete(editor, {\n          reverse: direction === 'backward'\n        });\n      }\n    },\n    getFragment: () => {\n      var {\n        selection\n      } = editor;\n\n      if (selection) {\n        return Node.fragment(editor, selection);\n      }\n\n      return [];\n    },\n    insertBreak: () => {\n      Transforms.splitNodes(editor, {\n        always: true\n      });\n    },\n    insertFragment: fragment => {\n      Transforms.insertFragment(editor, fragment);\n    },\n    insertNode: node => {\n      Transforms.insertNodes(editor, node);\n    },\n    insertText: text => {\n      var {\n        selection,\n        marks\n      } = editor;\n\n      if (selection) {\n        if (marks) {\n          var node = _objectSpread$9({\n            text\n          }, marks);\n\n          Transforms.insertNodes(editor, node);\n        } else {\n          Transforms.insertText(editor, text);\n        }\n\n        editor.marks = null;\n      }\n    },\n    normalizeNode: entry => {\n      var [node, path] = entry; // There are no core normalizations for text nodes.\n\n      if (Text.isText(node)) {\n        return;\n      } // Ensure that block and inline nodes have at least one text child.\n\n\n      if (Element.isElement(node) && node.children.length === 0) {\n        var child = {\n          text: ''\n        };\n        Transforms.insertNodes(editor, child, {\n          at: path.concat(0),\n          voids: true\n        });\n        return;\n      } // Determine whether the node should have block or inline children.\n\n\n      var shouldHaveInlines = Editor.isEditor(node) ? false : Element.isElement(node) && (editor.isInline(node) || node.children.length === 0 || Text.isText(node.children[0]) || editor.isInline(node.children[0])); // Since we'll be applying operations while iterating, keep track of an\n      // index that accounts for any added/removed nodes.\n\n      var n = 0;\n\n      for (var i = 0; i < node.children.length; i++, n++) {\n        var currentNode = Node.get(editor, path);\n        if (Text.isText(currentNode)) continue;\n        var _child = node.children[i];\n        var prev = currentNode.children[n - 1];\n        var isLast = i === node.children.length - 1;\n        var isInlineOrText = Text.isText(_child) || Element.isElement(_child) && editor.isInline(_child); // Only allow block nodes in the top-level children and parent blocks\n        // that only contain block nodes. Similarly, only allow inline nodes in\n        // other inline nodes, or parent blocks that only contain inlines and\n        // text.\n\n        if (isInlineOrText !== shouldHaveInlines) {\n          Transforms.removeNodes(editor, {\n            at: path.concat(n),\n            voids: true\n          });\n          n--;\n        } else if (Element.isElement(_child)) {\n          // Ensure that inline nodes are surrounded by text nodes.\n          if (editor.isInline(_child)) {\n            if (prev == null || !Text.isText(prev)) {\n              var newChild = {\n                text: ''\n              };\n              Transforms.insertNodes(editor, newChild, {\n                at: path.concat(n),\n                voids: true\n              });\n              n++;\n            } else if (isLast) {\n              var _newChild = {\n                text: ''\n              };\n              Transforms.insertNodes(editor, _newChild, {\n                at: path.concat(n + 1),\n                voids: true\n              });\n              n++;\n            }\n          }\n        } else {\n          // Merge adjacent text nodes that are empty or match.\n          if (prev != null && Text.isText(prev)) {\n            if (Text.equals(_child, prev, {\n              loose: true\n            })) {\n              Transforms.mergeNodes(editor, {\n                at: path.concat(n),\n                voids: true\n              });\n              n--;\n            } else if (prev.text === '') {\n              Transforms.removeNodes(editor, {\n                at: path.concat(n - 1),\n                voids: true\n              });\n              n--;\n            } else if (_child.text === '') {\n              Transforms.removeNodes(editor, {\n                at: path.concat(n),\n                voids: true\n              });\n              n--;\n            }\n          }\n        }\n      }\n    },\n    removeMark: key => {\n      var {\n        selection\n      } = editor;\n\n      if (selection) {\n        if (Range.isExpanded(selection)) {\n          Transforms.unsetNodes(editor, key, {\n            match: Text.isText,\n            split: true\n          });\n        } else {\n          var marks = _objectSpread$9({}, Editor.marks(editor) || {});\n\n          delete marks[key];\n          editor.marks = marks;\n\n          if (!FLUSHING.get(editor)) {\n            editor.onChange();\n          }\n        }\n      }\n    }\n  };\n  return editor;\n};\n/**\r\n * Get the \"dirty\" paths generated from an operation.\r\n */\n\nvar getDirtyPaths = op => {\n  switch (op.type) {\n    case 'insert_text':\n    case 'remove_text':\n    case 'set_node':\n      {\n        var {\n          path\n        } = op;\n        return Path.levels(path);\n      }\n\n    case 'insert_node':\n      {\n        var {\n          node,\n          path: _path2\n        } = op;\n        var levels = Path.levels(_path2);\n        var descendants = Text.isText(node) ? [] : Array.from(Node.nodes(node), _ref3 => {\n          var [, p] = _ref3;\n          return _path2.concat(p);\n        });\n        return [...levels, ...descendants];\n      }\n\n    case 'merge_node':\n      {\n        var {\n          path: _path3\n        } = op;\n        var ancestors = Path.ancestors(_path3);\n        var previousPath = Path.previous(_path3);\n        return [...ancestors, previousPath];\n      }\n\n    case 'move_node':\n      {\n        var {\n          path: _path4,\n          newPath\n        } = op;\n\n        if (Path.equals(_path4, newPath)) {\n          return [];\n        }\n\n        var oldAncestors = [];\n        var newAncestors = [];\n\n        for (var ancestor of Path.ancestors(_path4)) {\n          var p = Path.transform(ancestor, op);\n          oldAncestors.push(p);\n        }\n\n        for (var _ancestor of Path.ancestors(newPath)) {\n          var _p = Path.transform(_ancestor, op);\n\n          newAncestors.push(_p);\n        }\n\n        var newParent = newAncestors[newAncestors.length - 1];\n        var newIndex = newPath[newPath.length - 1];\n        var resultPath = newParent.concat(newIndex);\n        return [...oldAncestors, ...newAncestors, resultPath];\n      }\n\n    case 'remove_node':\n      {\n        var {\n          path: _path5\n        } = op;\n\n        var _ancestors = Path.ancestors(_path5);\n\n        return [..._ancestors];\n      }\n\n    case 'split_node':\n      {\n        var {\n          path: _path6\n        } = op;\n\n        var _levels = Path.levels(_path6);\n\n        var nextPath = Path.next(_path6);\n        return [..._levels, nextPath];\n      }\n\n    default:\n      {\n        return [];\n      }\n  }\n};\n\nfunction _objectWithoutPropertiesLoose(source, excluded) {\n  if (source == null) return {};\n  var target = {};\n  var sourceKeys = Object.keys(source);\n  var key, i;\n\n  for (i = 0; i < sourceKeys.length; i++) {\n    key = sourceKeys[i];\n    if (excluded.indexOf(key) >= 0) continue;\n    target[key] = source[key];\n  }\n\n  return target;\n}\n\nfunction _objectWithoutProperties(source, excluded) {\n  if (source == null) return {};\n  var target = _objectWithoutPropertiesLoose(source, excluded);\n  var key, i;\n\n  if (Object.getOwnPropertySymbols) {\n    var sourceSymbolKeys = Object.getOwnPropertySymbols(source);\n\n    for (i = 0; i < sourceSymbolKeys.length; i++) {\n      key = sourceSymbolKeys[i];\n      if (excluded.indexOf(key) >= 0) continue;\n      if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue;\n      target[key] = source[key];\n    }\n  }\n\n  return target;\n}\n\n// Character (grapheme cluster) boundaries are determined according to\n// the default grapheme cluster boundary specification, extended grapheme clusters variant[1].\n//\n// References:\n//\n// [1] https://www.unicode.org/reports/tr29/#Default_Grapheme_Cluster_Table\n// [2] https://www.unicode.org/Public/UCD/latest/ucd/auxiliary/GraphemeBreakProperty.txt\n// [3] https://www.unicode.org/Public/UCD/latest/ucd/auxiliary/GraphemeBreakTest.html\n// [4] https://www.unicode.org/Public/UCD/latest/ucd/auxiliary/GraphemeBreakTest.txt\n\n/**\r\n * Get the distance to the end of the first character in a string of text.\r\n */\nvar getCharacterDistance = function getCharacterDistance(str) {\n  var isRTL = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;\n  var isLTR = !isRTL;\n  var codepoints = isRTL ? codepointsIteratorRTL(str) : str;\n  var left = CodepointType.None;\n  var right = CodepointType.None;\n  var distance = 0; // Evaluation of these conditions are deferred.\n\n  var gb11 = null; // Is GB11 applicable?\n\n  var gb12Or13 = null; // Is GB12 or GB13 applicable?\n\n  for (var char of codepoints) {\n    var code = char.codePointAt(0);\n    if (!code) break;\n    var type = getCodepointType(char, code);\n    [left, right] = isLTR ? [right, type] : [type, left];\n\n    if (intersects(left, CodepointType.ZWJ) && intersects(right, CodepointType.ExtPict)) {\n      if (isLTR) {\n        gb11 = endsWithEmojiZWJ(str.substring(0, distance));\n      } else {\n        gb11 = endsWithEmojiZWJ(str.substring(0, str.length - distance));\n      }\n\n      if (!gb11) break;\n    }\n\n    if (intersects(left, CodepointType.RI) && intersects(right, CodepointType.RI)) {\n      if (gb12Or13 !== null) {\n        gb12Or13 = !gb12Or13;\n      } else {\n        if (isLTR) {\n          gb12Or13 = true;\n        } else {\n          gb12Or13 = endsWithOddNumberOfRIs(str.substring(0, str.length - distance));\n        }\n      }\n\n      if (!gb12Or13) break;\n    }\n\n    if (left !== CodepointType.None && right !== CodepointType.None && isBoundaryPair(left, right)) {\n      break;\n    }\n\n    distance += char.length;\n  }\n\n  return distance || 1;\n};\nvar SPACE = /\\s/;\nvar PUNCTUATION = /[\\u0021-\\u0023\\u0025-\\u002A\\u002C-\\u002F\\u003A\\u003B\\u003F\\u0040\\u005B-\\u005D\\u005F\\u007B\\u007D\\u00A1\\u00A7\\u00AB\\u00B6\\u00B7\\u00BB\\u00BF\\u037E\\u0387\\u055A-\\u055F\\u0589\\u058A\\u05BE\\u05C0\\u05C3\\u05C6\\u05F3\\u05F4\\u0609\\u060A\\u060C\\u060D\\u061B\\u061E\\u061F\\u066A-\\u066D\\u06D4\\u0700-\\u070D\\u07F7-\\u07F9\\u0830-\\u083E\\u085E\\u0964\\u0965\\u0970\\u0AF0\\u0DF4\\u0E4F\\u0E5A\\u0E5B\\u0F04-\\u0F12\\u0F14\\u0F3A-\\u0F3D\\u0F85\\u0FD0-\\u0FD4\\u0FD9\\u0FDA\\u104A-\\u104F\\u10FB\\u1360-\\u1368\\u1400\\u166D\\u166E\\u169B\\u169C\\u16EB-\\u16ED\\u1735\\u1736\\u17D4-\\u17D6\\u17D8-\\u17DA\\u1800-\\u180A\\u1944\\u1945\\u1A1E\\u1A1F\\u1AA0-\\u1AA6\\u1AA8-\\u1AAD\\u1B5A-\\u1B60\\u1BFC-\\u1BFF\\u1C3B-\\u1C3F\\u1C7E\\u1C7F\\u1CC0-\\u1CC7\\u1CD3\\u2010-\\u2027\\u2030-\\u2043\\u2045-\\u2051\\u2053-\\u205E\\u207D\\u207E\\u208D\\u208E\\u2329\\u232A\\u2768-\\u2775\\u27C5\\u27C6\\u27E6-\\u27EF\\u2983-\\u2998\\u29D8-\\u29DB\\u29FC\\u29FD\\u2CF9-\\u2CFC\\u2CFE\\u2CFF\\u2D70\\u2E00-\\u2E2E\\u2E30-\\u2E3B\\u3001-\\u3003\\u3008-\\u3011\\u3014-\\u301F\\u3030\\u303D\\u30A0\\u30FB\\uA4FE\\uA4FF\\uA60D-\\uA60F\\uA673\\uA67E\\uA6F2-\\uA6F7\\uA874-\\uA877\\uA8CE\\uA8CF\\uA8F8-\\uA8FA\\uA92E\\uA92F\\uA95F\\uA9C1-\\uA9CD\\uA9DE\\uA9DF\\uAA5C-\\uAA5F\\uAADE\\uAADF\\uAAF0\\uAAF1\\uABEB\\uFD3E\\uFD3F\\uFE10-\\uFE19\\uFE30-\\uFE52\\uFE54-\\uFE61\\uFE63\\uFE68\\uFE6A\\uFE6B\\uFF01-\\uFF03\\uFF05-\\uFF0A\\uFF0C-\\uFF0F\\uFF1A\\uFF1B\\uFF1F\\uFF20\\uFF3B-\\uFF3D\\uFF3F\\uFF5B\\uFF5D\\uFF5F-\\uFF65]/;\nvar CHAMELEON = /['\\u2018\\u2019]/;\n/**\r\n * Get the distance to the end of the first word in a string of text.\r\n */\n\nvar getWordDistance = function getWordDistance(text) {\n  var isRTL = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;\n  var dist = 0;\n  var started = false;\n\n  while (text.length > 0) {\n    var charDist = getCharacterDistance(text, isRTL);\n    var [char, remaining] = splitByCharacterDistance(text, charDist, isRTL);\n\n    if (isWordCharacter(char, remaining, isRTL)) {\n      started = true;\n      dist += charDist;\n    } else if (!started) {\n      dist += charDist;\n    } else {\n      break;\n    }\n\n    text = remaining;\n  }\n\n  return dist;\n};\n/**\r\n * Split a string in two parts at a given distance starting from the end when\r\n * `isRTL` is set to `true`.\r\n */\n\nvar splitByCharacterDistance = (str, dist, isRTL) => {\n  if (isRTL) {\n    var at = str.length - dist;\n    return [str.slice(at, str.length), str.slice(0, at)];\n  }\n\n  return [str.slice(0, dist), str.slice(dist)];\n};\n/**\r\n * Check if a character is a word character. The `remaining` argument is used\r\n * because sometimes you must read subsequent characters to truly determine it.\r\n */\n\nvar isWordCharacter = function isWordCharacter(char, remaining) {\n  var isRTL = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : false;\n\n  if (SPACE.test(char)) {\n    return false;\n  } // Chameleons count as word characters as long as they're in a word, so\n  // recurse to see if the next one is a word character or not.\n\n\n  if (CHAMELEON.test(char)) {\n    var charDist = getCharacterDistance(remaining, isRTL);\n    var [nextChar, nextRemaining] = splitByCharacterDistance(remaining, charDist, isRTL);\n\n    if (isWordCharacter(nextChar, nextRemaining, isRTL)) {\n      return true;\n    }\n  }\n\n  if (PUNCTUATION.test(char)) {\n    return false;\n  }\n\n  return true;\n};\n/**\r\n * Iterate on codepoints from right to left.\r\n */\n\n\nvar codepointsIteratorRTL = function* codepointsIteratorRTL(str) {\n  var end = str.length - 1;\n\n  for (var i = 0; i < str.length; i++) {\n    var char1 = str.charAt(end - i);\n\n    if (isLowSurrogate(char1.charCodeAt(0))) {\n      var char2 = str.charAt(end - i - 1);\n\n      if (isHighSurrogate(char2.charCodeAt(0))) {\n        yield char2 + char1;\n        i++;\n        continue;\n      }\n    }\n\n    yield char1;\n  }\n};\n/**\r\n * Is `charCode` a high surrogate.\r\n *\r\n * https://en.wikipedia.org/wiki/Universal_Character_Set_characters#Surrogates\r\n */\n\nvar isHighSurrogate = charCode => {\n  return charCode >= 0xd800 && charCode <= 0xdbff;\n};\n/**\r\n * Is `charCode` a low surrogate.\r\n *\r\n * https://en.wikipedia.org/wiki/Universal_Character_Set_characters#Surrogates\r\n */\n\n\nvar isLowSurrogate = charCode => {\n  return charCode >= 0xdc00 && charCode <= 0xdfff;\n};\n\nvar CodepointType;\n\n(function (CodepointType) {\n  CodepointType[CodepointType[\"None\"] = 0] = \"None\";\n  CodepointType[CodepointType[\"Extend\"] = 1] = \"Extend\";\n  CodepointType[CodepointType[\"ZWJ\"] = 2] = \"ZWJ\";\n  CodepointType[CodepointType[\"RI\"] = 4] = \"RI\";\n  CodepointType[CodepointType[\"Prepend\"] = 8] = \"Prepend\";\n  CodepointType[CodepointType[\"SpacingMark\"] = 16] = \"SpacingMark\";\n  CodepointType[CodepointType[\"L\"] = 32] = \"L\";\n  CodepointType[CodepointType[\"V\"] = 64] = \"V\";\n  CodepointType[CodepointType[\"T\"] = 128] = \"T\";\n  CodepointType[CodepointType[\"LV\"] = 256] = \"LV\";\n  CodepointType[CodepointType[\"LVT\"] = 512] = \"LVT\";\n  CodepointType[CodepointType[\"ExtPict\"] = 1024] = \"ExtPict\";\n  CodepointType[CodepointType[\"Any\"] = 2048] = \"Any\";\n})(CodepointType || (CodepointType = {}));\n\nvar reExtend = /^(?:[\\u0300-\\u036F\\u0483-\\u0489\\u0591-\\u05BD\\u05BF\\u05C1\\u05C2\\u05C4\\u05C5\\u05C7\\u0610-\\u061A\\u064B-\\u065F\\u0670\\u06D6-\\u06DC\\u06DF-\\u06E4\\u06E7\\u06E8\\u06EA-\\u06ED\\u0711\\u0730-\\u074A\\u07A6-\\u07B0\\u07EB-\\u07F3\\u07FD\\u0816-\\u0819\\u081B-\\u0823\\u0825-\\u0827\\u0829-\\u082D\\u0859-\\u085B\\u08D3-\\u08E1\\u08E3-\\u0902\\u093A\\u093C\\u0941-\\u0948\\u094D\\u0951-\\u0957\\u0962\\u0963\\u0981\\u09BC\\u09BE\\u09C1-\\u09C4\\u09CD\\u09D7\\u09E2\\u09E3\\u09FE\\u0A01\\u0A02\\u0A3C\\u0A41\\u0A42\\u0A47\\u0A48\\u0A4B-\\u0A4D\\u0A51\\u0A70\\u0A71\\u0A75\\u0A81\\u0A82\\u0ABC\\u0AC1-\\u0AC5\\u0AC7\\u0AC8\\u0ACD\\u0AE2\\u0AE3\\u0AFA-\\u0AFF\\u0B01\\u0B3C\\u0B3E\\u0B3F\\u0B41-\\u0B44\\u0B4D\\u0B55-\\u0B57\\u0B62\\u0B63\\u0B82\\u0BBE\\u0BC0\\u0BCD\\u0BD7\\u0C00\\u0C04\\u0C3E-\\u0C40\\u0C46-\\u0C48\\u0C4A-\\u0C4D\\u0C55\\u0C56\\u0C62\\u0C63\\u0C81\\u0CBC\\u0CBF\\u0CC2\\u0CC6\\u0CCC\\u0CCD\\u0CD5\\u0CD6\\u0CE2\\u0CE3\\u0D00\\u0D01\\u0D3B\\u0D3C\\u0D3E\\u0D41-\\u0D44\\u0D4D\\u0D57\\u0D62\\u0D63\\u0D81\\u0DCA\\u0DCF\\u0DD2-\\u0DD4\\u0DD6\\u0DDF\\u0E31\\u0E34-\\u0E3A\\u0E47-\\u0E4E\\u0EB1\\u0EB4-\\u0EBC\\u0EC8-\\u0ECD\\u0F18\\u0F19\\u0F35\\u0F37\\u0F39\\u0F71-\\u0F7E\\u0F80-\\u0F84\\u0F86\\u0F87\\u0F8D-\\u0F97\\u0F99-\\u0FBC\\u0FC6\\u102D-\\u1030\\u1032-\\u1037\\u1039\\u103A\\u103D\\u103E\\u1058\\u1059\\u105E-\\u1060\\u1071-\\u1074\\u1082\\u1085\\u1086\\u108D\\u109D\\u135D-\\u135F\\u1712-\\u1714\\u1732-\\u1734\\u1752\\u1753\\u1772\\u1773\\u17B4\\u17B5\\u17B7-\\u17BD\\u17C6\\u17C9-\\u17D3\\u17DD\\u180B-\\u180D\\u1885\\u1886\\u18A9\\u1920-\\u1922\\u1927\\u1928\\u1932\\u1939-\\u193B\\u1A17\\u1A18\\u1A1B\\u1A56\\u1A58-\\u1A5E\\u1A60\\u1A62\\u1A65-\\u1A6C\\u1A73-\\u1A7C\\u1A7F\\u1AB0-\\u1AC0\\u1B00-\\u1B03\\u1B34-\\u1B3A\\u1B3C\\u1B42\\u1B6B-\\u1B73\\u1B80\\u1B81\\u1BA2-\\u1BA5\\u1BA8\\u1BA9\\u1BAB-\\u1BAD\\u1BE6\\u1BE8\\u1BE9\\u1BED\\u1BEF-\\u1BF1\\u1C2C-\\u1C33\\u1C36\\u1C37\\u1CD0-\\u1CD2\\u1CD4-\\u1CE0\\u1CE2-\\u1CE8\\u1CED\\u1CF4\\u1CF8\\u1CF9\\u1DC0-\\u1DF9\\u1DFB-\\u1DFF\\u200C\\u20D0-\\u20F0\\u2CEF-\\u2CF1\\u2D7F\\u2DE0-\\u2DFF\\u302A-\\u302F\\u3099\\u309A\\uA66F-\\uA672\\uA674-\\uA67D\\uA69E\\uA69F\\uA6F0\\uA6F1\\uA802\\uA806\\uA80B\\uA825\\uA826\\uA82C\\uA8C4\\uA8C5\\uA8E0-\\uA8F1\\uA8FF\\uA926-\\uA92D\\uA947-\\uA951\\uA980-\\uA982\\uA9B3\\uA9B6-\\uA9B9\\uA9BC\\uA9BD\\uA9E5\\uAA29-\\uAA2E\\uAA31\\uAA32\\uAA35\\uAA36\\uAA43\\uAA4C\\uAA7C\\uAAB0\\uAAB2-\\uAAB4\\uAAB7\\uAAB8\\uAABE\\uAABF\\uAAC1\\uAAEC\\uAAED\\uAAF6\\uABE5\\uABE8\\uABED\\uFB1E\\uFE00-\\uFE0F\\uFE20-\\uFE2F\\uFF9E\\uFF9F]|\\uD800[\\uDDFD\\uDEE0\\uDF76-\\uDF7A]|\\uD802[\\uDE01-\\uDE03\\uDE05\\uDE06\\uDE0C-\\uDE0F\\uDE38-\\uDE3A\\uDE3F\\uDEE5\\uDEE6]|\\uD803[\\uDD24-\\uDD27\\uDEAB\\uDEAC\\uDF46-\\uDF50]|\\uD804[\\uDC01\\uDC38-\\uDC46\\uDC7F-\\uDC81\\uDCB3-\\uDCB6\\uDCB9\\uDCBA\\uDD00-\\uDD02\\uDD27-\\uDD2B\\uDD2D-\\uDD34\\uDD73\\uDD80\\uDD81\\uDDB6-\\uDDBE\\uDDC9-\\uDDCC\\uDDCF\\uDE2F-\\uDE31\\uDE34\\uDE36\\uDE37\\uDE3E\\uDEDF\\uDEE3-\\uDEEA\\uDF00\\uDF01\\uDF3B\\uDF3C\\uDF3E\\uDF40\\uDF57\\uDF66-\\uDF6C\\uDF70-\\uDF74]|\\uD805[\\uDC38-\\uDC3F\\uDC42-\\uDC44\\uDC46\\uDC5E\\uDCB0\\uDCB3-\\uDCB8\\uDCBA\\uDCBD\\uDCBF\\uDCC0\\uDCC2\\uDCC3\\uDDAF\\uDDB2-\\uDDB5\\uDDBC\\uDDBD\\uDDBF\\uDDC0\\uDDDC\\uDDDD\\uDE33-\\uDE3A\\uDE3D\\uDE3F\\uDE40\\uDEAB\\uDEAD\\uDEB0-\\uDEB5\\uDEB7\\uDF1D-\\uDF1F\\uDF22-\\uDF25\\uDF27-\\uDF2B]|\\uD806[\\uDC2F-\\uDC37\\uDC39\\uDC3A\\uDD30\\uDD3B\\uDD3C\\uDD3E\\uDD43\\uDDD4-\\uDDD7\\uDDDA\\uDDDB\\uDDE0\\uDE01-\\uDE0A\\uDE33-\\uDE38\\uDE3B-\\uDE3E\\uDE47\\uDE51-\\uDE56\\uDE59-\\uDE5B\\uDE8A-\\uDE96\\uDE98\\uDE99]|\\uD807[\\uDC30-\\uDC36\\uDC38-\\uDC3D\\uDC3F\\uDC92-\\uDCA7\\uDCAA-\\uDCB0\\uDCB2\\uDCB3\\uDCB5\\uDCB6\\uDD31-\\uDD36\\uDD3A\\uDD3C\\uDD3D\\uDD3F-\\uDD45\\uDD47\\uDD90\\uDD91\\uDD95\\uDD97\\uDEF3\\uDEF4]|\\uD81A[\\uDEF0-\\uDEF4\\uDF30-\\uDF36]|\\uD81B[\\uDF4F\\uDF8F-\\uDF92\\uDFE4]|\\uD82F[\\uDC9D\\uDC9E]|\\uD834[\\uDD65\\uDD67-\\uDD69\\uDD6E-\\uDD72\\uDD7B-\\uDD82\\uDD85-\\uDD8B\\uDDAA-\\uDDAD\\uDE42-\\uDE44]|\\uD836[\\uDE00-\\uDE36\\uDE3B-\\uDE6C\\uDE75\\uDE84\\uDE9B-\\uDE9F\\uDEA1-\\uDEAF]|\\uD838[\\uDC00-\\uDC06\\uDC08-\\uDC18\\uDC1B-\\uDC21\\uDC23\\uDC24\\uDC26-\\uDC2A\\uDD30-\\uDD36\\uDEEC-\\uDEEF]|\\uD83A[\\uDCD0-\\uDCD6\\uDD44-\\uDD4A]|\\uD83C[\\uDFFB-\\uDFFF]|\\uDB40[\\uDC20-\\uDC7F\\uDD00-\\uDDEF])$/;\nvar rePrepend = /^(?:[\\u0600-\\u0605\\u06DD\\u070F\\u0890\\u0891\\u08E2\\u0D4E]|\\uD804[\\uDCBD\\uDCCD\\uDDC2\\uDDC3]|\\uD806[\\uDD3F\\uDD41\\uDE3A\\uDE84-\\uDE89]|\\uD807\\uDD46)$/;\nvar reSpacingMark = /^(?:[\\u0903\\u093B\\u093E-\\u0940\\u0949-\\u094C\\u094E\\u094F\\u0982\\u0983\\u09BF\\u09C0\\u09C7\\u09C8\\u09CB\\u09CC\\u0A03\\u0A3E-\\u0A40\\u0A83\\u0ABE-\\u0AC0\\u0AC9\\u0ACB\\u0ACC\\u0B02\\u0B03\\u0B40\\u0B47\\u0B48\\u0B4B\\u0B4C\\u0BBF\\u0BC1\\u0BC2\\u0BC6-\\u0BC8\\u0BCA-\\u0BCC\\u0C01-\\u0C03\\u0C41-\\u0C44\\u0C82\\u0C83\\u0CBE\\u0CC0\\u0CC1\\u0CC3\\u0CC4\\u0CC7\\u0CC8\\u0CCA\\u0CCB\\u0D02\\u0D03\\u0D3F\\u0D40\\u0D46-\\u0D48\\u0D4A-\\u0D4C\\u0D82\\u0D83\\u0DD0\\u0DD1\\u0DD8-\\u0DDE\\u0DF2\\u0DF3\\u0E33\\u0EB3\\u0F3E\\u0F3F\\u0F7F\\u1031\\u103B\\u103C\\u1056\\u1057\\u1084\\u1715\\u1734\\u17B6\\u17BE-\\u17C5\\u17C7\\u17C8\\u1923-\\u1926\\u1929-\\u192B\\u1930\\u1931\\u1933-\\u1938\\u1A19\\u1A1A\\u1A55\\u1A57\\u1A6D-\\u1A72\\u1B04\\u1B3B\\u1B3D-\\u1B41\\u1B43\\u1B44\\u1B82\\u1BA1\\u1BA6\\u1BA7\\u1BAA\\u1BE7\\u1BEA-\\u1BEC\\u1BEE\\u1BF2\\u1BF3\\u1C24-\\u1C2B\\u1C34\\u1C35\\u1CE1\\u1CF7\\uA823\\uA824\\uA827\\uA880\\uA881\\uA8B4-\\uA8C3\\uA952\\uA953\\uA983\\uA9B4\\uA9B5\\uA9BA\\uA9BB\\uA9BE-\\uA9C0\\uAA2F\\uAA30\\uAA33\\uAA34\\uAA4D\\uAAEB\\uAAEE\\uAAEF\\uAAF5\\uABE3\\uABE4\\uABE6\\uABE7\\uABE9\\uABEA\\uABEC]|\\uD804[\\uDC00\\uDC02\\uDC82\\uDCB0-\\uDCB2\\uDCB7\\uDCB8\\uDD2C\\uDD45\\uDD46\\uDD82\\uDDB3-\\uDDB5\\uDDBF\\uDDC0\\uDDCE\\uDE2C-\\uDE2E\\uDE32\\uDE33\\uDE35\\uDEE0-\\uDEE2\\uDF02\\uDF03\\uDF3F\\uDF41-\\uDF44\\uDF47\\uDF48\\uDF4B-\\uDF4D\\uDF62\\uDF63]|\\uD805[\\uDC35-\\uDC37\\uDC40\\uDC41\\uDC45\\uDCB1\\uDCB2\\uDCB9\\uDCBB\\uDCBC\\uDCBE\\uDCC1\\uDDB0\\uDDB1\\uDDB8-\\uDDBB\\uDDBE\\uDE30-\\uDE32\\uDE3B\\uDE3C\\uDE3E\\uDEAC\\uDEAE\\uDEAF\\uDEB6\\uDF26]|\\uD806[\\uDC2C-\\uDC2E\\uDC38\\uDD31-\\uDD35\\uDD37\\uDD38\\uDD3D\\uDD40\\uDD42\\uDDD1-\\uDDD3\\uDDDC-\\uDDDF\\uDDE4\\uDE39\\uDE57\\uDE58\\uDE97]|\\uD807[\\uDC2F\\uDC3E\\uDCA9\\uDCB1\\uDCB4\\uDD8A-\\uDD8E\\uDD93\\uDD94\\uDD96\\uDEF5\\uDEF6]|\\uD81B[\\uDF51-\\uDF87\\uDFF0\\uDFF1]|\\uD834[\\uDD66\\uDD6D])$/;\nvar reL = /^[\\u1100-\\u115F\\uA960-\\uA97C]$/;\nvar reV = /^[\\u1160-\\u11A7\\uD7B0-\\uD7C6]$/;\nvar reT = /^[\\u11A8-\\u11FF\\uD7CB-\\uD7FB]$/;\nvar reLV = /^[\\uAC00\\uAC1C\\uAC38\\uAC54\\uAC70\\uAC8C\\uACA8\\uACC4\\uACE0\\uACFC\\uAD18\\uAD34\\uAD50\\uAD6C\\uAD88\\uADA4\\uADC0\\uADDC\\uADF8\\uAE14\\uAE30\\uAE4C\\uAE68\\uAE84\\uAEA0\\uAEBC\\uAED8\\uAEF4\\uAF10\\uAF2C\\uAF48\\uAF64\\uAF80\\uAF9C\\uAFB8\\uAFD4\\uAFF0\\uB00C\\uB028\\uB044\\uB060\\uB07C\\uB098\\uB0B4\\uB0D0\\uB0EC\\uB108\\uB124\\uB140\\uB15C\\uB178\\uB194\\uB1B0\\uB1CC\\uB1E8\\uB204\\uB220\\uB23C\\uB258\\uB274\\uB290\\uB2AC\\uB2C8\\uB2E4\\uB300\\uB31C\\uB338\\uB354\\uB370\\uB38C\\uB3A8\\uB3C4\\uB3E0\\uB3FC\\uB418\\uB434\\uB450\\uB46C\\uB488\\uB4A4\\uB4C0\\uB4DC\\uB4F8\\uB514\\uB530\\uB54C\\uB568\\uB584\\uB5A0\\uB5BC\\uB5D8\\uB5F4\\uB610\\uB62C\\uB648\\uB664\\uB680\\uB69C\\uB6B8\\uB6D4\\uB6F0\\uB70C\\uB728\\uB744\\uB760\\uB77C\\uB798\\uB7B4\\uB7D0\\uB7EC\\uB808\\uB824\\uB840\\uB85C\\uB878\\uB894\\uB8B0\\uB8CC\\uB8E8\\uB904\\uB920\\uB93C\\uB958\\uB974\\uB990\\uB9AC\\uB9C8\\uB9E4\\uBA00\\uBA1C\\uBA38\\uBA54\\uBA70\\uBA8C\\uBAA8\\uBAC4\\uBAE0\\uBAFC\\uBB18\\uBB34\\uBB50\\uBB6C\\uBB88\\uBBA4\\uBBC0\\uBBDC\\uBBF8\\uBC14\\uBC30\\uBC4C\\uBC68\\uBC84\\uBCA0\\uBCBC\\uBCD8\\uBCF4\\uBD10\\uBD2C\\uBD48\\uBD64\\uBD80\\uBD9C\\uBDB8\\uBDD4\\uBDF0\\uBE0C\\uBE28\\uBE44\\uBE60\\uBE7C\\uBE98\\uBEB4\\uBED0\\uBEEC\\uBF08\\uBF24\\uBF40\\uBF5C\\uBF78\\uBF94\\uBFB0\\uBFCC\\uBFE8\\uC004\\uC020\\uC03C\\uC058\\uC074\\uC090\\uC0AC\\uC0C8\\uC0E4\\uC100\\uC11C\\uC138\\uC154\\uC170\\uC18C\\uC1A8\\uC1C4\\uC1E0\\uC1FC\\uC218\\uC234\\uC250\\uC26C\\uC288\\uC2A4\\uC2C0\\uC2DC\\uC2F8\\uC314\\uC330\\uC34C\\uC368\\uC384\\uC3A0\\uC3BC\\uC3D8\\uC3F4\\uC410\\uC42C\\uC448\\uC464\\uC480\\uC49C\\uC4B8\\uC4D4\\uC4F0\\uC50C\\uC528\\uC544\\uC560\\uC57C\\uC598\\uC5B4\\uC5D0\\uC5EC\\uC608\\uC624\\uC640\\uC65C\\uC678\\uC694\\uC6B0\\uC6CC\\uC6E8\\uC704\\uC720\\uC73C\\uC758\\uC774\\uC790\\uC7AC\\uC7C8\\uC7E4\\uC800\\uC81C\\uC838\\uC854\\uC870\\uC88C\\uC8A8\\uC8C4\\uC8E0\\uC8FC\\uC918\\uC934\\uC950\\uC96C\\uC988\\uC9A4\\uC9C0\\uC9DC\\uC9F8\\uCA14\\uCA30\\uCA4C\\uCA68\\uCA84\\uCAA0\\uCABC\\uCAD8\\uCAF4\\uCB10\\uCB2C\\uCB48\\uCB64\\uCB80\\uCB9C\\uCBB8\\uCBD4\\uCBF0\\uCC0C\\uCC28\\uCC44\\uCC60\\uCC7C\\uCC98\\uCCB4\\uCCD0\\uCCEC\\uCD08\\uCD24\\uCD40\\uCD5C\\uCD78\\uCD94\\uCDB0\\uCDCC\\uCDE8\\uCE04\\uCE20\\uCE3C\\uCE58\\uCE74\\uCE90\\uCEAC\\uCEC8\\uCEE4\\uCF00\\uCF1C\\uCF38\\uCF54\\uCF70\\uCF8C\\uCFA8\\uCFC4\\uCFE0\\uCFFC\\uD018\\uD034\\uD050\\uD06C\\uD088\\uD0A4\\uD0C0\\uD0DC\\uD0F8\\uD114\\uD130\\uD14C\\uD168\\uD184\\uD1A0\\uD1BC\\uD1D8\\uD1F4\\uD210\\uD22C\\uD248\\uD264\\uD280\\uD29C\\uD2B8\\uD2D4\\uD2F0\\uD30C\\uD328\\uD344\\uD360\\uD37C\\uD398\\uD3B4\\uD3D0\\uD3EC\\uD408\\uD424\\uD440\\uD45C\\uD478\\uD494\\uD4B0\\uD4CC\\uD4E8\\uD504\\uD520\\uD53C\\uD558\\uD574\\uD590\\uD5AC\\uD5C8\\uD5E4\\uD600\\uD61C\\uD638\\uD654\\uD670\\uD68C\\uD6A8\\uD6C4\\uD6E0\\uD6FC\\uD718\\uD734\\uD750\\uD76C\\uD788]$/;\nvar reLVT = /^[\\uAC01-\\uAC1B\\uAC1D-\\uAC37\\uAC39-\\uAC53\\uAC55-\\uAC6F\\uAC71-\\uAC8B\\uAC8D-\\uACA7\\uACA9-\\uACC3\\uACC5-\\uACDF\\uACE1-\\uACFB\\uACFD-\\uAD17\\uAD19-\\uAD33\\uAD35-\\uAD4F\\uAD51-\\uAD6B\\uAD6D-\\uAD87\\uAD89-\\uADA3\\uADA5-\\uADBF\\uADC1-\\uADDB\\uADDD-\\uADF7\\uADF9-\\uAE13\\uAE15-\\uAE2F\\uAE31-\\uAE4B\\uAE4D-\\uAE67\\uAE69-\\uAE83\\uAE85-\\uAE9F\\uAEA1-\\uAEBB\\uAEBD-\\uAED7\\uAED9-\\uAEF3\\uAEF5-\\uAF0F\\uAF11-\\uAF2B\\uAF2D-\\uAF47\\uAF49-\\uAF63\\uAF65-\\uAF7F\\uAF81-\\uAF9B\\uAF9D-\\uAFB7\\uAFB9-\\uAFD3\\uAFD5-\\uAFEF\\uAFF1-\\uB00B\\uB00D-\\uB027\\uB029-\\uB043\\uB045-\\uB05F\\uB061-\\uB07B\\uB07D-\\uB097\\uB099-\\uB0B3\\uB0B5-\\uB0CF\\uB0D1-\\uB0EB\\uB0ED-\\uB107\\uB109-\\uB123\\uB125-\\uB13F\\uB141-\\uB15B\\uB15D-\\uB177\\uB179-\\uB193\\uB195-\\uB1AF\\uB1B1-\\uB1CB\\uB1CD-\\uB1E7\\uB1E9-\\uB203\\uB205-\\uB21F\\uB221-\\uB23B\\uB23D-\\uB257\\uB259-\\uB273\\uB275-\\uB28F\\uB291-\\uB2AB\\uB2AD-\\uB2C7\\uB2C9-\\uB2E3\\uB2E5-\\uB2FF\\uB301-\\uB31B\\uB31D-\\uB337\\uB339-\\uB353\\uB355-\\uB36F\\uB371-\\uB38B\\uB38D-\\uB3A7\\uB3A9-\\uB3C3\\uB3C5-\\uB3DF\\uB3E1-\\uB3FB\\uB3FD-\\uB417\\uB419-\\uB433\\uB435-\\uB44F\\uB451-\\uB46B\\uB46D-\\uB487\\uB489-\\uB4A3\\uB4A5-\\uB4BF\\uB4C1-\\uB4DB\\uB4DD-\\uB4F7\\uB4F9-\\uB513\\uB515-\\uB52F\\uB531-\\uB54B\\uB54D-\\uB567\\uB569-\\uB583\\uB585-\\uB59F\\uB5A1-\\uB5BB\\uB5BD-\\uB5D7\\uB5D9-\\uB5F3\\uB5F5-\\uB60F\\uB611-\\uB62B\\uB62D-\\uB647\\uB649-\\uB663\\uB665-\\uB67F\\uB681-\\uB69B\\uB69D-\\uB6B7\\uB6B9-\\uB6D3\\uB6D5-\\uB6EF\\uB6F1-\\uB70B\\uB70D-\\uB727\\uB729-\\uB743\\uB745-\\uB75F\\uB761-\\uB77B\\uB77D-\\uB797\\uB799-\\uB7B3\\uB7B5-\\uB7CF\\uB7D1-\\uB7EB\\uB7ED-\\uB807\\uB809-\\uB823\\uB825-\\uB83F\\uB841-\\uB85B\\uB85D-\\uB877\\uB879-\\uB893\\uB895-\\uB8AF\\uB8B1-\\uB8CB\\uB8CD-\\uB8E7\\uB8E9-\\uB903\\uB905-\\uB91F\\uB921-\\uB93B\\uB93D-\\uB957\\uB959-\\uB973\\uB975-\\uB98F\\uB991-\\uB9AB\\uB9AD-\\uB9C7\\uB9C9-\\uB9E3\\uB9E5-\\uB9FF\\uBA01-\\uBA1B\\uBA1D-\\uBA37\\uBA39-\\uBA53\\uBA55-\\uBA6F\\uBA71-\\uBA8B\\uBA8D-\\uBAA7\\uBAA9-\\uBAC3\\uBAC5-\\uBADF\\uBAE1-\\uBAFB\\uBAFD-\\uBB17\\uBB19-\\uBB33\\uBB35-\\uBB4F\\uBB51-\\uBB6B\\uBB6D-\\uBB87\\uBB89-\\uBBA3\\uBBA5-\\uBBBF\\uBBC1-\\uBBDB\\uBBDD-\\uBBF7\\uBBF9-\\uBC13\\uBC15-\\uBC2F\\uBC31-\\uBC4B\\uBC4D-\\uBC67\\uBC69-\\uBC83\\uBC85-\\uBC9F\\uBCA1-\\uBCBB\\uBCBD-\\uBCD7\\uBCD9-\\uBCF3\\uBCF5-\\uBD0F\\uBD11-\\uBD2B\\uBD2D-\\uBD47\\uBD49-\\uBD63\\uBD65-\\uBD7F\\uBD81-\\uBD9B\\uBD9D-\\uBDB7\\uBDB9-\\uBDD3\\uBDD5-\\uBDEF\\uBDF1-\\uBE0B\\uBE0D-\\uBE27\\uBE29-\\uBE43\\uBE45-\\uBE5F\\uBE61-\\uBE7B\\uBE7D-\\uBE97\\uBE99-\\uBEB3\\uBEB5-\\uBECF\\uBED1-\\uBEEB\\uBEED-\\uBF07\\uBF09-\\uBF23\\uBF25-\\uBF3F\\uBF41-\\uBF5B\\uBF5D-\\uBF77\\uBF79-\\uBF93\\uBF95-\\uBFAF\\uBFB1-\\uBFCB\\uBFCD-\\uBFE7\\uBFE9-\\uC003\\uC005-\\uC01F\\uC021-\\uC03B\\uC03D-\\uC057\\uC059-\\uC073\\uC075-\\uC08F\\uC091-\\uC0AB\\uC0AD-\\uC0C7\\uC0C9-\\uC0E3\\uC0E5-\\uC0FF\\uC101-\\uC11B\\uC11D-\\uC137\\uC139-\\uC153\\uC155-\\uC16F\\uC171-\\uC18B\\uC18D-\\uC1A7\\uC1A9-\\uC1C3\\uC1C5-\\uC1DF\\uC1E1-\\uC1FB\\uC1FD-\\uC217\\uC219-\\uC233\\uC235-\\uC24F\\uC251-\\uC26B\\uC26D-\\uC287\\uC289-\\uC2A3\\uC2A5-\\uC2BF\\uC2C1-\\uC2DB\\uC2DD-\\uC2F7\\uC2F9-\\uC313\\uC315-\\uC32F\\uC331-\\uC34B\\uC34D-\\uC367\\uC369-\\uC383\\uC385-\\uC39F\\uC3A1-\\uC3BB\\uC3BD-\\uC3D7\\uC3D9-\\uC3F3\\uC3F5-\\uC40F\\uC411-\\uC42B\\uC42D-\\uC447\\uC449-\\uC463\\uC465-\\uC47F\\uC481-\\uC49B\\uC49D-\\uC4B7\\uC4B9-\\uC4D3\\uC4D5-\\uC4EF\\uC4F1-\\uC50B\\uC50D-\\uC527\\uC529-\\uC543\\uC545-\\uC55F\\uC561-\\uC57B\\uC57D-\\uC597\\uC599-\\uC5B3\\uC5B5-\\uC5CF\\uC5D1-\\uC5EB\\uC5ED-\\uC607\\uC609-\\uC623\\uC625-\\uC63F\\uC641-\\uC65B\\uC65D-\\uC677\\uC679-\\uC693\\uC695-\\uC6AF\\uC6B1-\\uC6CB\\uC6CD-\\uC6E7\\uC6E9-\\uC703\\uC705-\\uC71F\\uC721-\\uC73B\\uC73D-\\uC757\\uC759-\\uC773\\uC775-\\uC78F\\uC791-\\uC7AB\\uC7AD-\\uC7C7\\uC7C9-\\uC7E3\\uC7E5-\\uC7FF\\uC801-\\uC81B\\uC81D-\\uC837\\uC839-\\uC853\\uC855-\\uC86F\\uC871-\\uC88B\\uC88D-\\uC8A7\\uC8A9-\\uC8C3\\uC8C5-\\uC8DF\\uC8E1-\\uC8FB\\uC8FD-\\uC917\\uC919-\\uC933\\uC935-\\uC94F\\uC951-\\uC96B\\uC96D-\\uC987\\uC989-\\uC9A3\\uC9A5-\\uC9BF\\uC9C1-\\uC9DB\\uC9DD-\\uC9F7\\uC9F9-\\uCA13\\uCA15-\\uCA2F\\uCA31-\\uCA4B\\uCA4D-\\uCA67\\uCA69-\\uCA83\\uCA85-\\uCA9F\\uCAA1-\\uCABB\\uCABD-\\uCAD7\\uCAD9-\\uCAF3\\uCAF5-\\uCB0F\\uCB11-\\uCB2B\\uCB2D-\\uCB47\\uCB49-\\uCB63\\uCB65-\\uCB7F\\uCB81-\\uCB9B\\uCB9D-\\uCBB7\\uCBB9-\\uCBD3\\uCBD5-\\uCBEF\\uCBF1-\\uCC0B\\uCC0D-\\uCC27\\uCC29-\\uCC43\\uCC45-\\uCC5F\\uCC61-\\uCC7B\\uCC7D-\\uCC97\\uCC99-\\uCCB3\\uCCB5-\\uCCCF\\uCCD1-\\uCCEB\\uCCED-\\uCD07\\uCD09-\\uCD23\\uCD25-\\uCD3F\\uCD41-\\uCD5B\\uCD5D-\\uCD77\\uCD79-\\uCD93\\uCD95-\\uCDAF\\uCDB1-\\uCDCB\\uCDCD-\\uCDE7\\uCDE9-\\uCE03\\uCE05-\\uCE1F\\uCE21-\\uCE3B\\uCE3D-\\uCE57\\uCE59-\\uCE73\\uCE75-\\uCE8F\\uCE91-\\uCEAB\\uCEAD-\\uCEC7\\uCEC9-\\uCEE3\\uCEE5-\\uCEFF\\uCF01-\\uCF1B\\uCF1D-\\uCF37\\uCF39-\\uCF53\\uCF55-\\uCF6F\\uCF71-\\uCF8B\\uCF8D-\\uCFA7\\uCFA9-\\uCFC3\\uCFC5-\\uCFDF\\uCFE1-\\uCFFB\\uCFFD-\\uD017\\uD019-\\uD033\\uD035-\\uD04F\\uD051-\\uD06B\\uD06D-\\uD087\\uD089-\\uD0A3\\uD0A5-\\uD0BF\\uD0C1-\\uD0DB\\uD0DD-\\uD0F7\\uD0F9-\\uD113\\uD115-\\uD12F\\uD131-\\uD14B\\uD14D-\\uD167\\uD169-\\uD183\\uD185-\\uD19F\\uD1A1-\\uD1BB\\uD1BD-\\uD1D7\\uD1D9-\\uD1F3\\uD1F5-\\uD20F\\uD211-\\uD22B\\uD22D-\\uD247\\uD249-\\uD263\\uD265-\\uD27F\\uD281-\\uD29B\\uD29D-\\uD2B7\\uD2B9-\\uD2D3\\uD2D5-\\uD2EF\\uD2F1-\\uD30B\\uD30D-\\uD327\\uD329-\\uD343\\uD345-\\uD35F\\uD361-\\uD37B\\uD37D-\\uD397\\uD399-\\uD3B3\\uD3B5-\\uD3CF\\uD3D1-\\uD3EB\\uD3ED-\\uD407\\uD409-\\uD423\\uD425-\\uD43F\\uD441-\\uD45B\\uD45D-\\uD477\\uD479-\\uD493\\uD495-\\uD4AF\\uD4B1-\\uD4CB\\uD4CD-\\uD4E7\\uD4E9-\\uD503\\uD505-\\uD51F\\uD521-\\uD53B\\uD53D-\\uD557\\uD559-\\uD573\\uD575-\\uD58F\\uD591-\\uD5AB\\uD5AD-\\uD5C7\\uD5C9-\\uD5E3\\uD5E5-\\uD5FF\\uD601-\\uD61B\\uD61D-\\uD637\\uD639-\\uD653\\uD655-\\uD66F\\uD671-\\uD68B\\uD68D-\\uD6A7\\uD6A9-\\uD6C3\\uD6C5-\\uD6DF\\uD6E1-\\uD6FB\\uD6FD-\\uD717\\uD719-\\uD733\\uD735-\\uD74F\\uD751-\\uD76B\\uD76D-\\uD787\\uD789-\\uD7A3]$/;\nvar reExtPict = /^(?:[\\xA9\\xAE\\u203C\\u2049\\u2122\\u2139\\u2194-\\u2199\\u21A9\\u21AA\\u231A\\u231B\\u2328\\u2388\\u23CF\\u23E9-\\u23F3\\u23F8-\\u23FA\\u24C2\\u25AA\\u25AB\\u25B6\\u25C0\\u25FB-\\u25FE\\u2600-\\u2605\\u2607-\\u2612\\u2614-\\u2685\\u2690-\\u2705\\u2708-\\u2712\\u2714\\u2716\\u271D\\u2721\\u2728\\u2733\\u2734\\u2744\\u2747\\u274C\\u274E\\u2753-\\u2755\\u2757\\u2763-\\u2767\\u2795-\\u2797\\u27A1\\u27B0\\u27BF\\u2934\\u2935\\u2B05-\\u2B07\\u2B1B\\u2B1C\\u2B50\\u2B55\\u3030\\u303D\\u3297\\u3299]|\\uD83C[\\uDC00-\\uDCFF\\uDD0D-\\uDD0F\\uDD2F\\uDD6C-\\uDD71\\uDD7E\\uDD7F\\uDD8E\\uDD91-\\uDD9A\\uDDAD-\\uDDE5\\uDE01-\\uDE0F\\uDE1A\\uDE2F\\uDE32-\\uDE3A\\uDE3C-\\uDE3F\\uDE49-\\uDFFA]|\\uD83D[\\uDC00-\\uDD3D\\uDD46-\\uDE4F\\uDE80-\\uDEFF\\uDF74-\\uDF7F\\uDFD5-\\uDFFF]|\\uD83E[\\uDC0C-\\uDC0F\\uDC48-\\uDC4F\\uDC5A-\\uDC5F\\uDC88-\\uDC8F\\uDCAE-\\uDCFF\\uDD0C-\\uDD3A\\uDD3C-\\uDD45\\uDD47-\\uDEFF]|\\uD83F[\\uDC00-\\uDFFD])$/;\n\nvar getCodepointType = (char, code) => {\n  var type = CodepointType.Any;\n\n  if (char.search(reExtend) !== -1) {\n    type |= CodepointType.Extend;\n  }\n\n  if (code === 0x200d) {\n    type |= CodepointType.ZWJ;\n  }\n\n  if (code >= 0x1f1e6 && code <= 0x1f1ff) {\n    type |= CodepointType.RI;\n  }\n\n  if (char.search(rePrepend) !== -1) {\n    type |= CodepointType.Prepend;\n  }\n\n  if (char.search(reSpacingMark) !== -1) {\n    type |= CodepointType.SpacingMark;\n  }\n\n  if (char.search(reL) !== -1) {\n    type |= CodepointType.L;\n  }\n\n  if (char.search(reV) !== -1) {\n    type |= CodepointType.V;\n  }\n\n  if (char.search(reT) !== -1) {\n    type |= CodepointType.T;\n  }\n\n  if (char.search(reLV) !== -1) {\n    type |= CodepointType.LV;\n  }\n\n  if (char.search(reLVT) !== -1) {\n    type |= CodepointType.LVT;\n  }\n\n  if (char.search(reExtPict) !== -1) {\n    type |= CodepointType.ExtPict;\n  }\n\n  return type;\n};\n\nfunction intersects(x, y) {\n  return (x & y) !== 0;\n}\n\nvar NonBoundaryPairs = [// GB6\n[CodepointType.L, CodepointType.L | CodepointType.V | CodepointType.LV | CodepointType.LVT], // GB7\n[CodepointType.LV | CodepointType.V, CodepointType.V | CodepointType.T], // GB8\n[CodepointType.LVT | CodepointType.T, CodepointType.T], // GB9\n[CodepointType.Any, CodepointType.Extend | CodepointType.ZWJ], // GB9a\n[CodepointType.Any, CodepointType.SpacingMark], // GB9b\n[CodepointType.Prepend, CodepointType.Any], // GB11\n[CodepointType.ZWJ, CodepointType.ExtPict], // GB12 and GB13\n[CodepointType.RI, CodepointType.RI]];\n\nfunction isBoundaryPair(left, right) {\n  return NonBoundaryPairs.findIndex(r => intersects(left, r[0]) && intersects(right, r[1])) === -1;\n}\n\nvar endingEmojiZWJ = /(?:[\\xA9\\xAE\\u203C\\u2049\\u2122\\u2139\\u2194-\\u2199\\u21A9\\u21AA\\u231A\\u231B\\u2328\\u2388\\u23CF\\u23E9-\\u23F3\\u23F8-\\u23FA\\u24C2\\u25AA\\u25AB\\u25B6\\u25C0\\u25FB-\\u25FE\\u2600-\\u2605\\u2607-\\u2612\\u2614-\\u2685\\u2690-\\u2705\\u2708-\\u2712\\u2714\\u2716\\u271D\\u2721\\u2728\\u2733\\u2734\\u2744\\u2747\\u274C\\u274E\\u2753-\\u2755\\u2757\\u2763-\\u2767\\u2795-\\u2797\\u27A1\\u27B0\\u27BF\\u2934\\u2935\\u2B05-\\u2B07\\u2B1B\\u2B1C\\u2B50\\u2B55\\u3030\\u303D\\u3297\\u3299]|\\uD83C[\\uDC00-\\uDCFF\\uDD0D-\\uDD0F\\uDD2F\\uDD6C-\\uDD71\\uDD7E\\uDD7F\\uDD8E\\uDD91-\\uDD9A\\uDDAD-\\uDDE5\\uDE01-\\uDE0F\\uDE1A\\uDE2F\\uDE32-\\uDE3A\\uDE3C-\\uDE3F\\uDE49-\\uDFFA]|\\uD83D[\\uDC00-\\uDD3D\\uDD46-\\uDE4F\\uDE80-\\uDEFF\\uDF74-\\uDF7F\\uDFD5-\\uDFFF]|\\uD83E[\\uDC0C-\\uDC0F\\uDC48-\\uDC4F\\uDC5A-\\uDC5F\\uDC88-\\uDC8F\\uDCAE-\\uDCFF\\uDD0C-\\uDD3A\\uDD3C-\\uDD45\\uDD47-\\uDEFF]|\\uD83F[\\uDC00-\\uDFFD])(?:[\\u0300-\\u036F\\u0483-\\u0489\\u0591-\\u05BD\\u05BF\\u05C1\\u05C2\\u05C4\\u05C5\\u05C7\\u0610-\\u061A\\u064B-\\u065F\\u0670\\u06D6-\\u06DC\\u06DF-\\u06E4\\u06E7\\u06E8\\u06EA-\\u06ED\\u0711\\u0730-\\u074A\\u07A6-\\u07B0\\u07EB-\\u07F3\\u07FD\\u0816-\\u0819\\u081B-\\u0823\\u0825-\\u0827\\u0829-\\u082D\\u0859-\\u085B\\u08D3-\\u08E1\\u08E3-\\u0902\\u093A\\u093C\\u0941-\\u0948\\u094D\\u0951-\\u0957\\u0962\\u0963\\u0981\\u09BC\\u09BE\\u09C1-\\u09C4\\u09CD\\u09D7\\u09E2\\u09E3\\u09FE\\u0A01\\u0A02\\u0A3C\\u0A41\\u0A42\\u0A47\\u0A48\\u0A4B-\\u0A4D\\u0A51\\u0A70\\u0A71\\u0A75\\u0A81\\u0A82\\u0ABC\\u0AC1-\\u0AC5\\u0AC7\\u0AC8\\u0ACD\\u0AE2\\u0AE3\\u0AFA-\\u0AFF\\u0B01\\u0B3C\\u0B3E\\u0B3F\\u0B41-\\u0B44\\u0B4D\\u0B55-\\u0B57\\u0B62\\u0B63\\u0B82\\u0BBE\\u0BC0\\u0BCD\\u0BD7\\u0C00\\u0C04\\u0C3E-\\u0C40\\u0C46-\\u0C48\\u0C4A-\\u0C4D\\u0C55\\u0C56\\u0C62\\u0C63\\u0C81\\u0CBC\\u0CBF\\u0CC2\\u0CC6\\u0CCC\\u0CCD\\u0CD5\\u0CD6\\u0CE2\\u0CE3\\u0D00\\u0D01\\u0D3B\\u0D3C\\u0D3E\\u0D41-\\u0D44\\u0D4D\\u0D57\\u0D62\\u0D63\\u0D81\\u0DCA\\u0DCF\\u0DD2-\\u0DD4\\u0DD6\\u0DDF\\u0E31\\u0E34-\\u0E3A\\u0E47-\\u0E4E\\u0EB1\\u0EB4-\\u0EBC\\u0EC8-\\u0ECD\\u0F18\\u0F19\\u0F35\\u0F37\\u0F39\\u0F71-\\u0F7E\\u0F80-\\u0F84\\u0F86\\u0F87\\u0F8D-\\u0F97\\u0F99-\\u0FBC\\u0FC6\\u102D-\\u1030\\u1032-\\u1037\\u1039\\u103A\\u103D\\u103E\\u1058\\u1059\\u105E-\\u1060\\u1071-\\u1074\\u1082\\u1085\\u1086\\u108D\\u109D\\u135D-\\u135F\\u1712-\\u1714\\u1732-\\u1734\\u1752\\u1753\\u1772\\u1773\\u17B4\\u17B5\\u17B7-\\u17BD\\u17C6\\u17C9-\\u17D3\\u17DD\\u180B-\\u180D\\u1885\\u1886\\u18A9\\u1920-\\u1922\\u1927\\u1928\\u1932\\u1939-\\u193B\\u1A17\\u1A18\\u1A1B\\u1A56\\u1A58-\\u1A5E\\u1A60\\u1A62\\u1A65-\\u1A6C\\u1A73-\\u1A7C\\u1A7F\\u1AB0-\\u1AC0\\u1B00-\\u1B03\\u1B34-\\u1B3A\\u1B3C\\u1B42\\u1B6B-\\u1B73\\u1B80\\u1B81\\u1BA2-\\u1BA5\\u1BA8\\u1BA9\\u1BAB-\\u1BAD\\u1BE6\\u1BE8\\u1BE9\\u1BED\\u1BEF-\\u1BF1\\u1C2C-\\u1C33\\u1C36\\u1C37\\u1CD0-\\u1CD2\\u1CD4-\\u1CE0\\u1CE2-\\u1CE8\\u1CED\\u1CF4\\u1CF8\\u1CF9\\u1DC0-\\u1DF9\\u1DFB-\\u1DFF\\u200C\\u20D0-\\u20F0\\u2CEF-\\u2CF1\\u2D7F\\u2DE0-\\u2DFF\\u302A-\\u302F\\u3099\\u309A\\uA66F-\\uA672\\uA674-\\uA67D\\uA69E\\uA69F\\uA6F0\\uA6F1\\uA802\\uA806\\uA80B\\uA825\\uA826\\uA82C\\uA8C4\\uA8C5\\uA8E0-\\uA8F1\\uA8FF\\uA926-\\uA92D\\uA947-\\uA951\\uA980-\\uA982\\uA9B3\\uA9B6-\\uA9B9\\uA9BC\\uA9BD\\uA9E5\\uAA29-\\uAA2E\\uAA31\\uAA32\\uAA35\\uAA36\\uAA43\\uAA4C\\uAA7C\\uAAB0\\uAAB2-\\uAAB4\\uAAB7\\uAAB8\\uAABE\\uAABF\\uAAC1\\uAAEC\\uAAED\\uAAF6\\uABE5\\uABE8\\uABED\\uFB1E\\uFE00-\\uFE0F\\uFE20-\\uFE2F\\uFF9E\\uFF9F]|\\uD800[\\uDDFD\\uDEE0\\uDF76-\\uDF7A]|\\uD802[\\uDE01-\\uDE03\\uDE05\\uDE06\\uDE0C-\\uDE0F\\uDE38-\\uDE3A\\uDE3F\\uDEE5\\uDEE6]|\\uD803[\\uDD24-\\uDD27\\uDEAB\\uDEAC\\uDF46-\\uDF50]|\\uD804[\\uDC01\\uDC38-\\uDC46\\uDC7F-\\uDC81\\uDCB3-\\uDCB6\\uDCB9\\uDCBA\\uDD00-\\uDD02\\uDD27-\\uDD2B\\uDD2D-\\uDD34\\uDD73\\uDD80\\uDD81\\uDDB6-\\uDDBE\\uDDC9-\\uDDCC\\uDDCF\\uDE2F-\\uDE31\\uDE34\\uDE36\\uDE37\\uDE3E\\uDEDF\\uDEE3-\\uDEEA\\uDF00\\uDF01\\uDF3B\\uDF3C\\uDF3E\\uDF40\\uDF57\\uDF66-\\uDF6C\\uDF70-\\uDF74]|\\uD805[\\uDC38-\\uDC3F\\uDC42-\\uDC44\\uDC46\\uDC5E\\uDCB0\\uDCB3-\\uDCB8\\uDCBA\\uDCBD\\uDCBF\\uDCC0\\uDCC2\\uDCC3\\uDDAF\\uDDB2-\\uDDB5\\uDDBC\\uDDBD\\uDDBF\\uDDC0\\uDDDC\\uDDDD\\uDE33-\\uDE3A\\uDE3D\\uDE3F\\uDE40\\uDEAB\\uDEAD\\uDEB0-\\uDEB5\\uDEB7\\uDF1D-\\uDF1F\\uDF22-\\uDF25\\uDF27-\\uDF2B]|\\uD806[\\uDC2F-\\uDC37\\uDC39\\uDC3A\\uDD30\\uDD3B\\uDD3C\\uDD3E\\uDD43\\uDDD4-\\uDDD7\\uDDDA\\uDDDB\\uDDE0\\uDE01-\\uDE0A\\uDE33-\\uDE38\\uDE3B-\\uDE3E\\uDE47\\uDE51-\\uDE56\\uDE59-\\uDE5B\\uDE8A-\\uDE96\\uDE98\\uDE99]|\\uD807[\\uDC30-\\uDC36\\uDC38-\\uDC3D\\uDC3F\\uDC92-\\uDCA7\\uDCAA-\\uDCB0\\uDCB2\\uDCB3\\uDCB5\\uDCB6\\uDD31-\\uDD36\\uDD3A\\uDD3C\\uDD3D\\uDD3F-\\uDD45\\uDD47\\uDD90\\uDD91\\uDD95\\uDD97\\uDEF3\\uDEF4]|\\uD81A[\\uDEF0-\\uDEF4\\uDF30-\\uDF36]|\\uD81B[\\uDF4F\\uDF8F-\\uDF92\\uDFE4]|\\uD82F[\\uDC9D\\uDC9E]|\\uD834[\\uDD65\\uDD67-\\uDD69\\uDD6E-\\uDD72\\uDD7B-\\uDD82\\uDD85-\\uDD8B\\uDDAA-\\uDDAD\\uDE42-\\uDE44]|\\uD836[\\uDE00-\\uDE36\\uDE3B-\\uDE6C\\uDE75\\uDE84\\uDE9B-\\uDE9F\\uDEA1-\\uDEAF]|\\uD838[\\uDC00-\\uDC06\\uDC08-\\uDC18\\uDC1B-\\uDC21\\uDC23\\uDC24\\uDC26-\\uDC2A\\uDD30-\\uDD36\\uDEEC-\\uDEEF]|\\uD83A[\\uDCD0-\\uDCD6\\uDD44-\\uDD4A]|\\uD83C[\\uDFFB-\\uDFFF]|\\uDB40[\\uDC20-\\uDC7F\\uDD00-\\uDDEF])*\\u200D$/;\n\nvar endsWithEmojiZWJ = str => {\n  return str.search(endingEmojiZWJ) !== -1;\n};\n\nvar endingRIs = /(?:\\uD83C[\\uDDE6-\\uDDFF])+$/g;\n\nvar endsWithOddNumberOfRIs = str => {\n  var match = str.match(endingRIs);\n\n  if (match === null) {\n    return false;\n  } else {\n    // A RI is represented by a surrogate pair.\n    var numRIs = match[0].length / 2;\n    return numRIs % 2 === 1;\n  }\n};\n\n/**\r\n * Shared the function with isElementType utility\r\n */\n\nvar isElement = value => {\n  return isPlainObject(value) && Node.isNodeList(value.children) && !Editor.isEditor(value);\n};\n\nvar Element = {\n  /**\r\n   * Check if a value implements the 'Ancestor' interface.\r\n   */\n  isAncestor(value) {\n    return isPlainObject(value) && Node.isNodeList(value.children);\n  },\n\n  /**\r\n   * Check if a value implements the `Element` interface.\r\n   */\n  isElement,\n\n  /**\r\n   * Check if a value is an array of `Element` objects.\r\n   */\n  isElementList(value) {\n    return Array.isArray(value) && value.every(val => Element.isElement(val));\n  },\n\n  /**\r\n   * Check if a set of props is a partial of Element.\r\n   */\n  isElementProps(props) {\n    return props.children !== undefined;\n  },\n\n  /**\r\n   * Check if a value implements the `Element` interface and has elementKey with selected value.\r\n   * Default it check to `type` key value\r\n   */\n  isElementType: function isElementType(value, elementVal) {\n    var elementKey = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 'type';\n    return isElement(value) && value[elementKey] === elementVal;\n  },\n\n  /**\r\n   * Check if an element matches set of properties.\r\n   *\r\n   * Note: this checks custom properties, and it does not ensure that any\r\n   * children are equivalent.\r\n   */\n  matches(element, props) {\n    for (var key in props) {\n      if (key === 'children') {\n        continue;\n      }\n\n      if (element[key] !== props[key]) {\n        return false;\n      }\n    }\n\n    return true;\n  }\n\n};\n\nvar _excluded$4 = [\"text\"],\n    _excluded2$3 = [\"text\"];\n\nfunction ownKeys$8(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) { symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); } keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread$8(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys$8(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys$8(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\nvar IS_EDITOR_CACHE = new WeakMap();\nvar Editor = {\n  /**\r\n   * Get the ancestor above a location in the document.\r\n   */\n  above(editor) {\n    var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n    var {\n      voids = false,\n      mode = 'lowest',\n      at = editor.selection,\n      match\n    } = options;\n\n    if (!at) {\n      return;\n    }\n\n    var path = Editor.path(editor, at);\n    var reverse = mode === 'lowest';\n\n    for (var [n, p] of Editor.levels(editor, {\n      at: path,\n      voids,\n      match,\n      reverse\n    })) {\n      if (!Text.isText(n) && !Path.equals(path, p)) {\n        return [n, p];\n      }\n    }\n  },\n\n  /**\r\n   * Add a custom property to the leaf text nodes in the current selection.\r\n   *\r\n   * If the selection is currently collapsed, the marks will be added to the\r\n   * `editor.marks` property instead, and applied when text is inserted next.\r\n   */\n  addMark(editor, key, value) {\n    editor.addMark(key, value);\n  },\n\n  /**\r\n   * Get the point after a location.\r\n   */\n  after(editor, at) {\n    var options = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n    var anchor = Editor.point(editor, at, {\n      edge: 'end'\n    });\n    var focus = Editor.end(editor, []);\n    var range = {\n      anchor,\n      focus\n    };\n    var {\n      distance = 1\n    } = options;\n    var d = 0;\n    var target;\n\n    for (var p of Editor.positions(editor, _objectSpread$8(_objectSpread$8({}, options), {}, {\n      at: range\n    }))) {\n      if (d > distance) {\n        break;\n      }\n\n      if (d !== 0) {\n        target = p;\n      }\n\n      d++;\n    }\n\n    return target;\n  },\n\n  /**\r\n   * Get the point before a location.\r\n   */\n  before(editor, at) {\n    var options = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n    var anchor = Editor.start(editor, []);\n    var focus = Editor.point(editor, at, {\n      edge: 'start'\n    });\n    var range = {\n      anchor,\n      focus\n    };\n    var {\n      distance = 1\n    } = options;\n    var d = 0;\n    var target;\n\n    for (var p of Editor.positions(editor, _objectSpread$8(_objectSpread$8({}, options), {}, {\n      at: range,\n      reverse: true\n    }))) {\n      if (d > distance) {\n        break;\n      }\n\n      if (d !== 0) {\n        target = p;\n      }\n\n      d++;\n    }\n\n    return target;\n  },\n\n  /**\r\n   * Delete content in the editor backward from the current selection.\r\n   */\n  deleteBackward(editor) {\n    var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n    var {\n      unit = 'character'\n    } = options;\n    editor.deleteBackward(unit);\n  },\n\n  /**\r\n   * Delete content in the editor forward from the current selection.\r\n   */\n  deleteForward(editor) {\n    var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n    var {\n      unit = 'character'\n    } = options;\n    editor.deleteForward(unit);\n  },\n\n  /**\r\n   * Delete the content in the current selection.\r\n   */\n  deleteFragment(editor) {\n    var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n    var {\n      direction = 'forward'\n    } = options;\n    editor.deleteFragment(direction);\n  },\n\n  /**\r\n   * Get the start and end points of a location.\r\n   */\n  edges(editor, at) {\n    return [Editor.start(editor, at), Editor.end(editor, at)];\n  },\n\n  /**\r\n   * Get the end point of a location.\r\n   */\n  end(editor, at) {\n    return Editor.point(editor, at, {\n      edge: 'end'\n    });\n  },\n\n  /**\r\n   * Get the first node at a location.\r\n   */\n  first(editor, at) {\n    var path = Editor.path(editor, at, {\n      edge: 'start'\n    });\n    return Editor.node(editor, path);\n  },\n\n  /**\r\n   * Get the fragment at a location.\r\n   */\n  fragment(editor, at) {\n    var range = Editor.range(editor, at);\n    var fragment = Node.fragment(editor, range);\n    return fragment;\n  },\n\n  /**\r\n   * Check if a node has block children.\r\n   */\n  hasBlocks(editor, element) {\n    return element.children.some(n => Editor.isBlock(editor, n));\n  },\n\n  /**\r\n   * Check if a node has inline and text children.\r\n   */\n  hasInlines(editor, element) {\n    return element.children.some(n => Text.isText(n) || Editor.isInline(editor, n));\n  },\n\n  /**\r\n   * Check if a node has text children.\r\n   */\n  hasTexts(editor, element) {\n    return element.children.every(n => Text.isText(n));\n  },\n\n  /**\r\n   * Insert a block break at the current selection.\r\n   *\r\n   * If the selection is currently expanded, it will be deleted first.\r\n   */\n  insertBreak(editor) {\n    editor.insertBreak();\n  },\n\n  /**\r\n   * Insert a fragment at the current selection.\r\n   *\r\n   * If the selection is currently expanded, it will be deleted first.\r\n   */\n  insertFragment(editor, fragment) {\n    editor.insertFragment(fragment);\n  },\n\n  /**\r\n   * Insert a node at the current selection.\r\n   *\r\n   * If the selection is currently expanded, it will be deleted first.\r\n   */\n  insertNode(editor, node) {\n    editor.insertNode(node);\n  },\n\n  /**\r\n   * Insert text at the current selection.\r\n   *\r\n   * If the selection is currently expanded, it will be deleted first.\r\n   */\n  insertText(editor, text) {\n    editor.insertText(text);\n  },\n\n  /**\r\n   * Check if a value is a block `Element` object.\r\n   */\n  isBlock(editor, value) {\n    return Element.isElement(value) && !editor.isInline(value);\n  },\n\n  /**\r\n   * Check if a value is an `Editor` object.\r\n   */\n  isEditor(value) {\n    if (!isPlainObject(value)) return false;\n    var cachedIsEditor = IS_EDITOR_CACHE.get(value);\n\n    if (cachedIsEditor !== undefined) {\n      return cachedIsEditor;\n    }\n\n    var isEditor = typeof value.addMark === 'function' && typeof value.apply === 'function' && typeof value.deleteBackward === 'function' && typeof value.deleteForward === 'function' && typeof value.deleteFragment === 'function' && typeof value.insertBreak === 'function' && typeof value.insertFragment === 'function' && typeof value.insertNode === 'function' && typeof value.insertText === 'function' && typeof value.isInline === 'function' && typeof value.isVoid === 'function' && typeof value.normalizeNode === 'function' && typeof value.onChange === 'function' && typeof value.removeMark === 'function' && (value.marks === null || isPlainObject(value.marks)) && (value.selection === null || Range.isRange(value.selection)) && Node.isNodeList(value.children) && Operation.isOperationList(value.operations);\n    IS_EDITOR_CACHE.set(value, isEditor);\n    return isEditor;\n  },\n\n  /**\r\n   * Check if a point is the end point of a location.\r\n   */\n  isEnd(editor, point, at) {\n    var end = Editor.end(editor, at);\n    return Point.equals(point, end);\n  },\n\n  /**\r\n   * Check if a point is an edge of a location.\r\n   */\n  isEdge(editor, point, at) {\n    return Editor.isStart(editor, point, at) || Editor.isEnd(editor, point, at);\n  },\n\n  /**\r\n   * Check if an element is empty, accounting for void nodes.\r\n   */\n  isEmpty(editor, element) {\n    var {\n      children\n    } = element;\n    var [first] = children;\n    return children.length === 0 || children.length === 1 && Text.isText(first) && first.text === '' && !editor.isVoid(element);\n  },\n\n  /**\r\n   * Check if a value is an inline `Element` object.\r\n   */\n  isInline(editor, value) {\n    return Element.isElement(value) && editor.isInline(value);\n  },\n\n  /**\r\n   * Check if the editor is currently normalizing after each operation.\r\n   */\n  isNormalizing(editor) {\n    var isNormalizing = NORMALIZING.get(editor);\n    return isNormalizing === undefined ? true : isNormalizing;\n  },\n\n  /**\r\n   * Check if a point is the start point of a location.\r\n   */\n  isStart(editor, point, at) {\n    // PERF: If the offset isn't `0` we know it's not the start.\n    if (point.offset !== 0) {\n      return false;\n    }\n\n    var start = Editor.start(editor, at);\n    return Point.equals(point, start);\n  },\n\n  /**\r\n   * Check if a value is a void `Element` object.\r\n   */\n  isVoid(editor, value) {\n    return Element.isElement(value) && editor.isVoid(value);\n  },\n\n  /**\r\n   * Get the last node at a location.\r\n   */\n  last(editor, at) {\n    var path = Editor.path(editor, at, {\n      edge: 'end'\n    });\n    return Editor.node(editor, path);\n  },\n\n  /**\r\n   * Get the leaf text node at a location.\r\n   */\n  leaf(editor, at) {\n    var options = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n    var path = Editor.path(editor, at, options);\n    var node = Node.leaf(editor, path);\n    return [node, path];\n  },\n\n  /**\r\n   * Iterate through all of the levels at a location.\r\n   */\n  *levels(editor) {\n    var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n    var {\n      at = editor.selection,\n      reverse = false,\n      voids = false\n    } = options;\n    var {\n      match\n    } = options;\n\n    if (match == null) {\n      match = () => true;\n    }\n\n    if (!at) {\n      return;\n    }\n\n    var levels = [];\n    var path = Editor.path(editor, at);\n\n    for (var [n, p] of Node.levels(editor, path)) {\n      if (!match(n, p)) {\n        continue;\n      }\n\n      levels.push([n, p]);\n\n      if (!voids && Editor.isVoid(editor, n)) {\n        break;\n      }\n    }\n\n    if (reverse) {\n      levels.reverse();\n    }\n\n    yield* levels;\n  },\n\n  /**\r\n   * Get the marks that would be added to text at the current selection.\r\n   */\n  marks(editor) {\n    var {\n      marks,\n      selection\n    } = editor;\n\n    if (!selection) {\n      return null;\n    }\n\n    if (marks) {\n      return marks;\n    }\n\n    if (Range.isExpanded(selection)) {\n      var [match] = Editor.nodes(editor, {\n        match: Text.isText\n      });\n\n      if (match) {\n        var [_node] = match;\n\n        var _rest = _objectWithoutProperties(_node, _excluded$4);\n\n        return _rest;\n      } else {\n        return {};\n      }\n    }\n\n    var {\n      anchor\n    } = selection;\n    var {\n      path\n    } = anchor;\n    var [node] = Editor.leaf(editor, path);\n\n    if (anchor.offset === 0) {\n      var prev = Editor.previous(editor, {\n        at: path,\n        match: Text.isText\n      });\n      var block = Editor.above(editor, {\n        match: n => Editor.isBlock(editor, n)\n      });\n\n      if (prev && block) {\n        var [prevNode, prevPath] = prev;\n        var [, blockPath] = block;\n\n        if (Path.isAncestor(blockPath, prevPath)) {\n          node = prevNode;\n        }\n      }\n    }\n\n    var rest = _objectWithoutProperties(node, _excluded2$3);\n\n    return rest;\n  },\n\n  /**\r\n   * Get the matching node in the branch of the document after a location.\r\n   */\n  next(editor) {\n    var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n    var {\n      mode = 'lowest',\n      voids = false\n    } = options;\n    var {\n      match,\n      at = editor.selection\n    } = options;\n\n    if (!at) {\n      return;\n    }\n\n    var pointAfterLocation = Editor.after(editor, at, {\n      voids\n    });\n    if (!pointAfterLocation) return;\n    var [, to] = Editor.last(editor, []);\n    var span = [pointAfterLocation.path, to];\n\n    if (Path.isPath(at) && at.length === 0) {\n      throw new Error(\"Cannot get the next node from the root node!\");\n    }\n\n    if (match == null) {\n      if (Path.isPath(at)) {\n        var [parent] = Editor.parent(editor, at);\n\n        match = n => parent.children.includes(n);\n      } else {\n        match = () => true;\n      }\n    }\n\n    var [next] = Editor.nodes(editor, {\n      at: span,\n      match,\n      mode,\n      voids\n    });\n    return next;\n  },\n\n  /**\r\n   * Get the node at a location.\r\n   */\n  node(editor, at) {\n    var options = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n    var path = Editor.path(editor, at, options);\n    var node = Node.get(editor, path);\n    return [node, path];\n  },\n\n  /**\r\n   * Iterate through all of the nodes in the Editor.\r\n   */\n  *nodes(editor) {\n    var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n    var {\n      at = editor.selection,\n      mode = 'all',\n      universal = false,\n      reverse = false,\n      voids = false\n    } = options;\n    var {\n      match\n    } = options;\n\n    if (!match) {\n      match = () => true;\n    }\n\n    if (!at) {\n      return;\n    }\n\n    var from;\n    var to;\n\n    if (Span.isSpan(at)) {\n      from = at[0];\n      to = at[1];\n    } else {\n      var first = Editor.path(editor, at, {\n        edge: 'start'\n      });\n      var last = Editor.path(editor, at, {\n        edge: 'end'\n      });\n      from = reverse ? last : first;\n      to = reverse ? first : last;\n    }\n\n    var nodeEntries = Node.nodes(editor, {\n      reverse,\n      from,\n      to,\n      pass: _ref => {\n        var [n] = _ref;\n        return voids ? false : Editor.isVoid(editor, n);\n      }\n    });\n    var matches = [];\n    var hit;\n\n    for (var [node, path] of nodeEntries) {\n      var isLower = hit && Path.compare(path, hit[1]) === 0; // In highest mode any node lower than the last hit is not a match.\n\n      if (mode === 'highest' && isLower) {\n        continue;\n      }\n\n      if (!match(node, path)) {\n        // If we've arrived at a leaf text node that is not lower than the last\n        // hit, then we've found a branch that doesn't include a match, which\n        // means the match is not universal.\n        if (universal && !isLower && Text.isText(node)) {\n          return;\n        } else {\n          continue;\n        }\n      } // If there's a match and it's lower than the last, update the hit.\n\n\n      if (mode === 'lowest' && isLower) {\n        hit = [node, path];\n        continue;\n      } // In lowest mode we emit the last hit, once it's guaranteed lowest.\n\n\n      var emit = mode === 'lowest' ? hit : [node, path];\n\n      if (emit) {\n        if (universal) {\n          matches.push(emit);\n        } else {\n          yield emit;\n        }\n      }\n\n      hit = [node, path];\n    } // Since lowest is always emitting one behind, catch up at the end.\n\n\n    if (mode === 'lowest' && hit) {\n      if (universal) {\n        matches.push(hit);\n      } else {\n        yield hit;\n      }\n    } // Universal defers to ensure that the match occurs in every branch, so we\n    // yield all of the matches after iterating.\n\n\n    if (universal) {\n      yield* matches;\n    }\n  },\n\n  /**\r\n   * Normalize any dirty objects in the editor.\r\n   */\n  normalize(editor) {\n    var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n    var {\n      force = false\n    } = options;\n\n    var getDirtyPaths = editor => {\n      return DIRTY_PATHS.get(editor) || [];\n    };\n\n    var getDirtyPathKeys = editor => {\n      return DIRTY_PATH_KEYS.get(editor) || new Set();\n    };\n\n    var popDirtyPath = editor => {\n      var path = getDirtyPaths(editor).pop();\n      var key = path.join(',');\n      getDirtyPathKeys(editor).delete(key);\n      return path;\n    };\n\n    if (!Editor.isNormalizing(editor)) {\n      return;\n    }\n\n    if (force) {\n      var allPaths = Array.from(Node.nodes(editor), _ref2 => {\n        var [, p] = _ref2;\n        return p;\n      });\n      var allPathKeys = new Set(allPaths.map(p => p.join(',')));\n      DIRTY_PATHS.set(editor, allPaths);\n      DIRTY_PATH_KEYS.set(editor, allPathKeys);\n    }\n\n    if (getDirtyPaths(editor).length === 0) {\n      return;\n    }\n\n    Editor.withoutNormalizing(editor, () => {\n      /*\r\n        Fix dirty elements with no children.\r\n        editor.normalizeNode() does fix this, but some normalization fixes also require it to work.\r\n        Running an initial pass avoids the catch-22 race condition.\r\n      */\n      for (var dirtyPath of getDirtyPaths(editor)) {\n        if (Node.has(editor, dirtyPath)) {\n          var entry = Editor.node(editor, dirtyPath);\n          var [node, _] = entry;\n          /*\r\n            The default normalizer inserts an empty text node in this scenario, but it can be customised.\r\n            So there is some risk here.\r\n                       As long as the normalizer only inserts child nodes for this case it is safe to do in any order;\r\n            by definition adding children to an empty node can't cause other paths to change.\r\n          */\n\n          if (Element.isElement(node) && node.children.length === 0) {\n            editor.normalizeNode(entry);\n          }\n        }\n      }\n\n      var max = getDirtyPaths(editor).length * 42; // HACK: better way?\n\n      var m = 0;\n\n      while (getDirtyPaths(editor).length !== 0) {\n        if (m > max) {\n          throw new Error(\"\\n            Could not completely normalize the editor after \".concat(max, \" iterations! This is usually due to incorrect normalization logic that leaves a node in an invalid state.\\n          \"));\n        }\n\n        var _dirtyPath = popDirtyPath(editor); // If the node doesn't exist in the tree, it does not need to be normalized.\n\n\n        if (Node.has(editor, _dirtyPath)) {\n          var _entry = Editor.node(editor, _dirtyPath);\n\n          editor.normalizeNode(_entry);\n        }\n\n        m++;\n      }\n    });\n  },\n\n  /**\r\n   * Get the parent node of a location.\r\n   */\n  parent(editor, at) {\n    var options = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n    var path = Editor.path(editor, at, options);\n    var parentPath = Path.parent(path);\n    var entry = Editor.node(editor, parentPath);\n    return entry;\n  },\n\n  /**\r\n   * Get the path of a location.\r\n   */\n  path(editor, at) {\n    var options = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n    var {\n      depth,\n      edge\n    } = options;\n\n    if (Path.isPath(at)) {\n      if (edge === 'start') {\n        var [, firstPath] = Node.first(editor, at);\n        at = firstPath;\n      } else if (edge === 'end') {\n        var [, lastPath] = Node.last(editor, at);\n        at = lastPath;\n      }\n    }\n\n    if (Range.isRange(at)) {\n      if (edge === 'start') {\n        at = Range.start(at);\n      } else if (edge === 'end') {\n        at = Range.end(at);\n      } else {\n        at = Path.common(at.anchor.path, at.focus.path);\n      }\n    }\n\n    if (Point.isPoint(at)) {\n      at = at.path;\n    }\n\n    if (depth != null) {\n      at = at.slice(0, depth);\n    }\n\n    return at;\n  },\n\n  hasPath(editor, path) {\n    return Node.has(editor, path);\n  },\n\n  /**\r\n   * Create a mutable ref for a `Path` object, which will stay in sync as new\r\n   * operations are applied to the editor.\r\n   */\n  pathRef(editor, path) {\n    var options = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n    var {\n      affinity = 'forward'\n    } = options;\n    var ref = {\n      current: path,\n      affinity,\n\n      unref() {\n        var {\n          current\n        } = ref;\n        var pathRefs = Editor.pathRefs(editor);\n        pathRefs.delete(ref);\n        ref.current = null;\n        return current;\n      }\n\n    };\n    var refs = Editor.pathRefs(editor);\n    refs.add(ref);\n    return ref;\n  },\n\n  /**\r\n   * Get the set of currently tracked path refs of the editor.\r\n   */\n  pathRefs(editor) {\n    var refs = PATH_REFS.get(editor);\n\n    if (!refs) {\n      refs = new Set();\n      PATH_REFS.set(editor, refs);\n    }\n\n    return refs;\n  },\n\n  /**\r\n   * Get the start or end point of a location.\r\n   */\n  point(editor, at) {\n    var options = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n    var {\n      edge = 'start'\n    } = options;\n\n    if (Path.isPath(at)) {\n      var path;\n\n      if (edge === 'end') {\n        var [, lastPath] = Node.last(editor, at);\n        path = lastPath;\n      } else {\n        var [, firstPath] = Node.first(editor, at);\n        path = firstPath;\n      }\n\n      var node = Node.get(editor, path);\n\n      if (!Text.isText(node)) {\n        throw new Error(\"Cannot get the \".concat(edge, \" point in the node at path [\").concat(at, \"] because it has no \").concat(edge, \" text node.\"));\n      }\n\n      return {\n        path,\n        offset: edge === 'end' ? node.text.length : 0\n      };\n    }\n\n    if (Range.isRange(at)) {\n      var [start, end] = Range.edges(at);\n      return edge === 'start' ? start : end;\n    }\n\n    return at;\n  },\n\n  /**\r\n   * Create a mutable ref for a `Point` object, which will stay in sync as new\r\n   * operations are applied to the editor.\r\n   */\n  pointRef(editor, point) {\n    var options = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n    var {\n      affinity = 'forward'\n    } = options;\n    var ref = {\n      current: point,\n      affinity,\n\n      unref() {\n        var {\n          current\n        } = ref;\n        var pointRefs = Editor.pointRefs(editor);\n        pointRefs.delete(ref);\n        ref.current = null;\n        return current;\n      }\n\n    };\n    var refs = Editor.pointRefs(editor);\n    refs.add(ref);\n    return ref;\n  },\n\n  /**\r\n   * Get the set of currently tracked point refs of the editor.\r\n   */\n  pointRefs(editor) {\n    var refs = POINT_REFS.get(editor);\n\n    if (!refs) {\n      refs = new Set();\n      POINT_REFS.set(editor, refs);\n    }\n\n    return refs;\n  },\n\n  /**\r\n   * Return all the positions in `at` range where a `Point` can be placed.\r\n   *\r\n   * By default, moves forward by individual offsets at a time, but\r\n   * the `unit` option can be used to to move by character, word, line, or block.\r\n   *\r\n   * The `reverse` option can be used to change iteration direction.\r\n   *\r\n   * Note: By default void nodes are treated as a single point and iteration\r\n   * will not happen inside their content unless you pass in true for the\r\n   * `voids` option, then iteration will occur.\r\n   */\n  *positions(editor) {\n    var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n    var {\n      at = editor.selection,\n      unit = 'offset',\n      reverse = false,\n      voids = false\n    } = options;\n\n    if (!at) {\n      return;\n    }\n    /**\r\n     * Algorithm notes:\r\n     *\r\n     * Each step `distance` is dynamic depending on the underlying text\r\n     * and the `unit` specified.  Each step, e.g., a line or word, may\r\n     * span multiple text nodes, so we iterate through the text both on\r\n     * two levels in step-sync:\r\n     *\r\n     * `leafText` stores the text on a text leaf level, and is advanced\r\n     * through using the counters `leafTextOffset` and `leafTextRemaining`.\r\n     *\r\n     * `blockText` stores the text on a block level, and is shortened\r\n     * by `distance` every time it is advanced.\r\n     *\r\n     * We only maintain a window of one blockText and one leafText because\r\n     * a block node always appears before all of its leaf nodes.\r\n     */\n\n\n    var range = Editor.range(editor, at);\n    var [start, end] = Range.edges(range);\n    var first = reverse ? end : start;\n    var isNewBlock = false;\n    var blockText = '';\n    var distance = 0; // Distance for leafText to catch up to blockText.\n\n    var leafTextRemaining = 0;\n    var leafTextOffset = 0; // Iterate through all nodes in range, grabbing entire textual content\n    // of block nodes in blockText, and text nodes in leafText.\n    // Exploits the fact that nodes are sequenced in such a way that we first\n    // encounter the block node, then all of its text nodes, so when iterating\n    // through the blockText and leafText we just need to remember a window of\n    // one block node and leaf node, respectively.\n\n    for (var [node, path] of Editor.nodes(editor, {\n      at,\n      reverse,\n      voids\n    })) {\n      /*\r\n       * ELEMENT NODE - Yield position(s) for voids, collect blockText for blocks\r\n       */\n      if (Element.isElement(node)) {\n        // Void nodes are a special case, so by default we will always\n        // yield their first point. If the `voids` option is set to true,\n        // then we will iterate over their content.\n        if (!voids && editor.isVoid(node)) {\n          yield Editor.start(editor, path);\n          continue;\n        } // Inline element nodes are ignored as they don't themselves\n        // contribute to `blockText` or `leafText` - their parent and\n        // children do.\n\n\n        if (editor.isInline(node)) continue; // Block element node - set `blockText` to its text content.\n\n        if (Editor.hasInlines(editor, node)) {\n          // We always exhaust block nodes before encountering a new one:\n          //   console.assert(blockText === '',\n          //     `blockText='${blockText}' - `+\n          //     `not exhausted before new block node`, path)\n          // Ensure range considered is capped to `range`, in the\n          // start/end edge cases where block extends beyond range.\n          // Equivalent to this, but presumably more performant:\n          //   blockRange = Editor.range(editor, ...Editor.edges(editor, path))\n          //   blockRange = Range.intersection(range, blockRange) // intersect\n          //   blockText = Editor.string(editor, blockRange, { voids })\n          var e = Path.isAncestor(path, end.path) ? end : Editor.end(editor, path);\n          var s = Path.isAncestor(path, start.path) ? start : Editor.start(editor, path);\n          blockText = Editor.string(editor, {\n            anchor: s,\n            focus: e\n          }, {\n            voids\n          });\n          isNewBlock = true;\n        }\n      }\n      /*\r\n       * TEXT LEAF NODE - Iterate through text content, yielding\r\n       * positions every `distance` offset according to `unit`.\r\n       */\n\n\n      if (Text.isText(node)) {\n        var isFirst = Path.equals(path, first.path); // Proof that we always exhaust text nodes before encountering a new one:\n        //   console.assert(leafTextRemaining <= 0,\n        //     `leafTextRemaining=${leafTextRemaining} - `+\n        //     `not exhausted before new leaf text node`, path)\n        // Reset `leafText` counters for new text node.\n\n        if (isFirst) {\n          leafTextRemaining = reverse ? first.offset : node.text.length - first.offset;\n          leafTextOffset = first.offset; // Works for reverse too.\n        } else {\n          leafTextRemaining = node.text.length;\n          leafTextOffset = reverse ? leafTextRemaining : 0;\n        } // Yield position at the start of node (potentially).\n\n\n        if (isFirst || isNewBlock || unit === 'offset') {\n          yield {\n            path,\n            offset: leafTextOffset\n          };\n          isNewBlock = false;\n        } // Yield positions every (dynamically calculated) `distance` offset.\n\n\n        while (true) {\n          // If `leafText` has caught up with `blockText` (distance=0),\n          // and if blockText is exhausted, break to get another block node,\n          // otherwise advance blockText forward by the new `distance`.\n          if (distance === 0) {\n            if (blockText === '') break;\n            distance = calcDistance(blockText, unit, reverse); // Split the string at the previously found distance and use the\n            // remaining string for the next iteration.\n\n            blockText = splitByCharacterDistance(blockText, distance, reverse)[1];\n          } // Advance `leafText` by the current `distance`.\n\n\n          leafTextOffset = reverse ? leafTextOffset - distance : leafTextOffset + distance;\n          leafTextRemaining = leafTextRemaining - distance; // If `leafText` is exhausted, break to get a new leaf node\n          // and set distance to the overflow amount, so we'll (maybe)\n          // catch up to blockText in the next leaf text node.\n\n          if (leafTextRemaining < 0) {\n            distance = -leafTextRemaining;\n            break;\n          } // Successfully walked `distance` offsets through `leafText`\n          // to catch up with `blockText`, so we can reset `distance`\n          // and yield this position in this node.\n\n\n          distance = 0;\n          yield {\n            path,\n            offset: leafTextOffset\n          };\n        }\n      }\n    } // Proof that upon completion, we've exahusted both leaf and block text:\n    //   console.assert(leafTextRemaining <= 0, \"leafText wasn't exhausted\")\n    //   console.assert(blockText === '', \"blockText wasn't exhausted\")\n    // Helper:\n    // Return the distance in offsets for a step of size `unit` on given string.\n\n\n    function calcDistance(text, unit, reverse) {\n      if (unit === 'character') {\n        return getCharacterDistance(text, reverse);\n      } else if (unit === 'word') {\n        return getWordDistance(text, reverse);\n      } else if (unit === 'line' || unit === 'block') {\n        return text.length;\n      }\n\n      return 1;\n    }\n  },\n\n  /**\r\n   * Get the matching node in the branch of the document before a location.\r\n   */\n  previous(editor) {\n    var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n    var {\n      mode = 'lowest',\n      voids = false\n    } = options;\n    var {\n      match,\n      at = editor.selection\n    } = options;\n\n    if (!at) {\n      return;\n    }\n\n    var pointBeforeLocation = Editor.before(editor, at, {\n      voids\n    });\n\n    if (!pointBeforeLocation) {\n      return;\n    }\n\n    var [, to] = Editor.first(editor, []); // The search location is from the start of the document to the path of\n    // the point before the location passed in\n\n    var span = [pointBeforeLocation.path, to];\n\n    if (Path.isPath(at) && at.length === 0) {\n      throw new Error(\"Cannot get the previous node from the root node!\");\n    }\n\n    if (match == null) {\n      if (Path.isPath(at)) {\n        var [parent] = Editor.parent(editor, at);\n\n        match = n => parent.children.includes(n);\n      } else {\n        match = () => true;\n      }\n    }\n\n    var [previous] = Editor.nodes(editor, {\n      reverse: true,\n      at: span,\n      match,\n      mode,\n      voids\n    });\n    return previous;\n  },\n\n  /**\r\n   * Get a range of a location.\r\n   */\n  range(editor, at, to) {\n    if (Range.isRange(at) && !to) {\n      return at;\n    }\n\n    var start = Editor.start(editor, at);\n    var end = Editor.end(editor, to || at);\n    return {\n      anchor: start,\n      focus: end\n    };\n  },\n\n  /**\r\n   * Create a mutable ref for a `Range` object, which will stay in sync as new\r\n   * operations are applied to the editor.\r\n   */\n  rangeRef(editor, range) {\n    var options = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n    var {\n      affinity = 'forward'\n    } = options;\n    var ref = {\n      current: range,\n      affinity,\n\n      unref() {\n        var {\n          current\n        } = ref;\n        var rangeRefs = Editor.rangeRefs(editor);\n        rangeRefs.delete(ref);\n        ref.current = null;\n        return current;\n      }\n\n    };\n    var refs = Editor.rangeRefs(editor);\n    refs.add(ref);\n    return ref;\n  },\n\n  /**\r\n   * Get the set of currently tracked range refs of the editor.\r\n   */\n  rangeRefs(editor) {\n    var refs = RANGE_REFS.get(editor);\n\n    if (!refs) {\n      refs = new Set();\n      RANGE_REFS.set(editor, refs);\n    }\n\n    return refs;\n  },\n\n  /**\r\n   * Remove a custom property from all of the leaf text nodes in the current\r\n   * selection.\r\n   *\r\n   * If the selection is currently collapsed, the removal will be stored on\r\n   * `editor.marks` and applied to the text inserted next.\r\n   */\n  removeMark(editor, key) {\n    editor.removeMark(key);\n  },\n\n  /**\r\n   * Manually set if the editor should currently be normalizing.\r\n   *\r\n   * Note: Using this incorrectly can leave the editor in an invalid state.\r\n   *\r\n   */\n  setNormalizing(editor, isNormalizing) {\n    NORMALIZING.set(editor, isNormalizing);\n  },\n\n  /**\r\n   * Get the start point of a location.\r\n   */\n  start(editor, at) {\n    return Editor.point(editor, at, {\n      edge: 'start'\n    });\n  },\n\n  /**\r\n   * Get the text string content of a location.\r\n   *\r\n   * Note: by default the text of void nodes is considered to be an empty\r\n   * string, regardless of content, unless you pass in true for the voids option\r\n   */\n  string(editor, at) {\n    var options = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n    var {\n      voids = false\n    } = options;\n    var range = Editor.range(editor, at);\n    var [start, end] = Range.edges(range);\n    var text = '';\n\n    for (var [node, path] of Editor.nodes(editor, {\n      at: range,\n      match: Text.isText,\n      voids\n    })) {\n      var t = node.text;\n\n      if (Path.equals(path, end.path)) {\n        t = t.slice(0, end.offset);\n      }\n\n      if (Path.equals(path, start.path)) {\n        t = t.slice(start.offset);\n      }\n\n      text += t;\n    }\n\n    return text;\n  },\n\n  /**\r\n   * Convert a range into a non-hanging one.\r\n   */\n  unhangRange(editor, range) {\n    var options = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n    var {\n      voids = false\n    } = options;\n    var [start, end] = Range.edges(range); // PERF: exit early if we can guarantee that the range isn't hanging.\n\n    if (start.offset !== 0 || end.offset !== 0 || Range.isCollapsed(range)) {\n      return range;\n    }\n\n    var endBlock = Editor.above(editor, {\n      at: end,\n      match: n => Editor.isBlock(editor, n)\n    });\n    var blockPath = endBlock ? endBlock[1] : [];\n    var first = Editor.start(editor, start);\n    var before = {\n      anchor: first,\n      focus: end\n    };\n    var skip = true;\n\n    for (var [node, path] of Editor.nodes(editor, {\n      at: before,\n      match: Text.isText,\n      reverse: true,\n      voids\n    })) {\n      if (skip) {\n        skip = false;\n        continue;\n      }\n\n      if (node.text !== '' || Path.isBefore(path, blockPath)) {\n        end = {\n          path,\n          offset: node.text.length\n        };\n        break;\n      }\n    }\n\n    return {\n      anchor: start,\n      focus: end\n    };\n  },\n\n  /**\r\n   * Match a void node in the current branch of the editor.\r\n   */\n  void(editor) {\n    var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n    return Editor.above(editor, _objectSpread$8(_objectSpread$8({}, options), {}, {\n      match: n => Editor.isVoid(editor, n)\n    }));\n  },\n\n  /**\r\n   * Call a function, deferring normalization until after it completes.\r\n   */\n  withoutNormalizing(editor, fn) {\n    var value = Editor.isNormalizing(editor);\n    Editor.setNormalizing(editor, false);\n\n    try {\n      fn();\n    } finally {\n      Editor.setNormalizing(editor, value);\n    }\n\n    Editor.normalize(editor);\n  }\n\n};\n\nvar Location = {\n  /**\r\n   * Check if a value implements the `Location` interface.\r\n   */\n  isLocation(value) {\n    return Path.isPath(value) || Point.isPoint(value) || Range.isRange(value);\n  }\n\n};\nvar Span = {\n  /**\r\n   * Check if a value implements the `Span` interface.\r\n   */\n  isSpan(value) {\n    return Array.isArray(value) && value.length === 2 && value.every(Path.isPath);\n  }\n\n};\n\nvar _excluded$3 = [\"children\"],\n    _excluded2$2 = [\"text\"];\nvar IS_NODE_LIST_CACHE = new WeakMap();\nvar Node = {\n  /**\r\n   * Get the node at a specific path, asserting that it's an ancestor node.\r\n   */\n  ancestor(root, path) {\n    var node = Node.get(root, path);\n\n    if (Text.isText(node)) {\n      throw new Error(\"Cannot get the ancestor node at path [\".concat(path, \"] because it refers to a text node instead: \").concat(node));\n    }\n\n    return node;\n  },\n\n  /**\r\n   * Return a generator of all the ancestor nodes above a specific path.\r\n   *\r\n   * By default the order is bottom-up, from lowest to highest ancestor in\r\n   * the tree, but you can pass the `reverse: true` option to go top-down.\r\n   */\n  *ancestors(root, path) {\n    var options = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n\n    for (var p of Path.ancestors(path, options)) {\n      var n = Node.ancestor(root, p);\n      var entry = [n, p];\n      yield entry;\n    }\n  },\n\n  /**\r\n   * Get the child of a node at a specific index.\r\n   */\n  child(root, index) {\n    if (Text.isText(root)) {\n      throw new Error(\"Cannot get the child of a text node: \".concat(JSON.stringify(root)));\n    }\n\n    var c = root.children[index];\n\n    if (c == null) {\n      throw new Error(\"Cannot get child at index `\".concat(index, \"` in node: \").concat(JSON.stringify(root)));\n    }\n\n    return c;\n  },\n\n  /**\r\n   * Iterate over the children of a node at a specific path.\r\n   */\n  *children(root, path) {\n    var options = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n    var {\n      reverse = false\n    } = options;\n    var ancestor = Node.ancestor(root, path);\n    var {\n      children\n    } = ancestor;\n    var index = reverse ? children.length - 1 : 0;\n\n    while (reverse ? index >= 0 : index < children.length) {\n      var child = Node.child(ancestor, index);\n      var childPath = path.concat(index);\n      yield [child, childPath];\n      index = reverse ? index - 1 : index + 1;\n    }\n  },\n\n  /**\r\n   * Get an entry for the common ancesetor node of two paths.\r\n   */\n  common(root, path, another) {\n    var p = Path.common(path, another);\n    var n = Node.get(root, p);\n    return [n, p];\n  },\n\n  /**\r\n   * Get the node at a specific path, asserting that it's a descendant node.\r\n   */\n  descendant(root, path) {\n    var node = Node.get(root, path);\n\n    if (Editor.isEditor(node)) {\n      throw new Error(\"Cannot get the descendant node at path [\".concat(path, \"] because it refers to the root editor node instead: \").concat(node));\n    }\n\n    return node;\n  },\n\n  /**\r\n   * Return a generator of all the descendant node entries inside a root node.\r\n   */\n  *descendants(root) {\n    var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n\n    for (var [node, path] of Node.nodes(root, options)) {\n      if (path.length !== 0) {\n        // NOTE: we have to coerce here because checking the path's length does\n        // guarantee that `node` is not a `Editor`, but TypeScript doesn't know.\n        yield [node, path];\n      }\n    }\n  },\n\n  /**\r\n   * Return a generator of all the element nodes inside a root node. Each iteration\r\n   * will return an `ElementEntry` tuple consisting of `[Element, Path]`. If the\r\n   * root node is an element it will be included in the iteration as well.\r\n   */\n  *elements(root) {\n    var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n\n    for (var [node, path] of Node.nodes(root, options)) {\n      if (Element.isElement(node)) {\n        yield [node, path];\n      }\n    }\n  },\n\n  /**\r\n   * Extract props from a Node.\r\n   */\n  extractProps(node) {\n    if (Element.isAncestor(node)) {\n      var properties = _objectWithoutProperties(node, _excluded$3);\n\n      return properties;\n    } else {\n      var properties = _objectWithoutProperties(node, _excluded2$2);\n\n      return properties;\n    }\n  },\n\n  /**\r\n   * Get the first node entry in a root node from a path.\r\n   */\n  first(root, path) {\n    var p = path.slice();\n    var n = Node.get(root, p);\n\n    while (n) {\n      if (Text.isText(n) || n.children.length === 0) {\n        break;\n      } else {\n        n = n.children[0];\n        p.push(0);\n      }\n    }\n\n    return [n, p];\n  },\n\n  /**\r\n   * Get the sliced fragment represented by a range inside a root node.\r\n   */\n  fragment(root, range) {\n    if (Text.isText(root)) {\n      throw new Error(\"Cannot get a fragment starting from a root text node: \".concat(JSON.stringify(root)));\n    }\n\n    var newRoot = produce({\n      children: root.children\n    }, r => {\n      var [start, end] = Range.edges(range);\n      var nodeEntries = Node.nodes(r, {\n        reverse: true,\n        pass: _ref => {\n          var [, path] = _ref;\n          return !Range.includes(range, path);\n        }\n      });\n\n      for (var [, path] of nodeEntries) {\n        if (!Range.includes(range, path)) {\n          var parent = Node.parent(r, path);\n          var index = path[path.length - 1];\n          parent.children.splice(index, 1);\n        }\n\n        if (Path.equals(path, end.path)) {\n          var leaf = Node.leaf(r, path);\n          leaf.text = leaf.text.slice(0, end.offset);\n        }\n\n        if (Path.equals(path, start.path)) {\n          var _leaf = Node.leaf(r, path);\n\n          _leaf.text = _leaf.text.slice(start.offset);\n        }\n      }\n\n      if (Editor.isEditor(r)) {\n        r.selection = null;\n      }\n    });\n    return newRoot.children;\n  },\n\n  /**\r\n   * Get the descendant node referred to by a specific path. If the path is an\r\n   * empty array, it refers to the root node itself.\r\n   */\n  get(root, path) {\n    var node = root;\n\n    for (var i = 0; i < path.length; i++) {\n      var p = path[i];\n\n      if (Text.isText(node) || !node.children[p]) {\n        throw new Error(\"Cannot find a descendant at path [\".concat(path, \"] in node: \").concat(JSON.stringify(root)));\n      }\n\n      node = node.children[p];\n    }\n\n    return node;\n  },\n\n  /**\r\n   * Check if a descendant node exists at a specific path.\r\n   */\n  has(root, path) {\n    var node = root;\n\n    for (var i = 0; i < path.length; i++) {\n      var p = path[i];\n\n      if (Text.isText(node) || !node.children[p]) {\n        return false;\n      }\n\n      node = node.children[p];\n    }\n\n    return true;\n  },\n\n  /**\r\n   * Check if a value implements the `Node` interface.\r\n   */\n  isNode(value) {\n    return Text.isText(value) || Element.isElement(value) || Editor.isEditor(value);\n  },\n\n  /**\r\n   * Check if a value is a list of `Node` objects.\r\n   */\n  isNodeList(value) {\n    if (!Array.isArray(value)) {\n      return false;\n    }\n\n    var cachedResult = IS_NODE_LIST_CACHE.get(value);\n\n    if (cachedResult !== undefined) {\n      return cachedResult;\n    }\n\n    var isNodeList = value.every(val => Node.isNode(val));\n    IS_NODE_LIST_CACHE.set(value, isNodeList);\n    return isNodeList;\n  },\n\n  /**\r\n   * Get the last node entry in a root node from a path.\r\n   */\n  last(root, path) {\n    var p = path.slice();\n    var n = Node.get(root, p);\n\n    while (n) {\n      if (Text.isText(n) || n.children.length === 0) {\n        break;\n      } else {\n        var i = n.children.length - 1;\n        n = n.children[i];\n        p.push(i);\n      }\n    }\n\n    return [n, p];\n  },\n\n  /**\r\n   * Get the node at a specific path, ensuring it's a leaf text node.\r\n   */\n  leaf(root, path) {\n    var node = Node.get(root, path);\n\n    if (!Text.isText(node)) {\n      throw new Error(\"Cannot get the leaf node at path [\".concat(path, \"] because it refers to a non-leaf node: \").concat(node));\n    }\n\n    return node;\n  },\n\n  /**\r\n   * Return a generator of the in a branch of the tree, from a specific path.\r\n   *\r\n   * By default the order is top-down, from lowest to highest node in the tree,\r\n   * but you can pass the `reverse: true` option to go bottom-up.\r\n   */\n  *levels(root, path) {\n    var options = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n\n    for (var p of Path.levels(path, options)) {\n      var n = Node.get(root, p);\n      yield [n, p];\n    }\n  },\n\n  /**\r\n   * Check if a node matches a set of props.\r\n   */\n  matches(node, props) {\n    return Element.isElement(node) && Element.isElementProps(props) && Element.matches(node, props) || Text.isText(node) && Text.isTextProps(props) && Text.matches(node, props);\n  },\n\n  /**\r\n   * Return a generator of all the node entries of a root node. Each entry is\r\n   * returned as a `[Node, Path]` tuple, with the path referring to the node's\r\n   * position inside the root node.\r\n   */\n  *nodes(root) {\n    var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n    var {\n      pass,\n      reverse = false\n    } = options;\n    var {\n      from = [],\n      to\n    } = options;\n    var visited = new Set();\n    var p = [];\n    var n = root;\n\n    while (true) {\n      if (to && (reverse ? Path.isBefore(p, to) : Path.isAfter(p, to))) {\n        break;\n      }\n\n      if (!visited.has(n)) {\n        yield [n, p];\n      } // If we're allowed to go downward and we haven't descended yet, do.\n\n\n      if (!visited.has(n) && !Text.isText(n) && n.children.length !== 0 && (pass == null || pass([n, p]) === false)) {\n        visited.add(n);\n        var nextIndex = reverse ? n.children.length - 1 : 0;\n\n        if (Path.isAncestor(p, from)) {\n          nextIndex = from[p.length];\n        }\n\n        p = p.concat(nextIndex);\n        n = Node.get(root, p);\n        continue;\n      } // If we're at the root and we can't go down, we're done.\n\n\n      if (p.length === 0) {\n        break;\n      } // If we're going forward...\n\n\n      if (!reverse) {\n        var newPath = Path.next(p);\n\n        if (Node.has(root, newPath)) {\n          p = newPath;\n          n = Node.get(root, p);\n          continue;\n        }\n      } // If we're going backward...\n\n\n      if (reverse && p[p.length - 1] !== 0) {\n        var _newPath = Path.previous(p);\n\n        p = _newPath;\n        n = Node.get(root, p);\n        continue;\n      } // Otherwise we're going upward...\n\n\n      p = Path.parent(p);\n      n = Node.get(root, p);\n      visited.add(n);\n    }\n  },\n\n  /**\r\n   * Get the parent of a node at a specific path.\r\n   */\n  parent(root, path) {\n    var parentPath = Path.parent(path);\n    var p = Node.get(root, parentPath);\n\n    if (Text.isText(p)) {\n      throw new Error(\"Cannot get the parent of path [\".concat(path, \"] because it does not exist in the root.\"));\n    }\n\n    return p;\n  },\n\n  /**\r\n   * Get the concatenated text string of a node's content.\r\n   *\r\n   * Note that this will not include spaces or line breaks between block nodes.\r\n   * It is not a user-facing string, but a string for performing offset-related\r\n   * computations for a node.\r\n   */\n  string(node) {\n    if (Text.isText(node)) {\n      return node.text;\n    } else {\n      return node.children.map(Node.string).join('');\n    }\n  },\n\n  /**\r\n   * Return a generator of all leaf text nodes in a root node.\r\n   */\n  *texts(root) {\n    var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n\n    for (var [node, path] of Node.nodes(root, options)) {\n      if (Text.isText(node)) {\n        yield [node, path];\n      }\n    }\n  }\n\n};\n\nfunction ownKeys$7(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) { symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); } keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread$7(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys$7(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys$7(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\nvar Operation = {\n  /**\r\n   * Check of a value is a `NodeOperation` object.\r\n   */\n  isNodeOperation(value) {\n    return Operation.isOperation(value) && value.type.endsWith('_node');\n  },\n\n  /**\r\n   * Check of a value is an `Operation` object.\r\n   */\n  isOperation(value) {\n    if (!isPlainObject(value)) {\n      return false;\n    }\n\n    switch (value.type) {\n      case 'insert_node':\n        return Path.isPath(value.path) && Node.isNode(value.node);\n\n      case 'insert_text':\n        return typeof value.offset === 'number' && typeof value.text === 'string' && Path.isPath(value.path);\n\n      case 'merge_node':\n        return typeof value.position === 'number' && Path.isPath(value.path) && isPlainObject(value.properties);\n\n      case 'move_node':\n        return Path.isPath(value.path) && Path.isPath(value.newPath);\n\n      case 'remove_node':\n        return Path.isPath(value.path) && Node.isNode(value.node);\n\n      case 'remove_text':\n        return typeof value.offset === 'number' && typeof value.text === 'string' && Path.isPath(value.path);\n\n      case 'set_node':\n        return Path.isPath(value.path) && isPlainObject(value.properties) && isPlainObject(value.newProperties);\n\n      case 'set_selection':\n        return value.properties === null && Range.isRange(value.newProperties) || value.newProperties === null && Range.isRange(value.properties) || isPlainObject(value.properties) && isPlainObject(value.newProperties);\n\n      case 'split_node':\n        return Path.isPath(value.path) && typeof value.position === 'number' && isPlainObject(value.properties);\n\n      default:\n        return false;\n    }\n  },\n\n  /**\r\n   * Check if a value is a list of `Operation` objects.\r\n   */\n  isOperationList(value) {\n    return Array.isArray(value) && value.every(val => Operation.isOperation(val));\n  },\n\n  /**\r\n   * Check of a value is a `SelectionOperation` object.\r\n   */\n  isSelectionOperation(value) {\n    return Operation.isOperation(value) && value.type.endsWith('_selection');\n  },\n\n  /**\r\n   * Check of a value is a `TextOperation` object.\r\n   */\n  isTextOperation(value) {\n    return Operation.isOperation(value) && value.type.endsWith('_text');\n  },\n\n  /**\r\n   * Invert an operation, returning a new operation that will exactly undo the\r\n   * original when applied.\r\n   */\n  inverse(op) {\n    switch (op.type) {\n      case 'insert_node':\n        {\n          return _objectSpread$7(_objectSpread$7({}, op), {}, {\n            type: 'remove_node'\n          });\n        }\n\n      case 'insert_text':\n        {\n          return _objectSpread$7(_objectSpread$7({}, op), {}, {\n            type: 'remove_text'\n          });\n        }\n\n      case 'merge_node':\n        {\n          return _objectSpread$7(_objectSpread$7({}, op), {}, {\n            type: 'split_node',\n            path: Path.previous(op.path)\n          });\n        }\n\n      case 'move_node':\n        {\n          var {\n            newPath,\n            path\n          } = op; // PERF: in this case the move operation is a no-op anyways.\n\n          if (Path.equals(newPath, path)) {\n            return op;\n          } // If the move happens completely within a single parent the path and\n          // newPath are stable with respect to each other.\n\n\n          if (Path.isSibling(path, newPath)) {\n            return _objectSpread$7(_objectSpread$7({}, op), {}, {\n              path: newPath,\n              newPath: path\n            });\n          } // If the move does not happen within a single parent it is possible\n          // for the move to impact the true path to the location where the node\n          // was removed from and where it was inserted. We have to adjust for this\n          // and find the original path. We can accomplish this (only in non-sibling)\n          // moves by looking at the impact of the move operation on the node\n          // after the original move path.\n\n\n          var inversePath = Path.transform(path, op);\n          var inverseNewPath = Path.transform(Path.next(path), op);\n          return _objectSpread$7(_objectSpread$7({}, op), {}, {\n            path: inversePath,\n            newPath: inverseNewPath\n          });\n        }\n\n      case 'remove_node':\n        {\n          return _objectSpread$7(_objectSpread$7({}, op), {}, {\n            type: 'insert_node'\n          });\n        }\n\n      case 'remove_text':\n        {\n          return _objectSpread$7(_objectSpread$7({}, op), {}, {\n            type: 'insert_text'\n          });\n        }\n\n      case 'set_node':\n        {\n          var {\n            properties,\n            newProperties\n          } = op;\n          return _objectSpread$7(_objectSpread$7({}, op), {}, {\n            properties: newProperties,\n            newProperties: properties\n          });\n        }\n\n      case 'set_selection':\n        {\n          var {\n            properties: _properties,\n            newProperties: _newProperties\n          } = op;\n\n          if (_properties == null) {\n            return _objectSpread$7(_objectSpread$7({}, op), {}, {\n              properties: _newProperties,\n              newProperties: null\n            });\n          } else if (_newProperties == null) {\n            return _objectSpread$7(_objectSpread$7({}, op), {}, {\n              properties: null,\n              newProperties: _properties\n            });\n          } else {\n            return _objectSpread$7(_objectSpread$7({}, op), {}, {\n              properties: _newProperties,\n              newProperties: _properties\n            });\n          }\n        }\n\n      case 'split_node':\n        {\n          return _objectSpread$7(_objectSpread$7({}, op), {}, {\n            type: 'merge_node',\n            path: Path.next(op.path)\n          });\n        }\n    }\n  }\n\n};\n\nvar Path = {\n  /**\r\n   * Get a list of ancestor paths for a given path.\r\n   *\r\n   * The paths are sorted from deepest to shallowest ancestor. However, if the\r\n   * `reverse: true` option is passed, they are reversed.\r\n   */\n  ancestors(path) {\n    var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n    var {\n      reverse = false\n    } = options;\n    var paths = Path.levels(path, options);\n\n    if (reverse) {\n      paths = paths.slice(1);\n    } else {\n      paths = paths.slice(0, -1);\n    }\n\n    return paths;\n  },\n\n  /**\r\n   * Get the common ancestor path of two paths.\r\n   */\n  common(path, another) {\n    var common = [];\n\n    for (var i = 0; i < path.length && i < another.length; i++) {\n      var av = path[i];\n      var bv = another[i];\n\n      if (av !== bv) {\n        break;\n      }\n\n      common.push(av);\n    }\n\n    return common;\n  },\n\n  /**\r\n   * Compare a path to another, returning an integer indicating whether the path\r\n   * was before, at, or after the other.\r\n   *\r\n   * Note: Two paths of unequal length can still receive a `0` result if one is\r\n   * directly above or below the other. If you want exact matching, use\r\n   * [[Path.equals]] instead.\r\n   */\n  compare(path, another) {\n    var min = Math.min(path.length, another.length);\n\n    for (var i = 0; i < min; i++) {\n      if (path[i] < another[i]) return -1;\n      if (path[i] > another[i]) return 1;\n    }\n\n    return 0;\n  },\n\n  /**\r\n   * Check if a path ends after one of the indexes in another.\r\n   */\n  endsAfter(path, another) {\n    var i = path.length - 1;\n    var as = path.slice(0, i);\n    var bs = another.slice(0, i);\n    var av = path[i];\n    var bv = another[i];\n    return Path.equals(as, bs) && av > bv;\n  },\n\n  /**\r\n   * Check if a path ends at one of the indexes in another.\r\n   */\n  endsAt(path, another) {\n    var i = path.length;\n    var as = path.slice(0, i);\n    var bs = another.slice(0, i);\n    return Path.equals(as, bs);\n  },\n\n  /**\r\n   * Check if a path ends before one of the indexes in another.\r\n   */\n  endsBefore(path, another) {\n    var i = path.length - 1;\n    var as = path.slice(0, i);\n    var bs = another.slice(0, i);\n    var av = path[i];\n    var bv = another[i];\n    return Path.equals(as, bs) && av < bv;\n  },\n\n  /**\r\n   * Check if a path is exactly equal to another.\r\n   */\n  equals(path, another) {\n    return path.length === another.length && path.every((n, i) => n === another[i]);\n  },\n\n  /**\r\n   * Check if the path of previous sibling node exists\r\n   */\n  hasPrevious(path) {\n    return path[path.length - 1] > 0;\n  },\n\n  /**\r\n   * Check if a path is after another.\r\n   */\n  isAfter(path, another) {\n    return Path.compare(path, another) === 1;\n  },\n\n  /**\r\n   * Check if a path is an ancestor of another.\r\n   */\n  isAncestor(path, another) {\n    return path.length < another.length && Path.compare(path, another) === 0;\n  },\n\n  /**\r\n   * Check if a path is before another.\r\n   */\n  isBefore(path, another) {\n    return Path.compare(path, another) === -1;\n  },\n\n  /**\r\n   * Check if a path is a child of another.\r\n   */\n  isChild(path, another) {\n    return path.length === another.length + 1 && Path.compare(path, another) === 0;\n  },\n\n  /**\r\n   * Check if a path is equal to or an ancestor of another.\r\n   */\n  isCommon(path, another) {\n    return path.length <= another.length && Path.compare(path, another) === 0;\n  },\n\n  /**\r\n   * Check if a path is a descendant of another.\r\n   */\n  isDescendant(path, another) {\n    return path.length > another.length && Path.compare(path, another) === 0;\n  },\n\n  /**\r\n   * Check if a path is the parent of another.\r\n   */\n  isParent(path, another) {\n    return path.length + 1 === another.length && Path.compare(path, another) === 0;\n  },\n\n  /**\r\n   * Check is a value implements the `Path` interface.\r\n   */\n  isPath(value) {\n    return Array.isArray(value) && (value.length === 0 || typeof value[0] === 'number');\n  },\n\n  /**\r\n   * Check if a path is a sibling of another.\r\n   */\n  isSibling(path, another) {\n    if (path.length !== another.length) {\n      return false;\n    }\n\n    var as = path.slice(0, -1);\n    var bs = another.slice(0, -1);\n    var al = path[path.length - 1];\n    var bl = another[another.length - 1];\n    return al !== bl && Path.equals(as, bs);\n  },\n\n  /**\r\n   * Get a list of paths at every level down to a path. Note: this is the same\r\n   * as `Path.ancestors`, but including the path itself.\r\n   *\r\n   * The paths are sorted from shallowest to deepest. However, if the `reverse:\r\n   * true` option is passed, they are reversed.\r\n   */\n  levels(path) {\n    var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n    var {\n      reverse = false\n    } = options;\n    var list = [];\n\n    for (var i = 0; i <= path.length; i++) {\n      list.push(path.slice(0, i));\n    }\n\n    if (reverse) {\n      list.reverse();\n    }\n\n    return list;\n  },\n\n  /**\r\n   * Given a path, get the path to the next sibling node.\r\n   */\n  next(path) {\n    if (path.length === 0) {\n      throw new Error(\"Cannot get the next path of a root path [\".concat(path, \"], because it has no next index.\"));\n    }\n\n    var last = path[path.length - 1];\n    return path.slice(0, -1).concat(last + 1);\n  },\n\n  /**\r\n   * Returns whether this operation can affect paths or not. Used as an\r\n   * optimization when updating dirty paths during normalization\r\n   *\r\n   * NOTE: This *must* be kept in sync with the implementation of 'transform'\r\n   * below\r\n   */\n  operationCanTransformPath(operation) {\n    switch (operation.type) {\n      case 'insert_node':\n      case 'remove_node':\n      case 'merge_node':\n      case 'split_node':\n      case 'move_node':\n        return true;\n\n      default:\n        return false;\n    }\n  },\n\n  /**\r\n   * Given a path, return a new path referring to the parent node above it.\r\n   */\n  parent(path) {\n    if (path.length === 0) {\n      throw new Error(\"Cannot get the parent path of the root path [\".concat(path, \"].\"));\n    }\n\n    return path.slice(0, -1);\n  },\n\n  /**\r\n   * Given a path, get the path to the previous sibling node.\r\n   */\n  previous(path) {\n    if (path.length === 0) {\n      throw new Error(\"Cannot get the previous path of a root path [\".concat(path, \"], because it has no previous index.\"));\n    }\n\n    var last = path[path.length - 1];\n\n    if (last <= 0) {\n      throw new Error(\"Cannot get the previous path of a first child path [\".concat(path, \"] because it would result in a negative index.\"));\n    }\n\n    return path.slice(0, -1).concat(last - 1);\n  },\n\n  /**\r\n   * Get a path relative to an ancestor.\r\n   */\n  relative(path, ancestor) {\n    if (!Path.isAncestor(ancestor, path) && !Path.equals(path, ancestor)) {\n      throw new Error(\"Cannot get the relative path of [\".concat(path, \"] inside ancestor [\").concat(ancestor, \"], because it is not above or equal to the path.\"));\n    }\n\n    return path.slice(ancestor.length);\n  },\n\n  /**\r\n   * Transform a path by an operation.\r\n   */\n  transform(path, operation) {\n    var options = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n    return produce(path, p => {\n      var {\n        affinity = 'forward'\n      } = options; // PERF: Exit early if the operation is guaranteed not to have an effect.\n\n      if (!path || (path === null || path === void 0 ? void 0 : path.length) === 0) {\n        return;\n      }\n\n      if (p === null) {\n        return null;\n      }\n\n      switch (operation.type) {\n        case 'insert_node':\n          {\n            var {\n              path: op\n            } = operation;\n\n            if (Path.equals(op, p) || Path.endsBefore(op, p) || Path.isAncestor(op, p)) {\n              p[op.length - 1] += 1;\n            }\n\n            break;\n          }\n\n        case 'remove_node':\n          {\n            var {\n              path: _op\n            } = operation;\n\n            if (Path.equals(_op, p) || Path.isAncestor(_op, p)) {\n              return null;\n            } else if (Path.endsBefore(_op, p)) {\n              p[_op.length - 1] -= 1;\n            }\n\n            break;\n          }\n\n        case 'merge_node':\n          {\n            var {\n              path: _op2,\n              position\n            } = operation;\n\n            if (Path.equals(_op2, p) || Path.endsBefore(_op2, p)) {\n              p[_op2.length - 1] -= 1;\n            } else if (Path.isAncestor(_op2, p)) {\n              p[_op2.length - 1] -= 1;\n              p[_op2.length] += position;\n            }\n\n            break;\n          }\n\n        case 'split_node':\n          {\n            var {\n              path: _op3,\n              position: _position\n            } = operation;\n\n            if (Path.equals(_op3, p)) {\n              if (affinity === 'forward') {\n                p[p.length - 1] += 1;\n              } else if (affinity === 'backward') ; else {\n                return null;\n              }\n            } else if (Path.endsBefore(_op3, p)) {\n              p[_op3.length - 1] += 1;\n            } else if (Path.isAncestor(_op3, p) && path[_op3.length] >= _position) {\n              p[_op3.length - 1] += 1;\n              p[_op3.length] -= _position;\n            }\n\n            break;\n          }\n\n        case 'move_node':\n          {\n            var {\n              path: _op4,\n              newPath: onp\n            } = operation; // If the old and new path are the same, it's a no-op.\n\n            if (Path.equals(_op4, onp)) {\n              return;\n            }\n\n            if (Path.isAncestor(_op4, p) || Path.equals(_op4, p)) {\n              var copy = onp.slice();\n\n              if (Path.endsBefore(_op4, onp) && _op4.length < onp.length) {\n                copy[_op4.length - 1] -= 1;\n              }\n\n              return copy.concat(p.slice(_op4.length));\n            } else if (Path.isSibling(_op4, onp) && (Path.isAncestor(onp, p) || Path.equals(onp, p))) {\n              if (Path.endsBefore(_op4, p)) {\n                p[_op4.length - 1] -= 1;\n              } else {\n                p[_op4.length - 1] += 1;\n              }\n            } else if (Path.endsBefore(onp, p) || Path.equals(onp, p) || Path.isAncestor(onp, p)) {\n              if (Path.endsBefore(_op4, p)) {\n                p[_op4.length - 1] -= 1;\n              }\n\n              p[onp.length - 1] += 1;\n            } else if (Path.endsBefore(_op4, p)) {\n              if (Path.equals(onp, p)) {\n                p[onp.length - 1] += 1;\n              }\n\n              p[_op4.length - 1] -= 1;\n            }\n\n            break;\n          }\n      }\n    });\n  }\n\n};\n\nvar PathRef = {\n  /**\r\n   * Transform the path ref's current value by an operation.\r\n   */\n  transform(ref, op) {\n    var {\n      current,\n      affinity\n    } = ref;\n\n    if (current == null) {\n      return;\n    }\n\n    var path = Path.transform(current, op, {\n      affinity\n    });\n    ref.current = path;\n\n    if (path == null) {\n      ref.unref();\n    }\n  }\n\n};\n\nfunction ownKeys$6(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) { symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); } keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread$6(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys$6(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys$6(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\nvar Point = {\n  /**\r\n   * Compare a point to another, returning an integer indicating whether the\r\n   * point was before, at, or after the other.\r\n   */\n  compare(point, another) {\n    var result = Path.compare(point.path, another.path);\n\n    if (result === 0) {\n      if (point.offset < another.offset) return -1;\n      if (point.offset > another.offset) return 1;\n      return 0;\n    }\n\n    return result;\n  },\n\n  /**\r\n   * Check if a point is after another.\r\n   */\n  isAfter(point, another) {\n    return Point.compare(point, another) === 1;\n  },\n\n  /**\r\n   * Check if a point is before another.\r\n   */\n  isBefore(point, another) {\n    return Point.compare(point, another) === -1;\n  },\n\n  /**\r\n   * Check if a point is exactly equal to another.\r\n   */\n  equals(point, another) {\n    // PERF: ensure the offsets are equal first since they are cheaper to check.\n    return point.offset === another.offset && Path.equals(point.path, another.path);\n  },\n\n  /**\r\n   * Check if a value implements the `Point` interface.\r\n   */\n  isPoint(value) {\n    return isPlainObject(value) && typeof value.offset === 'number' && Path.isPath(value.path);\n  },\n\n  /**\r\n   * Transform a point by an operation.\r\n   */\n  transform(point, op) {\n    var options = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n    return produce(point, p => {\n      if (p === null) {\n        return null;\n      }\n\n      var {\n        affinity = 'forward'\n      } = options;\n      var {\n        path,\n        offset\n      } = p;\n\n      switch (op.type) {\n        case 'insert_node':\n        case 'move_node':\n          {\n            p.path = Path.transform(path, op, options);\n            break;\n          }\n\n        case 'insert_text':\n          {\n            if (Path.equals(op.path, path) && op.offset <= offset) {\n              p.offset += op.text.length;\n            }\n\n            break;\n          }\n\n        case 'merge_node':\n          {\n            if (Path.equals(op.path, path)) {\n              p.offset += op.position;\n            }\n\n            p.path = Path.transform(path, op, options);\n            break;\n          }\n\n        case 'remove_text':\n          {\n            if (Path.equals(op.path, path) && op.offset <= offset) {\n              p.offset -= Math.min(offset - op.offset, op.text.length);\n            }\n\n            break;\n          }\n\n        case 'remove_node':\n          {\n            if (Path.equals(op.path, path) || Path.isAncestor(op.path, path)) {\n              return null;\n            }\n\n            p.path = Path.transform(path, op, options);\n            break;\n          }\n\n        case 'split_node':\n          {\n            if (Path.equals(op.path, path)) {\n              if (op.position === offset && affinity == null) {\n                return null;\n              } else if (op.position < offset || op.position === offset && affinity === 'forward') {\n                p.offset -= op.position;\n                p.path = Path.transform(path, op, _objectSpread$6(_objectSpread$6({}, options), {}, {\n                  affinity: 'forward'\n                }));\n              }\n            } else {\n              p.path = Path.transform(path, op, options);\n            }\n\n            break;\n          }\n      }\n    });\n  }\n\n};\n\nvar PointRef = {\n  /**\r\n   * Transform the point ref's current value by an operation.\r\n   */\n  transform(ref, op) {\n    var {\n      current,\n      affinity\n    } = ref;\n\n    if (current == null) {\n      return;\n    }\n\n    var point = Point.transform(current, op, {\n      affinity\n    });\n    ref.current = point;\n\n    if (point == null) {\n      ref.unref();\n    }\n  }\n\n};\n\nvar _excluded$2 = [\"anchor\", \"focus\"];\n\nfunction ownKeys$5(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) { symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); } keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread$5(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys$5(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys$5(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\nvar Range = {\n  /**\r\n   * Get the start and end points of a range, in the order in which they appear\r\n   * in the document.\r\n   */\n  edges(range) {\n    var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n    var {\n      reverse = false\n    } = options;\n    var {\n      anchor,\n      focus\n    } = range;\n    return Range.isBackward(range) === reverse ? [anchor, focus] : [focus, anchor];\n  },\n\n  /**\r\n   * Get the end point of a range.\r\n   */\n  end(range) {\n    var [, end] = Range.edges(range);\n    return end;\n  },\n\n  /**\r\n   * Check if a range is exactly equal to another.\r\n   */\n  equals(range, another) {\n    return Point.equals(range.anchor, another.anchor) && Point.equals(range.focus, another.focus);\n  },\n\n  /**\r\n   * Check if a range includes a path, a point or part of another range.\r\n   */\n  includes(range, target) {\n    if (Range.isRange(target)) {\n      if (Range.includes(range, target.anchor) || Range.includes(range, target.focus)) {\n        return true;\n      }\n\n      var [rs, re] = Range.edges(range);\n      var [ts, te] = Range.edges(target);\n      return Point.isBefore(rs, ts) && Point.isAfter(re, te);\n    }\n\n    var [start, end] = Range.edges(range);\n    var isAfterStart = false;\n    var isBeforeEnd = false;\n\n    if (Point.isPoint(target)) {\n      isAfterStart = Point.compare(target, start) >= 0;\n      isBeforeEnd = Point.compare(target, end) <= 0;\n    } else {\n      isAfterStart = Path.compare(target, start.path) >= 0;\n      isBeforeEnd = Path.compare(target, end.path) <= 0;\n    }\n\n    return isAfterStart && isBeforeEnd;\n  },\n\n  /**\r\n   * Get the intersection of a range with another.\r\n   */\n  intersection(range, another) {\n    var rest = _objectWithoutProperties(range, _excluded$2);\n\n    var [s1, e1] = Range.edges(range);\n    var [s2, e2] = Range.edges(another);\n    var start = Point.isBefore(s1, s2) ? s2 : s1;\n    var end = Point.isBefore(e1, e2) ? e1 : e2;\n\n    if (Point.isBefore(end, start)) {\n      return null;\n    } else {\n      return _objectSpread$5({\n        anchor: start,\n        focus: end\n      }, rest);\n    }\n  },\n\n  /**\r\n   * Check if a range is backward, meaning that its anchor point appears in the\r\n   * document _after_ its focus point.\r\n   */\n  isBackward(range) {\n    var {\n      anchor,\n      focus\n    } = range;\n    return Point.isAfter(anchor, focus);\n  },\n\n  /**\r\n   * Check if a range is collapsed, meaning that both its anchor and focus\r\n   * points refer to the exact same position in the document.\r\n   */\n  isCollapsed(range) {\n    var {\n      anchor,\n      focus\n    } = range;\n    return Point.equals(anchor, focus);\n  },\n\n  /**\r\n   * Check if a range is expanded.\r\n   *\r\n   * This is the opposite of [[Range.isCollapsed]] and is provided for legibility.\r\n   */\n  isExpanded(range) {\n    return !Range.isCollapsed(range);\n  },\n\n  /**\r\n   * Check if a range is forward.\r\n   *\r\n   * This is the opposite of [[Range.isBackward]] and is provided for legibility.\r\n   */\n  isForward(range) {\n    return !Range.isBackward(range);\n  },\n\n  /**\r\n   * Check if a value implements the [[Range]] interface.\r\n   */\n  isRange(value) {\n    return isPlainObject(value) && Point.isPoint(value.anchor) && Point.isPoint(value.focus);\n  },\n\n  /**\r\n   * Iterate through all of the point entries in a range.\r\n   */\n  *points(range) {\n    yield [range.anchor, 'anchor'];\n    yield [range.focus, 'focus'];\n  },\n\n  /**\r\n   * Get the start point of a range.\r\n   */\n  start(range) {\n    var [start] = Range.edges(range);\n    return start;\n  },\n\n  /**\r\n   * Transform a range by an operation.\r\n   */\n  transform(range, op) {\n    var options = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n    return produce(range, r => {\n      if (r === null) {\n        return null;\n      }\n\n      var {\n        affinity = 'inward'\n      } = options;\n      var affinityAnchor;\n      var affinityFocus;\n\n      if (affinity === 'inward') {\n        // If the range is collapsed, make sure to use the same affinity to\n        // avoid the two points passing each other and expanding in the opposite\n        // direction\n        var isCollapsed = Range.isCollapsed(r);\n\n        if (Range.isForward(r)) {\n          affinityAnchor = 'forward';\n          affinityFocus = isCollapsed ? affinityAnchor : 'backward';\n        } else {\n          affinityAnchor = 'backward';\n          affinityFocus = isCollapsed ? affinityAnchor : 'forward';\n        }\n      } else if (affinity === 'outward') {\n        if (Range.isForward(r)) {\n          affinityAnchor = 'backward';\n          affinityFocus = 'forward';\n        } else {\n          affinityAnchor = 'forward';\n          affinityFocus = 'backward';\n        }\n      } else {\n        affinityAnchor = affinity;\n        affinityFocus = affinity;\n      }\n\n      var anchor = Point.transform(r.anchor, op, {\n        affinity: affinityAnchor\n      });\n      var focus = Point.transform(r.focus, op, {\n        affinity: affinityFocus\n      });\n\n      if (!anchor || !focus) {\n        return null;\n      }\n\n      r.anchor = anchor;\n      r.focus = focus;\n    });\n  }\n\n};\n\nvar RangeRef = {\n  /**\r\n   * Transform the range ref's current value by an operation.\r\n   */\n  transform(ref, op) {\n    var {\n      current,\n      affinity\n    } = ref;\n\n    if (current == null) {\n      return;\n    }\n\n    var path = Range.transform(current, op, {\n      affinity\n    });\n    ref.current = path;\n\n    if (path == null) {\n      ref.unref();\n    }\n  }\n\n};\n\n/*\r\n  Custom deep equal comparison for Slate nodes.\r\n\n  We don't need general purpose deep equality;\r\n  Slate only supports plain values, Arrays, and nested objects.\r\n  Complex values nested inside Arrays are not supported.\r\n\n  Slate objects are designed to be serialised, so\r\n  missing keys are deliberately normalised to undefined.\r\n */\n\nvar isDeepEqual = (node, another) => {\n  for (var key in node) {\n    var a = node[key];\n    var b = another[key];\n\n    if (isPlainObject(a) && isPlainObject(b)) {\n      if (!isDeepEqual(a, b)) return false;\n    } else if (Array.isArray(a) && Array.isArray(b)) {\n      if (a.length !== b.length) return false;\n\n      for (var i = 0; i < a.length; i++) {\n        if (a[i] !== b[i]) return false;\n      }\n    } else if (a !== b) {\n      return false;\n    }\n  }\n  /*\r\n    Deep object equality is only necessary in one direction; in the reverse direction\r\n    we are only looking for keys that are missing.\r\n    As above, undefined keys are normalised to missing.\r\n  */\n\n\n  for (var _key in another) {\n    if (node[_key] === undefined && another[_key] !== undefined) {\n      return false;\n    }\n  }\n\n  return true;\n};\n\nvar _excluded$1 = [\"text\"],\n    _excluded2$1 = [\"anchor\", \"focus\"];\n\nfunction ownKeys$4(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) { symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); } keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread$4(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys$4(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys$4(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\nvar Text = {\n  /**\r\n   * Check if two text nodes are equal.\r\n   *\r\n   * When loose is set, the text is not compared. This is\r\n   * used to check whether sibling text nodes can be merged.\r\n   */\n  equals(text, another) {\n    var options = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n    var {\n      loose = false\n    } = options;\n\n    function omitText(obj) {\n      var rest = _objectWithoutProperties(obj, _excluded$1);\n\n      return rest;\n    }\n\n    return isDeepEqual(loose ? omitText(text) : text, loose ? omitText(another) : another);\n  },\n\n  /**\r\n   * Check if a value implements the `Text` interface.\r\n   */\n  isText(value) {\n    return isPlainObject(value) && typeof value.text === 'string';\n  },\n\n  /**\r\n   * Check if a value is a list of `Text` objects.\r\n   */\n  isTextList(value) {\n    return Array.isArray(value) && value.every(val => Text.isText(val));\n  },\n\n  /**\r\n   * Check if some props are a partial of Text.\r\n   */\n  isTextProps(props) {\n    return props.text !== undefined;\n  },\n\n  /**\r\n   * Check if an text matches set of properties.\r\n   *\r\n   * Note: this is for matching custom properties, and it does not ensure that\r\n   * the `text` property are two nodes equal.\r\n   */\n  matches(text, props) {\n    for (var key in props) {\n      if (key === 'text') {\n        continue;\n      }\n\n      if (!text.hasOwnProperty(key) || text[key] !== props[key]) {\n        return false;\n      }\n    }\n\n    return true;\n  },\n\n  /**\r\n   * Get the leaves for a text node given decorations.\r\n   */\n  decorations(node, decorations) {\n    var leaves = [_objectSpread$4({}, node)];\n\n    for (var dec of decorations) {\n      var rest = _objectWithoutProperties(dec, _excluded2$1);\n\n      var [start, end] = Range.edges(dec);\n      var next = [];\n      var o = 0;\n\n      for (var leaf of leaves) {\n        var {\n          length\n        } = leaf.text;\n        var offset = o;\n        o += length; // If the range encompases the entire leaf, add the range.\n\n        if (start.offset <= offset && end.offset >= o) {\n          Object.assign(leaf, rest);\n          next.push(leaf);\n          continue;\n        } // If the range expanded and match the leaf, or starts after, or ends before it, continue.\n\n\n        if (start.offset !== end.offset && (start.offset === o || end.offset === offset) || start.offset > o || end.offset < offset || end.offset === offset && offset !== 0) {\n          next.push(leaf);\n          continue;\n        } // Otherwise we need to split the leaf, at the start, end, or both,\n        // and add the range to the middle intersecting section. Do the end\n        // split first since we don't need to update the offset that way.\n\n\n        var middle = leaf;\n        var before = void 0;\n        var after = void 0;\n\n        if (end.offset < o) {\n          var off = end.offset - offset;\n          after = _objectSpread$4(_objectSpread$4({}, middle), {}, {\n            text: middle.text.slice(off)\n          });\n          middle = _objectSpread$4(_objectSpread$4({}, middle), {}, {\n            text: middle.text.slice(0, off)\n          });\n        }\n\n        if (start.offset > offset) {\n          var _off = start.offset - offset;\n\n          before = _objectSpread$4(_objectSpread$4({}, middle), {}, {\n            text: middle.text.slice(0, _off)\n          });\n          middle = _objectSpread$4(_objectSpread$4({}, middle), {}, {\n            text: middle.text.slice(_off)\n          });\n        }\n\n        Object.assign(middle, rest);\n\n        if (before) {\n          next.push(before);\n        }\n\n        next.push(middle);\n\n        if (after) {\n          next.push(after);\n        }\n      }\n\n      leaves = next;\n    }\n\n    return leaves;\n  }\n\n};\n\nfunction ownKeys$3(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) { symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); } keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread$3(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys$3(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys$3(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nvar applyToDraft = (editor, selection, op) => {\n  switch (op.type) {\n    case 'insert_node':\n      {\n        var {\n          path,\n          node\n        } = op;\n        var parent = Node.parent(editor, path);\n        var index = path[path.length - 1];\n\n        if (index > parent.children.length) {\n          throw new Error(\"Cannot apply an \\\"insert_node\\\" operation at path [\".concat(path, \"] because the destination is past the end of the node.\"));\n        }\n\n        parent.children.splice(index, 0, node);\n\n        if (selection) {\n          for (var [point, key] of Range.points(selection)) {\n            selection[key] = Point.transform(point, op);\n          }\n        }\n\n        break;\n      }\n\n    case 'insert_text':\n      {\n        var {\n          path: _path,\n          offset,\n          text\n        } = op;\n        if (text.length === 0) break;\n\n        var _node = Node.leaf(editor, _path);\n\n        var before = _node.text.slice(0, offset);\n\n        var after = _node.text.slice(offset);\n\n        _node.text = before + text + after;\n\n        if (selection) {\n          for (var [_point, _key] of Range.points(selection)) {\n            selection[_key] = Point.transform(_point, op);\n          }\n        }\n\n        break;\n      }\n\n    case 'merge_node':\n      {\n        var {\n          path: _path2\n        } = op;\n\n        var _node2 = Node.get(editor, _path2);\n\n        var prevPath = Path.previous(_path2);\n        var prev = Node.get(editor, prevPath);\n\n        var _parent = Node.parent(editor, _path2);\n\n        var _index = _path2[_path2.length - 1];\n\n        if (Text.isText(_node2) && Text.isText(prev)) {\n          prev.text += _node2.text;\n        } else if (!Text.isText(_node2) && !Text.isText(prev)) {\n          prev.children.push(..._node2.children);\n        } else {\n          throw new Error(\"Cannot apply a \\\"merge_node\\\" operation at path [\".concat(_path2, \"] to nodes of different interfaces: \").concat(_node2, \" \").concat(prev));\n        }\n\n        _parent.children.splice(_index, 1);\n\n        if (selection) {\n          for (var [_point2, _key2] of Range.points(selection)) {\n            selection[_key2] = Point.transform(_point2, op);\n          }\n        }\n\n        break;\n      }\n\n    case 'move_node':\n      {\n        var {\n          path: _path3,\n          newPath\n        } = op;\n\n        if (Path.isAncestor(_path3, newPath)) {\n          throw new Error(\"Cannot move a path [\".concat(_path3, \"] to new path [\").concat(newPath, \"] because the destination is inside itself.\"));\n        }\n\n        var _node3 = Node.get(editor, _path3);\n\n        var _parent2 = Node.parent(editor, _path3);\n\n        var _index2 = _path3[_path3.length - 1]; // This is tricky, but since the `path` and `newPath` both refer to\n        // the same snapshot in time, there's a mismatch. After either\n        // removing the original position, the second step's path can be out\n        // of date. So instead of using the `op.newPath` directly, we\n        // transform `op.path` to ascertain what the `newPath` would be after\n        // the operation was applied.\n\n        _parent2.children.splice(_index2, 1);\n\n        var truePath = Path.transform(_path3, op);\n        var newParent = Node.get(editor, Path.parent(truePath));\n        var newIndex = truePath[truePath.length - 1];\n        newParent.children.splice(newIndex, 0, _node3);\n\n        if (selection) {\n          for (var [_point3, _key3] of Range.points(selection)) {\n            selection[_key3] = Point.transform(_point3, op);\n          }\n        }\n\n        break;\n      }\n\n    case 'remove_node':\n      {\n        var {\n          path: _path4\n        } = op;\n        var _index3 = _path4[_path4.length - 1];\n\n        var _parent3 = Node.parent(editor, _path4);\n\n        _parent3.children.splice(_index3, 1); // Transform all of the points in the value, but if the point was in the\n        // node that was removed we need to update the range or remove it.\n\n\n        if (selection) {\n          for (var [_point4, _key4] of Range.points(selection)) {\n            var result = Point.transform(_point4, op);\n\n            if (selection != null && result != null) {\n              selection[_key4] = result;\n            } else {\n              var _prev = void 0;\n\n              var next = void 0;\n\n              for (var [n, p] of Node.texts(editor)) {\n                if (Path.compare(p, _path4) === -1) {\n                  _prev = [n, p];\n                } else {\n                  next = [n, p];\n                  break;\n                }\n              }\n\n              var preferNext = false;\n\n              if (_prev && next) {\n                if (Path.equals(next[1], _path4)) {\n                  preferNext = !Path.hasPrevious(next[1]);\n                } else {\n                  preferNext = Path.common(_prev[1], _path4).length < Path.common(next[1], _path4).length;\n                }\n              }\n\n              if (_prev && !preferNext) {\n                _point4.path = _prev[1];\n                _point4.offset = _prev[0].text.length;\n              } else if (next) {\n                _point4.path = next[1];\n                _point4.offset = 0;\n              } else {\n                selection = null;\n              }\n            }\n          }\n        }\n\n        break;\n      }\n\n    case 'remove_text':\n      {\n        var {\n          path: _path5,\n          offset: _offset,\n          text: _text\n        } = op;\n        if (_text.length === 0) break;\n\n        var _node4 = Node.leaf(editor, _path5);\n\n        var _before = _node4.text.slice(0, _offset);\n\n        var _after = _node4.text.slice(_offset + _text.length);\n\n        _node4.text = _before + _after;\n\n        if (selection) {\n          for (var [_point5, _key5] of Range.points(selection)) {\n            selection[_key5] = Point.transform(_point5, op);\n          }\n        }\n\n        break;\n      }\n\n    case 'set_node':\n      {\n        var {\n          path: _path6,\n          properties,\n          newProperties\n        } = op;\n\n        if (_path6.length === 0) {\n          throw new Error(\"Cannot set properties on the root node!\");\n        }\n\n        var _node5 = Node.get(editor, _path6);\n\n        for (var _key6 in newProperties) {\n          if (_key6 === 'children' || _key6 === 'text') {\n            throw new Error(\"Cannot set the \\\"\".concat(_key6, \"\\\" property of nodes!\"));\n          }\n\n          var value = newProperties[_key6];\n\n          if (value == null) {\n            delete _node5[_key6];\n          } else {\n            _node5[_key6] = value;\n          }\n        } // properties that were previously defined, but are now missing, must be deleted\n\n\n        for (var _key7 in properties) {\n          if (!newProperties.hasOwnProperty(_key7)) {\n            delete _node5[_key7];\n          }\n        }\n\n        break;\n      }\n\n    case 'set_selection':\n      {\n        var {\n          newProperties: _newProperties\n        } = op;\n\n        if (_newProperties == null) {\n          selection = _newProperties;\n        } else {\n          if (selection == null) {\n            if (!Range.isRange(_newProperties)) {\n              throw new Error(\"Cannot apply an incomplete \\\"set_selection\\\" operation properties \".concat(JSON.stringify(_newProperties), \" when there is no current selection.\"));\n            }\n\n            selection = _objectSpread$3({}, _newProperties);\n          }\n\n          for (var _key8 in _newProperties) {\n            var _value = _newProperties[_key8];\n\n            if (_value == null) {\n              if (_key8 === 'anchor' || _key8 === 'focus') {\n                throw new Error(\"Cannot remove the \\\"\".concat(_key8, \"\\\" selection property\"));\n              }\n\n              delete selection[_key8];\n            } else {\n              selection[_key8] = _value;\n            }\n          }\n        }\n\n        break;\n      }\n\n    case 'split_node':\n      {\n        var {\n          path: _path7,\n          position,\n          properties: _properties\n        } = op;\n\n        if (_path7.length === 0) {\n          throw new Error(\"Cannot apply a \\\"split_node\\\" operation at path [\".concat(_path7, \"] because the root node cannot be split.\"));\n        }\n\n        var _node6 = Node.get(editor, _path7);\n\n        var _parent4 = Node.parent(editor, _path7);\n\n        var _index4 = _path7[_path7.length - 1];\n        var newNode;\n\n        if (Text.isText(_node6)) {\n          var _before2 = _node6.text.slice(0, position);\n\n          var _after2 = _node6.text.slice(position);\n\n          _node6.text = _before2;\n          newNode = _objectSpread$3(_objectSpread$3({}, _properties), {}, {\n            text: _after2\n          });\n        } else {\n          var _before3 = _node6.children.slice(0, position);\n\n          var _after3 = _node6.children.slice(position);\n\n          _node6.children = _before3;\n          newNode = _objectSpread$3(_objectSpread$3({}, _properties), {}, {\n            children: _after3\n          });\n        }\n\n        _parent4.children.splice(_index4 + 1, 0, newNode);\n\n        if (selection) {\n          for (var [_point6, _key9] of Range.points(selection)) {\n            selection[_key9] = Point.transform(_point6, op);\n          }\n        }\n\n        break;\n      }\n  }\n\n  return selection;\n};\n\nvar GeneralTransforms = {\n  /**\r\n   * Transform the editor by an operation.\r\n   */\n  transform(editor, op) {\n    editor.children = createDraft(editor.children);\n    var selection = editor.selection && createDraft(editor.selection);\n\n    try {\n      selection = applyToDraft(editor, selection, op);\n    } finally {\n      editor.children = finishDraft(editor.children);\n\n      if (selection) {\n        editor.selection = isDraft(selection) ? finishDraft(selection) : selection;\n      } else {\n        editor.selection = null;\n      }\n    }\n  }\n\n};\n\nvar _excluded = [\"text\"],\n    _excluded2 = [\"children\"];\n\nfunction ownKeys$2(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) { symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); } keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread$2(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys$2(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys$2(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\nvar NodeTransforms = {\n  /**\r\n   * Insert nodes at a specific location in the Editor.\r\n   */\n  insertNodes(editor, nodes) {\n    var options = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n    Editor.withoutNormalizing(editor, () => {\n      var {\n        hanging = false,\n        voids = false,\n        mode = 'lowest'\n      } = options;\n      var {\n        at,\n        match,\n        select\n      } = options;\n\n      if (Node.isNode(nodes)) {\n        nodes = [nodes];\n      }\n\n      if (nodes.length === 0) {\n        return;\n      }\n\n      var [node] = nodes; // By default, use the selection as the target location. But if there is\n      // no selection, insert at the end of the document since that is such a\n      // common use case when inserting from a non-selected state.\n\n      if (!at) {\n        if (editor.selection) {\n          at = editor.selection;\n        } else if (editor.children.length > 0) {\n          at = Editor.end(editor, []);\n        } else {\n          at = [0];\n        }\n\n        select = true;\n      }\n\n      if (select == null) {\n        select = false;\n      }\n\n      if (Range.isRange(at)) {\n        if (!hanging) {\n          at = Editor.unhangRange(editor, at);\n        }\n\n        if (Range.isCollapsed(at)) {\n          at = at.anchor;\n        } else {\n          var [, end] = Range.edges(at);\n          var pointRef = Editor.pointRef(editor, end);\n          Transforms.delete(editor, {\n            at\n          });\n          at = pointRef.unref();\n        }\n      }\n\n      if (Point.isPoint(at)) {\n        if (match == null) {\n          if (Text.isText(node)) {\n            match = n => Text.isText(n);\n          } else if (editor.isInline(node)) {\n            match = n => Text.isText(n) || Editor.isInline(editor, n);\n          } else {\n            match = n => Editor.isBlock(editor, n);\n          }\n        }\n\n        var [entry] = Editor.nodes(editor, {\n          at: at.path,\n          match,\n          mode,\n          voids\n        });\n\n        if (entry) {\n          var [, _matchPath] = entry;\n          var pathRef = Editor.pathRef(editor, _matchPath);\n          var isAtEnd = Editor.isEnd(editor, at, _matchPath);\n          Transforms.splitNodes(editor, {\n            at,\n            match,\n            mode,\n            voids\n          });\n          var path = pathRef.unref();\n          at = isAtEnd ? Path.next(path) : path;\n        } else {\n          return;\n        }\n      }\n\n      var parentPath = Path.parent(at);\n      var index = at[at.length - 1];\n\n      if (!voids && Editor.void(editor, {\n        at: parentPath\n      })) {\n        return;\n      }\n\n      for (var _node of nodes) {\n        var _path = parentPath.concat(index);\n\n        index++;\n        editor.apply({\n          type: 'insert_node',\n          path: _path,\n          node: _node\n        });\n        at = Path.next(at);\n      }\n\n      at = Path.previous(at);\n\n      if (select) {\n        var point = Editor.end(editor, at);\n\n        if (point) {\n          Transforms.select(editor, point);\n        }\n      }\n    });\n  },\n\n  /**\r\n   * Lift nodes at a specific location upwards in the document tree, splitting\r\n   * their parent in two if necessary.\r\n   */\n  liftNodes(editor) {\n    var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n    Editor.withoutNormalizing(editor, () => {\n      var {\n        at = editor.selection,\n        mode = 'lowest',\n        voids = false\n      } = options;\n      var {\n        match\n      } = options;\n\n      if (match == null) {\n        match = Path.isPath(at) ? matchPath(editor, at) : n => Editor.isBlock(editor, n);\n      }\n\n      if (!at) {\n        return;\n      }\n\n      var matches = Editor.nodes(editor, {\n        at,\n        match,\n        mode,\n        voids\n      });\n      var pathRefs = Array.from(matches, _ref => {\n        var [, p] = _ref;\n        return Editor.pathRef(editor, p);\n      });\n\n      for (var pathRef of pathRefs) {\n        var path = pathRef.unref();\n\n        if (path.length < 2) {\n          throw new Error(\"Cannot lift node at a path [\".concat(path, \"] because it has a depth of less than `2`.\"));\n        }\n\n        var parentNodeEntry = Editor.node(editor, Path.parent(path));\n        var [parent, parentPath] = parentNodeEntry;\n        var index = path[path.length - 1];\n        var {\n          length\n        } = parent.children;\n\n        if (length === 1) {\n          var toPath = Path.next(parentPath);\n          Transforms.moveNodes(editor, {\n            at: path,\n            to: toPath,\n            voids\n          });\n          Transforms.removeNodes(editor, {\n            at: parentPath,\n            voids\n          });\n        } else if (index === 0) {\n          Transforms.moveNodes(editor, {\n            at: path,\n            to: parentPath,\n            voids\n          });\n        } else if (index === length - 1) {\n          var _toPath = Path.next(parentPath);\n\n          Transforms.moveNodes(editor, {\n            at: path,\n            to: _toPath,\n            voids\n          });\n        } else {\n          var splitPath = Path.next(path);\n\n          var _toPath2 = Path.next(parentPath);\n\n          Transforms.splitNodes(editor, {\n            at: splitPath,\n            voids\n          });\n          Transforms.moveNodes(editor, {\n            at: path,\n            to: _toPath2,\n            voids\n          });\n        }\n      }\n    });\n  },\n\n  /**\r\n   * Merge a node at a location with the previous node of the same depth,\r\n   * removing any empty containing nodes after the merge if necessary.\r\n   */\n  mergeNodes(editor) {\n    var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n    Editor.withoutNormalizing(editor, () => {\n      var {\n        match,\n        at = editor.selection\n      } = options;\n      var {\n        hanging = false,\n        voids = false,\n        mode = 'lowest'\n      } = options;\n\n      if (!at) {\n        return;\n      }\n\n      if (match == null) {\n        if (Path.isPath(at)) {\n          var [parent] = Editor.parent(editor, at);\n\n          match = n => parent.children.includes(n);\n        } else {\n          match = n => Editor.isBlock(editor, n);\n        }\n      }\n\n      if (!hanging && Range.isRange(at)) {\n        at = Editor.unhangRange(editor, at);\n      }\n\n      if (Range.isRange(at)) {\n        if (Range.isCollapsed(at)) {\n          at = at.anchor;\n        } else {\n          var [, end] = Range.edges(at);\n          var pointRef = Editor.pointRef(editor, end);\n          Transforms.delete(editor, {\n            at\n          });\n          at = pointRef.unref();\n\n          if (options.at == null) {\n            Transforms.select(editor, at);\n          }\n        }\n      }\n\n      var [current] = Editor.nodes(editor, {\n        at,\n        match,\n        voids,\n        mode\n      });\n      var prev = Editor.previous(editor, {\n        at,\n        match,\n        voids,\n        mode\n      });\n\n      if (!current || !prev) {\n        return;\n      }\n\n      var [node, path] = current;\n      var [prevNode, prevPath] = prev;\n\n      if (path.length === 0 || prevPath.length === 0) {\n        return;\n      }\n\n      var newPath = Path.next(prevPath);\n      var commonPath = Path.common(path, prevPath);\n      var isPreviousSibling = Path.isSibling(path, prevPath);\n      var levels = Array.from(Editor.levels(editor, {\n        at: path\n      }), _ref2 => {\n        var [n] = _ref2;\n        return n;\n      }).slice(commonPath.length).slice(0, -1); // Determine if the merge will leave an ancestor of the path empty as a\n      // result, in which case we'll want to remove it after merging.\n\n      var emptyAncestor = Editor.above(editor, {\n        at: path,\n        mode: 'highest',\n        match: n => levels.includes(n) && hasSingleChildNest(editor, n)\n      });\n      var emptyRef = emptyAncestor && Editor.pathRef(editor, emptyAncestor[1]);\n      var properties;\n      var position; // Ensure that the nodes are equivalent, and figure out what the position\n      // and extra properties of the merge will be.\n\n      if (Text.isText(node) && Text.isText(prevNode)) {\n        var rest = _objectWithoutProperties(node, _excluded);\n\n        position = prevNode.text.length;\n        properties = rest;\n      } else if (Element.isElement(node) && Element.isElement(prevNode)) {\n        var rest = _objectWithoutProperties(node, _excluded2);\n\n        position = prevNode.children.length;\n        properties = rest;\n      } else {\n        throw new Error(\"Cannot merge the node at path [\".concat(path, \"] with the previous sibling because it is not the same kind: \").concat(JSON.stringify(node), \" \").concat(JSON.stringify(prevNode)));\n      } // If the node isn't already the next sibling of the previous node, move\n      // it so that it is before merging.\n\n\n      if (!isPreviousSibling) {\n        Transforms.moveNodes(editor, {\n          at: path,\n          to: newPath,\n          voids\n        });\n      } // If there was going to be an empty ancestor of the node that was merged,\n      // we remove it from the tree.\n\n\n      if (emptyRef) {\n        Transforms.removeNodes(editor, {\n          at: emptyRef.current,\n          voids\n        });\n      } // If the target node that we're merging with is empty, remove it instead\n      // of merging the two. This is a common rich text editor behavior to\n      // prevent losing formatting when deleting entire nodes when you have a\n      // hanging selection.\n      // if prevNode is first child in parent,don't remove it.\n\n\n      if (Element.isElement(prevNode) && Editor.isEmpty(editor, prevNode) || Text.isText(prevNode) && prevNode.text === '' && prevPath[prevPath.length - 1] !== 0) {\n        Transforms.removeNodes(editor, {\n          at: prevPath,\n          voids\n        });\n      } else {\n        editor.apply({\n          type: 'merge_node',\n          path: newPath,\n          position,\n          properties\n        });\n      }\n\n      if (emptyRef) {\n        emptyRef.unref();\n      }\n    });\n  },\n\n  /**\r\n   * Move the nodes at a location to a new location.\r\n   */\n  moveNodes(editor, options) {\n    Editor.withoutNormalizing(editor, () => {\n      var {\n        to,\n        at = editor.selection,\n        mode = 'lowest',\n        voids = false\n      } = options;\n      var {\n        match\n      } = options;\n\n      if (!at) {\n        return;\n      }\n\n      if (match == null) {\n        match = Path.isPath(at) ? matchPath(editor, at) : n => Editor.isBlock(editor, n);\n      }\n\n      var toRef = Editor.pathRef(editor, to);\n      var targets = Editor.nodes(editor, {\n        at,\n        match,\n        mode,\n        voids\n      });\n      var pathRefs = Array.from(targets, _ref3 => {\n        var [, p] = _ref3;\n        return Editor.pathRef(editor, p);\n      });\n\n      for (var pathRef of pathRefs) {\n        var path = pathRef.unref();\n        var newPath = toRef.current;\n\n        if (path.length !== 0) {\n          editor.apply({\n            type: 'move_node',\n            path,\n            newPath\n          });\n        }\n\n        if (toRef.current && Path.isSibling(newPath, path) && Path.isAfter(newPath, path)) {\n          // When performing a sibling move to a later index, the path at the destination is shifted\n          // to before the insertion point instead of after. To ensure our group of nodes are inserted\n          // in the correct order we increment toRef to account for that\n          toRef.current = Path.next(toRef.current);\n        }\n      }\n\n      toRef.unref();\n    });\n  },\n\n  /**\r\n   * Remove the nodes at a specific location in the document.\r\n   */\n  removeNodes(editor) {\n    var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n    Editor.withoutNormalizing(editor, () => {\n      var {\n        hanging = false,\n        voids = false,\n        mode = 'lowest'\n      } = options;\n      var {\n        at = editor.selection,\n        match\n      } = options;\n\n      if (!at) {\n        return;\n      }\n\n      if (match == null) {\n        match = Path.isPath(at) ? matchPath(editor, at) : n => Editor.isBlock(editor, n);\n      }\n\n      if (!hanging && Range.isRange(at)) {\n        at = Editor.unhangRange(editor, at);\n      }\n\n      var depths = Editor.nodes(editor, {\n        at,\n        match,\n        mode,\n        voids\n      });\n      var pathRefs = Array.from(depths, _ref4 => {\n        var [, p] = _ref4;\n        return Editor.pathRef(editor, p);\n      });\n\n      for (var pathRef of pathRefs) {\n        var path = pathRef.unref();\n\n        if (path) {\n          var [node] = Editor.node(editor, path);\n          editor.apply({\n            type: 'remove_node',\n            path,\n            node\n          });\n        }\n      }\n    });\n  },\n\n  /**\r\n   * Set new properties on the nodes at a location.\r\n   */\n  setNodes(editor, props) {\n    var options = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n    Editor.withoutNormalizing(editor, () => {\n      var {\n        match,\n        at = editor.selection\n      } = options;\n      var {\n        hanging = false,\n        mode = 'lowest',\n        split = false,\n        voids = false\n      } = options;\n\n      if (!at) {\n        return;\n      }\n\n      if (match == null) {\n        match = Path.isPath(at) ? matchPath(editor, at) : n => Editor.isBlock(editor, n);\n      }\n\n      if (!hanging && Range.isRange(at)) {\n        at = Editor.unhangRange(editor, at);\n      }\n\n      if (split && Range.isRange(at)) {\n        if (Range.isCollapsed(at) && Editor.leaf(editor, at.anchor)[0].text.length > 0) {\n          // If the range is collapsed in a non-empty node and 'split' is true, there's nothing to\n          // set that won't get normalized away\n          return;\n        }\n\n        var rangeRef = Editor.rangeRef(editor, at, {\n          affinity: 'inward'\n        });\n        var [start, end] = Range.edges(at);\n        var splitMode = mode === 'lowest' ? 'lowest' : 'highest';\n        var endAtEndOfNode = Editor.isEnd(editor, end, end.path);\n        Transforms.splitNodes(editor, {\n          at: end,\n          match,\n          mode: splitMode,\n          voids,\n          always: !endAtEndOfNode\n        });\n        var startAtStartOfNode = Editor.isStart(editor, start, start.path);\n        Transforms.splitNodes(editor, {\n          at: start,\n          match,\n          mode: splitMode,\n          voids,\n          always: !startAtStartOfNode\n        });\n        at = rangeRef.unref();\n\n        if (options.at == null) {\n          Transforms.select(editor, at);\n        }\n      }\n\n      for (var [node, path] of Editor.nodes(editor, {\n        at,\n        match,\n        mode,\n        voids\n      })) {\n        var properties = {};\n        var newProperties = {}; // You can't set properties on the editor node.\n\n        if (path.length === 0) {\n          continue;\n        }\n\n        var hasChanges = false;\n\n        for (var k in props) {\n          if (k === 'children' || k === 'text') {\n            continue;\n          }\n\n          if (props[k] !== node[k]) {\n            hasChanges = true; // Omit new properties from the old properties list\n\n            if (node.hasOwnProperty(k)) properties[k] = node[k]; // Omit properties that have been removed from the new properties list\n\n            if (props[k] != null) newProperties[k] = props[k];\n          }\n        }\n\n        if (hasChanges) {\n          editor.apply({\n            type: 'set_node',\n            path,\n            properties,\n            newProperties\n          });\n        }\n      }\n    });\n  },\n\n  /**\r\n   * Split the nodes at a specific location.\r\n   */\n  splitNodes(editor) {\n    var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n    Editor.withoutNormalizing(editor, () => {\n      var {\n        mode = 'lowest',\n        voids = false\n      } = options;\n      var {\n        match,\n        at = editor.selection,\n        height = 0,\n        always = false\n      } = options;\n\n      if (match == null) {\n        match = n => Editor.isBlock(editor, n);\n      }\n\n      if (Range.isRange(at)) {\n        at = deleteRange(editor, at);\n      } // If the target is a path, the default height-skipping and position\n      // counters need to account for us potentially splitting at a non-leaf.\n\n\n      if (Path.isPath(at)) {\n        var path = at;\n        var point = Editor.point(editor, path);\n        var [parent] = Editor.parent(editor, path);\n\n        match = n => n === parent;\n\n        height = point.path.length - path.length + 1;\n        at = point;\n        always = true;\n      }\n\n      if (!at) {\n        return;\n      }\n\n      var beforeRef = Editor.pointRef(editor, at, {\n        affinity: 'backward'\n      });\n      var [highest] = Editor.nodes(editor, {\n        at,\n        match,\n        mode,\n        voids\n      });\n\n      if (!highest) {\n        return;\n      }\n\n      var voidMatch = Editor.void(editor, {\n        at,\n        mode: 'highest'\n      });\n      var nudge = 0;\n\n      if (!voids && voidMatch) {\n        var [voidNode, voidPath] = voidMatch;\n\n        if (Element.isElement(voidNode) && editor.isInline(voidNode)) {\n          var after = Editor.after(editor, voidPath);\n\n          if (!after) {\n            var text = {\n              text: ''\n            };\n            var afterPath = Path.next(voidPath);\n            Transforms.insertNodes(editor, text, {\n              at: afterPath,\n              voids\n            });\n            after = Editor.point(editor, afterPath);\n          }\n\n          at = after;\n          always = true;\n        }\n\n        var siblingHeight = at.path.length - voidPath.length;\n        height = siblingHeight + 1;\n        always = true;\n      }\n\n      var afterRef = Editor.pointRef(editor, at);\n      var depth = at.path.length - height;\n      var [, highestPath] = highest;\n      var lowestPath = at.path.slice(0, depth);\n      var position = height === 0 ? at.offset : at.path[depth] + nudge;\n\n      for (var [node, _path2] of Editor.levels(editor, {\n        at: lowestPath,\n        reverse: true,\n        voids\n      })) {\n        var split = false;\n\n        if (_path2.length < highestPath.length || _path2.length === 0 || !voids && Editor.isVoid(editor, node)) {\n          break;\n        }\n\n        var _point = beforeRef.current;\n        var isEnd = Editor.isEnd(editor, _point, _path2);\n\n        if (always || !beforeRef || !Editor.isEdge(editor, _point, _path2)) {\n          split = true;\n          var properties = Node.extractProps(node);\n          editor.apply({\n            type: 'split_node',\n            path: _path2,\n            position,\n            properties\n          });\n        }\n\n        position = _path2[_path2.length - 1] + (split || isEnd ? 1 : 0);\n      }\n\n      if (options.at == null) {\n        var _point2 = afterRef.current || Editor.end(editor, []);\n\n        Transforms.select(editor, _point2);\n      }\n\n      beforeRef.unref();\n      afterRef.unref();\n    });\n  },\n\n  /**\r\n   * Unset properties on the nodes at a location.\r\n   */\n  unsetNodes(editor, props) {\n    var options = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n\n    if (!Array.isArray(props)) {\n      props = [props];\n    }\n\n    var obj = {};\n\n    for (var key of props) {\n      obj[key] = null;\n    }\n\n    Transforms.setNodes(editor, obj, options);\n  },\n\n  /**\r\n   * Unwrap the nodes at a location from a parent node, splitting the parent if\r\n   * necessary to ensure that only the content in the range is unwrapped.\r\n   */\n  unwrapNodes(editor) {\n    var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n    Editor.withoutNormalizing(editor, () => {\n      var {\n        mode = 'lowest',\n        split = false,\n        voids = false\n      } = options;\n      var {\n        at = editor.selection,\n        match\n      } = options;\n\n      if (!at) {\n        return;\n      }\n\n      if (match == null) {\n        match = Path.isPath(at) ? matchPath(editor, at) : n => Editor.isBlock(editor, n);\n      }\n\n      if (Path.isPath(at)) {\n        at = Editor.range(editor, at);\n      }\n\n      var rangeRef = Range.isRange(at) ? Editor.rangeRef(editor, at) : null;\n      var matches = Editor.nodes(editor, {\n        at,\n        match,\n        mode,\n        voids\n      });\n      var pathRefs = Array.from(matches, _ref5 => {\n        var [, p] = _ref5;\n        return Editor.pathRef(editor, p);\n      } // unwrapNode will call liftNode which does not support splitting the node when nested.\n      // If we do not reverse the order and call it from top to the bottom, it will remove all blocks\n      // that wrap target node. So we reverse the order.\n      ).reverse();\n\n      var _loop = function _loop(pathRef) {\n        var path = pathRef.unref();\n        var [node] = Editor.node(editor, path);\n        var range = Editor.range(editor, path);\n\n        if (split && rangeRef) {\n          range = Range.intersection(rangeRef.current, range);\n        }\n\n        Transforms.liftNodes(editor, {\n          at: range,\n          match: n => Element.isAncestor(node) && node.children.includes(n),\n          voids\n        });\n      };\n\n      for (var pathRef of pathRefs) {\n        _loop(pathRef);\n      }\n\n      if (rangeRef) {\n        rangeRef.unref();\n      }\n    });\n  },\n\n  /**\r\n   * Wrap the nodes at a location in a new container node, splitting the edges\r\n   * of the range first to ensure that only the content in the range is wrapped.\r\n   */\n  wrapNodes(editor, element) {\n    var options = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n    Editor.withoutNormalizing(editor, () => {\n      var {\n        mode = 'lowest',\n        split = false,\n        voids = false\n      } = options;\n      var {\n        match,\n        at = editor.selection\n      } = options;\n\n      if (!at) {\n        return;\n      }\n\n      if (match == null) {\n        if (Path.isPath(at)) {\n          match = matchPath(editor, at);\n        } else if (editor.isInline(element)) {\n          match = n => Editor.isInline(editor, n) || Text.isText(n);\n        } else {\n          match = n => Editor.isBlock(editor, n);\n        }\n      }\n\n      if (split && Range.isRange(at)) {\n        var [start, end] = Range.edges(at);\n        var rangeRef = Editor.rangeRef(editor, at, {\n          affinity: 'inward'\n        });\n        Transforms.splitNodes(editor, {\n          at: end,\n          match,\n          voids\n        });\n        Transforms.splitNodes(editor, {\n          at: start,\n          match,\n          voids\n        });\n        at = rangeRef.unref();\n\n        if (options.at == null) {\n          Transforms.select(editor, at);\n        }\n      }\n\n      var roots = Array.from(Editor.nodes(editor, {\n        at,\n        match: editor.isInline(element) ? n => Editor.isBlock(editor, n) : n => Editor.isEditor(n),\n        mode: 'lowest',\n        voids\n      }));\n\n      for (var [, rootPath] of roots) {\n        var a = Range.isRange(at) ? Range.intersection(at, Editor.range(editor, rootPath)) : at;\n\n        if (!a) {\n          continue;\n        }\n\n        var matches = Array.from(Editor.nodes(editor, {\n          at: a,\n          match,\n          mode,\n          voids\n        }));\n\n        if (matches.length > 0) {\n          var _ret = function () {\n            var [first] = matches;\n            var last = matches[matches.length - 1];\n            var [, firstPath] = first;\n            var [, lastPath] = last;\n\n            if (firstPath.length === 0 && lastPath.length === 0) {\n              // if there's no matching parent - usually means the node is an editor - don't do anything\n              return \"continue\";\n            }\n\n            var commonPath = Path.equals(firstPath, lastPath) ? Path.parent(firstPath) : Path.common(firstPath, lastPath);\n            var range = Editor.range(editor, firstPath, lastPath);\n            var commonNodeEntry = Editor.node(editor, commonPath);\n            var [commonNode] = commonNodeEntry;\n            var depth = commonPath.length + 1;\n            var wrapperPath = Path.next(lastPath.slice(0, depth));\n\n            var wrapper = _objectSpread$2(_objectSpread$2({}, element), {}, {\n              children: []\n            });\n\n            Transforms.insertNodes(editor, wrapper, {\n              at: wrapperPath,\n              voids\n            });\n            Transforms.moveNodes(editor, {\n              at: range,\n              match: n => Element.isAncestor(commonNode) && commonNode.children.includes(n),\n              to: wrapperPath.concat(0),\n              voids\n            });\n          }();\n\n          if (_ret === \"continue\") continue;\n        }\n      }\n    });\n  }\n\n};\n\nvar hasSingleChildNest = (editor, node) => {\n  if (Element.isElement(node)) {\n    var element = node;\n\n    if (Editor.isVoid(editor, node)) {\n      return true;\n    } else if (element.children.length === 1) {\n      return hasSingleChildNest(editor, element.children[0]);\n    } else {\n      return false;\n    }\n  } else if (Editor.isEditor(node)) {\n    return false;\n  } else {\n    return true;\n  }\n};\n/**\r\n * Convert a range into a point by deleting it's content.\r\n */\n\n\nvar deleteRange = (editor, range) => {\n  if (Range.isCollapsed(range)) {\n    return range.anchor;\n  } else {\n    var [, end] = Range.edges(range);\n    var pointRef = Editor.pointRef(editor, end);\n    Transforms.delete(editor, {\n      at: range\n    });\n    return pointRef.unref();\n  }\n};\n\nvar matchPath = (editor, path) => {\n  var [node] = Editor.node(editor, path);\n  return n => n === node;\n};\n\nfunction ownKeys$1(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) { symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); } keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread$1(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys$1(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys$1(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\nvar SelectionTransforms = {\n  /**\r\n   * Collapse the selection.\r\n   */\n  collapse(editor) {\n    var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n    var {\n      edge = 'anchor'\n    } = options;\n    var {\n      selection\n    } = editor;\n\n    if (!selection) {\n      return;\n    } else if (edge === 'anchor') {\n      Transforms.select(editor, selection.anchor);\n    } else if (edge === 'focus') {\n      Transforms.select(editor, selection.focus);\n    } else if (edge === 'start') {\n      var [start] = Range.edges(selection);\n      Transforms.select(editor, start);\n    } else if (edge === 'end') {\n      var [, end] = Range.edges(selection);\n      Transforms.select(editor, end);\n    }\n  },\n\n  /**\r\n   * Unset the selection.\r\n   */\n  deselect(editor) {\n    var {\n      selection\n    } = editor;\n\n    if (selection) {\n      editor.apply({\n        type: 'set_selection',\n        properties: selection,\n        newProperties: null\n      });\n    }\n  },\n\n  /**\r\n   * Move the selection's point forward or backward.\r\n   */\n  move(editor) {\n    var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n    var {\n      selection\n    } = editor;\n    var {\n      distance = 1,\n      unit = 'character',\n      reverse = false\n    } = options;\n    var {\n      edge = null\n    } = options;\n\n    if (!selection) {\n      return;\n    }\n\n    if (edge === 'start') {\n      edge = Range.isBackward(selection) ? 'focus' : 'anchor';\n    }\n\n    if (edge === 'end') {\n      edge = Range.isBackward(selection) ? 'anchor' : 'focus';\n    }\n\n    var {\n      anchor,\n      focus\n    } = selection;\n    var opts = {\n      distance,\n      unit\n    };\n    var props = {};\n\n    if (edge == null || edge === 'anchor') {\n      var point = reverse ? Editor.before(editor, anchor, opts) : Editor.after(editor, anchor, opts);\n\n      if (point) {\n        props.anchor = point;\n      }\n    }\n\n    if (edge == null || edge === 'focus') {\n      var _point = reverse ? Editor.before(editor, focus, opts) : Editor.after(editor, focus, opts);\n\n      if (_point) {\n        props.focus = _point;\n      }\n    }\n\n    Transforms.setSelection(editor, props);\n  },\n\n  /**\r\n   * Set the selection to a new value.\r\n   */\n  select(editor, target) {\n    var {\n      selection\n    } = editor;\n    target = Editor.range(editor, target);\n\n    if (selection) {\n      Transforms.setSelection(editor, target);\n      return;\n    }\n\n    if (!Range.isRange(target)) {\n      throw new Error(\"When setting the selection and the current selection is `null` you must provide at least an `anchor` and `focus`, but you passed: \".concat(JSON.stringify(target)));\n    }\n\n    editor.apply({\n      type: 'set_selection',\n      properties: selection,\n      newProperties: target\n    });\n  },\n\n  /**\r\n   * Set new properties on one of the selection's points.\r\n   */\n  setPoint(editor, props) {\n    var options = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n    var {\n      selection\n    } = editor;\n    var {\n      edge = 'both'\n    } = options;\n\n    if (!selection) {\n      return;\n    }\n\n    if (edge === 'start') {\n      edge = Range.isBackward(selection) ? 'focus' : 'anchor';\n    }\n\n    if (edge === 'end') {\n      edge = Range.isBackward(selection) ? 'anchor' : 'focus';\n    }\n\n    var {\n      anchor,\n      focus\n    } = selection;\n    var point = edge === 'anchor' ? anchor : focus;\n    Transforms.setSelection(editor, {\n      [edge === 'anchor' ? 'anchor' : 'focus']: _objectSpread$1(_objectSpread$1({}, point), props)\n    });\n  },\n\n  /**\r\n   * Set new properties on the selection.\r\n   */\n  setSelection(editor, props) {\n    var {\n      selection\n    } = editor;\n    var oldProps = {};\n    var newProps = {};\n\n    if (!selection) {\n      return;\n    }\n\n    for (var k in props) {\n      if (k === 'anchor' && props.anchor != null && !Point.equals(props.anchor, selection.anchor) || k === 'focus' && props.focus != null && !Point.equals(props.focus, selection.focus) || k !== 'anchor' && k !== 'focus' && props[k] !== selection[k]) {\n        oldProps[k] = selection[k];\n        newProps[k] = props[k];\n      }\n    }\n\n    if (Object.keys(oldProps).length > 0) {\n      editor.apply({\n        type: 'set_selection',\n        properties: oldProps,\n        newProperties: newProps\n      });\n    }\n  }\n\n};\n\nvar TextTransforms = {\n  /**\r\n   * Delete content in the editor.\r\n   */\n  delete(editor) {\n    var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n    Editor.withoutNormalizing(editor, () => {\n      var {\n        reverse = false,\n        unit = 'character',\n        distance = 1,\n        voids = false\n      } = options;\n      var {\n        at = editor.selection,\n        hanging = false\n      } = options;\n\n      if (!at) {\n        return;\n      }\n\n      if (Range.isRange(at) && Range.isCollapsed(at)) {\n        at = at.anchor;\n      }\n\n      if (Point.isPoint(at)) {\n        var furthestVoid = Editor.void(editor, {\n          at,\n          mode: 'highest'\n        });\n\n        if (!voids && furthestVoid) {\n          var [, voidPath] = furthestVoid;\n          at = voidPath;\n        } else {\n          var opts = {\n            unit,\n            distance\n          };\n          var target = reverse ? Editor.before(editor, at, opts) || Editor.start(editor, []) : Editor.after(editor, at, opts) || Editor.end(editor, []);\n          at = {\n            anchor: at,\n            focus: target\n          };\n          hanging = true;\n        }\n      }\n\n      if (Path.isPath(at)) {\n        Transforms.removeNodes(editor, {\n          at,\n          voids\n        });\n        return;\n      }\n\n      if (Range.isCollapsed(at)) {\n        return;\n      }\n\n      if (!hanging) {\n        var [, _end] = Range.edges(at);\n        var endOfDoc = Editor.end(editor, []);\n\n        if (!Point.equals(_end, endOfDoc)) {\n          at = Editor.unhangRange(editor, at, {\n            voids\n          });\n        }\n      }\n\n      var [start, end] = Range.edges(at);\n      var startBlock = Editor.above(editor, {\n        match: n => Editor.isBlock(editor, n),\n        at: start,\n        voids\n      });\n      var endBlock = Editor.above(editor, {\n        match: n => Editor.isBlock(editor, n),\n        at: end,\n        voids\n      });\n      var isAcrossBlocks = startBlock && endBlock && !Path.equals(startBlock[1], endBlock[1]);\n      var isSingleText = Path.equals(start.path, end.path);\n      var startVoid = voids ? null : Editor.void(editor, {\n        at: start,\n        mode: 'highest'\n      });\n      var endVoid = voids ? null : Editor.void(editor, {\n        at: end,\n        mode: 'highest'\n      }); // If the start or end points are inside an inline void, nudge them out.\n\n      if (startVoid) {\n        var before = Editor.before(editor, start);\n\n        if (before && startBlock && Path.isAncestor(startBlock[1], before.path)) {\n          start = before;\n        }\n      }\n\n      if (endVoid) {\n        var after = Editor.after(editor, end);\n\n        if (after && endBlock && Path.isAncestor(endBlock[1], after.path)) {\n          end = after;\n        }\n      } // Get the highest nodes that are completely inside the range, as well as\n      // the start and end nodes.\n\n\n      var matches = [];\n      var lastPath;\n\n      for (var entry of Editor.nodes(editor, {\n        at,\n        voids\n      })) {\n        var [node, path] = entry;\n\n        if (lastPath && Path.compare(path, lastPath) === 0) {\n          continue;\n        }\n\n        if (!voids && Editor.isVoid(editor, node) || !Path.isCommon(path, start.path) && !Path.isCommon(path, end.path)) {\n          matches.push(entry);\n          lastPath = path;\n        }\n      }\n\n      var pathRefs = Array.from(matches, _ref => {\n        var [, p] = _ref;\n        return Editor.pathRef(editor, p);\n      });\n      var startRef = Editor.pointRef(editor, start);\n      var endRef = Editor.pointRef(editor, end);\n\n      if (!isSingleText && !startVoid) {\n        var _point = startRef.current;\n        var [_node] = Editor.leaf(editor, _point);\n        var {\n          path: _path\n        } = _point;\n        var {\n          offset\n        } = start;\n\n        var text = _node.text.slice(offset);\n\n        if (text.length > 0) editor.apply({\n          type: 'remove_text',\n          path: _path,\n          offset,\n          text\n        });\n      }\n\n      for (var pathRef of pathRefs) {\n        var _path2 = pathRef.unref();\n\n        Transforms.removeNodes(editor, {\n          at: _path2,\n          voids\n        });\n      }\n\n      if (!endVoid) {\n        var _point2 = endRef.current;\n        var [_node2] = Editor.leaf(editor, _point2);\n        var {\n          path: _path3\n        } = _point2;\n\n        var _offset = isSingleText ? start.offset : 0;\n\n        var _text = _node2.text.slice(_offset, end.offset);\n\n        if (_text.length > 0) editor.apply({\n          type: 'remove_text',\n          path: _path3,\n          offset: _offset,\n          text: _text\n        });\n      }\n\n      if (!isSingleText && isAcrossBlocks && endRef.current && startRef.current) {\n        Transforms.mergeNodes(editor, {\n          at: endRef.current,\n          hanging: true,\n          voids\n        });\n      }\n\n      var point = reverse ? startRef.unref() || endRef.unref() : endRef.unref() || startRef.unref();\n\n      if (options.at == null && point) {\n        Transforms.select(editor, point);\n      }\n    });\n  },\n\n  /**\r\n   * Insert a fragment at a specific location in the editor.\r\n   */\n  insertFragment(editor, fragment) {\n    var options = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n    Editor.withoutNormalizing(editor, () => {\n      var {\n        hanging = false,\n        voids = false\n      } = options;\n      var {\n        at = editor.selection\n      } = options;\n\n      if (!fragment.length) {\n        return;\n      }\n\n      if (!at) {\n        return;\n      } else if (Range.isRange(at)) {\n        if (!hanging) {\n          at = Editor.unhangRange(editor, at);\n        }\n\n        if (Range.isCollapsed(at)) {\n          at = at.anchor;\n        } else {\n          var [, end] = Range.edges(at);\n\n          if (!voids && Editor.void(editor, {\n            at: end\n          })) {\n            return;\n          }\n\n          var pointRef = Editor.pointRef(editor, end);\n          Transforms.delete(editor, {\n            at\n          });\n          at = pointRef.unref();\n        }\n      } else if (Path.isPath(at)) {\n        at = Editor.start(editor, at);\n      }\n\n      if (!voids && Editor.void(editor, {\n        at\n      })) {\n        return;\n      } // If the insert point is at the edge of an inline node, move it outside\n      // instead since it will need to be split otherwise.\n\n\n      var inlineElementMatch = Editor.above(editor, {\n        at,\n        match: n => Editor.isInline(editor, n),\n        mode: 'highest',\n        voids\n      });\n\n      if (inlineElementMatch) {\n        var [, _inlinePath] = inlineElementMatch;\n\n        if (Editor.isEnd(editor, at, _inlinePath)) {\n          var after = Editor.after(editor, _inlinePath);\n          at = after;\n        } else if (Editor.isStart(editor, at, _inlinePath)) {\n          var before = Editor.before(editor, _inlinePath);\n          at = before;\n        }\n      }\n\n      var blockMatch = Editor.above(editor, {\n        match: n => Editor.isBlock(editor, n),\n        at,\n        voids\n      });\n      var [, blockPath] = blockMatch;\n      var isBlockStart = Editor.isStart(editor, at, blockPath);\n      var isBlockEnd = Editor.isEnd(editor, at, blockPath);\n      var isBlockEmpty = isBlockStart && isBlockEnd;\n      var mergeStart = !isBlockStart || isBlockStart && isBlockEnd;\n      var mergeEnd = !isBlockEnd;\n      var [, firstPath] = Node.first({\n        children: fragment\n      }, []);\n      var [, lastPath] = Node.last({\n        children: fragment\n      }, []);\n      var matches = [];\n\n      var matcher = _ref2 => {\n        var [n, p] = _ref2;\n        var isRoot = p.length === 0;\n\n        if (isRoot) {\n          return false;\n        }\n\n        if (isBlockEmpty) {\n          return true;\n        }\n\n        if (mergeStart && Path.isAncestor(p, firstPath) && Element.isElement(n) && !editor.isVoid(n) && !editor.isInline(n)) {\n          return false;\n        }\n\n        if (mergeEnd && Path.isAncestor(p, lastPath) && Element.isElement(n) && !editor.isVoid(n) && !editor.isInline(n)) {\n          return false;\n        }\n\n        return true;\n      };\n\n      for (var entry of Node.nodes({\n        children: fragment\n      }, {\n        pass: matcher\n      })) {\n        if (matcher(entry)) {\n          matches.push(entry);\n        }\n      }\n\n      var starts = [];\n      var middles = [];\n      var ends = [];\n      var starting = true;\n      var hasBlocks = false;\n\n      for (var [node] of matches) {\n        if (Element.isElement(node) && !editor.isInline(node)) {\n          starting = false;\n          hasBlocks = true;\n          middles.push(node);\n        } else if (starting) {\n          starts.push(node);\n        } else {\n          ends.push(node);\n        }\n      }\n\n      var [inlineMatch] = Editor.nodes(editor, {\n        at,\n        match: n => Text.isText(n) || Editor.isInline(editor, n),\n        mode: 'highest',\n        voids\n      });\n      var [, inlinePath] = inlineMatch;\n      var isInlineStart = Editor.isStart(editor, at, inlinePath);\n      var isInlineEnd = Editor.isEnd(editor, at, inlinePath);\n      var middleRef = Editor.pathRef(editor, isBlockEnd ? Path.next(blockPath) : blockPath);\n      var endRef = Editor.pathRef(editor, isInlineEnd ? Path.next(inlinePath) : inlinePath);\n      var blockPathRef = Editor.pathRef(editor, blockPath);\n      Transforms.splitNodes(editor, {\n        at,\n        match: n => hasBlocks ? Editor.isBlock(editor, n) : Text.isText(n) || Editor.isInline(editor, n),\n        mode: hasBlocks ? 'lowest' : 'highest',\n        voids\n      });\n      var startRef = Editor.pathRef(editor, !isInlineStart || isInlineStart && isInlineEnd ? Path.next(inlinePath) : inlinePath);\n      Transforms.insertNodes(editor, starts, {\n        at: startRef.current,\n        match: n => Text.isText(n) || Editor.isInline(editor, n),\n        mode: 'highest',\n        voids\n      });\n\n      if (isBlockEmpty && middles.length) {\n        Transforms.delete(editor, {\n          at: blockPathRef.unref(),\n          voids\n        });\n      }\n\n      Transforms.insertNodes(editor, middles, {\n        at: middleRef.current,\n        match: n => Editor.isBlock(editor, n),\n        mode: 'lowest',\n        voids\n      });\n      Transforms.insertNodes(editor, ends, {\n        at: endRef.current,\n        match: n => Text.isText(n) || Editor.isInline(editor, n),\n        mode: 'highest',\n        voids\n      });\n\n      if (!options.at) {\n        var path;\n\n        if (ends.length > 0) {\n          path = Path.previous(endRef.current);\n        } else if (middles.length > 0) {\n          path = Path.previous(middleRef.current);\n        } else {\n          path = Path.previous(startRef.current);\n        }\n\n        var _end2 = Editor.end(editor, path);\n\n        Transforms.select(editor, _end2);\n      }\n\n      startRef.unref();\n      middleRef.unref();\n      endRef.unref();\n    });\n  },\n\n  /**\r\n   * Insert a string of text in the Editor.\r\n   */\n  insertText(editor, text) {\n    var options = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n    Editor.withoutNormalizing(editor, () => {\n      var {\n        voids = false\n      } = options;\n      var {\n        at = editor.selection\n      } = options;\n\n      if (!at) {\n        return;\n      }\n\n      if (Path.isPath(at)) {\n        at = Editor.range(editor, at);\n      }\n\n      if (Range.isRange(at)) {\n        if (Range.isCollapsed(at)) {\n          at = at.anchor;\n        } else {\n          var end = Range.end(at);\n\n          if (!voids && Editor.void(editor, {\n            at: end\n          })) {\n            return;\n          }\n\n          var start = Range.start(at);\n          var pointRef = Editor.pointRef(editor, start);\n          Transforms.delete(editor, {\n            at,\n            voids\n          });\n          at = pointRef.unref();\n          Transforms.setSelection(editor, {\n            anchor: at,\n            focus: at\n          });\n        }\n      }\n\n      if (!voids && Editor.void(editor, {\n        at\n      })) {\n        return;\n      }\n\n      var {\n        path,\n        offset\n      } = at;\n      if (text.length > 0) editor.apply({\n        type: 'insert_text',\n        path,\n        offset,\n        text\n      });\n    });\n  }\n\n};\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) { symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); } keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\nvar Transforms = _objectSpread(_objectSpread(_objectSpread(_objectSpread({}, GeneralTransforms), NodeTransforms), SelectionTransforms), TextTransforms);\n\nexport { Editor, Element, Location, Node, Operation, Path, PathRef, Point, PointRef, Range, RangeRef, Span, Text, Transforms, createEditor };\n//# sourceMappingURL=index.es.js.map\n","'use strict'\n\nmodule.exports = direction\n\nvar RTL = '\\u0591-\\u07FF\\uFB1D-\\uFDFD\\uFE70-\\uFEFC'\nvar LTR =\n  'A-Za-z\\u00C0-\\u00D6\\u00D8-\\u00F6' +\n  '\\u00F8-\\u02B8\\u0300-\\u0590\\u0800-\\u1FFF\\u200E\\u2C00-\\uFB1C' +\n  '\\uFE00-\\uFE6F\\uFEFD-\\uFFFF'\n\nvar rtl = new RegExp('^[^' + LTR + ']*[' + RTL + ']')\nvar ltr = new RegExp('^[^' + RTL + ']*[' + LTR + ']')\n\nfunction direction(value) {\n  value = String(value || '')\n\n  if (rtl.test(value)) {\n    return 'rtl'\n  }\n\n  if (ltr.test(value)) {\n    return 'ltr'\n  }\n\n  return 'neutral'\n}\n","function t(t){return\"object\"==typeof t&&null!=t&&1===t.nodeType}function e(t,e){return(!e||\"hidden\"!==t)&&\"visible\"!==t&&\"clip\"!==t}function n(t,n){if(t.clientHeight<t.scrollHeight||t.clientWidth<t.scrollWidth){var r=getComputedStyle(t,null);return e(r.overflowY,n)||e(r.overflowX,n)||function(t){var e=function(t){if(!t.ownerDocument||!t.ownerDocument.defaultView)return null;try{return t.ownerDocument.defaultView.frameElement}catch(t){return null}}(t);return!!e&&(e.clientHeight<t.scrollHeight||e.clientWidth<t.scrollWidth)}(t)}return!1}function r(t,e,n,r,i,o,l,d){return o<t&&l>e||o>t&&l<e?0:o<=t&&d<=n||l>=e&&d>=n?o-t-r:l>e&&d<n||o<t&&d>n?l-e+i:0}export default function(e,i){var o=window,l=i.scrollMode,d=i.block,u=i.inline,h=i.boundary,a=i.skipOverflowHiddenElements,c=\"function\"==typeof h?h:function(t){return t!==h};if(!t(e))throw new TypeError(\"Invalid target\");for(var f=document.scrollingElement||document.documentElement,s=[],p=e;t(p)&&c(p);){if((p=p.parentElement)===f){s.push(p);break}null!=p&&p===document.body&&n(p)&&!n(document.documentElement)||null!=p&&n(p,a)&&s.push(p)}for(var m=o.visualViewport?o.visualViewport.width:innerWidth,g=o.visualViewport?o.visualViewport.height:innerHeight,w=window.scrollX||pageXOffset,v=window.scrollY||pageYOffset,W=e.getBoundingClientRect(),b=W.height,H=W.width,y=W.top,E=W.right,M=W.bottom,V=W.left,x=\"start\"===d||\"nearest\"===d?y:\"end\"===d?M:y+b/2,I=\"center\"===u?V+H/2:\"end\"===u?E:V,C=[],T=0;T<s.length;T++){var k=s[T],B=k.getBoundingClientRect(),D=B.height,O=B.width,R=B.top,X=B.right,Y=B.bottom,L=B.left;if(\"if-needed\"===l&&y>=0&&V>=0&&M<=g&&E<=m&&y>=R&&M<=Y&&V>=L&&E<=X)return C;var S=getComputedStyle(k),j=parseInt(S.borderLeftWidth,10),q=parseInt(S.borderTopWidth,10),z=parseInt(S.borderRightWidth,10),A=parseInt(S.borderBottomWidth,10),F=0,G=0,J=\"offsetWidth\"in k?k.offsetWidth-k.clientWidth-j-z:0,K=\"offsetHeight\"in k?k.offsetHeight-k.clientHeight-q-A:0;if(f===k)F=\"start\"===d?x:\"end\"===d?x-g:\"nearest\"===d?r(v,v+g,g,q,A,v+x,v+x+b,b):x-g/2,G=\"start\"===u?I:\"center\"===u?I-m/2:\"end\"===u?I-m:r(w,w+m,m,j,z,w+I,w+I+H,H),F=Math.max(0,F+v),G=Math.max(0,G+w);else{F=\"start\"===d?x-R-q:\"end\"===d?x-Y+A+K:\"nearest\"===d?r(R,Y,D,q,A+K,x,x+b,b):x-(R+D/2)+K/2,G=\"start\"===u?I-L-j:\"center\"===u?I-(L+O/2)+J/2:\"end\"===u?I-X+z+J:r(L,X,O,j,z+J,I,I+H,H);var N=k.scrollLeft,P=k.scrollTop;x+=P-(F=Math.max(0,Math.min(P+F,k.scrollHeight-D+K))),I+=N-(G=Math.max(0,Math.min(N+G,k.scrollWidth-O+J)))}C.push({el:k,top:F,left:G})}return C}\n//# sourceMappingURL=index.module.js.map\n","import compute from 'compute-scroll-into-view';\n\nfunction isOptionsObject(options) {\n  return options === Object(options) && Object.keys(options).length !== 0;\n}\n\nfunction defaultBehavior(actions, behavior) {\n  if (behavior === void 0) {\n    behavior = 'auto';\n  }\n\n  var canSmoothScroll = ('scrollBehavior' in document.body.style);\n  actions.forEach(function (_ref) {\n    var el = _ref.el,\n        top = _ref.top,\n        left = _ref.left;\n\n    if (el.scroll && canSmoothScroll) {\n      el.scroll({\n        top: top,\n        left: left,\n        behavior: behavior\n      });\n    } else {\n      el.scrollTop = top;\n      el.scrollLeft = left;\n    }\n  });\n}\n\nfunction getOptions(options) {\n  if (options === false) {\n    return {\n      block: 'end',\n      inline: 'nearest'\n    };\n  }\n\n  if (isOptionsObject(options)) {\n    return options;\n  }\n\n  return {\n    block: 'start',\n    inline: 'nearest'\n  };\n}\n\nfunction scrollIntoView(target, options) {\n  var isTargetAttached = target.isConnected || target.ownerDocument.documentElement.contains(target);\n\n  if (isOptionsObject(options) && typeof options.behavior === 'function') {\n    return options.behavior(isTargetAttached ? compute(target, options) : []);\n  }\n\n  if (!isTargetAttached) {\n    return;\n  }\n\n  var computeOptions = getOptions(options);\n  return defaultBehavior(compute(target, computeOptions), computeOptions.behavior);\n}\n\nexport default scrollIntoView;","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\n/**\n * Constants.\n */\n\nvar IS_MAC = typeof window != 'undefined' && /Mac|iPod|iPhone|iPad/.test(window.navigator.platform);\n\nvar MODIFIERS = {\n  alt: 'altKey',\n  control: 'ctrlKey',\n  meta: 'metaKey',\n  shift: 'shiftKey'\n};\n\nvar ALIASES = {\n  add: '+',\n  break: 'pause',\n  cmd: 'meta',\n  command: 'meta',\n  ctl: 'control',\n  ctrl: 'control',\n  del: 'delete',\n  down: 'arrowdown',\n  esc: 'escape',\n  ins: 'insert',\n  left: 'arrowleft',\n  mod: IS_MAC ? 'meta' : 'control',\n  opt: 'alt',\n  option: 'alt',\n  return: 'enter',\n  right: 'arrowright',\n  space: ' ',\n  spacebar: ' ',\n  up: 'arrowup',\n  win: 'meta',\n  windows: 'meta'\n};\n\nvar CODES = {\n  backspace: 8,\n  tab: 9,\n  enter: 13,\n  shift: 16,\n  control: 17,\n  alt: 18,\n  pause: 19,\n  capslock: 20,\n  escape: 27,\n  ' ': 32,\n  pageup: 33,\n  pagedown: 34,\n  end: 35,\n  home: 36,\n  arrowleft: 37,\n  arrowup: 38,\n  arrowright: 39,\n  arrowdown: 40,\n  insert: 45,\n  delete: 46,\n  meta: 91,\n  numlock: 144,\n  scrolllock: 145,\n  ';': 186,\n  '=': 187,\n  ',': 188,\n  '-': 189,\n  '.': 190,\n  '/': 191,\n  '`': 192,\n  '[': 219,\n  '\\\\': 220,\n  ']': 221,\n  '\\'': 222\n};\n\nfor (var f = 1; f < 20; f++) {\n  CODES['f' + f] = 111 + f;\n}\n\n/**\n * Is hotkey?\n */\n\nfunction isHotkey(hotkey, options, event) {\n  if (options && !('byKey' in options)) {\n    event = options;\n    options = null;\n  }\n\n  if (!Array.isArray(hotkey)) {\n    hotkey = [hotkey];\n  }\n\n  var array = hotkey.map(function (string) {\n    return parseHotkey(string, options);\n  });\n  var check = function check(e) {\n    return array.some(function (object) {\n      return compareHotkey(object, e);\n    });\n  };\n  var ret = event == null ? check : check(event);\n  return ret;\n}\n\nfunction isCodeHotkey(hotkey, event) {\n  return isHotkey(hotkey, event);\n}\n\nfunction isKeyHotkey(hotkey, event) {\n  return isHotkey(hotkey, { byKey: true }, event);\n}\n\n/**\n * Parse.\n */\n\nfunction parseHotkey(hotkey, options) {\n  var byKey = options && options.byKey;\n  var ret = {};\n\n  // Special case to handle the `+` key since we use it as a separator.\n  hotkey = hotkey.replace('++', '+add');\n  var values = hotkey.split('+');\n  var length = values.length;\n\n  // Ensure that all the modifiers are set to false unless the hotkey has them.\n\n  for (var k in MODIFIERS) {\n    ret[MODIFIERS[k]] = false;\n  }\n\n  var _iteratorNormalCompletion = true;\n  var _didIteratorError = false;\n  var _iteratorError = undefined;\n\n  try {\n    for (var _iterator = values[Symbol.iterator](), _step; !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = true) {\n      var value = _step.value;\n\n      var optional = value.endsWith('?') && value.length > 1;\n\n      if (optional) {\n        value = value.slice(0, -1);\n      }\n\n      var name = toKeyName(value);\n      var modifier = MODIFIERS[name];\n\n      if (length === 1 || !modifier) {\n        if (byKey) {\n          ret.key = name;\n        } else {\n          ret.which = toKeyCode(value);\n        }\n      }\n\n      if (modifier) {\n        ret[modifier] = optional ? null : true;\n      }\n    }\n  } catch (err) {\n    _didIteratorError = true;\n    _iteratorError = err;\n  } finally {\n    try {\n      if (!_iteratorNormalCompletion && _iterator.return) {\n        _iterator.return();\n      }\n    } finally {\n      if (_didIteratorError) {\n        throw _iteratorError;\n      }\n    }\n  }\n\n  return ret;\n}\n\n/**\n * Compare.\n */\n\nfunction compareHotkey(object, event) {\n  for (var key in object) {\n    var expected = object[key];\n    var actual = void 0;\n\n    if (expected == null) {\n      continue;\n    }\n\n    if (key === 'key' && event.key != null) {\n      actual = event.key.toLowerCase();\n    } else if (key === 'which') {\n      actual = expected === 91 && event.which === 93 ? 91 : event.which;\n    } else {\n      actual = event[key];\n    }\n\n    if (actual == null && expected === false) {\n      continue;\n    }\n\n    if (actual !== expected) {\n      return false;\n    }\n  }\n\n  return true;\n}\n\n/**\n * Utils.\n */\n\nfunction toKeyCode(name) {\n  name = toKeyName(name);\n  var code = CODES[name] || name.toUpperCase().charCodeAt(0);\n  return code;\n}\n\nfunction toKeyName(name) {\n  name = name.toLowerCase();\n  name = ALIASES[name] || name;\n  return name;\n}\n\n/**\n * Export.\n */\n\nexports.default = isHotkey;\nexports.isHotkey = isHotkey;\nexports.isCodeHotkey = isCodeHotkey;\nexports.isKeyHotkey = isKeyHotkey;\nexports.parseHotkey = parseHotkey;\nexports.compareHotkey = compareHotkey;\nexports.toKeyCode = toKeyCode;\nexports.toKeyName = toKeyName;","import React, { useRef, useEffect, useLayoutEffect, useContext, createContext, useState, useMemo, useCallback } from 'react';\nimport { Path, Node, Editor, Text as Text$1, Range, Element as Element$1, Transforms } from 'slate';\nimport getDirection from 'direction';\nimport throttle from 'lodash/throttle';\nimport scrollIntoView from 'scroll-into-view-if-needed';\nimport { isKeyHotkey } from 'is-hotkey';\nimport ReactDOM from 'react-dom';\n\nfunction _defineProperty(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n}\n\nfunction _objectWithoutPropertiesLoose(source, excluded) {\n  if (source == null) return {};\n  var target = {};\n  var sourceKeys = Object.keys(source);\n  var key, i;\n\n  for (i = 0; i < sourceKeys.length; i++) {\n    key = sourceKeys[i];\n    if (excluded.indexOf(key) >= 0) continue;\n    target[key] = source[key];\n  }\n\n  return target;\n}\n\nfunction _objectWithoutProperties(source, excluded) {\n  if (source == null) return {};\n  var target = _objectWithoutPropertiesLoose(source, excluded);\n  var key, i;\n\n  if (Object.getOwnPropertySymbols) {\n    var sourceSymbolKeys = Object.getOwnPropertySymbols(source);\n\n    for (i = 0; i < sourceSymbolKeys.length; i++) {\n      key = sourceSymbolKeys[i];\n      if (excluded.indexOf(key) >= 0) continue;\n      if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue;\n      target[key] = source[key];\n    }\n  }\n\n  return target;\n}\n\n/**\r\n * Leaf content strings.\r\n */\n\nvar String = props => {\n  var {\n    isLast,\n    leaf,\n    parent,\n    text\n  } = props;\n  var editor = useSlateStatic();\n  var path = ReactEditor.findPath(editor, text);\n  var parentPath = Path.parent(path); // COMPAT: Render text inside void nodes with a zero-width space.\n  // So the node can contain selection but the text is not visible.\n\n  if (editor.isVoid(parent)) {\n    return /*#__PURE__*/React.createElement(ZeroWidthString, {\n      length: Node.string(parent).length\n    });\n  } // COMPAT: If this is the last text node in an empty block, render a zero-\n  // width space that will convert into a line break when copying and pasting\n  // to support expected plain text.\n\n\n  if (leaf.text === '' && parent.children[parent.children.length - 1] === text && !editor.isInline(parent) && Editor.string(editor, parentPath) === '') {\n    return /*#__PURE__*/React.createElement(ZeroWidthString, {\n      isLineBreak: true\n    });\n  } // COMPAT: If the text is empty, it's because it's on the edge of an inline\n  // node, so we render a zero-width space so that the selection can be\n  // inserted next to it still.\n\n\n  if (leaf.text === '') {\n    return /*#__PURE__*/React.createElement(ZeroWidthString, null);\n  } // COMPAT: Browsers will collapse trailing new lines at the end of blocks,\n  // so we need to add an extra trailing new lines to prevent that.\n\n\n  if (isLast && leaf.text.slice(-1) === '\\n') {\n    return /*#__PURE__*/React.createElement(TextString, {\n      isTrailing: true,\n      text: leaf.text\n    });\n  }\n\n  return /*#__PURE__*/React.createElement(TextString, {\n    text: leaf.text\n  });\n};\n/**\r\n * Leaf strings with text in them.\r\n */\n\n\nvar TextString = props => {\n  var {\n    text,\n    isTrailing = false\n  } = props;\n  var ref = useRef(null);\n  var forceUpdateCount = useRef(0);\n\n  if (ref.current && ref.current.textContent !== text) {\n    forceUpdateCount.current += 1;\n  } // This component may have skipped rendering due to native operations being\n  // applied. If an undo is performed React will see the old and new shadow DOM\n  // match and not apply an update. Forces each render to actually reconcile.\n\n\n  return /*#__PURE__*/React.createElement(\"span\", {\n    \"data-slate-string\": true,\n    ref: ref,\n    key: forceUpdateCount.current\n  }, text, isTrailing ? '\\n' : null);\n};\n/**\r\n * Leaf strings without text, render as zero-width strings.\r\n */\n\n\nvar ZeroWidthString = props => {\n  var {\n    length = 0,\n    isLineBreak = false\n  } = props;\n  return /*#__PURE__*/React.createElement(\"span\", {\n    \"data-slate-zero-width\": isLineBreak ? 'n' : 'z',\n    \"data-slate-length\": length\n  }, '\\uFEFF', isLineBreak ? /*#__PURE__*/React.createElement(\"br\", null) : null);\n};\n\n/**\r\n * Two weak maps that allow us rebuild a path given a node. They are populated\r\n * at render time such that after a render occurs we can always backtrack.\r\n */\nvar NODE_TO_INDEX = new WeakMap();\nvar NODE_TO_PARENT = new WeakMap();\n/**\r\n * Weak maps that allow us to go between Slate nodes and DOM nodes. These\r\n * are used to resolve DOM event-related logic into Slate actions.\r\n */\n\nvar EDITOR_TO_WINDOW = new WeakMap();\nvar EDITOR_TO_ELEMENT = new WeakMap();\nvar ELEMENT_TO_NODE = new WeakMap();\nvar NODE_TO_ELEMENT = new WeakMap();\nvar NODE_TO_KEY = new WeakMap();\nvar EDITOR_TO_KEY_TO_ELEMENT = new WeakMap();\n/**\r\n * Weak maps for storing editor-related state.\r\n */\n\nvar IS_READ_ONLY = new WeakMap();\nvar IS_FOCUSED = new WeakMap();\n/**\r\n * Weak map for associating the context `onChange` context with the plugin.\r\n */\n\nvar EDITOR_TO_ON_CHANGE = new WeakMap();\nvar EDITOR_TO_RESTORE_DOM = new WeakMap();\n/**\r\n * Symbols.\r\n */\n\nvar PLACEHOLDER_SYMBOL = Symbol('placeholder');\n\n/**\r\n * Individual leaves in a text node with unique formatting.\r\n */\n\nvar Leaf = props => {\n  var {\n    leaf,\n    isLast,\n    text,\n    parent,\n    renderPlaceholder,\n    renderLeaf = props => /*#__PURE__*/React.createElement(DefaultLeaf, Object.assign({}, props))\n  } = props;\n  var placeholderRef = useRef(null);\n  useEffect(() => {\n    var placeholderEl = placeholderRef === null || placeholderRef === void 0 ? void 0 : placeholderRef.current;\n    var editorEl = document.querySelector('[data-slate-editor=\"true\"]');\n\n    if (!placeholderEl || !editorEl) {\n      return;\n    }\n\n    editorEl.style.minHeight = \"\".concat(placeholderEl.clientHeight, \"px\");\n    return () => {\n      editorEl.style.minHeight = 'auto';\n    };\n  }, [placeholderRef, leaf]);\n  var children = /*#__PURE__*/React.createElement(String, {\n    isLast: isLast,\n    leaf: leaf,\n    parent: parent,\n    text: text\n  });\n\n  if (leaf[PLACEHOLDER_SYMBOL]) {\n    var placeholderProps = {\n      children: leaf.placeholder,\n      attributes: {\n        'data-slate-placeholder': true,\n        style: {\n          position: 'absolute',\n          pointerEvents: 'none',\n          width: '100%',\n          maxWidth: '100%',\n          display: 'block',\n          opacity: '0.333',\n          userSelect: 'none',\n          textDecoration: 'none'\n        },\n        contentEditable: false,\n        ref: placeholderRef\n      }\n    };\n    children = /*#__PURE__*/React.createElement(React.Fragment, null, renderPlaceholder(placeholderProps), children);\n  } // COMPAT: Having the `data-` attributes on these leaf elements ensures that\n  // in certain misbehaving browsers they aren't weirdly cloned/destroyed by\n  // contenteditable behaviors. (2019/05/08)\n\n\n  var attributes = {\n    'data-slate-leaf': true\n  };\n  return renderLeaf({\n    attributes,\n    children,\n    leaf,\n    text\n  });\n};\n\nvar MemoizedLeaf = /*#__PURE__*/React.memo(Leaf, (prev, next) => {\n  return next.parent === prev.parent && next.isLast === prev.isLast && next.renderLeaf === prev.renderLeaf && next.renderPlaceholder === prev.renderPlaceholder && next.text === prev.text && Text$1.equals(next.leaf, prev.leaf) && next.leaf[PLACEHOLDER_SYMBOL] === prev.leaf[PLACEHOLDER_SYMBOL];\n});\nvar DefaultLeaf = props => {\n  var {\n    attributes,\n    children\n  } = props;\n  return /*#__PURE__*/React.createElement(\"span\", Object.assign({}, attributes), children);\n};\n\nvar IS_IOS = typeof navigator !== 'undefined' && typeof window !== 'undefined' && /iPad|iPhone|iPod/.test(navigator.userAgent) && !window.MSStream;\nvar IS_APPLE = typeof navigator !== 'undefined' && /Mac OS X/.test(navigator.userAgent);\nvar IS_ANDROID = typeof navigator !== 'undefined' && /Android/.test(navigator.userAgent);\nvar IS_FIREFOX = typeof navigator !== 'undefined' && /^(?!.*Seamonkey)(?=.*Firefox).*/i.test(navigator.userAgent);\nvar IS_SAFARI = typeof navigator !== 'undefined' && /Version\\/[\\d\\.]+.*Safari/.test(navigator.userAgent); // \"modern\" Edge was released at 79.x\n\nvar IS_EDGE_LEGACY = typeof navigator !== 'undefined' && /Edge?\\/(?:[0-6][0-9]|[0-7][0-8])/i.test(navigator.userAgent);\nvar IS_CHROME = typeof navigator !== 'undefined' && /Chrome/i.test(navigator.userAgent); // Native `beforeInput` events don't work well with react on Chrome 75\n// and older, Chrome 76+ can use `beforeInput` though.\n\nvar IS_CHROME_LEGACY = typeof navigator !== 'undefined' && /Chrome?\\/(?:[0-7][0-5]|[0-6][0-9])/i.test(navigator.userAgent); // Firefox did not support `beforeInput` until `v87`.\n\nvar IS_FIREFOX_LEGACY = typeof navigator !== 'undefined' && /^(?!.*Seamonkey)(?=.*Firefox\\/(?:[0-7][0-9]|[0-8][0-6])).*/i.test(navigator.userAgent); // qq browser\n\nvar IS_QQBROWSER = typeof navigator !== 'undefined' && /.*QQBrowser/.test(navigator.userAgent); // Check if DOM is available as React does internally.\n// https://github.com/facebook/react/blob/master/packages/shared/ExecutionEnvironment.js\n\nvar CAN_USE_DOM = !!(typeof window !== 'undefined' && typeof window.document !== 'undefined' && typeof window.document.createElement !== 'undefined'); // COMPAT: Firefox/Edge Legacy don't support the `beforeinput` event\n// Chrome Legacy doesn't support `beforeinput` correctly\n\nvar HAS_BEFORE_INPUT_SUPPORT = !IS_CHROME_LEGACY && !IS_EDGE_LEGACY && // globalThis is undefined in older browsers\ntypeof globalThis !== 'undefined' && globalThis.InputEvent && // @ts-ignore The `getTargetRanges` property isn't recognized.\ntypeof globalThis.InputEvent.prototype.getTargetRanges === 'function';\n\n/**\r\n * Prevent warning on SSR by falling back to useEffect when DOM isn't available\r\n */\n\nvar useIsomorphicLayoutEffect = CAN_USE_DOM ? useLayoutEffect : useEffect;\n\nvar _excluded$3 = [\"anchor\", \"focus\"],\n    _excluded2 = [\"anchor\", \"focus\"];\nvar shallowCompare = (obj1, obj2) => Object.keys(obj1).length === Object.keys(obj2).length && Object.keys(obj1).every(key => obj2.hasOwnProperty(key) && obj1[key] === obj2[key]);\n/**\r\n * Check if a list of decorator ranges are equal to another.\r\n *\r\n * PERF: this requires the two lists to also have the ranges inside them in the\r\n * same order, but this is an okay constraint for us since decorations are\r\n * kept in order, and the odd case where they aren't is okay to re-render for.\r\n */\n\nvar isDecoratorRangeListEqual = (list, another) => {\n  if (list.length !== another.length) {\n    return false;\n  }\n\n  for (var i = 0; i < list.length; i++) {\n    var range = list[i];\n    var other = another[i];\n\n    var rangeOwnProps = _objectWithoutProperties(range, _excluded$3);\n\n    var otherOwnProps = _objectWithoutProperties(other, _excluded2);\n\n    if (!Range.equals(range, other) || range[PLACEHOLDER_SYMBOL] !== other[PLACEHOLDER_SYMBOL] || !shallowCompare(rangeOwnProps, otherOwnProps)) {\n      return false;\n    }\n  }\n\n  return true;\n};\n\n/**\r\n * Text.\r\n */\n\nvar Text = props => {\n  var {\n    decorations,\n    isLast,\n    parent,\n    renderPlaceholder,\n    renderLeaf,\n    text\n  } = props;\n  var editor = useSlateStatic();\n  var ref = useRef(null);\n  var leaves = Text$1.decorations(text, decorations);\n  var key = ReactEditor.findKey(editor, text);\n  var children = [];\n\n  for (var i = 0; i < leaves.length; i++) {\n    var leaf = leaves[i];\n    children.push( /*#__PURE__*/React.createElement(MemoizedLeaf, {\n      isLast: isLast && i === leaves.length - 1,\n      key: \"\".concat(key.id, \"-\").concat(i),\n      renderPlaceholder: renderPlaceholder,\n      leaf: leaf,\n      text: text,\n      parent: parent,\n      renderLeaf: renderLeaf\n    }));\n  } // Update element-related weak maps with the DOM element ref.\n\n\n  useIsomorphicLayoutEffect(() => {\n    var KEY_TO_ELEMENT = EDITOR_TO_KEY_TO_ELEMENT.get(editor);\n\n    if (ref.current) {\n      KEY_TO_ELEMENT === null || KEY_TO_ELEMENT === void 0 ? void 0 : KEY_TO_ELEMENT.set(key, ref.current);\n      NODE_TO_ELEMENT.set(text, ref.current);\n      ELEMENT_TO_NODE.set(ref.current, text);\n    } else {\n      KEY_TO_ELEMENT === null || KEY_TO_ELEMENT === void 0 ? void 0 : KEY_TO_ELEMENT.delete(key);\n      NODE_TO_ELEMENT.delete(text);\n    }\n  });\n  return /*#__PURE__*/React.createElement(\"span\", {\n    \"data-slate-node\": \"text\",\n    ref: ref\n  }, children);\n};\n\nvar MemoizedText = /*#__PURE__*/React.memo(Text, (prev, next) => {\n  return next.parent === prev.parent && next.isLast === prev.isLast && next.renderLeaf === prev.renderLeaf && next.text === prev.text && isDecoratorRangeListEqual(next.decorations, prev.decorations);\n});\n\n/**\r\n * Element.\r\n */\n\nvar Element = props => {\n  var {\n    decorations,\n    element,\n    renderElement = p => /*#__PURE__*/React.createElement(DefaultElement, Object.assign({}, p)),\n    renderPlaceholder,\n    renderLeaf,\n    selection\n  } = props;\n  var ref = useRef(null);\n  var editor = useSlateStatic();\n  var readOnly = useReadOnly();\n  var isInline = editor.isInline(element);\n  var key = ReactEditor.findKey(editor, element);\n  var children = useChildren({\n    decorations,\n    node: element,\n    renderElement,\n    renderPlaceholder,\n    renderLeaf,\n    selection\n  }); // Attributes that the developer must mix into the element in their\n  // custom node renderer component.\n\n  var attributes = {\n    'data-slate-node': 'element',\n    ref\n  };\n\n  if (isInline) {\n    attributes['data-slate-inline'] = true;\n  } // If it's a block node with inline children, add the proper `dir` attribute\n  // for text direction.\n\n\n  if (!isInline && Editor.hasInlines(editor, element)) {\n    var text = Node.string(element);\n    var dir = getDirection(text);\n\n    if (dir === 'rtl') {\n      attributes.dir = dir;\n    }\n  } // If it's a void node, wrap the children in extra void-specific elements.\n\n\n  if (Editor.isVoid(editor, element)) {\n    attributes['data-slate-void'] = true;\n\n    if (!readOnly && isInline) {\n      attributes.contentEditable = false;\n    }\n\n    var Tag = isInline ? 'span' : 'div';\n    var [[_text]] = Node.texts(element);\n    children = readOnly ? null : /*#__PURE__*/React.createElement(Tag, {\n      \"data-slate-spacer\": true,\n      style: {\n        height: '0',\n        color: 'transparent',\n        outline: 'none',\n        position: 'absolute'\n      }\n    }, /*#__PURE__*/React.createElement(MemoizedText, {\n      renderPlaceholder: renderPlaceholder,\n      decorations: [],\n      isLast: false,\n      parent: element,\n      text: _text\n    }));\n    NODE_TO_INDEX.set(_text, 0);\n    NODE_TO_PARENT.set(_text, element);\n  } // Update element-related weak maps with the DOM element ref.\n\n\n  useIsomorphicLayoutEffect(() => {\n    var KEY_TO_ELEMENT = EDITOR_TO_KEY_TO_ELEMENT.get(editor);\n\n    if (ref.current) {\n      KEY_TO_ELEMENT === null || KEY_TO_ELEMENT === void 0 ? void 0 : KEY_TO_ELEMENT.set(key, ref.current);\n      NODE_TO_ELEMENT.set(element, ref.current);\n      ELEMENT_TO_NODE.set(ref.current, element);\n    } else {\n      KEY_TO_ELEMENT === null || KEY_TO_ELEMENT === void 0 ? void 0 : KEY_TO_ELEMENT.delete(key);\n      NODE_TO_ELEMENT.delete(element);\n    }\n  });\n  return renderElement({\n    attributes,\n    children,\n    element\n  });\n};\n\nvar MemoizedElement = /*#__PURE__*/React.memo(Element, (prev, next) => {\n  return prev.element === next.element && prev.renderElement === next.renderElement && prev.renderLeaf === next.renderLeaf && isDecoratorRangeListEqual(prev.decorations, next.decorations) && (prev.selection === next.selection || !!prev.selection && !!next.selection && Range.equals(prev.selection, next.selection));\n});\n/**\r\n * The default element renderer.\r\n */\n\nvar DefaultElement = props => {\n  var {\n    attributes,\n    children,\n    element\n  } = props;\n  var editor = useSlateStatic();\n  var Tag = editor.isInline(element) ? 'span' : 'div';\n  return /*#__PURE__*/React.createElement(Tag, Object.assign({}, attributes, {\n    style: {\n      position: 'relative'\n    }\n  }), children);\n};\n\n/**\r\n * A React context for sharing the editor object.\r\n */\n\nvar EditorContext = /*#__PURE__*/createContext(null);\n/**\r\n * Get the current editor object from the React context.\r\n */\n\nvar useSlateStatic = () => {\n  var editor = useContext(EditorContext);\n\n  if (!editor) {\n    throw new Error(\"The `useSlateStatic` hook must be used inside the <Slate> component's context.\");\n  }\n\n  return editor;\n};\n\n/**\r\n * A React context for sharing the `decorate` prop of the editable.\r\n */\n\nvar DecorateContext = /*#__PURE__*/createContext(() => []);\n/**\r\n * Get the current `decorate` prop of the editable.\r\n */\n\nvar useDecorate = () => {\n  return useContext(DecorateContext);\n};\n\n/**\r\n * A React context for sharing the `selected` state of an element.\r\n */\n\nvar SelectedContext = /*#__PURE__*/createContext(false);\n/**\r\n * Get the current `selected` state of an element.\r\n */\n\nvar useSelected = () => {\n  return useContext(SelectedContext);\n};\n\n/**\r\n * Children.\r\n */\n\nvar useChildren = props => {\n  var {\n    decorations,\n    node,\n    renderElement,\n    renderPlaceholder,\n    renderLeaf,\n    selection\n  } = props;\n  var decorate = useDecorate();\n  var editor = useSlateStatic();\n  var path = ReactEditor.findPath(editor, node);\n  var children = [];\n  var isLeafBlock = Element$1.isElement(node) && !editor.isInline(node) && Editor.hasInlines(editor, node);\n\n  for (var i = 0; i < node.children.length; i++) {\n    var p = path.concat(i);\n    var n = node.children[i];\n    var key = ReactEditor.findKey(editor, n);\n    var range = Editor.range(editor, p);\n    var sel = selection && Range.intersection(range, selection);\n    var ds = decorate([n, p]);\n\n    for (var dec of decorations) {\n      var d = Range.intersection(dec, range);\n\n      if (d) {\n        ds.push(d);\n      }\n    }\n\n    if (Element$1.isElement(n)) {\n      children.push( /*#__PURE__*/React.createElement(SelectedContext.Provider, {\n        key: \"provider-\".concat(key.id),\n        value: !!sel\n      }, /*#__PURE__*/React.createElement(MemoizedElement, {\n        decorations: ds,\n        element: n,\n        key: key.id,\n        renderElement: renderElement,\n        renderPlaceholder: renderPlaceholder,\n        renderLeaf: renderLeaf,\n        selection: sel\n      })));\n    } else {\n      children.push( /*#__PURE__*/React.createElement(MemoizedText, {\n        decorations: ds,\n        key: key.id,\n        isLast: isLeafBlock && i === node.children.length - 1,\n        parent: node,\n        renderPlaceholder: renderPlaceholder,\n        renderLeaf: renderLeaf,\n        text: n\n      }));\n    }\n\n    NODE_TO_INDEX.set(n, i);\n    NODE_TO_PARENT.set(n, node);\n  }\n\n  return children;\n};\n\n/**\r\n * Hotkey mappings for each platform.\r\n */\n\nvar HOTKEYS = {\n  bold: 'mod+b',\n  compose: ['down', 'left', 'right', 'up', 'backspace', 'enter'],\n  moveBackward: 'left',\n  moveForward: 'right',\n  moveWordBackward: 'ctrl+left',\n  moveWordForward: 'ctrl+right',\n  deleteBackward: 'shift?+backspace',\n  deleteForward: 'shift?+delete',\n  extendBackward: 'shift+left',\n  extendForward: 'shift+right',\n  italic: 'mod+i',\n  splitBlock: 'shift?+enter',\n  undo: 'mod+z'\n};\nvar APPLE_HOTKEYS = {\n  moveLineBackward: 'opt+up',\n  moveLineForward: 'opt+down',\n  moveWordBackward: 'opt+left',\n  moveWordForward: 'opt+right',\n  deleteBackward: ['ctrl+backspace', 'ctrl+h'],\n  deleteForward: ['ctrl+delete', 'ctrl+d'],\n  deleteLineBackward: 'cmd+shift?+backspace',\n  deleteLineForward: ['cmd+shift?+delete', 'ctrl+k'],\n  deleteWordBackward: 'opt+shift?+backspace',\n  deleteWordForward: 'opt+shift?+delete',\n  extendLineBackward: 'opt+shift+up',\n  extendLineForward: 'opt+shift+down',\n  redo: 'cmd+shift+z',\n  transposeCharacter: 'ctrl+t'\n};\nvar WINDOWS_HOTKEYS = {\n  deleteWordBackward: 'ctrl+shift?+backspace',\n  deleteWordForward: 'ctrl+shift?+delete',\n  redo: ['ctrl+y', 'ctrl+shift+z']\n};\n/**\r\n * Create a platform-aware hotkey checker.\r\n */\n\nvar create = key => {\n  var generic = HOTKEYS[key];\n  var apple = APPLE_HOTKEYS[key];\n  var windows = WINDOWS_HOTKEYS[key];\n  var isGeneric = generic && isKeyHotkey(generic);\n  var isApple = apple && isKeyHotkey(apple);\n  var isWindows = windows && isKeyHotkey(windows);\n  return event => {\n    if (isGeneric && isGeneric(event)) return true;\n    if (IS_APPLE && isApple && isApple(event)) return true;\n    if (!IS_APPLE && isWindows && isWindows(event)) return true;\n    return false;\n  };\n};\n/**\r\n * Hotkeys.\r\n */\n\n\nvar Hotkeys = {\n  isBold: create('bold'),\n  isCompose: create('compose'),\n  isMoveBackward: create('moveBackward'),\n  isMoveForward: create('moveForward'),\n  isDeleteBackward: create('deleteBackward'),\n  isDeleteForward: create('deleteForward'),\n  isDeleteLineBackward: create('deleteLineBackward'),\n  isDeleteLineForward: create('deleteLineForward'),\n  isDeleteWordBackward: create('deleteWordBackward'),\n  isDeleteWordForward: create('deleteWordForward'),\n  isExtendBackward: create('extendBackward'),\n  isExtendForward: create('extendForward'),\n  isExtendLineBackward: create('extendLineBackward'),\n  isExtendLineForward: create('extendLineForward'),\n  isItalic: create('italic'),\n  isMoveLineBackward: create('moveLineBackward'),\n  isMoveLineForward: create('moveLineForward'),\n  isMoveWordBackward: create('moveWordBackward'),\n  isMoveWordForward: create('moveWordForward'),\n  isRedo: create('redo'),\n  isSplitBlock: create('splitBlock'),\n  isTransposeCharacter: create('transposeCharacter'),\n  isUndo: create('undo')\n};\n\n/**\r\n * A React context for sharing the `readOnly` state of the editor.\r\n */\n\nvar ReadOnlyContext = /*#__PURE__*/createContext(false);\n/**\r\n * Get the current `readOnly` state of the editor.\r\n */\n\nvar useReadOnly = () => {\n  return useContext(ReadOnlyContext);\n};\n\n/**\r\n * A React context for sharing the editor object, in a way that re-renders the\r\n * context whenever changes occur.\r\n */\n\nvar SlateContext = /*#__PURE__*/createContext(null);\n/**\r\n * Get the current editor object from the React context.\r\n */\n\nvar useSlate = () => {\n  var context = useContext(SlateContext);\n\n  if (!context) {\n    throw new Error(\"The `useSlate` hook must be used inside the <Slate> component's context.\");\n  }\n\n  var [editor] = context;\n  return editor;\n};\n\n/**\r\n * Types.\r\n */\n/**\r\n * Returns the host window of a DOM node\r\n */\n\nvar getDefaultView = value => {\n  return value && value.ownerDocument && value.ownerDocument.defaultView || null;\n};\n/**\r\n * Check if a DOM node is a comment node.\r\n */\n\nvar isDOMComment = value => {\n  return isDOMNode(value) && value.nodeType === 8;\n};\n/**\r\n * Check if a DOM node is an element node.\r\n */\n\nvar isDOMElement = value => {\n  return isDOMNode(value) && value.nodeType === 1;\n};\n/**\r\n * Check if a value is a DOM node.\r\n */\n\nvar isDOMNode = value => {\n  var window = getDefaultView(value);\n  return !!window && value instanceof window.Node;\n};\n/**\r\n * Check if a value is a DOM selection.\r\n */\n\nvar isDOMSelection = value => {\n  var window = value && value.anchorNode && getDefaultView(value.anchorNode);\n  return !!window && value instanceof window.Selection;\n};\n/**\r\n * Check if a DOM node is an element node.\r\n */\n\nvar isDOMText = value => {\n  return isDOMNode(value) && value.nodeType === 3;\n};\n/**\r\n * Checks whether a paste event is a plaintext-only event.\r\n */\n\nvar isPlainTextOnlyPaste = event => {\n  return event.clipboardData && event.clipboardData.getData('text/plain') !== '' && event.clipboardData.types.length === 1;\n};\n/**\r\n * Normalize a DOM point so that it always refers to a text node.\r\n */\n\nvar normalizeDOMPoint = domPoint => {\n  var [node, offset] = domPoint; // If it's an element node, its offset refers to the index of its children\n  // including comment nodes, so try to find the right text child node.\n\n  if (isDOMElement(node) && node.childNodes.length) {\n    var isLast = offset === node.childNodes.length;\n    var index = isLast ? offset - 1 : offset;\n    [node, index] = getEditableChildAndIndex(node, index, isLast ? 'backward' : 'forward'); // If the editable child found is in front of input offset, we instead seek to its end\n\n    isLast = index < offset; // If the node has children, traverse until we have a leaf node. Leaf nodes\n    // can be either text nodes, or other void DOM nodes.\n\n    while (isDOMElement(node) && node.childNodes.length) {\n      var i = isLast ? node.childNodes.length - 1 : 0;\n      node = getEditableChild(node, i, isLast ? 'backward' : 'forward');\n    } // Determine the new offset inside the text node.\n\n\n    offset = isLast && node.textContent != null ? node.textContent.length : 0;\n  } // Return the node and offset.\n\n\n  return [node, offset];\n};\n/**\r\n * Determines wether the active element is nested within a shadowRoot\r\n */\n\nvar hasShadowRoot = () => {\n  return !!(window.document.activeElement && window.document.activeElement.shadowRoot);\n};\n/**\r\n * Get the nearest editable child and index at `index` in a `parent`, preferring\r\n * `direction`.\r\n */\n\nvar getEditableChildAndIndex = (parent, index, direction) => {\n  var {\n    childNodes\n  } = parent;\n  var child = childNodes[index];\n  var i = index;\n  var triedForward = false;\n  var triedBackward = false; // While the child is a comment node, or an element node with no children,\n  // keep iterating to find a sibling non-void, non-comment node.\n\n  while (isDOMComment(child) || isDOMElement(child) && child.childNodes.length === 0 || isDOMElement(child) && child.getAttribute('contenteditable') === 'false') {\n    if (triedForward && triedBackward) {\n      break;\n    }\n\n    if (i >= childNodes.length) {\n      triedForward = true;\n      i = index - 1;\n      direction = 'backward';\n      continue;\n    }\n\n    if (i < 0) {\n      triedBackward = true;\n      i = index + 1;\n      direction = 'forward';\n      continue;\n    }\n\n    child = childNodes[i];\n    index = i;\n    i += direction === 'forward' ? 1 : -1;\n  }\n\n  return [child, index];\n};\n/**\r\n * Get the nearest editable child at `index` in a `parent`, preferring\r\n * `direction`.\r\n */\n\nvar getEditableChild = (parent, index, direction) => {\n  var [child] = getEditableChildAndIndex(parent, index, direction);\n  return child;\n};\n/**\r\n * Get a plaintext representation of the content of a node, accounting for block\r\n * elements which get a newline appended.\r\n *\r\n * The domNode must be attached to the DOM.\r\n */\n\nvar getPlainText = domNode => {\n  var text = '';\n\n  if (isDOMText(domNode) && domNode.nodeValue) {\n    return domNode.nodeValue;\n  }\n\n  if (isDOMElement(domNode)) {\n    for (var childNode of Array.from(domNode.childNodes)) {\n      text += getPlainText(childNode);\n    }\n\n    var display = getComputedStyle(domNode).getPropertyValue('display');\n\n    if (display === 'block' || display === 'list' || domNode.tagName === 'BR') {\n      text += '\\n';\n    }\n  }\n\n  return text;\n};\n/**\r\n * Get x-slate-fragment attribute from data-slate-fragment\r\n */\n\nvar catchSlateFragment = /data-slate-fragment=\"(.+?)\"/m;\nvar getSlateFragmentAttribute = dataTransfer => {\n  var htmlData = dataTransfer.getData('text/html');\n  var [, fragment] = htmlData.match(catchSlateFragment) || [];\n  return fragment;\n};\n/**\r\n * Get the x-slate-fragment attribute that exist in text/html data\r\n * and append it to the DataTransfer object\r\n */\n\nvar getClipboardData = dataTransfer => {\n  if (!dataTransfer.getData('application/x-slate-fragment')) {\n    var fragment = getSlateFragmentAttribute(dataTransfer);\n\n    if (fragment) {\n      var clipboardData = new DataTransfer();\n      dataTransfer.types.forEach(type => {\n        clipboardData.setData(type, dataTransfer.getData(type));\n      });\n      clipboardData.setData('application/x-slate-fragment', fragment);\n      return clipboardData;\n    }\n  }\n\n  return dataTransfer;\n};\n\nvar AS_NATIVE = new WeakMap();\nvar NATIVE_OPERATIONS = new WeakMap();\n/**\r\n * `asNative` queues operations as native, meaning native browser events will\r\n * not have been prevented, and we need to flush the operations\r\n * after the native events have propogated to the DOM.\r\n * @param {Editor} editor - Editor on which the operations are being applied\r\n * @param {callback} fn - Function containing .exec calls which will be queued as native\r\n */\n\nvar asNative = function asNative(editor, fn) {\n  var {\n    onFlushed\n  } = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n  var isNative = AS_NATIVE.get(editor);\n  AS_NATIVE.set(editor, true);\n\n  try {\n    fn();\n  } finally {\n    if (isNative !== undefined) {\n      AS_NATIVE.set(editor, isNative);\n    }\n  }\n\n  if (!NATIVE_OPERATIONS.get(editor)) {\n    onFlushed === null || onFlushed === void 0 ? void 0 : onFlushed();\n  }\n};\n/**\r\n * `flushNativeEvents` applies any queued native events.\r\n * @param {Editor} editor - Editor on which the operations are being applied\r\n */\n\nvar flushNativeEvents = editor => {\n  var nativeOps = NATIVE_OPERATIONS.get(editor); // Clear list _before_ applying, as we might flush\n  // events in each op, as well.\n\n  NATIVE_OPERATIONS.delete(editor);\n\n  if (nativeOps) {\n    Editor.withoutNormalizing(editor, () => {\n      nativeOps.forEach(op => {\n        editor.apply(op);\n      });\n    });\n  }\n};\n\nvar _excluded$2 = [\"autoFocus\", \"decorate\", \"onDOMBeforeInput\", \"placeholder\", \"readOnly\", \"renderElement\", \"renderLeaf\", \"renderPlaceholder\", \"scrollSelectionIntoView\", \"style\", \"as\"];\n\nfunction ownKeys$2(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) { symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); } keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread$2(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys$2(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys$2(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nvar Children = props => /*#__PURE__*/React.createElement(React.Fragment, null, useChildren(props));\n/**\r\n * Editable.\r\n */\n\n\nvar Editable$1 = props => {\n  var {\n    autoFocus,\n    decorate = defaultDecorate,\n    onDOMBeforeInput: propsOnDOMBeforeInput,\n    placeholder,\n    readOnly = false,\n    renderElement,\n    renderLeaf,\n    renderPlaceholder = props => /*#__PURE__*/React.createElement(DefaultPlaceholder, Object.assign({}, props)),\n    scrollSelectionIntoView = defaultScrollSelectionIntoView,\n    style = {},\n    as: Component = 'div'\n  } = props,\n      attributes = _objectWithoutProperties(props, _excluded$2);\n\n  var editor = useSlate(); // Rerender editor when composition status changed\n\n  var [isComposing, setIsComposing] = useState(false);\n  var ref = useRef(null); // Update internal state on each render.\n\n  IS_READ_ONLY.set(editor, readOnly); // Keep track of some state for the event handler logic.\n\n  var state = useMemo(() => ({\n    isComposing: false,\n    hasInsertPrefixInCompositon: false,\n    isDraggingInternally: false,\n    isUpdatingSelection: false,\n    latestElement: null\n  }), []); // Whenever the editor updates...\n\n  useIsomorphicLayoutEffect(() => {\n    // Update element-related weak maps with the DOM element ref.\n    var window;\n\n    if (ref.current && (window = getDefaultView(ref.current))) {\n      EDITOR_TO_WINDOW.set(editor, window);\n      EDITOR_TO_ELEMENT.set(editor, ref.current);\n      NODE_TO_ELEMENT.set(editor, ref.current);\n      ELEMENT_TO_NODE.set(ref.current, editor);\n    } else {\n      NODE_TO_ELEMENT.delete(editor);\n    } // Make sure the DOM selection state is in sync.\n\n\n    var {\n      selection\n    } = editor;\n    var root = ReactEditor.findDocumentOrShadowRoot(editor);\n    var domSelection = root.getSelection();\n\n    if (state.isComposing || !domSelection || !ReactEditor.isFocused(editor)) {\n      return;\n    }\n\n    var hasDomSelection = domSelection.type !== 'None'; // If the DOM selection is properly unset, we're done.\n\n    if (!selection && !hasDomSelection) {\n      return;\n    } // verify that the dom selection is in the editor\n\n\n    var editorElement = EDITOR_TO_ELEMENT.get(editor);\n    var hasDomSelectionInEditor = false;\n\n    if (editorElement.contains(domSelection.anchorNode) && editorElement.contains(domSelection.focusNode)) {\n      hasDomSelectionInEditor = true;\n    } // If the DOM selection is in the editor and the editor selection is already correct, we're done.\n\n\n    if (hasDomSelection && hasDomSelectionInEditor && selection) {\n      var slateRange = ReactEditor.toSlateRange(editor, domSelection, {\n        exactMatch: false\n      });\n\n      if (slateRange && Range.equals(slateRange, selection)) {\n        return;\n      }\n    } // when <Editable/> is being controlled through external value\n    // then its children might just change - DOM responds to it on its own\n    // but Slate's value is not being updated through any operation\n    // and thus it doesn't transform selection on its own\n\n\n    if (selection && !ReactEditor.hasRange(editor, selection)) {\n      editor.selection = ReactEditor.toSlateRange(editor, domSelection, {\n        exactMatch: false\n      });\n      return;\n    } // Otherwise the DOM selection is out of sync, so update it.\n\n\n    state.isUpdatingSelection = true;\n    var newDomRange = selection && ReactEditor.toDOMRange(editor, selection);\n\n    if (newDomRange) {\n      if (Range.isBackward(selection)) {\n        domSelection.setBaseAndExtent(newDomRange.endContainer, newDomRange.endOffset, newDomRange.startContainer, newDomRange.startOffset);\n      } else {\n        domSelection.setBaseAndExtent(newDomRange.startContainer, newDomRange.startOffset, newDomRange.endContainer, newDomRange.endOffset);\n      }\n\n      scrollSelectionIntoView(editor, newDomRange);\n    } else {\n      domSelection.removeAllRanges();\n    }\n\n    setTimeout(() => {\n      // COMPAT: In Firefox, it's not enough to create a range, you also need\n      // to focus the contenteditable element too. (2016/11/16)\n      if (newDomRange && IS_FIREFOX) {\n        var el = ReactEditor.toDOMNode(editor, editor);\n        el.focus();\n      }\n\n      state.isUpdatingSelection = false;\n    });\n  }); // The autoFocus TextareaHTMLAttribute doesn't do anything on a div, so it\n  // needs to be manually focused.\n\n  useEffect(() => {\n    if (ref.current && autoFocus) {\n      ref.current.focus();\n    }\n  }, [autoFocus]); // Listen on the native `beforeinput` event to get real \"Level 2\" events. This\n  // is required because React's `beforeinput` is fake and never really attaches\n  // to the real event sadly. (2019/11/01)\n  // https://github.com/facebook/react/issues/11211\n\n  var onDOMBeforeInput = useCallback(event => {\n    if (!readOnly && hasEditableTarget(editor, event.target) && !isDOMEventHandled(event, propsOnDOMBeforeInput)) {\n      var {\n        selection\n      } = editor;\n      var {\n        inputType: type\n      } = event;\n      var data = event.dataTransfer || event.data || undefined; // These two types occur while a user is composing text and can't be\n      // cancelled. Let them through and wait for the composition to end.\n\n      if (type === 'insertCompositionText' || type === 'deleteCompositionText') {\n        return;\n      }\n\n      var native = false;\n\n      if (type === 'insertText' && selection && Range.isCollapsed(selection) && // Only use native character insertion for single characters a-z or space for now.\n      // Long-press events (hold a + press 4 = ä) to choose a special character otherwise\n      // causes duplicate inserts.\n      event.data && event.data.length === 1 && /[a-z ]/i.test(event.data) && // Chrome seems to have issues correctly editing the start of nodes.\n      // When there is an inline element, e.g. a link, and you select\n      // right after it (the start of the next node).\n      selection.anchor.offset !== 0) {\n        native = true; // Skip native if there are marks, as\n        // `insertText` will insert a node, not just text.\n\n        if (editor.marks) {\n          native = false;\n        } // and because of the selection moving in `insertText` (create-editor.ts).\n\n\n        var {\n          anchor\n        } = selection;\n        var inline = Editor.above(editor, {\n          at: anchor,\n          match: n => Editor.isInline(editor, n),\n          mode: 'highest'\n        });\n\n        if (inline) {\n          var [, inlinePath] = inline;\n\n          if (Editor.isEnd(editor, selection.anchor, inlinePath)) {\n            native = false;\n          }\n        }\n      }\n\n      if (!native) {\n        event.preventDefault();\n      } // COMPAT: For the deleting forward/backward input types we don't want\n      // to change the selection because it is the range that will be deleted,\n      // and those commands determine that for themselves.\n\n\n      if (!type.startsWith('delete') || type.startsWith('deleteBy')) {\n        var [targetRange] = event.getTargetRanges();\n\n        if (targetRange) {\n          var range = ReactEditor.toSlateRange(editor, targetRange, {\n            exactMatch: false\n          });\n\n          if (!selection || !Range.equals(selection, range)) {\n            Transforms.select(editor, range);\n          }\n        }\n      } // COMPAT: If the selection is expanded, even if the command seems like\n      // a delete forward/backward command it should delete the selection.\n\n\n      if (selection && Range.isExpanded(selection) && type.startsWith('delete')) {\n        var direction = type.endsWith('Backward') ? 'backward' : 'forward';\n        Editor.deleteFragment(editor, {\n          direction\n        });\n        return;\n      }\n\n      switch (type) {\n        case 'deleteByComposition':\n        case 'deleteByCut':\n        case 'deleteByDrag':\n          {\n            Editor.deleteFragment(editor);\n            break;\n          }\n\n        case 'deleteContent':\n        case 'deleteContentForward':\n          {\n            Editor.deleteForward(editor);\n            break;\n          }\n\n        case 'deleteContentBackward':\n          {\n            Editor.deleteBackward(editor);\n            break;\n          }\n\n        case 'deleteEntireSoftLine':\n          {\n            Editor.deleteBackward(editor, {\n              unit: 'line'\n            });\n            Editor.deleteForward(editor, {\n              unit: 'line'\n            });\n            break;\n          }\n\n        case 'deleteHardLineBackward':\n          {\n            Editor.deleteBackward(editor, {\n              unit: 'block'\n            });\n            break;\n          }\n\n        case 'deleteSoftLineBackward':\n          {\n            Editor.deleteBackward(editor, {\n              unit: 'line'\n            });\n            break;\n          }\n\n        case 'deleteHardLineForward':\n          {\n            Editor.deleteForward(editor, {\n              unit: 'block'\n            });\n            break;\n          }\n\n        case 'deleteSoftLineForward':\n          {\n            Editor.deleteForward(editor, {\n              unit: 'line'\n            });\n            break;\n          }\n\n        case 'deleteWordBackward':\n          {\n            Editor.deleteBackward(editor, {\n              unit: 'word'\n            });\n            break;\n          }\n\n        case 'deleteWordForward':\n          {\n            Editor.deleteForward(editor, {\n              unit: 'word'\n            });\n            break;\n          }\n\n        case 'insertLineBreak':\n        case 'insertParagraph':\n          {\n            Editor.insertBreak(editor);\n            break;\n          }\n\n        case 'insertFromComposition':\n        case 'insertFromDrop':\n        case 'insertFromPaste':\n        case 'insertFromYank':\n        case 'insertReplacementText':\n        case 'insertText':\n          {\n            if (type === 'insertFromComposition') {\n              // COMPAT: in Safari, `compositionend` is dispatched after the\n              // `beforeinput` for \"insertFromComposition\". But if we wait for it\n              // then we will abort because we're still composing and the selection\n              // won't be updated properly.\n              // https://www.w3.org/TR/input-events-2/\n              state.isComposing && setIsComposing(false);\n              state.isComposing = false;\n            }\n\n            var window = ReactEditor.getWindow(editor);\n\n            if (data instanceof window.DataTransfer) {\n              ReactEditor.insertData(editor, data);\n            } else if (typeof data === 'string') {\n              // Only insertText operations use the native functionality, for now.\n              // Potentially expand to single character deletes, as well.\n              if (native) {\n                asNative(editor, () => Editor.insertText(editor, data), {\n                  onFlushed: () => event.preventDefault()\n                });\n              } else {\n                Editor.insertText(editor, data);\n              }\n            }\n\n            break;\n          }\n      }\n    }\n  }, [readOnly, propsOnDOMBeforeInput]); // Attach a native DOM event handler for `beforeinput` events, because React's\n  // built-in `onBeforeInput` is actually a leaky polyfill that doesn't expose\n  // real `beforeinput` events sadly... (2019/11/04)\n  // https://github.com/facebook/react/issues/11211\n\n  useIsomorphicLayoutEffect(() => {\n    if (ref.current && HAS_BEFORE_INPUT_SUPPORT) {\n      // @ts-ignore The `beforeinput` event isn't recognized.\n      ref.current.addEventListener('beforeinput', onDOMBeforeInput);\n    }\n\n    return () => {\n      if (ref.current && HAS_BEFORE_INPUT_SUPPORT) {\n        // @ts-ignore The `beforeinput` event isn't recognized.\n        ref.current.removeEventListener('beforeinput', onDOMBeforeInput);\n      }\n    };\n  }, [onDOMBeforeInput]); // Listen on the native `selectionchange` event to be able to update any time\n  // the selection changes. This is required because React's `onSelect` is leaky\n  // and non-standard so it doesn't fire until after a selection has been\n  // released. This causes issues in situations where another change happens\n  // while a selection is being dragged.\n\n  var onDOMSelectionChange = useCallback(throttle(() => {\n    if (!readOnly && !state.isComposing && !state.isUpdatingSelection && !state.isDraggingInternally) {\n      var root = ReactEditor.findDocumentOrShadowRoot(editor);\n      var {\n        activeElement\n      } = root;\n      var el = ReactEditor.toDOMNode(editor, editor);\n      var domSelection = root.getSelection();\n\n      if (activeElement === el) {\n        state.latestElement = activeElement;\n        IS_FOCUSED.set(editor, true);\n      } else {\n        IS_FOCUSED.delete(editor);\n      }\n\n      if (!domSelection) {\n        return Transforms.deselect(editor);\n      }\n\n      var {\n        anchorNode,\n        focusNode\n      } = domSelection;\n      var anchorNodeSelectable = hasEditableTarget(editor, anchorNode) || isTargetInsideVoid(editor, anchorNode);\n      var focusNodeSelectable = hasEditableTarget(editor, focusNode) || isTargetInsideVoid(editor, focusNode);\n\n      if (anchorNodeSelectable && focusNodeSelectable) {\n        var range = ReactEditor.toSlateRange(editor, domSelection, {\n          exactMatch: false\n        });\n        Transforms.select(editor, range);\n      } else {\n        Transforms.deselect(editor);\n      }\n    }\n  }, 100), [readOnly]);\n  var scheduleOnDOMSelectionChange = useCallback(() => setTimeout(onDOMSelectionChange), [onDOMSelectionChange]); // Attach a native DOM event handler for `selectionchange`, because React's\n  // built-in `onSelect` handler doesn't fire for all selection changes. It's a\n  // leaky polyfill that only fires on keypresses or clicks. Instead, we want to\n  // fire for any change to the selection inside the editor. (2019/11/04)\n  // https://github.com/facebook/react/issues/5785\n\n  useIsomorphicLayoutEffect(() => {\n    var window = ReactEditor.getWindow(editor);\n    window.document.addEventListener('selectionchange', scheduleOnDOMSelectionChange);\n    return () => {\n      window.document.removeEventListener('selectionchange', scheduleOnDOMSelectionChange);\n    };\n  }, [scheduleOnDOMSelectionChange]);\n  var decorations = decorate([editor, []]);\n\n  if (placeholder && editor.children.length === 1 && Array.from(Node.texts(editor)).length === 1 && Node.string(editor) === '' && !isComposing) {\n    var start = Editor.start(editor, []);\n    decorations.push({\n      [PLACEHOLDER_SYMBOL]: true,\n      placeholder,\n      anchor: start,\n      focus: start\n    });\n  }\n\n  return /*#__PURE__*/React.createElement(ReadOnlyContext.Provider, {\n    value: readOnly\n  }, /*#__PURE__*/React.createElement(DecorateContext.Provider, {\n    value: decorate\n  }, /*#__PURE__*/React.createElement(Component // COMPAT: The Grammarly Chrome extension works by changing the DOM\n  // out from under `contenteditable` elements, which leads to weird\n  // behaviors so we have to disable it like editor. (2017/04/24)\n  , Object.assign({\n    \"data-gramm\": false,\n    role: readOnly ? undefined : 'textbox'\n  }, attributes, {\n    // COMPAT: Certain browsers don't support the `beforeinput` event, so we'd\n    // have to use hacks to make these replacement-based features work.\n    spellCheck: !HAS_BEFORE_INPUT_SUPPORT ? false : attributes.spellCheck,\n    autoCorrect: !HAS_BEFORE_INPUT_SUPPORT ? 'false' : attributes.autoCorrect,\n    autoCapitalize: !HAS_BEFORE_INPUT_SUPPORT ? 'false' : attributes.autoCapitalize,\n    \"data-slate-editor\": true,\n    \"data-slate-node\": \"value\",\n    contentEditable: readOnly ? undefined : true,\n    suppressContentEditableWarning: true,\n    ref: ref,\n    style: _objectSpread$2({\n      // Allow positioning relative to the editable element.\n      position: 'relative',\n      // Prevent the default outline styles.\n      outline: 'none',\n      // Preserve adjacent whitespace and new lines.\n      whiteSpace: 'pre-wrap',\n      // Allow words to break if they are too long.\n      wordWrap: 'break-word'\n    }, style),\n    onBeforeInput: useCallback(event => {\n      // COMPAT: Certain browsers don't support the `beforeinput` event, so we\n      // fall back to React's leaky polyfill instead just for it. It\n      // only works for the `insertText` input type.\n      if (!HAS_BEFORE_INPUT_SUPPORT && !readOnly && !isEventHandled(event, attributes.onBeforeInput) && hasEditableTarget(editor, event.target)) {\n        event.preventDefault();\n\n        if (!state.isComposing) {\n          var text = event.data;\n          Editor.insertText(editor, text);\n        }\n      }\n    }, [readOnly]),\n    onInput: useCallback(event => {\n      // Flush native operations, as native events will have propogated\n      // and we can correctly compare DOM text values in components\n      // to stop rendering, so that browser functions like autocorrect\n      // and spellcheck work as expected.\n      flushNativeEvents(editor);\n    }, []),\n    onBlur: useCallback(event => {\n      if (readOnly || state.isUpdatingSelection || !hasEditableTarget(editor, event.target) || isEventHandled(event, attributes.onBlur)) {\n        return;\n      } // COMPAT: If the current `activeElement` is still the previous\n      // one, this is due to the window being blurred when the tab\n      // itself becomes unfocused, so we want to abort early to allow to\n      // editor to stay focused when the tab becomes focused again.\n\n\n      var root = ReactEditor.findDocumentOrShadowRoot(editor);\n\n      if (state.latestElement === root.activeElement) {\n        return;\n      }\n\n      var {\n        relatedTarget\n      } = event;\n      var el = ReactEditor.toDOMNode(editor, editor); // COMPAT: The event should be ignored if the focus is returning\n      // to the editor from an embedded editable element (eg. an <input>\n      // element inside a void node).\n\n      if (relatedTarget === el) {\n        return;\n      } // COMPAT: The event should be ignored if the focus is moving from\n      // the editor to inside a void node's spacer element.\n\n\n      if (isDOMElement(relatedTarget) && relatedTarget.hasAttribute('data-slate-spacer')) {\n        return;\n      } // COMPAT: The event should be ignored if the focus is moving to a\n      // non- editable section of an element that isn't a void node (eg.\n      // a list item of the check list example).\n\n\n      if (relatedTarget != null && isDOMNode(relatedTarget) && ReactEditor.hasDOMNode(editor, relatedTarget)) {\n        var node = ReactEditor.toSlateNode(editor, relatedTarget);\n\n        if (Element$1.isElement(node) && !editor.isVoid(node)) {\n          return;\n        }\n      } // COMPAT: Safari doesn't always remove the selection even if the content-\n      // editable element no longer has focus. Refer to:\n      // https://stackoverflow.com/questions/12353247/force-contenteditable-div-to-stop-accepting-input-after-it-loses-focus-under-web\n\n\n      if (IS_SAFARI) {\n        var domSelection = root.getSelection();\n        domSelection === null || domSelection === void 0 ? void 0 : domSelection.removeAllRanges();\n      }\n\n      IS_FOCUSED.delete(editor);\n    }, [readOnly, attributes.onBlur]),\n    onClick: useCallback(event => {\n      if (!readOnly && hasTarget(editor, event.target) && !isEventHandled(event, attributes.onClick) && isDOMNode(event.target)) {\n        var node = ReactEditor.toSlateNode(editor, event.target);\n        var path = ReactEditor.findPath(editor, node);\n\n        var _start = Editor.start(editor, path);\n\n        var end = Editor.end(editor, path);\n        var startVoid = Editor.void(editor, {\n          at: _start\n        });\n        var endVoid = Editor.void(editor, {\n          at: end\n        });\n\n        if (startVoid && endVoid && Path.equals(startVoid[1], endVoid[1])) {\n          var range = Editor.range(editor, _start);\n          Transforms.select(editor, range);\n        }\n      }\n    }, [readOnly, attributes.onClick]),\n    onCompositionEnd: useCallback(event => {\n      if (hasEditableTarget(editor, event.target) && !isEventHandled(event, attributes.onCompositionEnd)) {\n        state.isComposing && setIsComposing(false);\n        state.isComposing = false; // COMPAT: In Chrome, `beforeinput` events for compositions\n        // aren't correct and never fire the \"insertFromComposition\"\n        // type that we need. So instead, insert whenever a composition\n        // ends since it will already have been committed to the DOM.\n\n        if (!IS_SAFARI && !IS_FIREFOX_LEGACY && !IS_IOS && !IS_QQBROWSER && event.data) {\n          Editor.insertText(editor, event.data);\n        }\n\n        if (editor.selection && Range.isCollapsed(editor.selection)) {\n          var leafPath = editor.selection.anchor.path;\n          var currentTextNode = Node.leaf(editor, leafPath);\n\n          if (state.hasInsertPrefixInCompositon) {\n            state.hasInsertPrefixInCompositon = false;\n            Editor.withoutNormalizing(editor, () => {\n              // remove Unicode BOM prefix added in `onCompositionStart`\n              var text = currentTextNode.text.replace(/^\\uFEFF/, '');\n              Transforms.delete(editor, {\n                distance: currentTextNode.text.length,\n                reverse: true\n              });\n              Transforms.insertText(editor, text);\n            });\n          }\n        }\n      }\n    }, [attributes.onCompositionEnd]),\n    onCompositionUpdate: useCallback(event => {\n      if (hasEditableTarget(editor, event.target) && !isEventHandled(event, attributes.onCompositionUpdate)) {\n        !state.isComposing && setIsComposing(true);\n        state.isComposing = true;\n      }\n    }, [attributes.onCompositionUpdate]),\n    onCompositionStart: useCallback(event => {\n      if (hasEditableTarget(editor, event.target) && !isEventHandled(event, attributes.onCompositionStart)) {\n        var {\n          selection,\n          marks\n        } = editor;\n\n        if (selection) {\n          if (Range.isExpanded(selection)) {\n            Editor.deleteFragment(editor);\n            return;\n          }\n\n          var inline = Editor.above(editor, {\n            match: n => Editor.isInline(editor, n),\n            mode: 'highest'\n          });\n\n          if (inline) {\n            var [, inlinePath] = inline;\n\n            if (Editor.isEnd(editor, selection.anchor, inlinePath)) {\n              var point = Editor.after(editor, inlinePath);\n              Transforms.setSelection(editor, {\n                anchor: point,\n                focus: point\n              });\n            }\n          } // insert new node in advance to ensure composition text will insert\n          // along with final input text\n          // add Unicode BOM prefix to avoid normalize removing this node\n\n\n          if (marks) {\n            state.hasInsertPrefixInCompositon = true;\n            Transforms.insertNodes(editor, _objectSpread$2({\n              text: '\\uFEFF'\n            }, marks), {\n              select: true\n            });\n          }\n        }\n      }\n    }, [attributes.onCompositionStart]),\n    onCopy: useCallback(event => {\n      if (hasEditableTarget(editor, event.target) && !isEventHandled(event, attributes.onCopy)) {\n        event.preventDefault();\n        ReactEditor.setFragmentData(editor, event.clipboardData);\n      }\n    }, [attributes.onCopy]),\n    onCut: useCallback(event => {\n      if (!readOnly && hasEditableTarget(editor, event.target) && !isEventHandled(event, attributes.onCut)) {\n        event.preventDefault();\n        ReactEditor.setFragmentData(editor, event.clipboardData);\n        var {\n          selection\n        } = editor;\n\n        if (selection) {\n          if (Range.isExpanded(selection)) {\n            Editor.deleteFragment(editor);\n          } else {\n            var node = Node.parent(editor, selection.anchor.path);\n\n            if (Editor.isVoid(editor, node)) {\n              Transforms.delete(editor);\n            }\n          }\n        }\n      }\n    }, [readOnly, attributes.onCut]),\n    onDragOver: useCallback(event => {\n      if (hasTarget(editor, event.target) && !isEventHandled(event, attributes.onDragOver)) {\n        // Only when the target is void, call `preventDefault` to signal\n        // that drops are allowed. Editable content is droppable by\n        // default, and calling `preventDefault` hides the cursor.\n        var node = ReactEditor.toSlateNode(editor, event.target);\n\n        if (Editor.isVoid(editor, node)) {\n          event.preventDefault();\n        }\n      }\n    }, [attributes.onDragOver]),\n    onDragStart: useCallback(event => {\n      if (hasTarget(editor, event.target) && !isEventHandled(event, attributes.onDragStart)) {\n        var node = ReactEditor.toSlateNode(editor, event.target);\n        var path = ReactEditor.findPath(editor, node);\n        var voidMatch = Editor.isVoid(editor, node) || Editor.void(editor, {\n          at: path,\n          voids: true\n        }); // If starting a drag on a void node, make sure it is selected\n        // so that it shows up in the selection's fragment.\n\n        if (voidMatch) {\n          var range = Editor.range(editor, path);\n          Transforms.select(editor, range);\n        }\n\n        state.isDraggingInternally = true;\n        ReactEditor.setFragmentData(editor, event.dataTransfer);\n      }\n    }, [attributes.onDragStart]),\n    onDrop: useCallback(event => {\n      if (!readOnly && hasTarget(editor, event.target) && !isEventHandled(event, attributes.onDrop)) {\n        event.preventDefault(); // Keep a reference to the dragged range before updating selection\n\n        var draggedRange = editor.selection; // Find the range where the drop happened\n\n        var range = ReactEditor.findEventRange(editor, event);\n        var data = event.dataTransfer;\n        Transforms.select(editor, range);\n\n        if (state.isDraggingInternally) {\n          if (draggedRange) {\n            Transforms.delete(editor, {\n              at: draggedRange\n            });\n          }\n\n          state.isDraggingInternally = false;\n        }\n\n        ReactEditor.insertData(editor, data); // When dragging from another source into the editor, it's possible\n        // that the current editor does not have focus.\n\n        if (!ReactEditor.isFocused(editor)) {\n          ReactEditor.focus(editor);\n        }\n      }\n    }, [readOnly, attributes.onDrop]),\n    onDragEnd: useCallback(event => {\n      // When dropping on a different droppable element than the current editor,\n      // `onDrop` is not called. So we need to clean up in `onDragEnd` instead.\n      // Note: `onDragEnd` is only called when `onDrop` is not called\n      if (!readOnly && state.isDraggingInternally && hasTarget(editor, event.target) && !isEventHandled(event, attributes.onDragEnd)) {\n        state.isDraggingInternally = false;\n      }\n    }, [readOnly, attributes.onDragEnd]),\n    onFocus: useCallback(event => {\n      if (!readOnly && !state.isUpdatingSelection && hasEditableTarget(editor, event.target) && !isEventHandled(event, attributes.onFocus)) {\n        var el = ReactEditor.toDOMNode(editor, editor);\n        var root = ReactEditor.findDocumentOrShadowRoot(editor);\n        state.latestElement = root.activeElement; // COMPAT: If the editor has nested editable elements, the focus\n        // can go to them. In Firefox, this must be prevented because it\n        // results in issues with keyboard navigation. (2017/03/30)\n\n        if (IS_FIREFOX && event.target !== el) {\n          el.focus();\n          return;\n        }\n\n        IS_FOCUSED.set(editor, true);\n      }\n    }, [readOnly, attributes.onFocus]),\n    onKeyDown: useCallback(event => {\n      if (!readOnly && !state.isComposing && hasEditableTarget(editor, event.target) && !isEventHandled(event, attributes.onKeyDown)) {\n        var {\n          nativeEvent\n        } = event;\n        var {\n          selection\n        } = editor;\n        var element = editor.children[selection !== null ? selection.focus.path[0] : 0];\n        var isRTL = getDirection(Node.string(element)) === 'rtl'; // COMPAT: Since we prevent the default behavior on\n        // `beforeinput` events, the browser doesn't think there's ever\n        // any history stack to undo or redo, so we have to manage these\n        // hotkeys ourselves. (2019/11/06)\n\n        if (Hotkeys.isRedo(nativeEvent)) {\n          event.preventDefault();\n          var maybeHistoryEditor = editor;\n\n          if (typeof maybeHistoryEditor.redo === 'function') {\n            maybeHistoryEditor.redo();\n          }\n\n          return;\n        }\n\n        if (Hotkeys.isUndo(nativeEvent)) {\n          event.preventDefault();\n          var _maybeHistoryEditor = editor;\n\n          if (typeof _maybeHistoryEditor.undo === 'function') {\n            _maybeHistoryEditor.undo();\n          }\n\n          return;\n        } // COMPAT: Certain browsers don't handle the selection updates\n        // properly. In Chrome, the selection isn't properly extended.\n        // And in Firefox, the selection isn't properly collapsed.\n        // (2017/10/17)\n\n\n        if (Hotkeys.isMoveLineBackward(nativeEvent)) {\n          event.preventDefault();\n          Transforms.move(editor, {\n            unit: 'line',\n            reverse: true\n          });\n          return;\n        }\n\n        if (Hotkeys.isMoveLineForward(nativeEvent)) {\n          event.preventDefault();\n          Transforms.move(editor, {\n            unit: 'line'\n          });\n          return;\n        }\n\n        if (Hotkeys.isExtendLineBackward(nativeEvent)) {\n          event.preventDefault();\n          Transforms.move(editor, {\n            unit: 'line',\n            edge: 'focus',\n            reverse: true\n          });\n          return;\n        }\n\n        if (Hotkeys.isExtendLineForward(nativeEvent)) {\n          event.preventDefault();\n          Transforms.move(editor, {\n            unit: 'line',\n            edge: 'focus'\n          });\n          return;\n        } // COMPAT: If a void node is selected, or a zero-width text node\n        // adjacent to an inline is selected, we need to handle these\n        // hotkeys manually because browsers won't be able to skip over\n        // the void node with the zero-width space not being an empty\n        // string.\n\n\n        if (Hotkeys.isMoveBackward(nativeEvent)) {\n          event.preventDefault();\n\n          if (selection && Range.isCollapsed(selection)) {\n            Transforms.move(editor, {\n              reverse: !isRTL\n            });\n          } else {\n            Transforms.collapse(editor, {\n              edge: 'start'\n            });\n          }\n\n          return;\n        }\n\n        if (Hotkeys.isMoveForward(nativeEvent)) {\n          event.preventDefault();\n\n          if (selection && Range.isCollapsed(selection)) {\n            Transforms.move(editor, {\n              reverse: isRTL\n            });\n          } else {\n            Transforms.collapse(editor, {\n              edge: 'end'\n            });\n          }\n\n          return;\n        }\n\n        if (Hotkeys.isMoveWordBackward(nativeEvent)) {\n          event.preventDefault();\n\n          if (selection && Range.isExpanded(selection)) {\n            Transforms.collapse(editor, {\n              edge: 'focus'\n            });\n          }\n\n          Transforms.move(editor, {\n            unit: 'word',\n            reverse: !isRTL\n          });\n          return;\n        }\n\n        if (Hotkeys.isMoveWordForward(nativeEvent)) {\n          event.preventDefault();\n\n          if (selection && Range.isExpanded(selection)) {\n            Transforms.collapse(editor, {\n              edge: 'focus'\n            });\n          }\n\n          Transforms.move(editor, {\n            unit: 'word',\n            reverse: isRTL\n          });\n          return;\n        } // COMPAT: Certain browsers don't support the `beforeinput` event, so we\n        // fall back to guessing at the input intention for hotkeys.\n        // COMPAT: In iOS, some of these hotkeys are handled in the\n\n\n        if (!HAS_BEFORE_INPUT_SUPPORT) {\n          // We don't have a core behavior for these, but they change the\n          // DOM if we don't prevent them, so we have to.\n          if (Hotkeys.isBold(nativeEvent) || Hotkeys.isItalic(nativeEvent) || Hotkeys.isTransposeCharacter(nativeEvent)) {\n            event.preventDefault();\n            return;\n          }\n\n          if (Hotkeys.isSplitBlock(nativeEvent)) {\n            event.preventDefault();\n            Editor.insertBreak(editor);\n            return;\n          }\n\n          if (Hotkeys.isDeleteBackward(nativeEvent)) {\n            event.preventDefault();\n\n            if (selection && Range.isExpanded(selection)) {\n              Editor.deleteFragment(editor, {\n                direction: 'backward'\n              });\n            } else {\n              Editor.deleteBackward(editor);\n            }\n\n            return;\n          }\n\n          if (Hotkeys.isDeleteForward(nativeEvent)) {\n            event.preventDefault();\n\n            if (selection && Range.isExpanded(selection)) {\n              Editor.deleteFragment(editor, {\n                direction: 'forward'\n              });\n            } else {\n              Editor.deleteForward(editor);\n            }\n\n            return;\n          }\n\n          if (Hotkeys.isDeleteLineBackward(nativeEvent)) {\n            event.preventDefault();\n\n            if (selection && Range.isExpanded(selection)) {\n              Editor.deleteFragment(editor, {\n                direction: 'backward'\n              });\n            } else {\n              Editor.deleteBackward(editor, {\n                unit: 'line'\n              });\n            }\n\n            return;\n          }\n\n          if (Hotkeys.isDeleteLineForward(nativeEvent)) {\n            event.preventDefault();\n\n            if (selection && Range.isExpanded(selection)) {\n              Editor.deleteFragment(editor, {\n                direction: 'forward'\n              });\n            } else {\n              Editor.deleteForward(editor, {\n                unit: 'line'\n              });\n            }\n\n            return;\n          }\n\n          if (Hotkeys.isDeleteWordBackward(nativeEvent)) {\n            event.preventDefault();\n\n            if (selection && Range.isExpanded(selection)) {\n              Editor.deleteFragment(editor, {\n                direction: 'backward'\n              });\n            } else {\n              Editor.deleteBackward(editor, {\n                unit: 'word'\n              });\n            }\n\n            return;\n          }\n\n          if (Hotkeys.isDeleteWordForward(nativeEvent)) {\n            event.preventDefault();\n\n            if (selection && Range.isExpanded(selection)) {\n              Editor.deleteFragment(editor, {\n                direction: 'forward'\n              });\n            } else {\n              Editor.deleteForward(editor, {\n                unit: 'word'\n              });\n            }\n\n            return;\n          }\n        } else {\n          if (IS_CHROME || IS_SAFARI) {\n            // COMPAT: Chrome and Safari support `beforeinput` event but do not fire\n            // an event when deleting backwards in a selected void inline node\n            if (selection && (Hotkeys.isDeleteBackward(nativeEvent) || Hotkeys.isDeleteForward(nativeEvent)) && Range.isCollapsed(selection)) {\n              var currentNode = Node.parent(editor, selection.anchor.path);\n\n              if (Element$1.isElement(currentNode) && Editor.isVoid(editor, currentNode) && Editor.isInline(editor, currentNode)) {\n                event.preventDefault();\n                Editor.deleteBackward(editor, {\n                  unit: 'block'\n                });\n                return;\n              }\n            }\n          }\n        }\n      }\n    }, [readOnly, attributes.onKeyDown]),\n    onPaste: useCallback(event => {\n      if (!readOnly && hasEditableTarget(editor, event.target) && !isEventHandled(event, attributes.onPaste)) {\n        // COMPAT: Certain browsers don't support the `beforeinput` event, so we\n        // fall back to React's `onPaste` here instead.\n        // COMPAT: Firefox, Chrome and Safari don't emit `beforeinput` events\n        // when \"paste without formatting\" is used, so fallback. (2020/02/20)\n        if (!HAS_BEFORE_INPUT_SUPPORT || isPlainTextOnlyPaste(event.nativeEvent)) {\n          event.preventDefault();\n          ReactEditor.insertData(editor, event.clipboardData);\n        }\n      }\n    }, [readOnly, attributes.onPaste])\n  }), /*#__PURE__*/React.createElement(Children, {\n    decorations: decorations,\n    node: editor,\n    renderElement: renderElement,\n    renderPlaceholder: renderPlaceholder,\n    renderLeaf: renderLeaf,\n    selection: editor.selection\n  }))));\n};\n/**\r\n * The default placeholder element\r\n */\n\nvar DefaultPlaceholder = _ref => {\n  var {\n    attributes,\n    children\n  } = _ref;\n  return /*#__PURE__*/React.createElement(\"span\", Object.assign({}, attributes), children);\n};\n/**\r\n * A default memoized decorate function.\r\n */\n\nvar defaultDecorate = () => [];\n/**\r\n * A default implement to scroll dom range into view.\r\n */\n\nvar defaultScrollSelectionIntoView = (editor, domRange) => {\n  var leafEl = domRange.startContainer.parentElement;\n  leafEl.getBoundingClientRect = domRange.getBoundingClientRect.bind(domRange);\n  scrollIntoView(leafEl, {\n    scrollMode: 'if-needed'\n  });\n  delete leafEl.getBoundingClientRect;\n};\n/**\r\n * Check if the target is in the editor.\r\n */\n\nvar hasTarget = (editor, target) => {\n  return isDOMNode(target) && ReactEditor.hasDOMNode(editor, target);\n};\n/**\r\n * Check if the target is editable and in the editor.\r\n */\n\nvar hasEditableTarget = (editor, target) => {\n  return isDOMNode(target) && ReactEditor.hasDOMNode(editor, target, {\n    editable: true\n  });\n};\n/**\r\n * Check if the target is inside void and in the editor.\r\n */\n\nvar isTargetInsideVoid = (editor, target) => {\n  var slateNode = hasTarget(editor, target) && ReactEditor.toSlateNode(editor, target);\n  return Editor.isVoid(editor, slateNode);\n};\n/**\r\n * Check if an event is overrided by a handler.\r\n */\n\nvar isEventHandled = (event, handler) => {\n  if (!handler) {\n    return false;\n  } // The custom event handler may return a boolean to specify whether the event\n  // shall be treated as being handled or not.\n\n\n  var shouldTreatEventAsHandled = handler(event);\n\n  if (shouldTreatEventAsHandled != null) {\n    return shouldTreatEventAsHandled;\n  }\n\n  return event.isDefaultPrevented() || event.isPropagationStopped();\n};\n/**\r\n * Check if a DOM event is overrided by a handler.\r\n */\n\nvar isDOMEventHandled = (event, handler) => {\n  if (!handler) {\n    return false;\n  } // The custom event handler may return a boolean to specify whether the event\n  // shall be treated as being handled or not.\n\n\n  var shouldTreatEventAsHandled = handler(event);\n\n  if (shouldTreatEventAsHandled != null) {\n    return shouldTreatEventAsHandled;\n  }\n\n  return event.defaultPrevented;\n};\n\n/**\r\n * An auto-incrementing identifier for keys.\r\n */\nvar n = 0;\n/**\r\n * A class that keeps track of a key string. We use a full class here because we\r\n * want to be able to use them as keys in `WeakMap` objects.\r\n */\n\nclass Key {\n  constructor() {\n    this.id = \"\".concat(n++);\n  }\n\n}\n\nvar ReactEditor = {\n  /**\r\n   * Return the host window of the current editor.\r\n   */\n  getWindow(editor) {\n    var window = EDITOR_TO_WINDOW.get(editor);\n\n    if (!window) {\n      throw new Error('Unable to find a host window element for this editor');\n    }\n\n    return window;\n  },\n\n  /**\r\n   * Find a key for a Slate node.\r\n   */\n  findKey(editor, node) {\n    var key = NODE_TO_KEY.get(node);\n\n    if (!key) {\n      key = new Key();\n      NODE_TO_KEY.set(node, key);\n    }\n\n    return key;\n  },\n\n  /**\r\n   * Find the path of Slate node.\r\n   */\n  findPath(editor, node) {\n    var path = [];\n    var child = node;\n\n    while (true) {\n      var parent = NODE_TO_PARENT.get(child);\n\n      if (parent == null) {\n        if (Editor.isEditor(child)) {\n          return path;\n        } else {\n          break;\n        }\n      }\n\n      var i = NODE_TO_INDEX.get(child);\n\n      if (i == null) {\n        break;\n      }\n\n      path.unshift(i);\n      child = parent;\n    }\n\n    throw new Error(\"Unable to find the path for Slate node: \".concat(JSON.stringify(node)));\n  },\n\n  /**\r\n   * Find the DOM node that implements DocumentOrShadowRoot for the editor.\r\n   */\n  findDocumentOrShadowRoot(editor) {\n    var el = ReactEditor.toDOMNode(editor, editor);\n    var root = el.getRootNode();\n\n    if ((root instanceof Document || root instanceof ShadowRoot) && root.getSelection != null) {\n      return root;\n    }\n\n    return el.ownerDocument;\n  },\n\n  /**\r\n   * Check if the editor is focused.\r\n   */\n  isFocused(editor) {\n    return !!IS_FOCUSED.get(editor);\n  },\n\n  /**\r\n   * Check if the editor is in read-only mode.\r\n   */\n  isReadOnly(editor) {\n    return !!IS_READ_ONLY.get(editor);\n  },\n\n  /**\r\n   * Blur the editor.\r\n   */\n  blur(editor) {\n    var el = ReactEditor.toDOMNode(editor, editor);\n    var root = ReactEditor.findDocumentOrShadowRoot(editor);\n    IS_FOCUSED.set(editor, false);\n\n    if (root.activeElement === el) {\n      el.blur();\n    }\n  },\n\n  /**\r\n   * Focus the editor.\r\n   */\n  focus(editor) {\n    var el = ReactEditor.toDOMNode(editor, editor);\n    var root = ReactEditor.findDocumentOrShadowRoot(editor);\n    IS_FOCUSED.set(editor, true);\n\n    if (root.activeElement !== el) {\n      el.focus({\n        preventScroll: true\n      });\n    }\n  },\n\n  /**\r\n   * Deselect the editor.\r\n   */\n  deselect(editor) {\n    ReactEditor.toDOMNode(editor, editor);\n    var {\n      selection\n    } = editor;\n    var root = ReactEditor.findDocumentOrShadowRoot(editor);\n    var domSelection = root.getSelection();\n\n    if (domSelection && domSelection.rangeCount > 0) {\n      domSelection.removeAllRanges();\n    }\n\n    if (selection) {\n      Transforms.deselect(editor);\n    }\n  },\n\n  /**\r\n   * Check if a DOM node is within the editor.\r\n   */\n  hasDOMNode(editor, target) {\n    var options = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n    var {\n      editable = false\n    } = options;\n    var editorEl = ReactEditor.toDOMNode(editor, editor);\n    var targetEl; // COMPAT: In Firefox, reading `target.nodeType` will throw an error if\n    // target is originating from an internal \"restricted\" element (e.g. a\n    // stepper arrow on a number input). (2018/05/04)\n    // https://github.com/ianstormtaylor/slate/issues/1819\n\n    try {\n      targetEl = isDOMElement(target) ? target : target.parentElement;\n    } catch (err) {\n      if (!err.message.includes('Permission denied to access property \"nodeType\"')) {\n        throw err;\n      }\n    }\n\n    if (!targetEl) {\n      return false;\n    }\n\n    return targetEl.closest(\"[data-slate-editor]\") === editorEl && (!editable || targetEl.isContentEditable || !!targetEl.getAttribute('data-slate-zero-width'));\n  },\n\n  /**\r\n   * Insert data from a `DataTransfer` into the editor.\r\n   */\n  insertData(editor, data) {\n    editor.insertData(data);\n  },\n\n  /**\r\n   * Sets data from the currently selected fragment on a `DataTransfer`.\r\n   */\n  setFragmentData(editor, data) {\n    editor.setFragmentData(data);\n  },\n\n  /**\r\n   * Find the native DOM element from a Slate node.\r\n   */\n  toDOMNode(editor, node) {\n    var KEY_TO_ELEMENT = EDITOR_TO_KEY_TO_ELEMENT.get(editor);\n    var domNode = Editor.isEditor(node) ? EDITOR_TO_ELEMENT.get(editor) : KEY_TO_ELEMENT === null || KEY_TO_ELEMENT === void 0 ? void 0 : KEY_TO_ELEMENT.get(ReactEditor.findKey(editor, node));\n\n    if (!domNode) {\n      throw new Error(\"Cannot resolve a DOM node from Slate node: \".concat(JSON.stringify(node)));\n    }\n\n    return domNode;\n  },\n\n  /**\r\n   * Find a native DOM selection point from a Slate point.\r\n   */\n  toDOMPoint(editor, point) {\n    var [node] = Editor.node(editor, point.path);\n    var el = ReactEditor.toDOMNode(editor, node);\n    var domPoint; // If we're inside a void node, force the offset to 0, otherwise the zero\n    // width spacing character will result in an incorrect offset of 1\n\n    if (Editor.void(editor, {\n      at: point\n    })) {\n      point = {\n        path: point.path,\n        offset: 0\n      };\n    } // For each leaf, we need to isolate its content, which means filtering\n    // to its direct text and zero-width spans. (We have to filter out any\n    // other siblings that may have been rendered alongside them.)\n\n\n    var selector = \"[data-slate-string], [data-slate-zero-width]\";\n    var texts = Array.from(el.querySelectorAll(selector));\n    var start = 0;\n\n    for (var text of texts) {\n      var domNode = text.childNodes[0];\n\n      if (domNode == null || domNode.textContent == null) {\n        continue;\n      }\n\n      var {\n        length\n      } = domNode.textContent;\n      var attr = text.getAttribute('data-slate-length');\n      var trueLength = attr == null ? length : parseInt(attr, 10);\n      var end = start + trueLength;\n\n      if (point.offset <= end) {\n        var offset = Math.min(length, Math.max(0, point.offset - start));\n        domPoint = [domNode, offset];\n        break;\n      }\n\n      start = end;\n    }\n\n    if (!domPoint) {\n      throw new Error(\"Cannot resolve a DOM point from Slate point: \".concat(JSON.stringify(point)));\n    }\n\n    return domPoint;\n  },\n\n  /**\r\n   * Find a native DOM range from a Slate `range`.\r\n   *\r\n   * Notice: the returned range will always be ordinal regardless of the direction of Slate `range` due to DOM API limit.\r\n   *\r\n   * there is no way to create a reverse DOM Range using Range.setStart/setEnd\r\n   * according to https://dom.spec.whatwg.org/#concept-range-bp-set.\r\n   */\n  toDOMRange(editor, range) {\n    var {\n      anchor,\n      focus\n    } = range;\n    var isBackward = Range.isBackward(range);\n    var domAnchor = ReactEditor.toDOMPoint(editor, anchor);\n    var domFocus = Range.isCollapsed(range) ? domAnchor : ReactEditor.toDOMPoint(editor, focus);\n    var window = ReactEditor.getWindow(editor);\n    var domRange = window.document.createRange();\n    var [startNode, startOffset] = isBackward ? domFocus : domAnchor;\n    var [endNode, endOffset] = isBackward ? domAnchor : domFocus; // A slate Point at zero-width Leaf always has an offset of 0 but a native DOM selection at\n    // zero-width node has an offset of 1 so we have to check if we are in a zero-width node and\n    // adjust the offset accordingly.\n\n    var startEl = isDOMElement(startNode) ? startNode : startNode.parentElement;\n    var isStartAtZeroWidth = !!startEl.getAttribute('data-slate-zero-width');\n    var endEl = isDOMElement(endNode) ? endNode : endNode.parentElement;\n    var isEndAtZeroWidth = !!endEl.getAttribute('data-slate-zero-width');\n    domRange.setStart(startNode, isStartAtZeroWidth ? 1 : startOffset);\n    domRange.setEnd(endNode, isEndAtZeroWidth ? 1 : endOffset);\n    return domRange;\n  },\n\n  /**\r\n   * Find a Slate node from a native DOM `element`.\r\n   */\n  toSlateNode(editor, domNode) {\n    var domEl = isDOMElement(domNode) ? domNode : domNode.parentElement;\n\n    if (domEl && !domEl.hasAttribute('data-slate-node')) {\n      domEl = domEl.closest(\"[data-slate-node]\");\n    }\n\n    var node = domEl ? ELEMENT_TO_NODE.get(domEl) : null;\n\n    if (!node) {\n      throw new Error(\"Cannot resolve a Slate node from DOM node: \".concat(domEl));\n    }\n\n    return node;\n  },\n\n  /**\r\n   * Get the target range from a DOM `event`.\r\n   */\n  findEventRange(editor, event) {\n    if ('nativeEvent' in event) {\n      event = event.nativeEvent;\n    }\n\n    var {\n      clientX: x,\n      clientY: y,\n      target\n    } = event;\n\n    if (x == null || y == null) {\n      throw new Error(\"Cannot resolve a Slate range from a DOM event: \".concat(event));\n    }\n\n    var node = ReactEditor.toSlateNode(editor, event.target);\n    var path = ReactEditor.findPath(editor, node); // If the drop target is inside a void node, move it into either the\n    // next or previous node, depending on which side the `x` and `y`\n    // coordinates are closest to.\n\n    if (Editor.isVoid(editor, node)) {\n      var rect = target.getBoundingClientRect();\n      var isPrev = editor.isInline(node) ? x - rect.left < rect.left + rect.width - x : y - rect.top < rect.top + rect.height - y;\n      var edge = Editor.point(editor, path, {\n        edge: isPrev ? 'start' : 'end'\n      });\n      var point = isPrev ? Editor.before(editor, edge) : Editor.after(editor, edge);\n\n      if (point) {\n        var _range = Editor.range(editor, point);\n\n        return _range;\n      }\n    } // Else resolve a range from the caret position where the drop occured.\n\n\n    var domRange;\n    var {\n      document\n    } = window; // COMPAT: In Firefox, `caretRangeFromPoint` doesn't exist. (2016/07/25)\n\n    if (document.caretRangeFromPoint) {\n      domRange = document.caretRangeFromPoint(x, y);\n    } else {\n      var position = document.caretPositionFromPoint(x, y);\n\n      if (position) {\n        domRange = document.createRange();\n        domRange.setStart(position.offsetNode, position.offset);\n        domRange.setEnd(position.offsetNode, position.offset);\n      }\n    }\n\n    if (!domRange) {\n      throw new Error(\"Cannot resolve a Slate range from a DOM event: \".concat(event));\n    } // Resolve a Slate range from the DOM range.\n\n\n    var range = ReactEditor.toSlateRange(editor, domRange, {\n      exactMatch: false\n    });\n    return range;\n  },\n\n  /**\r\n   * Find a Slate point from a DOM selection's `domNode` and `domOffset`.\r\n   */\n  toSlatePoint(editor, domPoint, exactMatch) {\n    var [nearestNode, nearestOffset] = exactMatch ? domPoint : normalizeDOMPoint(domPoint);\n    var parentNode = nearestNode.parentNode;\n    var textNode = null;\n    var offset = 0;\n\n    if (parentNode) {\n      var _domNode$textContent;\n\n      var voidNode = parentNode.closest('[data-slate-void=\"true\"]');\n      var leafNode = parentNode.closest('[data-slate-leaf]');\n      var domNode = null; // Calculate how far into the text node the `nearestNode` is, so that we\n      // can determine what the offset relative to the text node is.\n\n      if (leafNode) {\n        textNode = leafNode.closest('[data-slate-node=\"text\"]');\n\n        var _window = ReactEditor.getWindow(editor);\n\n        var range = _window.document.createRange();\n\n        range.setStart(textNode, 0);\n        range.setEnd(nearestNode, nearestOffset);\n        var contents = range.cloneContents();\n        var removals = [...Array.prototype.slice.call(contents.querySelectorAll('[data-slate-zero-width]')), ...Array.prototype.slice.call(contents.querySelectorAll('[contenteditable=false]'))];\n        removals.forEach(el => {\n          el.parentNode.removeChild(el);\n        }); // COMPAT: Edge has a bug where Range.prototype.toString() will\n        // convert \\n into \\r\\n. The bug causes a loop when slate-react\n        // attempts to reposition its cursor to match the native position. Use\n        // textContent.length instead.\n        // https://developer.microsoft.com/en-us/microsoft-edge/platform/issues/10291116/\n\n        offset = contents.textContent.length;\n        domNode = textNode;\n      } else if (voidNode) {\n        // For void nodes, the element with the offset key will be a cousin, not an\n        // ancestor, so find it by going down from the nearest void parent.\n        leafNode = voidNode.querySelector('[data-slate-leaf]'); // COMPAT: In read-only editors the leaf is not rendered.\n\n        if (!leafNode) {\n          offset = 1;\n        } else {\n          textNode = leafNode.closest('[data-slate-node=\"text\"]');\n          domNode = leafNode;\n          offset = domNode.textContent.length;\n          domNode.querySelectorAll('[data-slate-zero-width]').forEach(el => {\n            offset -= el.textContent.length;\n          });\n        }\n      }\n\n      if (domNode && offset === domNode.textContent.length && (parentNode.hasAttribute('data-slate-zero-width') || IS_FIREFOX && (_domNode$textContent = domNode.textContent) !== null && _domNode$textContent !== void 0 && _domNode$textContent.endsWith('\\n\\n'))) {\n        offset--;\n      }\n    }\n\n    if (!textNode) {\n      if (exactMatch) {\n        return null;\n      }\n\n      throw new Error(\"Cannot resolve a Slate point from DOM point: \".concat(domPoint));\n    } // COMPAT: If someone is clicking from one Slate editor into another,\n    // the select event fires twice, once for the old editor's `element`\n    // first, and then afterwards for the correct `element`. (2017/03/03)\n\n\n    var slateNode = ReactEditor.toSlateNode(editor, textNode);\n    var path = ReactEditor.findPath(editor, slateNode);\n    return {\n      path,\n      offset\n    };\n  },\n\n  /**\r\n   * Find a Slate range from a DOM range or selection.\r\n   */\n  toSlateRange(editor, domRange, options) {\n    var {\n      exactMatch\n    } = options;\n    var el = isDOMSelection(domRange) ? domRange.anchorNode : domRange.startContainer;\n    var anchorNode;\n    var anchorOffset;\n    var focusNode;\n    var focusOffset;\n    var isCollapsed;\n\n    if (el) {\n      if (isDOMSelection(domRange)) {\n        anchorNode = domRange.anchorNode;\n        anchorOffset = domRange.anchorOffset;\n        focusNode = domRange.focusNode;\n        focusOffset = domRange.focusOffset; // COMPAT: There's a bug in chrome that always returns `true` for\n        // `isCollapsed` for a Selection that comes from a ShadowRoot.\n        // (2020/08/08)\n        // https://bugs.chromium.org/p/chromium/issues/detail?id=447523\n\n        if (IS_CHROME && hasShadowRoot()) {\n          isCollapsed = domRange.anchorNode === domRange.focusNode && domRange.anchorOffset === domRange.focusOffset;\n        } else {\n          isCollapsed = domRange.isCollapsed;\n        }\n      } else {\n        anchorNode = domRange.startContainer;\n        anchorOffset = domRange.startOffset;\n        focusNode = domRange.endContainer;\n        focusOffset = domRange.endOffset;\n        isCollapsed = domRange.collapsed;\n      }\n    }\n\n    if (anchorNode == null || focusNode == null || anchorOffset == null || focusOffset == null) {\n      throw new Error(\"Cannot resolve a Slate range from DOM range: \".concat(domRange));\n    }\n\n    var anchor = ReactEditor.toSlatePoint(editor, [anchorNode, anchorOffset], exactMatch);\n\n    if (!anchor) {\n      return null;\n    }\n\n    var focus = isCollapsed ? anchor : ReactEditor.toSlatePoint(editor, [focusNode, focusOffset], exactMatch);\n\n    if (!focus) {\n      return null;\n    }\n\n    var range = {\n      anchor: anchor,\n      focus: focus\n    }; // if the selection is a hanging range that ends in a void\n    // and the DOM focus is an Element\n    // (meaning that the selection ends before the element)\n    // unhang the range to avoid mistakenly including the void\n\n    if (Range.isExpanded(range) && Range.isForward(range) && isDOMElement(focusNode) && Editor.void(editor, {\n      at: range.focus,\n      mode: 'highest'\n    })) {\n      range = Editor.unhangRange(editor, range, {\n        voids: true\n      });\n    }\n\n    return range;\n  },\n\n  hasRange(editor, range) {\n    var {\n      anchor,\n      focus\n    } = range;\n    return Editor.hasPath(editor, anchor.path) && Editor.hasPath(editor, focus.path);\n  }\n\n};\n\n/**\r\n * Returns the number of characters that are the same at the beginning of the\r\n * String.\r\n *\r\n * @param prev  the previous text\r\n * @param next  the next text\r\n * @returns the offset of the start of the difference; null if there is no difference\r\n */\n\nfunction getDiffStart(prev, next) {\n  var length = Math.min(prev.length, next.length);\n\n  for (var i = 0; i < length; i++) {\n    if (prev.charAt(i) !== next.charAt(i)) return i;\n  }\n\n  if (prev.length !== next.length) return length;\n  return null;\n}\n/**\r\n * Returns the number of characters that are the same at the end of the String\r\n * up to `max`. Max prevents double-counting characters when there are\r\n * multiple duplicate characters around the diff area.\r\n *\r\n * @param prev  the previous text\r\n * @param next  the next text\r\n * @param max  the max length to test.\r\n * @returns number of characters that are the same at the end of the string\r\n */\n\n\nfunction getDiffEnd(prev, next, max) {\n  var prevLength = prev.length;\n  var nextLength = next.length;\n  var length = Math.min(prevLength, nextLength, max);\n\n  for (var i = 0; i < length; i++) {\n    var prevChar = prev.charAt(prevLength - i - 1);\n    var nextChar = next.charAt(nextLength - i - 1);\n    if (prevChar !== nextChar) return i;\n  }\n\n  if (prev.length !== next.length) return length;\n  return null;\n}\n/**\r\n * Takes two strings and returns an object representing two offsets. The\r\n * first, `start` represents the number of characters that are the same at\r\n * the front of the String. The `end` represents the number of characters\r\n * that are the same at the end of the String.\r\n *\r\n * Returns null if they are identical.\r\n *\r\n * @param prev  the previous text\r\n * @param next  the next text\r\n * @returns the difference text range; null if there are no differences.\r\n */\n\n\nfunction getDiffOffsets(prev, next) {\n  if (prev === next) return null;\n  var start = getDiffStart(prev, next);\n  if (start === null) return null;\n  var maxEnd = Math.min(prev.length - start, next.length - start);\n  var end = getDiffEnd(prev, next, maxEnd);\n  if (end === null) return null;\n  return {\n    start,\n    end\n  };\n}\n/**\r\n * Takes a text string and returns a slice from the string at the given text range\r\n *\r\n * @param text  the text\r\n * @param offsets  the text range\r\n * @returns the text slice at text range\r\n */\n\n\nfunction sliceText(text, offsets) {\n  return text.slice(offsets.start, text.length - offsets.end);\n}\n/**\r\n * Takes two strings and returns a smart diff that can be used to describe the\r\n * change in a way that can be used as operations like inserting, removing or\r\n * replacing text.\r\n *\r\n * @param prev the previous text\r\n * @param next the next text\r\n * @returns the text difference\r\n */\n\n\nfunction diffText(prev, next) {\n  if (prev === undefined || next === undefined) return null;\n  var offsets = getDiffOffsets(prev, next);\n  if (offsets == null) return null;\n  var insertText = sliceText(next, offsets);\n  var removeText = sliceText(prev, offsets);\n  return {\n    start: offsets.start,\n    end: prev.length - offsets.end,\n    insertText,\n    removeText\n  };\n}\nfunction combineInsertedText(insertedText) {\n  return insertedText.reduce((acc, _ref) => {\n    var {\n      text\n    } = _ref;\n    return \"\".concat(acc).concat(text.insertText);\n  }, '');\n}\nfunction getTextInsertion(editor, domNode) {\n  var node = ReactEditor.toSlateNode(editor, domNode);\n\n  if (!Text$1.isText(node)) {\n    return undefined;\n  }\n\n  var prevText = node.text;\n  var nextText = domNode.textContent; // textContent will pad an extra \\n when the textContent ends with an \\n\n\n  if (nextText.endsWith('\\n')) {\n    nextText = nextText.slice(0, nextText.length - 1);\n  } // If the text is no different, there is no diff.\n\n\n  if (nextText !== prevText) {\n    var textDiff = diffText(prevText, nextText);\n\n    if (textDiff !== null) {\n      var textPath = ReactEditor.findPath(editor, node);\n      return {\n        text: textDiff,\n        path: textPath\n      };\n    }\n  }\n\n  return undefined;\n}\nfunction normalizeTextInsertionRange(editor, range, _ref2) {\n  var {\n    path,\n    text\n  } = _ref2;\n  var insertionRange = {\n    anchor: {\n      path,\n      offset: text.start\n    },\n    focus: {\n      path,\n      offset: text.end\n    }\n  };\n\n  if (!range || !Range.isCollapsed(range)) {\n    return insertionRange;\n  }\n\n  var {\n    insertText,\n    removeText\n  } = text;\n  var isSingleCharacterInsertion = insertText.length === 1 || removeText.length === 1;\n  /**\r\n   * This code handles edge cases that arise from text diffing when the\r\n   * inserted or removed character is a single character, and the character\r\n   * right before or after the anchor is the same as the one being inserted or\r\n   * removed.\r\n   *\r\n   * Take this example: hello|o\r\n   *\r\n   * If another `o` is inserted at the selection's anchor in the example above,\r\n   * it should be inserted at the anchor, but using text diffing, we actually\r\n   * detect that the character was inserted after the second `o`:\r\n   *\r\n   * helloo[o]|\r\n   *\r\n   * Instead, in these very specific edge cases, we assume that the character\r\n   * needs to be inserted after the anchor rather than where the diff was found:\r\n   *\r\n   * hello[o]|o\r\n   */\n\n  if (isSingleCharacterInsertion && Path.equals(range.anchor.path, path)) {\n    var [_text] = Array.from(Editor.nodes(editor, {\n      at: range,\n      match: Text$1.isText\n    }));\n\n    if (_text) {\n      var [node] = _text;\n      var {\n        anchor\n      } = range;\n      var characterBeforeAnchor = node.text[anchor.offset - 1];\n      var characterAfterAnchor = node.text[anchor.offset];\n\n      if (insertText.length === 1 && insertText === characterAfterAnchor) {\n        // Assume text should be inserted at the anchor\n        return range;\n      }\n\n      if (removeText.length === 1 && removeText === characterBeforeAnchor) {\n        // Assume text should be removed right before the anchor\n        return {\n          anchor: {\n            path,\n            offset: anchor.offset - 1\n          },\n          focus: {\n            path,\n            offset: anchor.offset\n          }\n        };\n      }\n    }\n  }\n\n  return insertionRange;\n}\n\nfunction gatherMutationData(editor, mutations) {\n  var addedNodes = [];\n  var removedNodes = [];\n  var insertedText = [];\n  var characterDataMutations = [];\n  mutations.forEach(mutation => {\n    switch (mutation.type) {\n      case 'childList':\n        {\n          if (mutation.addedNodes.length) {\n            mutation.addedNodes.forEach(addedNode => {\n              addedNodes.push(addedNode);\n            });\n          }\n\n          mutation.removedNodes.forEach(removedNode => {\n            removedNodes.push(removedNode);\n          });\n          break;\n        }\n\n      case 'characterData':\n        {\n          characterDataMutations.push(mutation); // Changes to text nodes should consider the parent element\n\n          var {\n            parentNode\n          } = mutation.target;\n\n          if (!parentNode) {\n            return;\n          }\n\n          var textInsertion = getTextInsertion(editor, parentNode);\n\n          if (!textInsertion) {\n            return;\n          } // If we've already detected a diff at that path, we can return early\n\n\n          if (insertedText.some(_ref => {\n            var {\n              path\n            } = _ref;\n            return Path.equals(path, textInsertion.path);\n          })) {\n            return;\n          } // Add the text diff to the array of detected text insertions that need to be reconciled\n\n\n          insertedText.push(textInsertion);\n        }\n    }\n  });\n  return {\n    addedNodes,\n    removedNodes,\n    insertedText,\n    characterDataMutations\n  };\n}\n/**\r\n * In general, when a line break occurs, there will be more `addedNodes` than `removedNodes`.\r\n *\r\n * This isn't always the case however. In some cases, there will be more `removedNodes` than\r\n * `addedNodes`.\r\n *\r\n * To account for these edge cases, the most reliable strategy to detect line break mutations\r\n * is to check whether a new block was inserted of the same type as the current block.\r\n */\n\nvar isLineBreak = (editor, _ref2) => {\n  var {\n    addedNodes\n  } = _ref2;\n  var {\n    selection\n  } = editor;\n  var parentNode = selection ? Node.parent(editor, selection.anchor.path) : null;\n  var parentDOMNode = parentNode ? ReactEditor.toDOMNode(editor, parentNode) : null;\n\n  if (!parentDOMNode) {\n    return false;\n  }\n\n  return addedNodes.some(addedNode => addedNode instanceof HTMLElement && addedNode.tagName === (parentDOMNode === null || parentDOMNode === void 0 ? void 0 : parentDOMNode.tagName));\n};\n/**\r\n * So long as we check for line break mutations before deletion mutations,\r\n * we can safely assume that a set of mutations was a deletion if there are\r\n * removed nodes.\r\n */\n\nvar isDeletion = (_, _ref3) => {\n  var {\n    removedNodes\n  } = _ref3;\n  return removedNodes.length > 0;\n};\n/**\r\n * If the selection was expanded and there are removed nodes,\r\n * the contents of the selection need to be replaced with the diff\r\n */\n\nvar isReplaceExpandedSelection = (_ref4, _ref5) => {\n  var {\n    selection\n  } = _ref4;\n  var {\n    removedNodes\n  } = _ref5;\n  return selection ? Range.isExpanded(selection) && removedNodes.length > 0 : false;\n};\n/**\r\n * Plain text insertion\r\n */\n\nvar isTextInsertion = (_, _ref6) => {\n  var {\n    insertedText\n  } = _ref6;\n  return insertedText.length > 0;\n};\n/**\r\n * Edge case. Detect mutations that remove leaf nodes and also update character data\r\n */\n\nvar isRemoveLeafNodes = (_, _ref7) => {\n  var {\n    addedNodes,\n    characterDataMutations,\n    removedNodes\n  } = _ref7;\n  return removedNodes.length > 0 && addedNodes.length === 0 && characterDataMutations.length > 0;\n};\n\nfunction restoreDOM(editor) {\n  try {\n    var onRestoreDOM = EDITOR_TO_RESTORE_DOM.get(editor);\n\n    if (onRestoreDOM) {\n      onRestoreDOM();\n    }\n  } catch (err) {\n    // eslint-disable-next-line no-console\n    console.error(err);\n  }\n}\n\nfunction ownKeys$1(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) { symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); } keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread$1(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys$1(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys$1(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n/**\r\n * Based loosely on:\r\n *\r\n * https://github.com/facebook/draft-js/blob/master/src/component/handlers/composition/DOMObserver.js\r\n * https://github.com/ProseMirror/prosemirror-view/blob/master/src/domobserver.js\r\n *\r\n * The input manager attempts to map observed mutations on the document to a\r\n * set of operations in order to reconcile Slate's internal value with the DOM.\r\n *\r\n * Mutations are processed synchronously as they come in. Only mutations that occur\r\n * during a user input loop are processed, as other mutations can occur within the\r\n * document that were not initiated by user input.\r\n *\r\n * The mutation reconciliation process attempts to match mutations to the following\r\n * patterns:\r\n *\r\n * - Text updates\r\n * - Deletions\r\n * - Line breaks\r\n *\r\n * @param editor\r\n */\n\n\nclass AndroidInputManager {\n  constructor(editor) {\n    this.editor = editor;\n    /**\r\n     * Handle MutationObserver flush\r\n     *\r\n     * @param mutations\r\n     */\n\n    this.flush = mutations => {\n\n      try {\n        this.reconcileMutations(mutations);\n      } catch (err) {\n        // eslint-disable-next-line no-console\n        console.error(err); // Failed to reconcile mutations, restore DOM to its previous state\n\n        restoreDOM(this.editor);\n      }\n    };\n    /**\r\n     * Reconcile a batch of mutations\r\n     *\r\n     * @param mutations\r\n     */\n\n\n    this.reconcileMutations = mutations => {\n      var mutationData = gatherMutationData(this.editor, mutations);\n      var {\n        insertedText,\n        removedNodes\n      } = mutationData;\n\n      if (isReplaceExpandedSelection(this.editor, mutationData)) {\n        var text = combineInsertedText(insertedText);\n        this.replaceExpandedSelection(text);\n      } else if (isLineBreak(this.editor, mutationData)) {\n        this.insertBreak();\n      } else if (isRemoveLeafNodes(this.editor, mutationData)) {\n        this.removeLeafNodes(removedNodes);\n      } else if (isDeletion(this.editor, mutationData)) {\n        this.deleteBackward();\n      } else if (isTextInsertion(this.editor, mutationData)) {\n        this.insertText(insertedText);\n      }\n    };\n    /**\r\n     * Apply text diff\r\n     */\n\n\n    this.insertText = insertedText => {\n      var {\n        selection,\n        marks\n      } = this.editor; // Insert the batched text diffs\n\n      insertedText.forEach(insertion => {\n        var text = insertion.text.insertText;\n        var at = normalizeTextInsertionRange(this.editor, selection, insertion);\n\n        if (marks) {\n          var node = _objectSpread$1({\n            text\n          }, marks);\n\n          Transforms.insertNodes(this.editor, node, {\n            match: Text$1.isText,\n            at,\n            select: true\n          });\n          this.editor.marks = null;\n        } else {\n          Transforms.insertText(this.editor, text, {\n            at\n          });\n        }\n      });\n    };\n    /**\r\n     * Handle line breaks\r\n     */\n\n\n    this.insertBreak = () => {\n      var {\n        selection\n      } = this.editor;\n      Editor.insertBreak(this.editor); // To-do: Need a more granular solution to restoring only a specific portion\n      // of the document. Restoring the entire document is expensive.\n\n      restoreDOM(this.editor);\n\n      if (selection) {\n        // Compat: Move selection to the newly inserted block if it has not moved\n        setTimeout(() => {\n          if (this.editor.selection && Range.equals(selection, this.editor.selection)) {\n            Transforms.move(this.editor);\n          }\n        }, 100);\n      }\n    };\n    /**\r\n     * Handle expanded selection being deleted or replaced by text\r\n     */\n\n\n    this.replaceExpandedSelection = text => {\n\n      Editor.deleteFragment(this.editor);\n\n      if (text.length) {\n        // Selection was replaced by text, insert the entire text diff\n        Editor.insertText(this.editor, text);\n      }\n\n      restoreDOM(this.editor);\n    };\n    /**\r\n     * Handle `backspace` that merges blocks\r\n     */\n\n\n    this.deleteBackward = () => {\n      Editor.deleteBackward(this.editor);\n      ReactEditor.focus(this.editor);\n      restoreDOM(this.editor);\n    };\n    /**\r\n     * Handle mutations that remove specific leaves\r\n     */\n\n\n    this.removeLeafNodes = nodes => {\n      for (var node of nodes) {\n        var slateNode = ReactEditor.toSlateNode(this.editor, node);\n\n        if (slateNode) {\n          var path = ReactEditor.findPath(this.editor, slateNode);\n          Transforms.delete(this.editor, {\n            at: path\n          });\n          restoreDOM(this.editor);\n        }\n      }\n    };\n\n    this.editor = editor;\n  }\n\n}\n\nfunction useMutationObserver(node, callback, options) {\n  var [mutationObserver] = useState(() => new MutationObserver(callback));\n  useIsomorphicLayoutEffect(() => {\n    // Disconnect mutation observer during render phase\n    mutationObserver.disconnect();\n  });\n  useEffect(() => {\n    if (!node.current) {\n      throw new Error('Failed to attach MutationObserver, `node` is undefined');\n    } // Attach mutation observer after render phase has finished\n\n\n    mutationObserver.observe(node.current, options); // Clean up after effect\n\n    return mutationObserver.disconnect.bind(mutationObserver);\n  });\n}\n\nfunction useTrackUserInput() {\n  var editor = useSlateStatic();\n  var receivedUserInput = useRef(false);\n  var animationFrameRef = useRef(null);\n  var onUserInput = useCallback(() => {\n    if (receivedUserInput.current === false) {\n      var window = ReactEditor.getWindow(editor);\n      receivedUserInput.current = true;\n\n      if (animationFrameRef.current) {\n        window.cancelAnimationFrame(animationFrameRef.current);\n      }\n\n      animationFrameRef.current = window.requestAnimationFrame(() => {\n        receivedUserInput.current = false;\n        animationFrameRef.current = null;\n      });\n    }\n  }, []);\n  useEffect(() => {\n    // Reset user input tracking on every render\n    if (receivedUserInput.current) {\n      receivedUserInput.current = false;\n    }\n  });\n  return {\n    receivedUserInput,\n    onUserInput\n  };\n}\n\nvar MUTATION_OBSERVER_CONFIG = {\n  childList: true,\n  characterData: true,\n  characterDataOldValue: true,\n  subtree: true\n};\nfunction useAndroidInputManager(node) {\n  var editor = useSlateStatic();\n  var [inputManager] = useState(() => new AndroidInputManager(editor));\n  var {\n    receivedUserInput,\n    onUserInput\n  } = useTrackUserInput();\n  var timeoutId = useRef(null);\n  var isReconciling = useRef(false);\n  var flush = useCallback(mutations => {\n    if (!receivedUserInput.current) {\n      return;\n    }\n\n    isReconciling.current = true;\n    inputManager.flush(mutations);\n\n    if (timeoutId.current) {\n      clearTimeout(timeoutId.current);\n    }\n\n    timeoutId.current = setTimeout(() => {\n      isReconciling.current = false;\n      timeoutId.current = null;\n    }, 250);\n  }, []);\n  useMutationObserver(node, flush, MUTATION_OBSERVER_CONFIG);\n  return {\n    isReconciling,\n    onUserInput\n  };\n}\n\nvar _excluded$1 = [\"autoFocus\", \"decorate\", \"onDOMBeforeInput\", \"placeholder\", \"readOnly\", \"renderElement\", \"renderLeaf\", \"renderPlaceholder\", \"style\", \"as\"];\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) { symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); } keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n/**\r\n * Editable.\r\n */\n\nvar AndroidEditable = props => {\n  var {\n    autoFocus,\n    decorate = defaultDecorate,\n    onDOMBeforeInput: propsOnDOMBeforeInput,\n    placeholder,\n    readOnly = false,\n    renderElement,\n    renderLeaf,\n    renderPlaceholder = props => /*#__PURE__*/React.createElement(DefaultPlaceholder, Object.assign({}, props)),\n    style = {},\n    as: Component = 'div'\n  } = props,\n      attributes = _objectWithoutProperties(props, _excluded$1);\n\n  var editor = useSlate();\n  var ref = useRef(null);\n  var inputManager = useAndroidInputManager(ref); // Update internal state on each render.\n\n  IS_READ_ONLY.set(editor, readOnly); // Keep track of some state for the event handler logic.\n\n  var state = useMemo(() => ({\n    isUpdatingSelection: false,\n    latestElement: null\n  }), []);\n  var [contentKey, setContentKey] = useState(0);\n  var onRestoreDOM = useCallback(() => {\n    setContentKey(prev => prev + 1);\n  }, [contentKey]); // Whenever the editor updates...\n\n  useIsomorphicLayoutEffect(() => {\n    // Update element-related weak maps with the DOM element ref.\n    var window;\n\n    if (ref.current && (window = getDefaultView(ref.current))) {\n      EDITOR_TO_WINDOW.set(editor, window);\n      EDITOR_TO_ELEMENT.set(editor, ref.current);\n      NODE_TO_ELEMENT.set(editor, ref.current);\n      ELEMENT_TO_NODE.set(ref.current, editor);\n      EDITOR_TO_RESTORE_DOM.set(editor, onRestoreDOM);\n    } else {\n      NODE_TO_ELEMENT.delete(editor);\n      EDITOR_TO_RESTORE_DOM.delete(editor);\n    }\n\n    try {\n      // Make sure the DOM selection state is in sync.\n      var {\n        selection\n      } = editor;\n      var root = ReactEditor.findDocumentOrShadowRoot(editor);\n      var domSelection = root.getSelection();\n\n      if (!domSelection || !ReactEditor.isFocused(editor)) {\n        return;\n      }\n\n      var hasDomSelection = domSelection.type !== 'None'; // If the DOM selection is properly unset, we're done.\n\n      if (!selection && !hasDomSelection) {\n        return;\n      } // verify that the dom selection is in the editor\n\n\n      var editorElement = EDITOR_TO_ELEMENT.get(editor);\n      var hasDomSelectionInEditor = false;\n\n      if (editorElement.contains(domSelection.anchorNode) && editorElement.contains(domSelection.focusNode)) {\n        hasDomSelectionInEditor = true;\n      } // If the DOM selection is in the editor and the editor selection is already correct, we're done.\n\n\n      if (hasDomSelection && hasDomSelectionInEditor && selection) {\n        var slateRange = ReactEditor.toSlateRange(editor, domSelection, {\n          exactMatch: true\n        });\n\n        if (slateRange && Range.equals(slateRange, selection)) {\n          return;\n        }\n      } // when <Editable/> is being controlled through external value\n      // then its children might just change - DOM responds to it on its own\n      // but Slate's value is not being updated through any operation\n      // and thus it doesn't transform selection on its own\n\n\n      if (selection && !ReactEditor.hasRange(editor, selection)) {\n        editor.selection = ReactEditor.toSlateRange(editor, domSelection, {\n          exactMatch: false\n        });\n        return;\n      } // Otherwise the DOM selection is out of sync, so update it.\n\n\n      var el = ReactEditor.toDOMNode(editor, editor);\n      state.isUpdatingSelection = true;\n      var newDomRange = selection && ReactEditor.toDOMRange(editor, selection);\n\n      if (newDomRange) {\n        if (Range.isBackward(selection)) {\n          domSelection.setBaseAndExtent(newDomRange.endContainer, newDomRange.endOffset, newDomRange.startContainer, newDomRange.startOffset);\n        } else {\n          domSelection.setBaseAndExtent(newDomRange.startContainer, newDomRange.startOffset, newDomRange.endContainer, newDomRange.endOffset);\n        }\n\n        var leafEl = newDomRange.startContainer.parentElement;\n        leafEl.getBoundingClientRect = newDomRange.getBoundingClientRect.bind(newDomRange);\n        scrollIntoView(leafEl, {\n          scrollMode: 'if-needed',\n          boundary: el\n        }); // @ts-ignore\n\n        delete leafEl.getBoundingClientRect;\n      } else {\n        domSelection.removeAllRanges();\n      }\n\n      setTimeout(() => {\n        state.isUpdatingSelection = false;\n      });\n    } catch (_unused) {\n      // Failed to update selection, likely due to reconciliation error\n      state.isUpdatingSelection = false;\n    }\n  }); // The autoFocus TextareaHTMLAttribute doesn't do anything on a div, so it\n  // needs to be manually focused.\n\n  useEffect(() => {\n    if (ref.current && autoFocus) {\n      ref.current.focus();\n    }\n  }, [autoFocus]); // Listen on the native `beforeinput` event to get real \"Level 2\" events. This\n  // is required because React's `beforeinput` is fake and never really attaches\n  // to the real event sadly. (2019/11/01)\n  // https://github.com/facebook/react/issues/11211\n\n  var onDOMBeforeInput = useCallback(event => {\n    if (!readOnly && hasEditableTarget(editor, event.target) && !isDOMEventHandled(event, propsOnDOMBeforeInput)) {\n      inputManager.onUserInput();\n    }\n  }, [readOnly, propsOnDOMBeforeInput]); // Attach a native DOM event handler for `beforeinput` events, because React's\n  // built-in `onBeforeInput` is actually a leaky polyfill that doesn't expose\n  // real `beforeinput` events sadly... (2019/11/04)\n\n  useIsomorphicLayoutEffect(() => {\n    var node = ref.current; // @ts-ignore The `beforeinput` event isn't recognized.\n\n    node === null || node === void 0 ? void 0 : node.addEventListener('beforeinput', onDOMBeforeInput); // @ts-ignore The `beforeinput` event isn't recognized.\n\n    return () => node === null || node === void 0 ? void 0 : node.removeEventListener('beforeinput', onDOMBeforeInput);\n  }, [contentKey, propsOnDOMBeforeInput]); // Listen on the native `selectionchange` event to be able to update any time\n  // the selection changes. This is required because React's `onSelect` is leaky\n  // and non-standard so it doesn't fire until after a selection has been\n  // released. This causes issues in situations where another change happens\n  // while a selection is being dragged.\n\n  var onDOMSelectionChange = useCallback(throttle(() => {\n    try {\n      if (!readOnly && !state.isUpdatingSelection && !inputManager.isReconciling.current) {\n        var root = ReactEditor.findDocumentOrShadowRoot(editor);\n        var {\n          activeElement\n        } = root;\n        var el = ReactEditor.toDOMNode(editor, editor);\n        var domSelection = root.getSelection();\n\n        if (activeElement === el) {\n          state.latestElement = activeElement;\n          IS_FOCUSED.set(editor, true);\n        } else {\n          IS_FOCUSED.delete(editor);\n        }\n\n        if (!domSelection) {\n          return Transforms.deselect(editor);\n        }\n\n        var {\n          anchorNode,\n          focusNode\n        } = domSelection;\n        var anchorNodeSelectable = hasEditableTarget(editor, anchorNode) || isTargetInsideVoid(editor, anchorNode);\n        var focusNodeSelectable = hasEditableTarget(editor, focusNode) || isTargetInsideVoid(editor, focusNode);\n\n        if (anchorNodeSelectable && focusNodeSelectable) {\n          var range = ReactEditor.toSlateRange(editor, domSelection, {\n            exactMatch: false\n          });\n          Transforms.select(editor, range);\n        } else {\n          Transforms.deselect(editor);\n        }\n      }\n    } catch (_unused2) {// Failed to update selection, likely due to reconciliation error\n    }\n  }, 100), [readOnly]); // Attach a native DOM event handler for `selectionchange`, because React's\n  // built-in `onSelect` handler doesn't fire for all selection changes. It's a\n  // leaky polyfill that only fires on keypresses or clicks. Instead, we want to\n  // fire for any change to the selection inside the editor. (2019/11/04)\n  // https://github.com/facebook/react/issues/5785\n\n  useIsomorphicLayoutEffect(() => {\n    var window = ReactEditor.getWindow(editor);\n    window.document.addEventListener('selectionchange', onDOMSelectionChange);\n    return () => {\n      window.document.removeEventListener('selectionchange', onDOMSelectionChange);\n    };\n  });\n  var decorations = decorate([editor, []]);\n\n  if (placeholder && editor.children.length === 1 && Array.from(Node.texts(editor)).length === 1 && Node.string(editor) === '') {\n    var start = Editor.start(editor, []);\n    decorations.push({\n      [PLACEHOLDER_SYMBOL]: true,\n      placeholder,\n      anchor: start,\n      focus: start\n    });\n  }\n\n  return /*#__PURE__*/React.createElement(ReadOnlyContext.Provider, {\n    value: readOnly\n  }, /*#__PURE__*/React.createElement(DecorateContext.Provider, {\n    value: decorate\n  }, /*#__PURE__*/React.createElement(Component, Object.assign({\n    key: contentKey,\n    role: readOnly ? undefined : 'textbox'\n  }, attributes, {\n    spellCheck: attributes.spellCheck,\n    autoCorrect: attributes.autoCorrect,\n    autoCapitalize: attributes.autoCapitalize,\n    \"data-slate-editor\": true,\n    \"data-slate-node\": \"value\",\n    contentEditable: readOnly ? undefined : true,\n    suppressContentEditableWarning: true,\n    ref: ref,\n    style: _objectSpread({\n      // Allow positioning relative to the editable element.\n      position: 'relative',\n      // Prevent the default outline styles.\n      outline: 'none',\n      // Preserve adjacent whitespace and new lines.\n      whiteSpace: 'pre-wrap',\n      // Allow words to break if they are too long.\n      wordWrap: 'break-word'\n    }, style),\n    onCopy: useCallback(event => {\n      if (hasEditableTarget(editor, event.target) && !isEventHandled(event, attributes.onCopy)) {\n        event.preventDefault();\n        ReactEditor.setFragmentData(editor, event.clipboardData);\n      }\n    }, [attributes.onCopy]),\n    onCut: useCallback(event => {\n      if (!readOnly && hasEditableTarget(editor, event.target) && !isEventHandled(event, attributes.onCut)) {\n        event.preventDefault();\n        ReactEditor.setFragmentData(editor, event.clipboardData);\n        var {\n          selection\n        } = editor;\n\n        if (selection) {\n          if (Range.isExpanded(selection)) {\n            Editor.deleteFragment(editor);\n          } else {\n            var node = Node.parent(editor, selection.anchor.path);\n\n            if (Editor.isVoid(editor, node)) {\n              Transforms.delete(editor);\n            }\n          }\n        }\n      }\n    }, [readOnly, attributes.onCut]),\n    onFocus: useCallback(event => {\n      if (!readOnly && !state.isUpdatingSelection && hasEditableTarget(editor, event.target) && !isEventHandled(event, attributes.onFocus)) {\n        var root = ReactEditor.findDocumentOrShadowRoot(editor);\n        state.latestElement = root.activeElement;\n        IS_FOCUSED.set(editor, true);\n      }\n    }, [readOnly, attributes.onFocus]),\n    onBlur: useCallback(event => {\n      if (readOnly || state.isUpdatingSelection || !hasEditableTarget(editor, event.target) || isEventHandled(event, attributes.onBlur)) {\n        return;\n      } // COMPAT: If the current `activeElement` is still the previous\n      // one, this is due to the window being blurred when the tab\n      // itself becomes unfocused, so we want to abort early to allow to\n      // editor to stay focused when the tab becomes focused again.\n\n\n      var root = ReactEditor.findDocumentOrShadowRoot(editor);\n\n      if (state.latestElement === root.activeElement) {\n        return;\n      }\n\n      var {\n        relatedTarget\n      } = event;\n      var el = ReactEditor.toDOMNode(editor, editor); // COMPAT: The event should be ignored if the focus is returning\n      // to the editor from an embedded editable element (eg. an <input>\n      // element inside a void node).\n\n      if (relatedTarget === el) {\n        return;\n      } // COMPAT: The event should be ignored if the focus is moving from\n      // the editor to inside a void node's spacer element.\n\n\n      if (isDOMElement(relatedTarget) && relatedTarget.hasAttribute('data-slate-spacer')) {\n        return;\n      } // COMPAT: The event should be ignored if the focus is moving to a\n      // non- editable section of an element that isn't a void node (eg.\n      // a list item of the check list example).\n\n\n      if (relatedTarget != null && isDOMNode(relatedTarget) && ReactEditor.hasDOMNode(editor, relatedTarget)) {\n        var node = ReactEditor.toSlateNode(editor, relatedTarget);\n\n        if (Element$1.isElement(node) && !editor.isVoid(node)) {\n          return;\n        }\n      }\n\n      IS_FOCUSED.delete(editor);\n    }, [readOnly, attributes.onBlur]),\n    onPaste: useCallback(event => {\n      // this will make application/x-slate-fragment exist when onPaste attributes is passed\n      event.clipboardData = getClipboardData(event.clipboardData); // This unfortunately needs to be handled with paste events instead.\n\n      if (hasEditableTarget(editor, event.target) && !isEventHandled(event, attributes.onPaste) && !readOnly) {\n        event.preventDefault();\n        ReactEditor.insertData(editor, event.clipboardData);\n      }\n    }, [readOnly, attributes.onPaste])\n  }), useChildren({\n    decorations,\n    node: editor,\n    renderElement,\n    renderPlaceholder,\n    renderLeaf,\n    selection: editor.selection\n  }))));\n};\n\n/**\r\n * A React context for sharing the `focused` state of the editor.\r\n */\n\nvar FocusedContext = /*#__PURE__*/createContext(false);\n/**\r\n * Get the current `focused` state of the editor.\r\n */\n\nvar useFocused = () => {\n  return useContext(FocusedContext);\n};\n\nvar _excluded = [\"editor\", \"children\", \"onChange\", \"value\"];\n/**\r\n * A wrapper around the provider to handle `onChange` events, because the editor\r\n * is a mutable singleton so it won't ever register as \"changed\" otherwise.\r\n */\n\nvar Slate = props => {\n  var {\n    editor,\n    children,\n    onChange,\n    value\n  } = props,\n      rest = _objectWithoutProperties(props, _excluded);\n\n  var [key, setKey] = useState(0);\n  var context = useMemo(() => {\n    if (!Node.isNodeList(value)) {\n      throw new Error(\"[Slate] value is invalid! Expected a list of elements\" + \"but got: \".concat(JSON.stringify(value)));\n    }\n\n    if (!Editor.isEditor(editor)) {\n      throw new Error(\"[Slate] editor is invalid! you passed:\" + \"\".concat(JSON.stringify(editor)));\n    }\n\n    editor.children = value;\n    Object.assign(editor, rest);\n    return [editor];\n  }, [key, value, ...Object.values(rest)]);\n  var onContextChange = useCallback(() => {\n    onChange(editor.children);\n    setKey(key + 1);\n  }, [key, onChange]);\n  EDITOR_TO_ON_CHANGE.set(editor, onContextChange);\n  useEffect(() => {\n    return () => {\n      EDITOR_TO_ON_CHANGE.set(editor, () => {});\n    };\n  }, []);\n  var [isFocused, setIsFocused] = useState(ReactEditor.isFocused(editor));\n  useEffect(() => {\n    setIsFocused(ReactEditor.isFocused(editor));\n  });\n  useIsomorphicLayoutEffect(() => {\n    var fn = () => setIsFocused(ReactEditor.isFocused(editor));\n\n    document.addEventListener('focus', fn, true);\n    return () => document.removeEventListener('focus', fn, true);\n  }, []);\n  useIsomorphicLayoutEffect(() => {\n    var fn = () => setIsFocused(ReactEditor.isFocused(editor));\n\n    document.addEventListener('blur', fn, true);\n    return () => document.removeEventListener('blur', fn, true);\n  }, []);\n  return /*#__PURE__*/React.createElement(SlateContext.Provider, {\n    value: context\n  }, /*#__PURE__*/React.createElement(EditorContext.Provider, {\n    value: editor\n  }, /*#__PURE__*/React.createElement(FocusedContext.Provider, {\n    value: isFocused\n  }, children)));\n};\n\n/**\r\n * Get the current editor object from the React context.\r\n * @deprecated Use useSlateStatic instead.\r\n */\n\nvar useEditor = () => {\n  var editor = useContext(EditorContext);\n\n  if (!editor) {\n    throw new Error(\"The `useEditor` hook must be used inside the <Slate> component's context.\");\n  }\n\n  return editor;\n};\n\n/**\r\n * Utilities for single-line deletion\r\n */\n\nvar doRectsIntersect = (rect, compareRect) => {\n  var middle = (compareRect.top + compareRect.bottom) / 2;\n  return rect.top <= middle && rect.bottom >= middle;\n};\n\nvar areRangesSameLine = (editor, range1, range2) => {\n  var rect1 = ReactEditor.toDOMRange(editor, range1).getBoundingClientRect();\n  var rect2 = ReactEditor.toDOMRange(editor, range2).getBoundingClientRect();\n  return doRectsIntersect(rect1, rect2) && doRectsIntersect(rect2, rect1);\n};\n/**\r\n * A helper utility that returns the end portion of a `Range`\r\n * which is located on a single line.\r\n *\r\n * @param {Editor} editor The editor object to compare against\r\n * @param {Range} parentRange The parent range to compare against\r\n * @returns {Range} A valid portion of the parentRange which is one a single line\r\n */\n\n\nvar findCurrentLineRange = (editor, parentRange) => {\n  var parentRangeBoundary = Editor.range(editor, Range.end(parentRange));\n  var positions = Array.from(Editor.positions(editor, {\n    at: parentRange\n  }));\n  var left = 0;\n  var right = positions.length;\n  var middle = Math.floor(right / 2);\n\n  if (areRangesSameLine(editor, Editor.range(editor, positions[left]), parentRangeBoundary)) {\n    return Editor.range(editor, positions[left], parentRangeBoundary);\n  }\n\n  if (positions.length < 2) {\n    return Editor.range(editor, positions[positions.length - 1], parentRangeBoundary);\n  }\n\n  while (middle !== positions.length && middle !== left) {\n    if (areRangesSameLine(editor, Editor.range(editor, positions[middle]), parentRangeBoundary)) {\n      right = middle;\n    } else {\n      left = middle;\n    }\n\n    middle = Math.floor((left + right) / 2);\n  }\n\n  return Editor.range(editor, positions[right], parentRangeBoundary);\n};\n\n/**\r\n * `withReact` adds React and DOM specific behaviors to the editor.\r\n *\r\n * If you are using TypeScript, you must extend Slate's CustomTypes to use\r\n * this plugin.\r\n *\r\n * See https://docs.slatejs.org/concepts/11-typescript to learn how.\r\n */\n\nvar withReact = editor => {\n  var e = editor;\n  var {\n    apply,\n    onChange,\n    deleteBackward\n  } = e; // The WeakMap which maps a key to a specific HTMLElement must be scoped to the editor instance to\n  // avoid collisions between editors in the DOM that share the same value.\n\n  EDITOR_TO_KEY_TO_ELEMENT.set(e, new WeakMap());\n\n  e.deleteBackward = unit => {\n    if (unit !== 'line') {\n      return deleteBackward(unit);\n    }\n\n    if (editor.selection && Range.isCollapsed(editor.selection)) {\n      var parentBlockEntry = Editor.above(editor, {\n        match: n => Editor.isBlock(editor, n),\n        at: editor.selection\n      });\n\n      if (parentBlockEntry) {\n        var [, parentBlockPath] = parentBlockEntry;\n        var parentElementRange = Editor.range(editor, parentBlockPath, editor.selection.anchor);\n        var currentLineRange = findCurrentLineRange(e, parentElementRange);\n\n        if (!Range.isCollapsed(currentLineRange)) {\n          Transforms.delete(editor, {\n            at: currentLineRange\n          });\n        }\n      }\n    }\n  };\n\n  e.apply = op => {\n    // if we're NOT an insert_text and there's a queue\n    // of native events, bail out and flush the queue.\n    // otherwise transforms as part of this cycle will\n    // be incorrect.\n    //\n    // This is needed as overriden operations (e.g. `insertText`)\n    // can call additional transforms, which will need accurate\n    // content, and will be called _before_ `onInput` is fired.\n    if (op.type !== 'insert_text') {\n      AS_NATIVE.set(editor, false);\n      flushNativeEvents(editor);\n    } // If we're in native mode, queue the operation\n    // and it will be applied later.\n\n\n    if (AS_NATIVE.get(editor)) {\n      var nativeOps = NATIVE_OPERATIONS.get(editor);\n\n      if (nativeOps) {\n        nativeOps.push(op);\n      } else {\n        NATIVE_OPERATIONS.set(editor, [op]);\n      }\n\n      return;\n    }\n\n    var matches = [];\n\n    switch (op.type) {\n      case 'insert_text':\n      case 'remove_text':\n      case 'set_node':\n        {\n          for (var [node, path] of Editor.levels(e, {\n            at: op.path\n          })) {\n            var key = ReactEditor.findKey(e, node);\n            matches.push([path, key]);\n          }\n\n          break;\n        }\n\n      case 'insert_node':\n      case 'remove_node':\n      case 'merge_node':\n      case 'split_node':\n        {\n          for (var [_node, _path] of Editor.levels(e, {\n            at: Path.parent(op.path)\n          })) {\n            var _key = ReactEditor.findKey(e, _node);\n\n            matches.push([_path, _key]);\n          }\n\n          break;\n        }\n\n      case 'move_node':\n        {\n          for (var [_node2, _path2] of Editor.levels(e, {\n            at: Path.common(Path.parent(op.path), Path.parent(op.newPath))\n          })) {\n            var _key2 = ReactEditor.findKey(e, _node2);\n\n            matches.push([_path2, _key2]);\n          }\n\n          break;\n        }\n    }\n\n    apply(op);\n\n    for (var [_path3, _key3] of matches) {\n      var [_node3] = Editor.node(e, _path3);\n      NODE_TO_KEY.set(_node3, _key3);\n    }\n  };\n\n  e.setFragmentData = data => {\n    var {\n      selection\n    } = e;\n\n    if (!selection) {\n      return;\n    }\n\n    var [start, end] = Range.edges(selection);\n    var startVoid = Editor.void(e, {\n      at: start.path\n    });\n    var endVoid = Editor.void(e, {\n      at: end.path\n    });\n\n    if (Range.isCollapsed(selection) && !startVoid) {\n      return;\n    } // Create a fake selection so that we can add a Base64-encoded copy of the\n    // fragment to the HTML, to decode on future pastes.\n\n\n    var domRange = ReactEditor.toDOMRange(e, selection);\n    var contents = domRange.cloneContents();\n    var attach = contents.childNodes[0]; // Make sure attach is non-empty, since empty nodes will not get copied.\n\n    contents.childNodes.forEach(node => {\n      if (node.textContent && node.textContent.trim() !== '') {\n        attach = node;\n      }\n    }); // COMPAT: If the end node is a void node, we need to move the end of the\n    // range from the void node's spacer span, to the end of the void node's\n    // content, since the spacer is before void's content in the DOM.\n\n    if (endVoid) {\n      var [voidNode] = endVoid;\n      var r = domRange.cloneRange();\n      var domNode = ReactEditor.toDOMNode(e, voidNode);\n      r.setEndAfter(domNode);\n      contents = r.cloneContents();\n    } // COMPAT: If the start node is a void node, we need to attach the encoded\n    // fragment to the void node's content node instead of the spacer, because\n    // attaching it to empty `<div>/<span>` nodes will end up having it erased by\n    // most browsers. (2018/04/27)\n\n\n    if (startVoid) {\n      attach = contents.querySelector('[data-slate-spacer]');\n    } // Remove any zero-width space spans from the cloned DOM so that they don't\n    // show up elsewhere when pasted.\n\n\n    Array.from(contents.querySelectorAll('[data-slate-zero-width]')).forEach(zw => {\n      var isNewline = zw.getAttribute('data-slate-zero-width') === 'n';\n      zw.textContent = isNewline ? '\\n' : '';\n    }); // Set a `data-slate-fragment` attribute on a non-empty node, so it shows up\n    // in the HTML, and can be used for intra-Slate pasting. If it's a text\n    // node, wrap it in a `<span>` so we have something to set an attribute on.\n\n    if (isDOMText(attach)) {\n      var span = document.createElement('span'); // COMPAT: In Chrome and Safari, if we don't add the `white-space` style\n      // then leading and trailing spaces will be ignored. (2017/09/21)\n\n      span.style.whiteSpace = 'pre';\n      span.appendChild(attach);\n      contents.appendChild(span);\n      attach = span;\n    }\n\n    var fragment = e.getFragment();\n    var string = JSON.stringify(fragment);\n    var encoded = window.btoa(encodeURIComponent(string));\n    attach.setAttribute('data-slate-fragment', encoded);\n    data.setData('application/x-slate-fragment', encoded); // Add the content to a <div> so that we can get its inner HTML.\n\n    var div = document.createElement('div');\n    div.appendChild(contents);\n    div.setAttribute('hidden', 'true');\n    document.body.appendChild(div);\n    data.setData('text/html', div.innerHTML);\n    data.setData('text/plain', getPlainText(div));\n    document.body.removeChild(div);\n    return data;\n  };\n\n  e.insertData = data => {\n    /**\r\n     * Checking copied fragment from application/x-slate-fragment or data-slate-fragment\r\n     */\n    var fragment = data.getData('application/x-slate-fragment') || getSlateFragmentAttribute(data);\n\n    if (fragment) {\n      var decoded = decodeURIComponent(window.atob(fragment));\n      var parsed = JSON.parse(decoded);\n      e.insertFragment(parsed);\n      return;\n    }\n\n    var text = data.getData('text/plain');\n\n    if (text) {\n      var lines = text.split(/\\r\\n|\\r|\\n/);\n      var split = false;\n\n      for (var line of lines) {\n        if (split) {\n          Transforms.splitNodes(e, {\n            always: true\n          });\n        }\n\n        e.insertText(line);\n        split = true;\n      }\n    }\n  };\n\n  e.onChange = () => {\n    // COMPAT: React doesn't batch `setState` hook calls, which means that the\n    // children and selection can get out of sync for one render pass. So we\n    // have to use this unstable API to ensure it batches them. (2019/12/03)\n    // https://github.com/facebook/react/issues/14259#issuecomment-439702367\n    ReactDOM.unstable_batchedUpdates(() => {\n      var onContextChange = EDITOR_TO_ON_CHANGE.get(e);\n\n      if (onContextChange) {\n        onContextChange();\n      }\n\n      onChange();\n    });\n  };\n\n  return e;\n};\n\n// Components\nvar Editable = IS_ANDROID ? AndroidEditable : Editable$1;\n\nexport { AndroidEditable, Editable$1 as DefaultEditable, DefaultElement, DefaultLeaf, DefaultPlaceholder, Editable, ReactEditor, Slate, useEditor, useFocused, useReadOnly, useSelected, useSlate, useSlateStatic, withReact };\n//# sourceMappingURL=index.es.js.map\n","import { isPlainObject } from 'is-plain-object';\nimport { Operation, Editor, Path } from 'slate';\n\nvar History = {\n  /**\r\n   * Check if a value is a `History` object.\r\n   */\n  isHistory(value) {\n    return isPlainObject(value) && Array.isArray(value.redos) && Array.isArray(value.undos) && (value.redos.length === 0 || Operation.isOperationList(value.redos[0])) && (value.undos.length === 0 || Operation.isOperationList(value.undos[0]));\n  }\n\n};\n\n/**\r\n * Weakmaps for attaching state to the editor.\r\n */\n\nvar HISTORY = new WeakMap();\nvar SAVING = new WeakMap();\nvar MERGING = new WeakMap();\nvar HistoryEditor = {\n  /**\r\n   * Check if a value is a `HistoryEditor` object.\r\n   */\n  isHistoryEditor(value) {\n    return History.isHistory(value.history) && Editor.isEditor(value);\n  },\n\n  /**\r\n   * Get the merge flag's current value.\r\n   */\n  isMerging(editor) {\n    return MERGING.get(editor);\n  },\n\n  /**\r\n   * Get the saving flag's current value.\r\n   */\n  isSaving(editor) {\n    return SAVING.get(editor);\n  },\n\n  /**\r\n   * Redo to the previous saved state.\r\n   */\n  redo(editor) {\n    editor.redo();\n  },\n\n  /**\r\n   * Undo to the previous saved state.\r\n   */\n  undo(editor) {\n    editor.undo();\n  },\n\n  /**\r\n   * Apply a series of changes inside a synchronous `fn`, without merging any of\r\n   * the new operations into previous save point in the history.\r\n   */\n  withoutMerging(editor, fn) {\n    var prev = HistoryEditor.isMerging(editor);\n    MERGING.set(editor, false);\n    fn();\n    MERGING.set(editor, prev);\n  },\n\n  /**\r\n   * Apply a series of changes inside a synchronous `fn`, without saving any of\r\n   * their operations into the history.\r\n   */\n  withoutSaving(editor, fn) {\n    var prev = HistoryEditor.isSaving(editor);\n    SAVING.set(editor, false);\n    fn();\n    SAVING.set(editor, prev);\n  }\n\n};\n\n/**\r\n * The `withHistory` plugin keeps track of the operation history of a Slate\r\n * editor as operations are applied to it, using undo and redo stacks.\r\n *\r\n * If you are using TypeScript, you must extend Slate's CustomTypes to use\r\n * this plugin.\r\n *\r\n * See https://docs.slatejs.org/concepts/11-typescript to learn how.\r\n */\n\nvar withHistory = editor => {\n  var e = editor;\n  var {\n    apply\n  } = e;\n  e.history = {\n    undos: [],\n    redos: []\n  };\n\n  e.redo = () => {\n    var {\n      history\n    } = e;\n    var {\n      redos\n    } = history;\n\n    if (redos.length > 0) {\n      var batch = redos[redos.length - 1];\n      HistoryEditor.withoutSaving(e, () => {\n        Editor.withoutNormalizing(e, () => {\n          for (var op of batch) {\n            e.apply(op);\n          }\n        });\n      });\n      history.redos.pop();\n      history.undos.push(batch);\n    }\n  };\n\n  e.undo = () => {\n    var {\n      history\n    } = e;\n    var {\n      undos\n    } = history;\n\n    if (undos.length > 0) {\n      var batch = undos[undos.length - 1];\n      HistoryEditor.withoutSaving(e, () => {\n        Editor.withoutNormalizing(e, () => {\n          var inverseOps = batch.map(Operation.inverse).reverse();\n\n          for (var op of inverseOps) {\n            e.apply(op);\n          }\n        });\n      });\n      history.redos.push(batch);\n      history.undos.pop();\n    }\n  };\n\n  e.apply = op => {\n    var {\n      operations,\n      history\n    } = e;\n    var {\n      undos\n    } = history;\n    var lastBatch = undos[undos.length - 1];\n    var lastOp = lastBatch && lastBatch[lastBatch.length - 1];\n    var overwrite = shouldOverwrite(op, lastOp);\n    var save = HistoryEditor.isSaving(e);\n    var merge = HistoryEditor.isMerging(e);\n\n    if (save == null) {\n      save = shouldSave(op);\n    }\n\n    if (save) {\n      if (merge == null) {\n        if (lastBatch == null) {\n          merge = false;\n        } else if (operations.length !== 0) {\n          merge = true;\n        } else {\n          merge = shouldMerge(op, lastOp) || overwrite;\n        }\n      }\n\n      if (lastBatch && merge) {\n        if (overwrite) {\n          lastBatch.pop();\n        }\n\n        lastBatch.push(op);\n      } else {\n        var batch = [op];\n        undos.push(batch);\n      }\n\n      while (undos.length > 100) {\n        undos.shift();\n      }\n\n      if (shouldClear(op)) {\n        history.redos = [];\n      }\n    }\n\n    apply(op);\n  };\n\n  return e;\n};\n/**\r\n * Check whether to merge an operation into the previous operation.\r\n */\n\nvar shouldMerge = (op, prev) => {\n  if (op.type === 'set_selection') {\n    return true;\n  }\n\n  if (prev && op.type === 'insert_text' && prev.type === 'insert_text' && op.offset === prev.offset + prev.text.length && Path.equals(op.path, prev.path)) {\n    return true;\n  }\n\n  if (prev && op.type === 'remove_text' && prev.type === 'remove_text' && op.offset + op.text.length === prev.offset && Path.equals(op.path, prev.path)) {\n    return true;\n  }\n\n  return false;\n};\n/**\r\n * Check whether an operation needs to be saved to the history.\r\n */\n\n\nvar shouldSave = (op, prev) => {\n  if (op.type === 'set_selection' && (op.properties == null || op.newProperties == null)) {\n    return false;\n  }\n\n  return true;\n};\n/**\r\n * Check whether an operation should overwrite the previous one.\r\n */\n\n\nvar shouldOverwrite = (op, prev) => {\n  if (prev && op.type === 'set_selection' && prev.type === 'set_selection') {\n    return true;\n  }\n\n  return false;\n};\n/**\r\n * Check whether an operation should clear the redos stack.\r\n */\n\n\nvar shouldClear = op => {\n  if (op.type === 'set_selection') {\n    return false;\n  }\n\n  return true;\n};\n\nexport { HISTORY, History, HistoryEditor, MERGING, SAVING, withHistory };\n//# sourceMappingURL=index.es.js.map\n","// 通过order转数字\nconst getLetterByOrder = order => {\n  const result = []\n  while (order) {\n    var t = order % 26;\n    if (!t) {\n      t = 26;\n      --order;\n    }\n    result.push(String.fromCodePoint(t + 64));\n    order = ~~(order / 26);\n  }\n  return result.reverse().join('');\n};\n\nconst orderUse = (offset, order) => {\n  const type = offset % 3;\n  if (type === 0) {\n    return order;\n  } else if (type === 1) {\n    return getLetterByOrder(order);\n  } else {\n    return getLetterByOrder(order).toLowerCase();\n  }\n};\n\nconst uListUse = offset => {\n  const type = offset % 4;\n  if (type === 0) {\n    return '•';\n  } else if (type === 1) {\n    return '◦';\n  } else if (type === 2) {\n    return '▪';\n  } else {\n    return '▫';\n  }\n};\n\nexport { orderUse, uListUse };\n","import { Transforms, Range, Editor, Element as SlateElement } from 'slate';\nimport { ReactEditor } from 'slate-react';\n\n\nconst setNodeTag = (editor, element, key, value, at = null) => {\n    if (at) {\n        Transforms.setNodes(editor, { [key]: value }, { at: at });\n    } else if (!element) {\n        // 如果没有传入对象，则操作当前行\n        Transforms.setNodes(editor, { [key]: value });\n    } else {\n        const checkedAt = ReactEditor.findPath(editor, element);\n        Transforms.setNodes(editor, { [key]: value }, { at: checkedAt });\n    }\n}\n\nconst setChecked = (editor, element, checked) => {\n    setNodeTag(editor, element, 'checked', checked);\n}\n\nconst setTitle = (editor, element, title) => {\n    setNodeTag(editor, element, 'title', title);\n}\n\nconst setTextAlign = (editor, element, textAlign) => {\n    setNodeTag(editor, element, 'textAlign', textAlign);\n}\n\nconst setQuote = (editor, element, quote) => {\n    setNodeTag(editor, element, 'quote', quote);\n}\n\n// 设置有序列表的前边顺序符\nconst setListOrder = (editor, element, listOrder, path = null) => {\n    setNodeTag(editor, element, 'listOrder', listOrder, path);\n\n    // 向下查找，把下边连接的相同区域的有序列表序号都重置\n    if (!!path) {\n        setNextListOrder(editor, element, path, listOrder + 1);\n    } else if (!!element) {\n        const path = ReactEditor.findPath(editor, element);\n        setNextListOrder(editor, element, path, listOrder + 1);\n    } else {\n        const { selection } = editor;\n        // 如果不是光标点，不操作\n        if (!selection || !Range.isCollapsed(selection)) {\n            return;\n        }\n        // 获取当前对象\n        const block = Editor.above(editor, {\n            match: n => Editor.isBlock(editor, n),\n        });\n        if (!block) {\n            return;\n        }\n        const [el, path] = block;\n        setNextListOrder(editor, el, path, listOrder + 1);\n    }\n};\n\nconst setNextListOrder = (editor, element, path, listOrder) => {\n    // 这个函数在insertBreak的时候有bug，path是准的，但是内容不准\n    const nextBlock = Editor.next(editor, { at: path });\n\n    if (!nextBlock) {\n        return;\n    }\n\n    const [el, nextPath] = nextBlock;\n    // 如果下一个不是有序列表，不做操作\n    if (!!el.type && el.type != 'paragraph') {\n        return;\n    }\n    if (!el.list || el.list != 'ol') {\n        return;\n    }\n\n    const nowOffset = element.indentation || 0;\n    const nextOffset = el.indentation || 0;\n\n    // 如果缩进不一致，不做操作\n    if (nowOffset != nextOffset) {\n        return;\n    }\n\n    setListOrder(editor, el, listOrder, nextPath);\n};\n\nconst setList = (editor, element, list) => {\n    // 如果是去除list效果，则所有附加属性全部清空\n    if (!list) {\n        setNodeTag(editor, element, 'list', null);\n        setNodeTag(editor, element, 'checked', null);\n        setNodeTag(editor, element, 'listOrder', null);\n    } else {\n        setNodeTag(editor, element, 'list', list);\n        if (list != 'checkbox') {\n            setNodeTag(editor, element, 'checked', null);\n        }\n        if (list != 'ol') {\n            setNodeTag(editor, element, 'listOrder', null);\n        }\n    }\n};\n\nconst setIndentation = (editor, element, indentation, at = null) => {\n    if (!indentation || indentation <= 0) {\n        setNodeTag(editor, element, 'indentation', null, at);\n    } else {\n        setNodeTag(editor, element, 'indentation', indentation, at);\n    }\n}\n\nconst wrapLink = (editor) => {\n    const { selection } = editor\n    if (!selection) {\n        return\n    }\n\n    const isCollapsed = Range.isCollapsed(selection)\n    if (isCollapsed) {\n        return\n    }\n\n    const link = {\n        type: 'link',\n        url: 'http://',\n        target: '_self',\n        children: [],\n    }\n\n    Transforms.wrapNodes(editor, link, { split: true })\n}\n\nconst unWrapLink = (editor, element = null) => {\n    if (element) {\n        const at = ReactEditor.findPath(editor, element);\n        Transforms.unwrapNodes(editor, {\n            match: n =>\n                !Editor.isEditor(n) && SlateElement.isElement(n) && n.type === 'link',\n            at\n        })\n    } else {\n        Transforms.unwrapNodes(editor, {\n            match: n =>\n                !Editor.isEditor(n) && SlateElement.isElement(n) && n.type === 'link',\n\n        })\n    }\n}\n\nconst setURL = (editor, element, url) => {\n    if (element.type && element.type === 'link') {\n        setNodeTag(editor, element, 'url', url);\n    }\n}\n\nconst setLinkTarget = (editor, element, target) => {\n    if (element.type && element.type === 'link') {\n        setNodeTag(editor, element, 'target', target);\n    }\n}\n\nconst setStarNum = (editor, element, number) => {\n    setNodeTag(editor, element, 'number', number);\n}\n\nconst insertStar = (editor) => {\n    const star = {\n        type: 'star',\n        number: 5,\n        children: [{ text: '' }],\n    }\n    Transforms.insertNodes(editor, star)\n}\n\nexport {\n    setChecked,\n    setTitle,\n    setTextAlign,\n    setQuote,\n    setList,\n    setListOrder,\n    setIndentation,\n    wrapLink,\n    unWrapLink,\n    setURL,\n    setLinkTarget,\n    insertStar,\n    setStarNum,\n}","import React, { useState } from 'react'\nimport {\n  CheckSquareOutlined,\n  BorderOutlined,\n  DeleteOutlined,\n} from '@ant-design/icons'\nimport { useFocused, useSelected, useSlate } from 'slate-react'\nimport { orderUse, uListUse } from './utils/list'\nimport {\n  setChecked,\n  setURL,\n  setLinkTarget,\n  unWrapLink,\n  setStarNum,\n} from './utils/node'\nimport { Tooltip, Input, message, Rate } from 'antd'\nimport isUrl from 'is-url'\nimport Single from '@/components/button/single'\nimport Select from '@/components/button/select'\n\nconst IndentationText = (props) => {\n  // children 主要文本内容\n  // icon 前置标志\n  // offset 缩进值\n  const { children, icon, offset } = props\n\n  if (!!icon) {\n    return (\n      <div style={{ display: 'flex' }}>\n        <div\n          contentEditable={false}\n          style={{\n            marginLeft: `${offset * 20}px`,\n            minWidth: '10px',\n            textAlign: 'right',\n            marginRight: '5px',\n            userSelect: 'none',\n          }}\n        >\n          {icon}\n        </div>\n        <div style={{ flex: 1 }}>{children}</div>\n      </div>\n    )\n  } else {\n    return (\n      <div style={{ display: 'flex' }}>\n        <div\n          style={{\n            flex: 1,\n            marginLeft: `${offset * 20}px`,\n          }}\n        >\n          {children}\n        </div>\n      </div>\n    )\n  }\n}\n\n// 基础文本格式类\nconst Element = React.memo((props) => {\n  // 子组件\n  let { children } = props\n\n  // 基础配置\n  const { element, attributes } = props\n  // 文本参数\n  const { title, textAlign, list, quote } = element\n  // 文本额外参数\n  // checked(bool): checkbox是否打勾\n  // indentation(num): list的缩进配置\n  const { checked, indentation, listOrder } = element\n  // 转换缩进值，没有写的就是0\n  const offset = indentation || 0\n\n  const editor = useSlate()\n\n  // 列表类型，支持checkbox、有序无序列表\n  if (!!list) {\n    if (list === 'checkbox') {\n      // checkbox的点击事件支持\n      const Checkbox = (props) => {\n        const onMouseDown = (event) => {\n          if (editor.readOnly) {\n            return\n          }\n\n          event.preventDefault()\n\n          setChecked(editor, element, !checked)\n        }\n\n        const Box = () => {\n          return (\n            <span style={{ cursor: 'pointer' }} onMouseDown={onMouseDown}>\n              {!!checked ? <CheckSquareOutlined /> : <BorderOutlined />}\n            </span>\n          )\n        }\n\n        return (\n          <IndentationText offset={offset} icon={<Box />}>\n            {!!checked ? (\n              <s style={{ color: '#B7BAC6' }}>{props.children}</s>\n            ) : (\n              props.children\n            )}\n          </IndentationText>\n        )\n      }\n\n      children = <Checkbox>{children}</Checkbox>\n    }\n\n    if (list === 'ul') {\n      children = (\n        <IndentationText\n          offset={offset}\n          icon={<span style={{ color: '#4E61E8' }}>{uListUse(offset)}</span>}\n        >\n          {children}\n        </IndentationText>\n      )\n    }\n\n    if (list === 'ol' && !!listOrder) {\n      children = (\n        <IndentationText\n          offset={offset}\n          icon={\n            <span style={{ color: '#4E61E8' }}>\n              {orderUse(offset, listOrder)}.\n            </span>\n          }\n        >\n          {children}\n        </IndentationText>\n      )\n    }\n  }\n\n  // 如果设置了标题属性\n  if (!!title) {\n    if (title === 'h1') {\n      children = <h1 style={{ fontSize: '28px' }}>{children}</h1>\n    }\n    if (title === 'h2') {\n      children = <h2 style={{ fontSize: '26px' }}>{children}</h2>\n    }\n    if (title === 'h3') {\n      children = <h3 style={{ fontSize: '24px' }}>{children}</h3>\n    }\n    if (title === 'h4') {\n      children = <h4 style={{ fontSize: '22px' }}>{children}</h4>\n    }\n    if (title === 'h5') {\n      children = <h5 style={{ fontSize: '20px' }}>{children}</h5>\n    }\n  }\n\n  // 处理缩进，list本身已经处理过缩进，不再处理。处理其他文本的\n  if (!list) {\n    children = <IndentationText offset={offset}>{children}</IndentationText>\n  }\n\n  // 引用处理\n  if (!!quote) {\n    children = (\n      <div\n        style={{\n          padding: '0px 0 0px 10px',\n          borderLeft: '1px solid #2447F5',\n          color: '#A5A6A6',\n        }}\n      >\n        {children}\n      </div>\n    )\n  }\n\n  return (\n    <div\n      style={{ wordBreak: 'break-all', textAlign: textAlign || 'left' }}\n      {...attributes}\n    >\n      {children}\n    </div>\n  )\n})\n\nconst LinkElement = (props) => {\n  // 基础配置\n  const { element, attributes, children } = props\n\n  const { url, target } = element\n\n  const editor = useSlate()\n  const { readOnly } = editor\n\n  const LinkEditor = (props) => {\n    const [value, setValue] = useState(url)\n\n    const onChange = (v) => {\n      setValue(v.target.value)\n    }\n\n    return (\n      <>\n        <div style={{ display: 'inline-block', width: '280px' }}>\n          <Input value={value} onChange={onChange} />\n        </div>\n        &nbsp;\n        <Single\n          selected={true}\n          description='修改链接'\n          content='修改'\n          onClick={() => {\n            setURL(editor, element, value)\n            message.info('修改链接成功')\n          }}\n        />\n        <Single\n          selected={true}\n          description='清除链接'\n          content={<DeleteOutlined />}\n          onClick={() => {\n            unWrapLink(editor, element)\n          }}\n        />\n        <div style={{ marginTop: '10px' }}>\n          <font style={{ color: 'black' }}>打开方式:</font>&nbsp;\n          <Select\n            selected={target}\n            notNull={true}\n            onChange={(key) => {\n              setLinkTarget(editor, element, key)\n            }}\n            buttons={[\n              {\n                key: '_self',\n                content: '本页面',\n                description: '会在本页面跳转链接',\n              },\n              {\n                key: '_blank',\n                content: '新页面',\n                description: '会在新页面跳转链接',\n              },\n            ]}\n          />\n        </div>\n      </>\n    )\n  }\n\n  // 处理超链接\n  return readOnly ? (\n    <a\n      onMouseDown={() => {\n        if (isUrl(url)) {\n          window.open(url, target)\n        }\n      }}\n      {...attributes}\n    >\n      {children}\n    </a>\n  ) : (\n    <Tooltip\n      title={<LinkEditor />}\n      color='white'\n      overlayStyle={{ minWidth: '400px' }}\n      destroyTooltipOnHide={true}\n    >\n      <a\n        onMouseDown={() => {\n          if (isUrl(url)) {\n            window.open(url, target)\n          }\n        }}\n        {...attributes}\n      >\n        {children}\n      </a>\n    </Tooltip>\n  )\n}\n\nconst StarElement = (props) => {\n  // 基础配置\n  const { attributes, children, element } = props\n\n  const editor = useSlate()\n  const selected = useSelected()\n  const focused = useFocused()\n\n  const onChange = (number) => {\n    setStarNum(editor, element, number)\n  }\n\n  return (\n    <span {...attributes}>\n      {children}\n      <span\n        contentEditable={false}\n        style={{\n          display: 'inline-block',\n          borderRadius: '2px',\n          boxShadow: selected && focused ? '0 0 0 2px #B4D5FF' : 'none',\n        }}\n      >\n        <Rate\n          disabled={editor.readOnly}\n          allowClear={true}\n          value={element.number}\n          onChange={onChange}\n        />\n      </span>\n    </span>\n  )\n}\n\nexport { Element, LinkElement, StarElement }\n","import React from 'react';\n\nconst Leaf = ({ attributes, children, leaf }) => {\n\t// 加粗\n\tif (leaf.bold) {\n\t\tchildren = <b>{children}</b>;\n\t}\n\n\t// 斜线\n\tif (leaf.italic) {\n\t\tchildren = <i>{children}</i>;\n\t}\n\n\t// 下划线\n\tif (leaf.underline) {\n\t\tchildren = <u>{children}</u>;\n\t}\n\n\t// 处理删除线\n\tif (leaf.strikethrough) {\n\t\tchildren = <s>{children}</s>;\n\t}\n\n\t// 处理代码块\n\tif (leaf.code) {\n\t\tchildren = (\n\t\t\t<span style={{ backgroundColor: '#DCDCDC', borderRadius: '5px' }}>\n\t\t\t\t<span style={{ marginLeft: '5px', marginRight: '5px' }}>{children}</span>\n\t\t\t</span>\n\t\t);\n\t}\n\n\t// // 处理超链接\n\t// if (leaf.link) {\n\t//     children = (\n\t//         <Tooltip title={leaf.link}>\n\t//             <span\n\t//                 style={{\n\t//                     color: '#007FFF',\n\t//                     cursor: 'pointer',\n\t//                 }}\n\t//                 onMouseDown={() => {\n\t//                     window.open(leaf.link, '_blank');\n\t//                 }}\n\t//             >\n\t//                 {children}\n\t//             </span>\n\t//         </Tooltip>\n\t//     )\n\t// }\n\n\t// 处理文字颜色\n\tif (leaf.fontColor) {\n\t\tchildren = (\n\t\t\t<span\n\t\t\t\tstyle={{\n\t\t\t\t\tcolor: leaf.fontColor,\n\t\t\t\t}}\n\t\t\t>\n\t\t\t\t{children}\n\t\t\t</span>\n\t\t);\n\t}\n\n\t// 处理背景颜色\n\tlet backgroundColor = '';\n\tif (leaf.backgroundColor) {\n\t\tbackgroundColor = leaf.backgroundColor;\n\t}\n\n\treturn (\n\t\t<span style={{ backgroundColor: backgroundColor }} {...attributes}>\n\t\t\t{children}\n\t\t</span>\n\t);\n};\n\nexport { Leaf };\n","import { Editor, Element as SlateElement, Range } from 'slate';\n\nconst isColorActive = (editor, key, color) => {\n    const { selection } = editor\n    if (selection && Range.isCollapsed(selection)) {\n        return false\n    }\n\n    const [match] = Editor.nodes(editor, {\n        match: n => n[key] === color,\n        mode: 'all',\n    });\n    return !!match;\n};\n\nconst isFormatActive = (editor, format) => {\n    const { selection } = editor\n    if (selection && Range.isCollapsed(selection)) {\n        return false\n    }\n\n    const [match] = Editor.nodes(editor, {\n        match: n => n[format] === true,\n        mode: 'all',\n    });\n    return !!match;\n};\n\nconst isLinkActive = (editor) => {\n    const { selection } = editor\n    if (selection && Range.isCollapsed(selection)) {\n        return false\n    }\n\n    const [link] = Editor.nodes(editor, {\n        match: n =>\n            !Editor.isEditor(n) && SlateElement.isElement(n) && n.type === 'link',\n    })\n    return !!link\n}\n\nexport { isColorActive, isFormatActive, isLinkActive }","import {\n\tLinkOutlined,\n\tBgColorsOutlined,\n\tFontColorsOutlined,\n\tBoldOutlined,\n\tUnderlineOutlined,\n\tItalicOutlined,\n\tCodeOutlined,\n\tStrikethroughOutlined,\n\tStarFilled,\n\tFormatPainterOutlined,\n} from '@ant-design/icons';\nimport { useSlate } from 'slate-react';\nimport { Editor } from 'slate';\nimport { isColorActive, isFormatActive, isLinkActive } from './utils/active';\nimport { wrapLink, unWrapLink, insertStar } from './utils/node';\nimport { message } from 'antd';\nimport Select from '@/components/button/select';\nimport Muti from '@/components/button/muti';\nimport Single from '@/components/button/single';\nimport React from 'react';\n\nconst backgroundColorList = ['#ffd666', '#ffccc7', '#95de64', '#91d5ff', '#d3adf7', '#bfbfbf'];\nconst fontColorList = ['#f5222d', '#d4b106', '#389e0d', '#096dd9', '#722ed1', '#595959'];\n\nconst normalConfig = [\n\t{\n\t\tkey: 'bold',\n\t\tdescription: '加粗',\n\t\tcontent: <BoldOutlined />,\n\t},\n\t{\n\t\tkey: 'italic',\n\t\tdescription: '斜体',\n\t\tcontent: <ItalicOutlined />,\n\t},\n\t{\n\t\tkey: 'underline',\n\t\tdescription: '下划线',\n\t\tcontent: <UnderlineOutlined />,\n\t},\n\t{\n\t\tkey: 'strikethrough',\n\t\tdescription: '删除线',\n\t\tcontent: <StrikethroughOutlined />,\n\t},\n\t{\n\t\tkey: 'code',\n\t\tdescription: '代码',\n\t\tcontent: <CodeOutlined />,\n\t},\n];\n\nconst execCoy = text => {\n\tconst input = document.createElement('TEXTAREA');\n\tinput.style.opacity = 0;\n\tinput.style.position = 'absolute';\n\tinput.style.left = '-100000px';\n\tdocument.body.appendChild(input);\n\n\tinput.value = text;\n\tinput.select();\n\tinput.setSelectionRange(0, text.length);\n\tdocument.execCommand('copy');\n\tdocument.body.removeChild(input);\n};\n\nconst LeafBar = props => {\n\tconst editor = useSlate();\n\n\tconst getActiveColor = (type, colorList) => {\n\t\tfor (var i = 0; i < colorList.length; i++) {\n\t\t\tconst color = colorList[i];\n\n\t\t\tif (isColorActive(editor, type, color)) {\n\t\t\t\treturn color;\n\t\t\t}\n\t\t}\n\n\t\treturn '';\n\t};\n\n\tconst getColorList = (type, colorList) => {\n\t\tconst buttons = [];\n\t\tfor (var i = 0; i < colorList.length; i++) {\n\t\t\tconst color = colorList[i];\n\t\t\tbuttons.push({\n\t\t\t\tkey: color,\n\t\t\t\tdescription: color,\n\t\t\t\tcontent:\n\t\t\t\t\ttype === 'backgroundColor' ? (\n\t\t\t\t\t\t<BgColorsOutlined style={{ color: color, backgroundColor: color }} />\n\t\t\t\t\t) : (\n\t\t\t\t\t\t<FontColorsOutlined style={{ color: color }} />\n\t\t\t\t\t),\n\t\t\t});\n\t\t}\n\n\t\tconst onChange = color => {\n\t\t\t// 重置颜色\n\t\t\tEditor.addMark(editor, type, color);\n\t\t};\n\n\t\treturn (\n\t\t\t<Select\n\t\t\t\tselected={getActiveColor(type, colorList)}\n\t\t\t\tnotNull={false}\n\t\t\t\tonChange={onChange}\n\t\t\t\tbuttons={buttons}\n\t\t\t/>\n\t\t);\n\t};\n\n\tconst getFormatActiveKeys = () => {\n\t\tconst keys = [];\n\t\tfor (let i = 0; i < normalConfig.length; i++) {\n\t\t\tconst key = normalConfig[i].key;\n\t\t\tif (isFormatActive(editor, key)) {\n\t\t\t\tkeys.push(key);\n\t\t\t}\n\t\t}\n\n\t\treturn keys;\n\t};\n\n\tconst getNormalList = () => {\n\t\tconst onChange = key => {\n\t\t\t// 修改基础样式\n\t\t\tEditor.addMark(editor, key, isFormatActive(editor, key) ? null : true);\n\t\t};\n\n\t\treturn <Muti selectedKeys={getFormatActiveKeys()} onChange={onChange} buttons={normalConfig} />;\n\t};\n\n\tconst GetFormatPainter = props => {\n\t\tconst setFormatCache = () => {\n\t\t\tconst cache = {};\n\n\t\t\tcache['backgroundColor'] = getActiveColor('backgroundColor', backgroundColorList);\n\t\t\tcache['fontColor'] = getActiveColor('fontColor', fontColorList);\n\t\t\tcache['normal'] = getFormatActiveKeys();\n\n\t\t\texecCoy('&_FORMAT_CACHE' + JSON.stringify(cache));\n\t\t\tmessage.info('样式已经复制到剪贴板');\n\t\t};\n\n\t\treturn (\n\t\t\t<Single\n\t\t\t\tselected={false}\n\t\t\t\tdescription=\"点击复制样式到剪贴板，选中其他文本ctrl+v即可复用样式\"\n\t\t\t\tcontent={\n\t\t\t\t\t<span style={{ color: '#003a8c' }}>\n\t\t\t\t\t\t<FormatPainterOutlined style={{ color: '#d4380d' }} />\n\t\t\t\t\t\t&nbsp;格式刷\n\t\t\t\t\t</span>\n\t\t\t\t}\n\t\t\t\tonClick={() => {\n\t\t\t\t\tsetFormatCache();\n\t\t\t\t}}\n\t\t\t/>\n\t\t);\n\t};\n\n\treturn (\n\t\t<>\n\t\t\t<span>{getColorList('backgroundColor', backgroundColorList)}</span>\n\t\t\t<span>{getColorList('fontColor', fontColorList)}</span>\n\t\t\t<hr style={{ border: '1px solid #91d5ff' }} />\n\t\t\t<span>{getNormalList()}</span>&nbsp;&nbsp;\n\t\t\t{GetFormatPainter()}&nbsp;&nbsp;\n\t\t</>\n\t);\n};\n\nconst LinkBar = props => {\n\tconst editor = useSlate();\n\n\tconst selected = isLinkActive(editor);\n\n\treturn (\n\t\t<>\n\t\t\t<Single\n\t\t\t\tselected={selected}\n\t\t\t\tdescription=\"加入超链接，点击后悬停于文字上修改链接内容\"\n\t\t\t\tcontent={<LinkOutlined style={{ color: '#0000cc' }} />}\n\t\t\t\tonClick={() => {\n\t\t\t\t\tselected ? unWrapLink(editor) : wrapLink(editor);\n\t\t\t\t}}\n\t\t\t/>\n\t\t\t&nbsp;&nbsp;\n\t\t</>\n\t);\n};\n\nconst StarBar = props => {\n\tconst editor = useSlate();\n\n\treturn (\n\t\t<>\n\t\t\t<Single\n\t\t\t\tselected={false}\n\t\t\t\tdescription=\"新增评分\"\n\t\t\t\tcontent={<StarFilled style={{ color: '#fadb14' }} />}\n\t\t\t\tonClick={() => {\n\t\t\t\t\tinsertStar(editor);\n\t\t\t\t}}\n\t\t\t/>\n\t\t\t&nbsp;&nbsp;\n\t\t</>\n\t);\n};\n\nexport { LeafBar, LinkBar, StarBar };\n","import { ReactEditor } from 'slate-react';\nimport { Editor, Range, Transforms, Point, Path } from 'slate';\nimport { setTitle, setQuote, setList, setListOrder, setIndentation } from './utils/node';\n\nconst formatPrinter = (editor, format) => {\n    if (format['normal'].length > 0) {\n        const normalArr = format['normal']\n        for (var i = 0; i < normalArr.length; i++) {\n            // 修改基础样式\n            Editor.addMark(editor, normalArr[i], true)\n        }\n    }\n    if (format['fontColor']) {\n        Editor.addMark(editor, 'fontColor', format['fontColor'])\n    }\n    if (format['backgroundColor']) {\n        // 修改背景色\n        Editor.addMark(editor, 'backgroundColor', format['backgroundColor'])\n    }\n}\n\nconst insertEndBreak = (editor, element, path) => {\n    const nextData = {\n        ...element,\n        children: [\n            {\n                text: ''\n            }\n        ]\n    }\n\n    const at = Path.next(path)\n    Transforms.insertNodes(editor, nextData, { at })\n\n    if (element.title) {\n        Transforms.setNodes(editor, { ['title']: null }, { at })\n    }\n\n    const point = Editor.start(editor, at)\n    Transforms.select(editor, { anchor: point, focus: point });\n}\n\nconst withParagraph = editor => {\n    const { insertText, insertBreak, deleteBackward, insertData, getFragment, isEmpty, onTabDown, normalizeNode } = editor\n\n    // 保证第一行是title\n    editor.normalizeNode = ([node, path]) => {\n        if (path.length === 0) {\n            const line1 = editor.children[0]\n            if (line1.type !== 'paragraph' || line1.title !== 'h1') {\n                const titleLine = {\n                    type: 'paragraph',\n                    title: 'h1',\n                    children: [\n                        {\n                            text: '',\n                        }\n                    ],\n                }\n                Transforms.insertNodes(editor, titleLine, { at: [0] })\n            }\n        }\n\n        return normalizeNode([node, path])\n    }\n\n\n    // 重写部分拷贝方法，保证纯paragraph拷贝时，不拷贝父元素属性\n    editor.getFragment = () => {\n        let fragment = getFragment()\n\n        while (true) {\n            if (fragment.length > 1) {\n                // 只有纯文本段落的，就返回段落\n                let allParagraph = true\n                for (var child of fragment) {\n                    if (child.type !== 'paragraph') {\n                        allParagraph = false\n                        break\n                    }\n                }\n                if (allParagraph) {\n                    return fragment\n                }\n\n                // 如果不是段落文本，则不处理\n                break\n            }\n\n            if (fragment.length === 0) {\n                break\n            }\n\n            const current = fragment[0]\n            if (!current.type || !current.children) {\n                break\n            }\n\n            if (current.type === 'paragraph') {\n                return fragment\n            }\n\n            fragment = current.children\n        }\n\n        return getFragment()\n    }\n\n    // 插入拦截\n    editor.insertText = text => {\n        const { selection } = editor;\n\n        const block = Editor.above(editor, {\n            match: n => Editor.isBlock(editor, n),\n        });\n\n        const isCollapsed = Range.isCollapsed(selection)\n\n        // 处理markdown指令\n        if (block) {\n            const [element, path] = block;\n\n            // 未设置类型或者是paragraph，同时输入了空格，并且有光标\n            if (text === ' ' && element.type === 'paragraph' && isCollapsed) {\n                const { anchor } = selection;\n                const start = Editor.start(editor, path);\n                const range = { anchor, focus: start };\n                const beforeText = Editor.string(editor, range);\n                const config = markdownKeys[beforeText];\n\n                // 正常的模式，config内容存在，则命中markdow语法，删除辅助词\n                if (config) {\n                    Transforms.select(editor, range);\n                    Transforms.delete(editor);\n\n                    // 正常的模式\n                    if (config.key === 'title') {\n                        setTitle(editor, null, config.value);\n                        return;\n                    }\n                    if (config.key === 'quote') {\n                        setQuote(editor, null, config.value);\n                        return;\n                    }\n                    if (config.key === 'list') {\n                        setList(editor, null, config.value);\n                        return;\n                    }\n                }\n\n                // 有序列表处理\n                const r = /^\\+?[1-9][0-9]*$/;\n                const strArr = beforeText.split('.');\n                if (strArr.length === 2 && r.test(strArr[0])) {\n                    const order = parseInt(strArr[0]);\n\n                    if (order > 0) {\n                        Transforms.select(editor, range);\n                        Transforms.delete(editor);\n                        setList(editor, null, 'ol');\n                        setListOrder(editor, null, order);\n\n                        return;\n                    }\n                }\n            }\n        }\n\n        // 处理格式刷\n        if (!isCollapsed && text.indexOf('&_FORMAT_CACHE') === 0) {\n            const format = JSON.parse(text.split('&_FORMAT_CACHE')[1])\n            if (format) {\n                formatPrinter(editor, format)\n\n                return\n            }\n        }\n\n        insertText(text);\n    };\n\n    editor.insertData = data => {\n        const text = data.getData('text/plain');\n        const { selection } = editor;\n        // 处理格式刷\n        if (!Range.isCollapsed(selection) && text.indexOf('&_FORMAT_CACHE') === 0) {\n            const format = JSON.parse(text.split('&_FORMAT_CACHE')[1])\n            if (format) {\n                formatPrinter(editor, format)\n\n                return\n            }\n        }\n\n        insertData(data)\n    }\n\n    // 分行事件，主要处理list和缩进相关\n    editor.insertBreak = () => {\n        const block = Editor.above(editor, {\n            match: n => Editor.isBlock(editor, n),\n        });\n        if (!!block) {\n            const [element, path] = block;\n\n            if (element.type === 'paragraph') {\n                // 对所有富文本在第一个位置点击分行。则减少缩进不分行。\n                const { selection } = editor;\n                // 判断是不是光标\n                if (element.list && !!selection && Range.isCollapsed(selection)) {\n                    const { anchor } = selection;\n                    const start = Editor.start(editor, path);\n                    const range = { anchor, focus: start };\n\n                    // 如果是list在块的第一个位置拆分，则不做拆分，改为减少缩进\n                    if (Range.isCollapsed(range)) {\n                        // 如果是没有缩进了，则删除list效果\n                        if (!element.indentation || element.indentation <= 0) {\n                            setList(editor, null, null);\n                        } else {\n                            setIndentation(editor, null, element.indentation - 1, path);\n                        }\n\n                        return;\n                    }\n                }\n\n                const end = Editor.end(editor, path)\n\n                // 如果是对有序列表的分行\n                if (!!element.list && element.list === 'ol') {\n                    // 换行不带上行样式\n                    if (Point.equals(selection.anchor, end)) {\n                        insertEndBreak(editor, element, path)\n                    } else {\n                        insertBreak();\n                    }\n\n                    setListOrder(editor, null, element.listOrder + 1)\n                    return\n                }\n\n                // 换行不带上行样式\n                if (Point.equals(selection.anchor, end)) {\n                    insertEndBreak(editor, element, path)\n                    return\n                }\n            }\n        }\n\n        insertBreak();\n    };\n\n    editor.deleteBackward = (...args) => {\n        const block = Editor.above(editor, {\n            match: n => Editor.isBlock(editor, n),\n        });\n        if (!!block) {\n            const [element, path] = block;\n\n            if (element.type === 'paragraph') {\n                // 对所有富文本在第一个位置点击分行。则减少缩进不分行。\n                const { selection } = editor;\n                // 判断是不是光标\n                if (!!selection && Range.isCollapsed(selection)) {\n                    const { anchor } = selection;\n                    const start = Editor.start(editor, path);\n                    const range = { anchor, focus: start };\n\n                    // 如果是第一个位置，则处理\n                    if (Range.isCollapsed(range)) {\n                        // 如果是list效果，优先删除效果\n                        if (element.list) {\n                            setList(editor, null, null);\n                            return;\n                        }\n                        // 如果不是list，但是有缩进，先删除缩进\n                        if (element.indentation && element.indentation > 0) {\n                            setIndentation(editor, null, element.indentation - 1, path);\n                            return;\n                        }\n                    }\n                }\n            }\n        }\n\n        deleteBackward(...args);\n    };\n\n    // 当前行是不是一个空的\n    editor.isEmpty = element => {\n        if (element.type === 'paragraph') {\n            const at = ReactEditor.findPath(editor, element);\n            const text = Editor.string(editor, at);\n            // 文本如果没空就是没空\n            if (text !== '') {\n                return false;\n            }\n\n            // 还有字段标记，则认为非空\n            if (\n                !!element.list ||\n                !!element.quote ||\n                !!element.title ||\n                !!element.textAlign ||\n                !!element.indentation ||\n                !!element.listOrder\n            ) {\n                return false;\n            }\n\n            // 兼容星星还有却判断为空的case\n            if (element.children && element.children.length > 1) {\n                return false\n            }\n\n            return true;\n        }\n\n        // 最底层的，直接用Editor提供的判断\n        return isEmpty(element)\n    };\n\n    // 输入tab事件拦截，return的是true就代码事件被重置\n    editor.onTabDown = () => {\n        const block = Editor.above(editor, {\n            match: n => Editor.isBlock(editor, n),\n        });\n        if (!!block) {\n            const [element, path] = block;\n\n            if (!element.type || element.type === 'paragraph') {\n                const offset = element.indentation || 0;\n                setIndentation(editor, null, offset + 1, path);\n\n                return true;\n            }\n        }\n\n        if (!onTabDown) {\n            return false\n        }\n\n        return onTabDown()\n    };\n\n    return editor\n}\n\nconst withLink = editor => {\n    const { isInline } = editor\n\n    editor.isInline = element => element.type === 'link' || isInline(element)\n\n    return editor\n}\n\nconst withStar = editor => {\n    const { isInline, isVoid, isEmpty } = editor\n\n    editor.isInline = element => element.type === 'star' || isInline(element)\n\n    editor.isVoid = element => {\n        return element.type === 'star' ? true : isVoid(element);\n    }\n\n    editor.isEmpty = element => {\n        if (element.type === 'star') {\n            return false\n        }\n\n        return isEmpty(element)\n    }\n\n    return editor\n}\n\n// 支持的markdown快捷键\nconst markdownKeys = {\n    '#': {\n        key: 'title',\n        value: 'h1',\n    },\n    '##': {\n        key: 'title',\n        value: 'h2',\n    },\n    '###': {\n        key: 'title',\n        value: 'h3',\n    },\n    '####': {\n        key: 'title',\n        value: 'h4',\n    },\n    '#####': {\n        key: 'title',\n        value: 'h5',\n    },\n    '>': {\n        key: 'quote',\n        value: 'quote',\n    },\n    '》': { // 兼容中文输入法\n        key: 'quote',\n        value: 'quote',\n    },\n    '*': {\n        key: 'list',\n        value: 'ul',\n    },\n    '+': {\n        key: 'list',\n        value: 'ul',\n    },\n    '-': {\n        key: 'list',\n        value: 'ul',\n    },\n    '[]': {\n        key: 'list',\n        value: 'checkbox',\n    },\n    '【】': { // 兼容中文输入法\n        key: 'list',\n        value: 'checkbox',\n    },\n};\n\nexport { withParagraph, withLink, withStar }","import Select from '@/components/button/select';\nimport { useSlate } from 'slate-react';\nimport { setTitle, setTextAlign, setQuote, setList, setListOrder } from './utils/node';\nimport {\n\tUnorderedListOutlined,\n\tOrderedListOutlined,\n\tCheckSquareOutlined,\n\tInfoCircleOutlined,\n\tAlignLeftOutlined,\n\tAlignCenterOutlined,\n\tAlignRightOutlined,\n} from '@ant-design/icons';\nimport React from 'react';\n\nconst Menu = props => {\n\tconst { element } = props;\n\tconst editor = useSlate();\n\n\tconst titleButton = () => {\n\t\t// 变更标题\n\t\tconst onChange = key => {\n\t\t\tsetTitle(editor, element, key);\n\t\t};\n\t\treturn <Select selected={element.title} buttons={titleButtonList} onChange={onChange} />;\n\t};\n\n\tconst listButton = () => {\n\t\t// 变更标题\n\t\tconst onChange = key => {\n\t\t\tsetList(editor, element, key);\n\n\t\t\tif (key === 'ol') {\n\t\t\t\tsetListOrder(editor, element, 1);\n\t\t\t}\n\t\t};\n\t\treturn <Select selected={element.list} buttons={listButtonList} onChange={onChange} />;\n\t};\n\n\tconst textAlignButton = () => {\n\t\t// 变更标题\n\t\tconst onChange = key => {\n\t\t\tsetTextAlign(editor, element, key);\n\t\t};\n\t\treturn <Select selected={element.textAlign} buttons={textAlignButtonList} onChange={onChange} />;\n\t};\n\n\tconst quoteButton = () => {\n\t\t// 变更标题\n\t\tconst onChange = key => {\n\t\t\tsetQuote(editor, element, key);\n\t\t};\n\t\treturn <Select selected={element.quote} buttons={quoteButtonList} onChange={onChange} />;\n\t};\n\n\treturn (\n\t\t<>\n\t\t\t{titleButton()}\n\t\t\t<hr style={{ border: '1px solid #f5f5f5' }} />\n\t\t\t{listButton()}&nbsp;&nbsp;&nbsp;&nbsp;\n\t\t\t{quoteButton()}\n\t\t\t<hr style={{ border: '1px solid #f5f5f5' }} />\n\t\t\t{textAlignButton()}\n\t\t</>\n\t);\n};\n\nconst titleButtonList = [\n\t{\n\t\tkey: 'h1',\n\t\tcontent: 'h1',\n\t\tdescription: '标题1; MarkDown:#',\n\t},\n\t{\n\t\tkey: 'h2',\n\t\tcontent: 'h2',\n\t\tdescription: '标题2; MarkDown:##',\n\t},\n\t{\n\t\tkey: 'h3',\n\t\tcontent: 'h3',\n\t\tdescription: '标题3; MarkDown:###',\n\t},\n\t{\n\t\tkey: 'h4',\n\t\tcontent: 'h4',\n\t\tdescription: '标题4; MarkDown:####',\n\t},\n\t{\n\t\tkey: 'h5',\n\t\tcontent: 'h5',\n\t\tdescription: '标题5; MarkDown:#####',\n\t},\n];\n\nconst listButtonList = [\n\t{\n\t\tkey: 'ul',\n\t\tcontent: <UnorderedListOutlined />,\n\t\tdescription: '无序列表; MarkDown:-/+/*',\n\t},\n\t{\n\t\tkey: 'ol',\n\t\tcontent: <OrderedListOutlined />,\n\t\tdescription: '有序列表; MarkDown:1.',\n\t},\n\t{\n\t\tkey: 'checkbox',\n\t\tcontent: <CheckSquareOutlined />,\n\t\tdescription: 'checkbox; MarkDown:[]',\n\t},\n];\n\nconst quoteButtonList = [\n\t{\n\t\tkey: 'quote',\n\t\tcontent: <InfoCircleOutlined />,\n\t\tdescription: '引用; MarkDown:>',\n\t},\n];\n\nconst textAlignButtonList = [\n\t{\n\t\tkey: 'left',\n\t\tcontent: <AlignLeftOutlined />,\n\t\tdescription: '左对齐',\n\t},\n\t{\n\t\tkey: 'center',\n\t\tcontent: <AlignCenterOutlined />,\n\t\tdescription: '居中',\n\t},\n\t{\n\t\tkey: 'right',\n\t\tcontent: <AlignRightOutlined />,\n\t\tdescription: '右对齐',\n\t},\n];\n\nexport { Menu };\n","import { Element, LinkElement, StarElement } from './element'\nimport { Leaf } from \"./leaf\"\nimport { LeafBar, LinkBar, StarBar } from './toolbar'\nimport { withParagraph, withLink, withStar } from './plugin'\nimport { Menu } from './menu'\n\nconst Paragraph = {\n    type: 'paragraph',\n    IsBlock: true,\n    AddMenu: Menu,\n    EditMenu: Menu,\n    Element,\n    Leaf,\n    LeafBar,\n    Plugin: withParagraph,\n}\n\nconst Link = {\n    type: 'link',\n    IsBlock: false,\n    Element: LinkElement,\n    Plugin: withLink,\n    LeafBar: LinkBar,\n}\n\nconst Star = {\n    type: 'star',\n    IsBlock: false,\n    Element: StarElement,\n    Plugin: withStar,\n    LeafBar: StarBar,\n}\n\nexport { Paragraph, Link, Star }","import { Transforms } from 'slate';\nimport { ReactEditor } from 'slate-react';\n\nconst setNodeTag = (editor, element, key, value, at = null) => {\n    if (at) {\n        Transforms.setNodes(editor, { [key]: value }, { at: at });\n    } else if (!element) {\n        // 如果没有传入对象，则操作当前行\n        Transforms.setNodes(editor, { [key]: value });\n    } else {\n        const checkedAt = ReactEditor.findPath(editor, element);\n        Transforms.setNodes(editor, { [key]: value }, { at: checkedAt });\n    }\n}\n\nconst setIcon = (editor, element, icon) => {\n    setNodeTag(editor, element, 'icon', icon)\n}\n\nconst setIconColor = (editor, element, iconColor) => {\n    setNodeTag(editor, element, 'iconColor', iconColor)\n}\n\nconst setCardType = (editor, element, cardType) => {\n    setNodeTag(editor, element, 'cardType', cardType)\n}\n\nconst setCard = (editor, element) => {\n    if (element) {\n        const at = ReactEditor.findPath(editor, element);\n        const cardBlock = {\n            type: 'card',\n            cardType: 'success',\n            icon: 'tag',\n            children: [\n                {\n                    type: 'paragraph',\n                    children: [\n                        {\n                            text: '',\n                        },\n                    ],\n                },\n            ],\n        };\n\n        Transforms.removeNodes(editor, { at: at });\n        Transforms.insertNodes(editor, cardBlock, { at });\n    }\n}\n\nexport { setCard, setIcon, setIconColor, setCardType }","import {\n\tTagOutlined,\n\tTagsOutlined,\n\tSoundOutlined,\n\tThunderboltOutlined,\n\tStarOutlined,\n\tSettingOutlined,\n\tScheduleOutlined,\n\tPushpinOutlined,\n\tMessageOutlined,\n\tHeartOutlined,\n\tEditOutlined,\n\tSnippetsOutlined,\n\tAliwangwangOutlined,\n\tWarningOutlined,\n\tCaretUpOutlined,\n\tCaretDownOutlined,\n\tSmileOutlined,\n\tQuestionCircleOutlined,\n\tWechatOutlined,\n\tWeiboOutlined,\n} from '@ant-design/icons';\nimport React from 'react';\n\nconst iconMap = {\n\ttag: color => {\n\t\treturn <TagOutlined style={{ color }} />;\n\t},\n\ttags: color => {\n\t\treturn <TagsOutlined style={{ color }} />;\n\t},\n\tsound: color => {\n\t\treturn <SoundOutlined style={{ color }} />;\n\t},\n\tquestion: color => {\n\t\treturn <QuestionCircleOutlined style={{ color }} />;\n\t},\n\tthunderbolt: color => {\n\t\treturn <ThunderboltOutlined style={{ color }} />;\n\t},\n\tstar: color => {\n\t\treturn <StarOutlined style={{ color }} />;\n\t},\n\tsetting: color => {\n\t\treturn <SettingOutlined style={{ color }} />;\n\t},\n\tschedule: color => {\n\t\treturn <ScheduleOutlined style={{ color }} />;\n\t},\n\tpushpin: color => {\n\t\treturn <PushpinOutlined style={{ color }} />;\n\t},\n\tmessage: color => {\n\t\treturn <MessageOutlined style={{ color }} />;\n\t},\n\theart: color => {\n\t\treturn <HeartOutlined style={{ color }} />;\n\t},\n\tedit: color => {\n\t\treturn <EditOutlined style={{ color }} />;\n\t},\n\tsnipets: color => {\n\t\treturn <SnippetsOutlined style={{ color }} />;\n\t},\n\taliwangwang: color => {\n\t\treturn <AliwangwangOutlined style={{ color }} />;\n\t},\n\twechat: color => {\n\t\treturn <WechatOutlined style={{ color }} />;\n\t},\n\tweibo: color => {\n\t\treturn <WeiboOutlined style={{ color }} />;\n\t},\n\twarning: color => {\n\t\treturn <WarningOutlined style={{ color }} />;\n\t},\n\tcareUP: color => {\n\t\treturn <CaretUpOutlined style={{ color }} />;\n\t},\n\tcareDown: color => {\n\t\treturn <CaretDownOutlined style={{ color }} />;\n\t},\n\tsmile: color => {\n\t\treturn <SmileOutlined style={{ color }} />;\n\t},\n};\n\nconst iconColorList = ['#cf1322', '#fadb14', '#08979c', '#096dd9', '#000000'];\n\nexport { iconMap, iconColorList };\n","import { Button } from 'antd';\nimport {\n\tCreditCardOutlined,\n\tFontSizeOutlined,\n\tCheckCircleOutlined,\n\tInfoCircleOutlined,\n\tExclamationCircleOutlined,\n\tCloseCircleOutlined,\n} from '@ant-design/icons';\nimport Select from '@/components/button/select';\nimport { setCard, setCardType, setIcon, setIconColor } from './utils/node';\nimport { useSlate } from 'slate-react';\nimport { iconMap, iconColorList } from './utils/icon';\nimport React from 'react';\n\n// 'success', 'info', 'warning', 'error'\nconst cardTypeList = [\n\t{\n\t\tkey: 'success',\n\t\tcontent: <CheckCircleOutlined />,\n\t\tdescription: 'success',\n\t},\n\t{\n\t\tkey: 'info',\n\t\tcontent: <InfoCircleOutlined />,\n\t\tdescription: 'info',\n\t},\n\t{\n\t\tkey: 'warning',\n\t\tcontent: <ExclamationCircleOutlined />,\n\t\tdescription: 'warning',\n\t},\n\t{\n\t\tkey: 'error',\n\t\tcontent: <CloseCircleOutlined />,\n\t\tdescription: 'error',\n\t},\n];\n\nconst EditMenu = props => {\n\tconst { element } = props;\n\tconst editor = useSlate();\n\n\tconst getCardTypeList = () => {\n\t\treturn (\n\t\t\t<Select\n\t\t\t\tselected={element.cardType}\n\t\t\t\tnotNull={true}\n\t\t\t\tonChange={key => {\n\t\t\t\t\tsetCardType(editor, element, key);\n\t\t\t\t}}\n\t\t\t\tbuttons={cardTypeList}\n\t\t\t/>\n\t\t);\n\t};\n\n\tconst getIconList = () => {\n\t\tconst buttons = [];\n\t\tfor (var key in iconMap) {\n\t\t\tbuttons.push({\n\t\t\t\tkey: key,\n\t\t\t\tcontent: iconMap[key](element.iconColor),\n\t\t\t\tdescription: key,\n\t\t\t});\n\t\t}\n\n\t\treturn (\n\t\t\t<Select\n\t\t\t\tselected={element.icon}\n\t\t\t\tnotNull={false}\n\t\t\t\tonChange={key => {\n\t\t\t\t\tsetIcon(editor, element, key);\n\t\t\t\t}}\n\t\t\t\tbuttons={buttons}\n\t\t\t/>\n\t\t);\n\t};\n\n\tconst getIconColorList = () => {\n\t\tconst buttons = [];\n\t\tfor (var i = 0; i < iconColorList.length; i++) {\n\t\t\tbuttons.push({\n\t\t\t\tkey: iconColorList[i],\n\t\t\t\tcontent: <FontSizeOutlined style={{ color: iconColorList[i] }} />,\n\t\t\t\tdescription: iconColorList[i],\n\t\t\t});\n\t\t}\n\n\t\treturn (\n\t\t\t<Select\n\t\t\t\tselected={element.iconColor}\n\t\t\t\tnotNull={false}\n\t\t\t\tonChange={key => {\n\t\t\t\t\tsetIconColor(editor, element, key);\n\t\t\t\t}}\n\t\t\t\tbuttons={buttons}\n\t\t\t/>\n\t\t);\n\t};\n\n\treturn (\n\t\t<>\n\t\t\t{getCardTypeList()}\n\t\t\t<hr style={{ border: '1px solid #f5f5f5' }} />\n\t\t\t{getIconList()}\n\t\t\t<hr style={{ border: '1px solid #f5f5f5' }} />\n\t\t\t{getIconColorList()}\n\t\t</>\n\t);\n};\n\nconst AddMenu = props => {\n\tconst editor = useSlate();\n\tconst { element } = props;\n\n\treturn (\n\t\t<Button\n\t\t\ttype=\"text\"\n\t\t\ticon={<CreditCardOutlined style={{ color: '#ad4e00' }} />}\n\t\t\tstyle={{ width: '100%', textAlign: 'left' }}\n\t\t\tonMouseDown={() => {\n\t\t\t\tsetCard(editor, element);\n\t\t\t}}\n\t\t>\n\t\t\t卡片\n\t\t</Button>\n\t);\n};\n\nexport { EditMenu, AddMenu };\n","import { Alert } from 'antd';\nimport { iconMap } from './utils/icon';\nimport { memo } from 'react';\nimport React from 'react';\n\nconst Element = memo(props => {\n\t// 基础配置\n\tconst { attributes, children, element } = props;\n\n\tlet icon = null;\n\tif (element.icon && iconMap[element.icon]) {\n\t\ticon = iconMap[element.icon](element.iconColor);\n\t}\n\n\treturn (\n\t\t<div {...attributes} style={{ paddingTop: '5px', paddingBottom: '5px' }}>\n\t\t\t<Alert type={element.cardType} message={children} icon={icon} showIcon={!!icon} />\n\t\t</div>\n\t);\n});\n\nexport { Element };\n","const withCard = editor => {\n    const { isEmpty } = editor\n\n    editor.isEmpty = element => {\n        if (element.type === 'card') {\n            return false\n        }\n\n        return isEmpty(element)\n    }\n\n    return editor\n}\n\nexport { withCard }","import { EditMenu, AddMenu } from \"./menu\"\nimport { Element } from \"./element\"\nimport { withCard } from \"./plugin\"\n\nconst Card = {\n    type: 'card',\n    IsBlock: true,\n    AddMenu,\n    EditMenu,\n    Element,\n    Plugin: withCard,\n}\n\nexport { Card }","import { Transforms, Editor } from 'slate';\nimport { ReactEditor } from 'slate-react';\n\nconst setNodeTag = (editor, element, key, value, at = null) => {\n    if (at) {\n        Transforms.setNodes(editor, { [key]: value }, { at: at });\n    } else if (!element) {\n        // 如果没有传入对象，则操作当前行\n        Transforms.setNodes(editor, { [key]: value });\n    } else {\n        const checkedAt = ReactEditor.findPath(editor, element);\n        Transforms.setNodes(editor, { [key]: value }, { at: checkedAt });\n    }\n}\n\nconst setImage = (editor, element, src) => {\n    if (element) {\n        const at = ReactEditor.findPath(editor, element);\n        const cardBlock = {\n            type: 'image',\n            src: src,\n            width: 300,\n            children: [\n                {\n                    text: '',\n                }\n            ]\n        };\n\n        Transforms.setNodes(editor, cardBlock, { at });\n    }\n}\n\n// 插入图片，如果行是空的就在本行插入\nconst insertImage = (editor, src) => {\n    const block = Editor.above(editor, {\n        match: n => Editor.isBlock(editor, n),\n    });\n    if (!!block) {\n        const [element] = block\n        const image = {\n            type: 'image',\n            width: 300,\n            src,\n            children: [{ text: '' }]\n        }\n\n        if (editor.isEmpty(element)) {\n            Transforms.setNodes(editor, image);\n        } else {\n            Transforms.insertNodes(editor, image);\n        }\n    }\n};\n\n\nconst getInsertImageCallBack = (editor, element) => {\n    return (src) => {\n        insertImage(editor, src)\n    }\n}\n\nconst setTextAlign = (editor, element, textAlign) => {\n    setNodeTag(editor, element, 'textAlign', textAlign)\n}\n\nconst setWidth = (editor, element, width) => {\n    if (width < 40 || width > 2000) {\n        return\n    }\n\n    setNodeTag(editor, element, 'width', width)\n}\n\nexport { insertImage, setTextAlign, setWidth, getInsertImageCallBack, setImage }","import { Button, Popover, Input, message } from 'antd';\nimport {\n\tPictureOutlined,\n\tAlignLeftOutlined,\n\tAlignCenterOutlined,\n\tAlignRightOutlined,\n\tMinusCircleOutlined,\n\tPlusCircleOutlined,\n} from '@ant-design/icons';\nimport Select from '@/components/button/select';\nimport { setImage, setTextAlign, setWidth } from './utils/node';\nimport { useSlate } from 'slate-react';\nimport Single from '@/components/button/single';\nimport { useState } from 'react';\nimport isUrl from 'is-url';\nimport imageExtensions from 'image-extensions';\nimport React from 'react';\n\n// 判断是不是图片链接\nconst isImageUrl = url => {\n\tif (!url) return false;\n\tif (!isUrl(url)) return false;\n\tconst ext = new URL(url).pathname.split('.').pop();\n\treturn imageExtensions.includes(ext);\n};\n\nconst EditMenu = props => {\n\tconst editor = useSlate();\n\tconst { element } = props;\n\n\treturn (\n\t\t<>\n\t\t\t<Select\n\t\t\t\tselected={element.textAlign}\n\t\t\t\tbuttons={textAlignButtonList}\n\t\t\t\tonChange={key => {\n\t\t\t\t\tsetTextAlign(editor, element, key);\n\t\t\t\t}}\n\t\t\t/>\n\t\t\t<hr style={{ border: '1px solid #f5f5f5' }} />\n\t\t\t<Button\n\t\t\t\tsize=\"small\"\n\t\t\t\ttype=\"text\"\n\t\t\t\ticon={<MinusCircleOutlined style={{ color: '#389e0d' }} />}\n\t\t\t\tonMouseDown={() => {\n\t\t\t\t\tsetWidth(editor, element, element.width - 20);\n\t\t\t\t}}\n\t\t\t/>\n\t\t\t<Button\n\t\t\t\tsize=\"small\"\n\t\t\t\ttype=\"text\"\n\t\t\t\ticon={<PlusCircleOutlined style={{ color: '#f5222d' }} />}\n\t\t\t\tonMouseDown={() => {\n\t\t\t\t\tsetWidth(editor, element, element.width + 20);\n\t\t\t\t}}\n\t\t\t/>\n\t\t</>\n\t);\n};\n\nconst AddMenu = props => {\n\tconst editor = useSlate();\n\tconst { element } = props;\n\n\tconst URL = Props => {\n\t\tconst [value, setValue] = useState('');\n\n\t\treturn (\n\t\t\t<>\n\t\t\t\t<div style={{ display: 'inline-block', width: '280px' }}>\n\t\t\t\t\t<Input value={value} placeholder=\"输入图片地址\" onChange={v => setValue(v.target.value)} />\n\t\t\t\t</div>\n\t\t\t\t&nbsp;\n\t\t\t\t<Single\n\t\t\t\t\tselected={true}\n\t\t\t\t\tdescription=\"使用图片的url\"\n\t\t\t\t\tcontent=\"确认\"\n\t\t\t\t\tonClick={() => {\n\t\t\t\t\t\tif (!isImageUrl(value)) {\n\t\t\t\t\t\t\tmessage.error('输入有效的图片地址');\n\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tsetImage(editor, element, value);\n\t\t\t\t\t}}\n\t\t\t\t/>\n\t\t\t</>\n\t\t);\n\t};\n\n\tconst edit = () => {\n\t\treturn <>{<URL />}</>;\n\t};\n\n\treturn (\n\t\t<Popover content={edit()} placement=\"topRight\">\n\t\t\t<Button\n\t\t\t\ttype=\"text\"\n\t\t\t\ticon={<PictureOutlined style={{ color: '#fadb14' }} />}\n\t\t\t\tstyle={{ width: '100%', textAlign: 'left' }}\n\t\t\t>\n\t\t\t\t图片\n\t\t\t</Button>\n\t\t</Popover>\n\t);\n};\n\nconst textAlignButtonList = [\n\t{\n\t\tkey: 'left',\n\t\tcontent: <AlignLeftOutlined />,\n\t\tdescription: '左对齐',\n\t},\n\t{\n\t\tkey: 'center',\n\t\tcontent: <AlignCenterOutlined />,\n\t\tdescription: '居中',\n\t},\n\t{\n\t\tkey: 'right',\n\t\tcontent: <AlignRightOutlined />,\n\t\tdescription: '右对齐',\n\t},\n];\n\nexport { EditMenu, AddMenu };\n","const config = {\n    fallback: 'data:image/png;base64,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'\n}\n\nexport { config }","import { Image } from 'antd';\nimport { config } from './utils/config';\nimport { memo } from 'react';\nimport React from 'react';\n\nconst Element = memo(props => {\n\t// 基础配置\n\tconst { attributes, children, element } = props;\n\n\treturn (\n\t\t<div {...attributes} style={{ textAlign: element.textAlign || 'left' }}>\n\t\t\t<Image\n\t\t\t\tsrc={element.src}\n\t\t\t\tstyle={{ maxWidth: '100%', width: `${element.width}px` }}\n\t\t\t\tfallback={config.fallback}\n\t\t\t/>\n\t\t\t{children}\n\t\t</div>\n\t);\n});\n\nexport { Element };\n","import { getInsertImageCallBack } from \"./utils/node\"\nimport { Editor } from 'slate'\n\nconst withImage = editor => {\n    const { isEmpty, isVoid, insertData } = editor\n\n    editor.isEmpty = element => {\n        if (element.type === 'image') {\n            return false\n        }\n\n        return isEmpty(element)\n    }\n\n    editor.isVoid = element => {\n        return element.type === 'image' ? true : isVoid(element);\n    }\n\n    editor.insertData = data => {\n        const { files } = data;\n        if (files && files.length > 0) {\n            for (const file of files) {\n                const [mime] = file.type.split('/');\n\n                if (mime === 'image') {\n                    const { onUploadImage } = editor.param\n                    if (onUploadImage) {\n                        const block = Editor.above(editor, {\n                            match: n => Editor.isBlock(editor, n),\n                        });\n                        if (!!block) {\n                            const [element] = block;\n                            onUploadImage(file, getInsertImageCallBack(editor, element))\n                        }\n                    }\n\n                    return\n                }\n            }\n        }\n\n        insertData(data);\n    }\n\n    return editor\n}\n\nexport { withImage }","import { EditMenu, AddMenu } from \"./menu\"\nimport { Element } from \"./element\"\nimport { withImage } from \"./plugin\"\n\nconst Image = {\n    type: 'image',\n    IsBlock: true,\n    AddMenu,\n    EditMenu,\n    Element,\n    Plugin: withImage,\n}\n\nexport { Image }","import { Editor, Path, Transforms, Node, Range } from 'slate';\nimport { ReactEditor } from 'slate-react';\n\nconst setTable = (editor, element, r, c) => {\n    if (element) {\n        const at = ReactEditor.findPath(editor, element);\n\n        const rows = []\n        for (var i = 0; i < r; i++) {\n            const cells = []\n            for (var j = 0; j < c; j++) {\n                cells.push({\n                    type: 'table-cell',\n                    width: 100, // 默认长度100\n                    children: [\n                        {\n                            type: 'paragraph',\n                            children: [\n                                {\n                                    text: ''\n                                }\n                            ]\n                        }\n                    ],\n                })\n            }\n\n            rows.push({\n                type: 'table-row',\n                children: cells,\n            })\n        }\n\n        const tableBlock = {\n            type: 'table',\n            children: rows,\n        };\n\n        Transforms.removeNodes(editor, { at: at });\n        Transforms.insertNodes(editor, tableBlock, { at });\n    }\n}\n\nconst addRow = (editor, cellPath, isNext = true) => {\n    const table = getTableFromCell(editor, cellPath)\n\n    let at = Path.parent(cellPath)\n    if (isNext) {\n        at = Path.next(at)\n    }\n    const tablePath = Path.parent(at)\n\n    const atRow = at[at.length - 1]\n\n    const mergedCols = []\n    // 判断是否需要增加span\n    for (var r = 0; r < atRow; r++) {\n        const row = table.children[r]\n        for (var c = 0; c < row.children.length; c++) {\n            const cellElement = row.children[c]\n            if (!cellElement.rowSpan || r + cellElement.rowSpan <= atRow) {\n                continue\n            }\n\n            Transforms.setNodes(editor, { ['rowSpan']: cellElement.rowSpan + 1 }, { at: [...tablePath, r, c] });\n\n            let colSpan = 1\n            if (cellElement.colSpan) {\n                colSpan = cellElement.colSpan\n            }\n\n            // 计算所有需要merged的cell\n            for (var offset = 0; offset < colSpan; offset++) {\n                mergedCols.push(c + offset)\n            }\n        }\n    }\n\n    const cells = []\n    let col = 0\n    for (var cell of table.children[0].children) {\n        let newCell = {\n            type: 'table-cell',\n            width: cell.width,\n            children: [\n                {\n                    type: 'paragraph',\n                    children: [\n                        {\n                            text: '',\n                        }\n                    ]\n                },\n            ]\n        }\n\n        if (mergedCols.indexOf(col) > -1) {\n            newCell = {\n                type: 'table-cell-merged',\n                width: cell.width,\n                children: [\n                    {\n                        text: '',\n                    },\n                ]\n            }\n        }\n\n        cells.push(newCell)\n        col++\n    }\n\n    const emptyRow = {\n        type: 'table-row',\n        children: cells,\n    }\n\n    Transforms.insertNodes(editor, emptyRow, { at });\n}\n\nconst deleteRow = (editor, cellPath) => {\n    const table = getTableFromCell(editor, cellPath)\n\n    // 只有表格行数大于1才允许删除行\n    if (table.children.length <= 1) {\n        return\n    }\n\n    const at = Path.parent(cellPath)\n    const atRow = at[at.length - 1]\n\n    const tablePath = Path.parent(at)\n\n    // 计算span的变化\n    // 判断是否需要减少span\n    for (var r = 0; r <= atRow; r++) {\n        const row = table.children[r]\n        for (var c = 0; c < row.children.length; c++) {\n            const cellElement = row.children[c]\n            if (!cellElement.rowSpan || r + cellElement.rowSpan <= atRow) {\n                continue\n            }\n\n            let newRowSpan = cellElement.rowSpan - 1\n            if (newRowSpan === 1) {\n                newRowSpan = null\n            }\n\n            // 如果当前行就有span\n            if (r === atRow) {\n                const newCell = {\n                    type: 'table-cell',\n                    width: cellElement.width,\n                    children: cellElement.children,\n                }\n\n                if (newRowSpan) {\n                    newCell.rowSpan = newRowSpan\n                }\n                if (cellElement.colSpan) {\n                    newCell.colSpan = cellElement.colSpan\n                }\n\n                Transforms.removeNodes(editor, { at: [...tablePath, r + 1, c] })\n                Transforms.insertNodes(editor, newCell, { at: [...tablePath, r + 1, c] })\n            } else {\n                Transforms.setNodes(editor, { ['rowSpan']: newRowSpan }, { at: [...tablePath, r, c] })\n            }\n        }\n    }\n\n    Transforms.removeNodes(editor, { at })\n}\n\nconst addCol = (editor, cellPath, isNext = true) => {\n    const table = getTableFromCell(editor, cellPath)\n    let [, col] = getCellPathInTable(cellPath)\n    const tablePath = Path.parent(Path.parent(cellPath))\n\n    if (isNext) {\n        col++\n    }\n\n    const mergedRows = []\n    // 判断是否需要增加span\n    for (var r = 0; r < table.children.length; r++) {\n        const row = table.children[r]\n        for (var c = 0; c < col; c++) {\n            const cellElement = row.children[c]\n            if (!cellElement.colSpan || c + cellElement.colSpan <= col) {\n                continue\n            }\n\n            Transforms.setNodes(editor, { ['colSpan']: cellElement.colSpan + 1 }, { at: [...tablePath, r, c] });\n\n            let rowSpan = 1\n            if (cellElement.rowSpan) {\n                rowSpan = cellElement.rowSpan\n            }\n\n            // 计算所有需要merged的cell\n            for (var offset = 0; offset < rowSpan; offset++) {\n                mergedRows.push(r + offset)\n            }\n        }\n    }\n\n    for (var i = 0; i < table.children.length; i++) {\n        let at = [...tablePath, i, col]\n\n        let emptyCol = {\n            type: 'table-cell',\n            width: 100,\n            children: [\n                {\n                    type: 'paragraph',\n                    children: [\n                        {\n                            text: '',\n                        }\n                    ]\n                },\n            ]\n        }\n\n        if (mergedRows.indexOf(i) > -1) {\n            emptyCol = {\n                type: 'table-cell-merged',\n                width: 100,\n                children: [\n                    {\n                        text: '',\n                    },\n                ]\n            }\n        }\n\n        Transforms.insertNodes(editor, emptyCol, { at });\n    }\n}\n\nconst deleteCol = (editor, cellPath) => {\n    const row = getRowFromCell(editor, cellPath)\n\n    // 大于1列才能删除\n    if (row.children.length <= 1) {\n        return\n    }\n\n    const table = getTableFromCell(editor, cellPath)\n    const [, atCol] = getCellPathInTable(cellPath)\n    const tablePath = Path.parent(Path.parent(cellPath))\n\n    // 计算span的变化\n    // 判断是否需要减少span\n    for (var r = 0; r < table.children.length; r++) {\n        const row = table.children[r]\n        for (var c = 0; c <= atCol; c++) {\n            const cellElement = row.children[c]\n            if (!cellElement.colSpan || c + cellElement.colSpan <= atCol) {\n                continue\n            }\n\n            let newColSpan = cellElement.colSpan - 1\n            if (newColSpan === 1) {\n                newColSpan = null\n            }\n\n            // 如果当前行就有span\n            if (c === atCol) {\n                const newCell = {\n                    type: 'table-cell',\n                    width: cellElement.width,\n                    children: cellElement.children,\n                }\n\n                if (newColSpan) {\n                    newCell.colSpan = newColSpan\n                }\n                if (cellElement.rowSpan) {\n                    newCell.rowSpan = cellElement.rowSpan\n                }\n\n                Transforms.removeNodes(editor, { at: [...tablePath, r, c + 1] })\n                Transforms.insertNodes(editor, newCell, { at: [...tablePath, r, c + 1] })\n            } else {\n                Transforms.setNodes(editor, { ['colSpan']: newColSpan }, { at: [...tablePath, r, c] })\n            }\n        }\n    }\n\n    // 删除对应列\n    for (var i = 0; i < table.children.length; i++) {\n        const at = [...tablePath, i, atCol]\n        Transforms.removeNodes(editor, { at });\n    }\n}\n\nconst setColWidth = (editor, cellPath, width) => {\n    // 单元格最小宽度为40\n    if (width < 40) {\n        return\n    }\n\n    const table = getTableFromCell(editor, cellPath)\n    const [, c] = getCellPathInTable(cellPath)\n    const tablePath = Path.parent(Path.parent(cellPath))\n\n    for (var i = 0; i < table.children.length; i++) {\n        const at = [...tablePath, i, c]\n\n        Transforms.setNodes(editor, { ['width']: width }, { at: at });\n    }\n}\n\n// 拆分单元格\nconst splitCells = (editor) => {\n    const { selection } = editor\n    // 鼠标必须是单点\n    if (!selection || !Range.isCollapsed(selection)) {\n        return\n    }\n\n    const { anchor, focus } = selection\n    const [nodeEntry,] = Editor.node(editor, {})\n    const common = Node.common(nodeEntry, anchor.path, focus.path)\n    const [, path] = common\n\n    // 获得cellPath\n    let cellPath = [...path]\n    while (true) {\n        // 如果不是在同一个table中，不再继续处理\n        if (cellPath.length < 3) {\n            return\n        }\n\n        const n = Node.get(nodeEntry, cellPath)\n        if (n.type && n.type == 'table-cell') {\n            break\n        }\n        cellPath = Path.parent(cellPath)\n    }\n\n    const tablePath = Path.parent(Path.parent(cellPath))\n    const cellInTable = getCellPathInTable(cellPath)\n    const tableElement = Node.get(nodeEntry, tablePath)\n    const cellElement = Node.get(tableElement, cellInTable)\n\n    if (!cellElement.rowSpan && !cellElement.colSpan) {\n        return\n    }\n\n    // 去掉span\n    Transforms.setNodes(editor, { ['rowSpan']: null, ['colSpan']: null }, { at: cellPath })\n    // 插入数据\n    const rowSpan = cellElement.rowSpan ? cellElement.rowSpan : 1\n    const colSpan = cellElement.colSpan ? cellElement.colSpan : 1\n\n    for (var r = cellInTable[0]; r <= cellInTable[0] + rowSpan - 1; r++) {\n        for (var c = cellInTable[1]; c <= cellInTable[1] + colSpan - 1; c++) {\n            // 跳过第一个\n            if (r === cellInTable[0] && c === cellInTable[1]) {\n                continue\n            }\n\n            const current = Node.get(tableElement, [r, c])\n            const newCell = {\n                type: 'table-cell',\n                width: current.width,\n                children: [\n                    {\n                        type: 'paragraph',\n                        children: [\n                            {\n                                text: '',\n                            }\n                        ]\n                    }\n                ],\n            }\n            // 继承所有宽度数据，其余都删除掉\n            Transforms.removeNodes(editor, { at: [...tablePath, r, c] })\n            Transforms.insertNodes(editor, newCell, { at: [...tablePath, r, c] })\n        }\n    }\n}\n\n// 合并单元格\nconst mergeCells = (editor) => {\n    const { tableSelection } = editor\n    if (!tableSelection) {\n        return\n    }\n\n    const { start, end } = tableSelection\n\n    const startInTable = getCellPathInTable(start)\n    const endInTable = getCellPathInTable(end)\n\n    // 其余单元格全部设置成空\n    const tablePath = Path.parent(Path.parent(start))\n    const [nodeEntry,] = Editor.node(editor, {})\n    const tableElement = Node.get(nodeEntry, tablePath)\n\n    const children = []\n    const startElement = Node.get(tableElement, startInTable)\n    children.push(...startElement.children)\n\n    for (var r = startInTable[0]; r <= endInTable[0]; r++) {\n        for (var c = startInTable[1]; c <= endInTable[1]; c++) {\n            // 跳过第一个\n            if (r === startInTable[0] && c === startInTable[1]) {\n                continue\n            }\n            const current = Node.get(tableElement, [r, c])\n\n            if (current.type === 'table-cell' && Node.string(current).length > 0) {\n                children.push(...current.children)\n            }\n\n            const cellMerged = {\n                type: 'table-cell-merged',\n                width: current.width,\n                children: [{ text: '' }],\n            }\n            // 继承所有宽度数据，其余都删除掉\n            Transforms.removeNodes(editor, { at: [...tablePath, r, c] })\n            Transforms.insertNodes(editor, cellMerged, { at: [...tablePath, r, c] })\n        }\n    }\n\n    // 设置初始单元格的span\n    const rowSpan = endInTable[0] - startInTable[0] + 1\n    const colSpan = endInTable[1] - startInTable[1] + 1\n\n    const newCell = {\n        type: 'table-cell',\n        width: startElement.width,\n        children: children,\n    }\n\n    if (rowSpan > 1) {\n        newCell.rowSpan = rowSpan\n    }\n    if (colSpan > 1) {\n        newCell.colSpan = colSpan\n    }\n\n    Transforms.removeNodes(editor, { at: start })\n    Transforms.insertNodes(editor, newCell, { at: start })\n}\n\nconst clearTableSelection = (editor, tableSelection) => {\n    const { start, end } = tableSelection\n\n    const startInTable = getCellPathInTable(start)\n    const endInTable = getCellPathInTable(end)\n\n    // 其余单元格全部设置成空\n    const tablePath = Path.parent(Path.parent(start))\n    const tableElement = Node.get(editor, tablePath)\n\n    for (var r = startInTable[0]; r <= endInTable[0]; r++) {\n        for (var c = startInTable[1]; c <= endInTable[1]; c++) {\n            const current = Node.get(tableElement, [r, c])\n\n            const newCell = { ...current }\n\n            // 继承所有数据，内容都删除掉\n            if (newCell.type === 'table-cell') {\n                newCell.children = [\n                    {\n                        type: \"paragraph\",\n                        children: [\n                            {\n                                text: ''\n                            }\n                        ]\n                    }\n                ]\n            } else {\n                newCell.children = [\n                    {\n                        text: '',\n                    }\n                ]\n            }\n\n            Transforms.removeNodes(editor, { at: [...tablePath, r, c] })\n            Transforms.insertNodes(editor, newCell, { at: [...tablePath, r, c] })\n        }\n    }\n}\n\nconst getAllSpanCells = (tableElement) => {\n    const mergedCellRowCols = []\n    for (var r = 0; r < tableElement.children.length; r++) {\n        const rowElement = tableElement.children[r]\n        for (var c = 0; c < rowElement.children.length; c++) {\n            const cellElement = rowElement.children[c]\n            if (!cellElement.rowSpan && !cellElement.colSpan) {\n                continue\n            }\n\n            mergedCellRowCols.push([\n                [r - 1, c - 1],\n                [r + (cellElement.rowSpan ? cellElement.rowSpan : 1) - 1, c + (cellElement.colSpan ? cellElement.colSpan : 1) - 1],\n            ])\n        }\n    }\n\n    return mergedCellRowCols\n}\n\n// 计算表格内的选择情况\nconst getTableSelection = (editor) => {\n    const { selection } = editor\n    if (!selection || Range.isCollapsed(selection)) {\n        return null\n    }\n\n    const { anchor, focus } = selection\n    const [nodeEntry,] = Editor.node(editor, {})\n    const common = Node.common(nodeEntry, anchor.path, focus.path)\n    const [, path] = common\n\n    // 获得tablePath\n    let tablePath = [...path]\n    while (true) {\n        // 如果不是在同一个table中，不再继续处理\n        if (tablePath.length == 0) {\n            return null\n        }\n\n        const n = Node.get(nodeEntry, tablePath)\n        if (n.type && n.type == 'table') {\n            break\n        }\n\n        tablePath = Path.parent(tablePath)\n    }\n\n    const tableElement = Node.get(nodeEntry, tablePath)\n    const mergedCellRowCols = getAllSpanCells(tableElement)\n\n    const row = tableElement.children.length\n    const col = tableElement.children[0].children.length\n\n    const level = tablePath.length\n    const anchorPathInTable = [anchor.path[level], anchor.path[level + 1]]\n    const focusPathInTable = [focus.path[level], focus.path[level + 1]]\n\n    if (Path.equals(anchorPathInTable, focusPathInTable)) {\n        return null\n    }\n\n    let [minRow, maxRow] = [anchorPathInTable[0], focusPathInTable[0]]\n    if (anchorPathInTable[0] > focusPathInTable[0]) {\n        [minRow, maxRow] = [focusPathInTable[0], anchorPathInTable[0]]\n    }\n    let [minCol, maxCol] = [anchorPathInTable[1], focusPathInTable[1]]\n    if (anchorPathInTable[1] > focusPathInTable[1]) {\n        [minCol, maxCol] = [focusPathInTable[1], anchorPathInTable[1]]\n    }\n\n    [minRow, minCol] = [minRow - 1, minCol - 1]\n    while (true) {\n        const [minR, minC, maxR, maxC] = getCuerrentSelection([minRow, minCol, maxRow, maxCol], mergedCellRowCols, row, col)\n\n        let change = false\n        if (minRow > minR) {\n            minRow = minR\n            change = true\n        }\n        if (maxRow < maxR) {\n            maxRow = maxR\n            change = true\n        }\n        if (minCol > minC) {\n            minCol = minC\n            change = true\n        }\n        if (maxCol < maxC) {\n            maxCol = maxC\n            change = true\n        }\n\n        if (!change) {\n            break\n        }\n    }\n\n    return {\n        start: [...tablePath, minRow + 1, minCol + 1],\n        end: [...tablePath, maxRow, maxCol],\n    }\n}\n\nconst isCellInTableSelection = (editor, element) => {\n    const { tableSelection } = editor\n    if (!tableSelection) {\n        return false\n    }\n\n    const at = ReactEditor.findPath(editor, element)\n    const { start, end } = tableSelection\n\n    // 判断有没有在一个table中\n    const [nodeEntry,] = Editor.node(editor, {})\n    const common = Node.common(nodeEntry, at, start)\n    const [, path] = common\n\n    // 获得tablePath\n    let tablePath = [...path]\n    while (true) {\n        // 如果不是在同一个table中，不再继续处理\n        if (tablePath.length == 0) {\n            return false\n        }\n\n        const n = Node.get(nodeEntry, tablePath)\n        if (n.type && n.type == 'table') {\n            break\n        }\n\n        tablePath = Path.parent(tablePath)\n    }\n\n    // 防止表格嵌套表格导致错误识别\n    if (tablePath.length + 2 != at.length || tablePath.length + 2 != start.length) {\n        return false\n    }\n\n    const atInTable = getCellPathInTable(at)\n    const startInTable = getCellPathInTable(start)\n    const endInTable = getCellPathInTable(end)\n\n    return startInTable[0] <= atInTable[0] && startInTable[1] <= atInTable[1] && atInTable[0] <= endInTable[0] && atInTable[1] <= endInTable[1]\n}\n\nconst getCuerrentSelection = (current, mergedCellRowCols, row, col) => {\n    let [minRow, minCol, maxRow, maxCol] = current\n    // 向上\n    for (var ir = minRow; ir >= -1; ir--) {\n        minRow = ir\n        if (!isLineCrossAnyCells([[ir, minCol], [ir, maxCol]], mergedCellRowCols)) {\n            break\n        }\n    }\n\n    // 向下\n    for (var ar = maxRow; ar <= row; ar++) {\n        maxRow = ar\n        if (!isLineCrossAnyCells([[ar, minCol], [ar, maxCol]], mergedCellRowCols)) {\n            break\n        }\n    }\n\n    // 向左\n    for (var ic = minCol; ic >= -1; ic--) {\n        minCol = ic\n        if (!isLineCrossAnyCells([[minRow, ic], [maxRow, ic]], mergedCellRowCols)) {\n            break\n        }\n    }\n\n    // 向右\n    for (var ac = maxCol; ac <= col; ac++) {\n        maxCol = ac\n        if (!isLineCrossAnyCells([[minRow, ac], [maxRow, ac]], mergedCellRowCols)) {\n            break\n        }\n    }\n\n    return [minRow, minCol, maxRow, maxCol]\n}\n\nconst isLineCrossAnyCells = (line, cells) => {\n    for (var cell of cells) {\n        if (isLineCrossCell(line, cell)) {\n            return true\n        }\n    }\n\n    return false\n}\n\nconst isLineCrossCell = (line, cell) => {\n    const [lineStart, lineEnd] = line\n    const [cellStart, cellEnd] = cell\n\n    if (lineStart[0] >= cellEnd[0] || lineEnd[0] <= cellStart[0]) {\n        return false\n    }\n\n    if (lineStart[1] >= cellEnd[1] || lineEnd[1] <= cellStart[1]) {\n        return false\n    }\n\n    return true\n}\n\nconst getRowFromCell = (editor, cellPath) => {\n    const [nodeEntry,] = Editor.node(editor, [])\n    const rowPath = Path.parent(cellPath)\n\n    return Node.get(nodeEntry, rowPath)\n}\n\nconst getTableFromCell = (editor, cellPath) => {\n    const [nodeEntry,] = Editor.node(editor, [])\n    const rowPath = Path.parent(cellPath)\n    const tablePath = Path.parent(rowPath)\n\n    return Node.get(nodeEntry, tablePath)\n}\n\nconst getCellPathInTable = (path) => {\n    const len = path.length\n    return [path[len - 2], path[len - 1]]\n}\n\nexport {\n    setTable,\n    getCellPathInTable,\n    addRow,\n    deleteRow,\n    addCol,\n    deleteCol,\n    setColWidth,\n    getTableSelection,\n    isCellInTableSelection,\n    mergeCells,\n    splitCells,\n    clearTableSelection,\n}","import { Popover, Button } from 'antd';\nimport { TableOutlined } from '@ant-design/icons';\nimport { setTable } from './utils/node';\nimport { useSlate } from 'slate-react';\nimport TableInput from '@/components/table-input';\nimport { useState } from 'react';\nimport React from 'react';\n\nconst AddMenu = props => {\n\tconst editor = useSlate();\n\tconst { element } = props;\n\n\tconst [title, settitle] = useState('0行0列');\n\n\tconst onChange = (r, c) => {\n\t\tsettitle(`${r}行${c}列`);\n\t};\n\n\tconst onClick = (r, c) => {\n\t\tsetTable(editor, element, r, c);\n\t};\n\n\treturn (\n\t\t<Popover\n\t\t\ttitle={title}\n\t\t\tcontent={<TableInput onChange={onChange} onClick={onClick} />}\n\t\t\tplacement=\"topRight\"\n\t\t>\n\t\t\t<Button\n\t\t\t\ttype=\"text\"\n\t\t\t\ticon={<TableOutlined style={{ color: '#91d5ff' }} />}\n\t\t\t\tstyle={{ width: '100%', textAlign: 'left' }}\n\t\t\t>\n\t\t\t\t表格\n\t\t\t</Button>\n\t\t</Popover>\n\t);\n};\n\nexport { AddMenu };\n","import {\n\tInsertRowLeftOutlined,\n\tInsertRowRightOutlined,\n\tDeleteColumnOutlined,\n\tInsertRowAboveOutlined,\n\tDeleteRowOutlined,\n\tInsertRowBelowOutlined,\n\tMinusCircleOutlined,\n\tPlusCircleOutlined,\n} from '@ant-design/icons';\nimport { Popover, Button } from 'antd';\nimport { useSlate, ReactEditor } from 'slate-react';\nimport { Editor, Node, Path } from 'slate';\nimport {\n\tgetCellPathInTable,\n\taddRow,\n\tdeleteRow,\n\taddCol,\n\tdeleteCol,\n\tsetColWidth,\n\tgetTableSelection,\n\tisCellInTableSelection,\n} from './utils/node';\nimport { memo } from 'react';\nimport React from 'react';\n\nconst Element = memo(props => {\n\t// 基础配置\n\tconst { attributes, children, element } = props;\n\n\tconst editor = useSlate();\n\teditor.tableSelection = getTableSelection(editor);\n\n\tlet width = 0;\n\tconst tr0 = element.children[0];\n\tfor (var i = 0; i < tr0.children.length; i++) {\n\t\twidth += tr0.children[i].width;\n\t}\n\n\treturn (\n\t\t<div style={{ marginTop: '10px', marginBottom: '10px', overflow: 'auto' }}>\n\t\t\t<table style={{ borderCollapse: 'collapse', width: `${width}px` }}>\n\t\t\t\t<tbody {...attributes}>{children}</tbody>\n\t\t\t</table>\n\t\t</div>\n\t);\n});\n\nconst RowElement = props => {\n\t// 基础配置\n\tconst { attributes, children, element } = props;\n\n\tconst editor = useSlate();\n\tconst rowPath = ReactEditor.findPath(editor, element);\n\tconst rowPathInTable = rowPath[rowPath.length - 1];\n\n\tconst colEditor = () => {\n\t\tif (rowPathInTable !== 0) {\n\t\t\treturn null;\n\t\t}\n\n\t\tconst cells = [<td key=\"-1\" style={{ width: '7px', height: '6px' }} />];\n\n\t\tconst editorColMenu = (cellSort, width) => {\n\t\t\treturn (\n\t\t\t\t<>\n\t\t\t\t\t<Button\n\t\t\t\t\t\tsize=\"small\"\n\t\t\t\t\t\ttype=\"text\"\n\t\t\t\t\t\ticon={<InsertRowLeftOutlined style={{ color: '#096dd9' }} />}\n\t\t\t\t\t\tonMouseDown={() => {\n\t\t\t\t\t\t\taddCol(editor, [...rowPath, cellSort], false);\n\t\t\t\t\t\t}}\n\t\t\t\t\t/>\n\t\t\t\t\t<Button\n\t\t\t\t\t\tsize=\"small\"\n\t\t\t\t\t\ttype=\"text\"\n\t\t\t\t\t\ticon={<MinusCircleOutlined style={{ color: '#389e0d' }} />}\n\t\t\t\t\t\tonMouseDown={() => {\n\t\t\t\t\t\t\tsetColWidth(editor, [...rowPath, cellSort], width - 20);\n\t\t\t\t\t\t}}\n\t\t\t\t\t/>\n\t\t\t\t\t<Button\n\t\t\t\t\t\tsize=\"small\"\n\t\t\t\t\t\ttype=\"text\"\n\t\t\t\t\t\ticon={<DeleteColumnOutlined style={{ color: '#f5222d' }} />}\n\t\t\t\t\t\tonMouseDown={() => {\n\t\t\t\t\t\t\tdeleteCol(editor, [...rowPath, cellSort]);\n\t\t\t\t\t\t}}\n\t\t\t\t\t/>\n\t\t\t\t\t<Button\n\t\t\t\t\t\tsize=\"small\"\n\t\t\t\t\t\ttype=\"text\"\n\t\t\t\t\t\ticon={<PlusCircleOutlined style={{ color: '#389e0d' }} />}\n\t\t\t\t\t\tonMouseDown={() => {\n\t\t\t\t\t\t\tsetColWidth(editor, [...rowPath, cellSort], width + 20);\n\t\t\t\t\t\t}}\n\t\t\t\t\t/>\n\t\t\t\t\t<Button\n\t\t\t\t\t\tsize=\"small\"\n\t\t\t\t\t\ttype=\"text\"\n\t\t\t\t\t\ticon={<InsertRowRightOutlined style={{ color: '#096dd9' }} />}\n\t\t\t\t\t\tonMouseDown={() => {\n\t\t\t\t\t\t\taddCol(editor, [...rowPath, cellSort], true);\n\t\t\t\t\t\t}}\n\t\t\t\t\t/>\n\t\t\t\t\t<br />\n\t\t\t\t</>\n\t\t\t);\n\t\t};\n\n\t\tfor (var i = 0; i < element.children.length; i++) {\n\t\t\tconst width = element.children[i].width;\n\t\t\tcells.push(\n\t\t\t\t<Popover key={i} content={editorColMenu(i, width)} placement=\"topLeft\">\n\t\t\t\t\t<td\n\t\t\t\t\t\tkey={i}\n\t\t\t\t\t\tstyle={{\n\t\t\t\t\t\t\twidth: `${width}px`,\n\t\t\t\t\t\t\tborder: '1px solid #d9d9d9',\n\t\t\t\t\t\t\tbackgroundColor: '#f0f0f0',\n\t\t\t\t\t\t\tcursor: 'pointer',\n\t\t\t\t\t\t}}\n\t\t\t\t\t>\n\t\t\t\t\t\t<div style={{ height: '6px' }} />\n\t\t\t\t\t</td>\n\t\t\t\t</Popover>\n\t\t\t);\n\t\t}\n\n\t\treturn <tr contentEditable={false}>{cells}</tr>;\n\t};\n\n\treturn (\n\t\t<>\n\t\t\t{colEditor()}\n\t\t\t<tr {...attributes} style={{ textAlign: 'left', border: '1px solid #d9d9d9' }}>\n\t\t\t\t{children}\n\t\t\t</tr>\n\t\t</>\n\t);\n};\n\nconst RowEditor = props => {\n\t// 基础配置\n\tconst { element } = props;\n\n\tconst editor = useSlate();\n\tconst cellPath = ReactEditor.findPath(editor, element);\n\tconst [, c] = getCellPathInTable(cellPath);\n\n\tif (c !== 0) {\n\t\treturn null;\n\t}\n\n\tconst editorRowMenu = () => {\n\t\treturn (\n\t\t\t<>\n\t\t\t\t<Button\n\t\t\t\t\tsize=\"small\"\n\t\t\t\t\ttype=\"text\"\n\t\t\t\t\ticon={<InsertRowAboveOutlined style={{ color: '#096dd9' }} />}\n\t\t\t\t\tonMouseDown={() => addRow(editor, cellPath, false)}\n\t\t\t\t/>\n\t\t\t\t<br />\n\t\t\t\t<Button\n\t\t\t\t\tsize=\"small\"\n\t\t\t\t\ttype=\"text\"\n\t\t\t\t\ticon={<DeleteRowOutlined style={{ color: '#f5222d' }} />}\n\t\t\t\t\tonMouseDown={() => deleteRow(editor, cellPath)}\n\t\t\t\t/>\n\t\t\t\t<br />\n\t\t\t\t<Button\n\t\t\t\t\tsize=\"small\"\n\t\t\t\t\ttype=\"text\"\n\t\t\t\t\ticon={<InsertRowBelowOutlined style={{ color: '#096dd9' }} />}\n\t\t\t\t\tonMouseDown={() => addRow(editor, cellPath, true)}\n\t\t\t\t/>\n\t\t\t</>\n\t\t);\n\t};\n\n\treturn (\n\t\t<Popover content={editorRowMenu()} placement=\"leftTop\">\n\t\t\t<td\n\t\t\t\tcontentEditable={false}\n\t\t\t\tstyle={{\n\t\t\t\t\tborder: '1px solid #d9d9d9',\n\t\t\t\t\tbackgroundColor: '#f0f0f0',\n\t\t\t\t\tcursor: 'pointer',\n\t\t\t\t}}\n\t\t\t>\n\t\t\t\t<div style={{ width: '6px' }} />\n\t\t\t</td>\n\t\t</Popover>\n\t);\n};\n\nconst CellElement = props => {\n\t// 基础配置\n\tconst { attributes, children, element } = props;\n\tconst { colSpan, rowSpan } = element;\n\n\tconst editor = useSlate();\n\n\tconst style = {\n\t\tborder: '1px solid #d9d9d9',\n\t\tverticalAlign: 'top',\n\t\ttextAlign: 'left',\n\t};\n\tif (isCellInTableSelection(editor, element)) {\n\t\tstyle.backgroundColor = '#f0f5ff';\n\t}\n\n\tlet tdProps = {\n\t\tstyle,\n\t};\n\n\tlet width = element.width;\n\tif (colSpan) {\n\t\ttdProps.colSpan = colSpan;\n\n\t\t// 计算横向合并后的长度\n\t\tconst [nodeEntry] = Editor.node(editor, {});\n\t\tconst at = ReactEditor.findPath(editor, element);\n\t\tlet next = at;\n\t\tfor (var c = 2; c <= colSpan; c++) {\n\t\t\tnext = Path.next(next);\n\t\t\tconst nextCell = Node.get(nodeEntry, next);\n\n\t\t\twidth += nextCell.width + 1;\n\t\t}\n\t}\n\tif (rowSpan) {\n\t\ttdProps.rowSpan = rowSpan;\n\t}\n\n\treturn (\n\t\t<>\n\t\t\t{<RowEditor {...props} />}\n\t\t\t<td {...tdProps}>\n\t\t\t\t<div {...attributes} style={{ padding: '8px', width: `${width}px`, overflow: 'auto' }}>\n\t\t\t\t\t{children}\n\t\t\t\t</div>\n\t\t\t</td>\n\t\t</>\n\t);\n};\n\nconst MergedElement = props => {\n\t// 基础配置\n\tconst { attributes, children } = props;\n\n\treturn (\n\t\t<>\n\t\t\t{<RowEditor {...props} />}\n\t\t\t<td {...attributes} style={{ display: 'none' }}>\n\t\t\t\t{children}\n\t\t\t</td>\n\t\t</>\n\t);\n};\n\nexport { Element, RowElement, CellElement, MergedElement };\n","import { message } from 'antd'\nimport {\n    Editor,\n    Range,\n    Point,\n    Element as SlateElement,\n    Node,\n    Path,\n    Transforms,\n} from 'slate'\nimport { getCellPathInTable, clearTableSelection } from './utils/node'\n\nconst withTable = editor => {\n    const { isEmpty, getFragment, insertFragment, deleteFragment } = editor\n\n    // 记录表格内被选中的单元格\n    editor.tableSelection = null\n\n    editor.deleteFragment = () => {\n        const { tableSelection } = editor\n        // 如果选中了表格的区域，则清空内容\n        if (tableSelection) {\n            clearTableSelection(editor, tableSelection)\n\n            return\n        }\n\n        const { selection } = editor\n        if (selection) {\n            const { anchor, focus } = selection\n            const common = Node.common(editor, anchor.path, focus.path)\n\n            if (common[1].length > 2) {\n                deleteFragment()\n                return\n            }\n\n            const startEl = Node.get(editor, [anchor.path[0]])\n            const endEl = Node.get(editor, [focus.path[0]])\n            if (startEl.type === 'table' || endEl.type === 'table') {\n                message.error('选中区域边缘包含表格，无法删除')\n                return\n            }\n        }\n\n        deleteFragment()\n    }\n\n    editor.insertFragment = node => {\n        if (editor.tableSelection) {\n            message.error('禁止向table拷贝')\n\n            return\n        }\n\n        if (!Array.isArray(node)) {\n            insertFragment(node)\n            return\n        }\n\n        let hasTable = false\n        for (var child of node) {\n            if (child.type === 'table') {\n                hasTable = true\n            }\n        }\n\n        if (!hasTable) {\n            insertFragment(node)\n            return\n        }\n\n        // 只允许在第一层空位置插入表格\n        const { selection } = editor\n        if (selection) {\n            if (!Range.isCollapsed(selection)) {\n                message.error('拷贝内容含有表格，只能粘贴到光标上')\n                return\n            }\n        }\n\n        const { anchor } = selection\n\n        Transforms.insertNodes(editor, node, { at: [anchor.path[0] + 1] })\n    }\n\n    // 重写部分拷贝方法，保证纯paragraph拷贝时，不拷贝父元素属性\n    editor.getFragment = () => {\n        // 如果表格有被选中的，那么复制为选中大小的表格\n        if (editor.tableSelection) {\n            const { start, end } = editor.tableSelection\n            const tablePath = Path.parent(Path.parent(start))\n            const [startRow, startCol] = getCellPathInTable(start)\n            const [endRow, endCol] = getCellPathInTable(end)\n\n            const rows = []\n            for (var r = startRow; r <= endRow; r++) {\n                const cells = []\n                for (var c = startCol; c <= endCol; c++) {\n                    const cell = Node.get(editor, [...tablePath, r, c])\n                    cells.push(cell)\n                }\n                const row = {\n                    type: 'table-row',\n                    children: cells,\n                }\n                rows.push(row)\n            }\n\n            return [\n                {\n                    type: 'table',\n                    children: rows,\n                }\n            ]\n        }\n\n        let fragment = getFragment()\n\n        if (fragment.length < 2) {\n            return fragment\n        }\n        // 如果包含部分table，则不会拷贝上table的内容\n        if (fragment[0].type === 'table' || fragment[fragment.length - 1].type === 'table') {\n            const newFagment = []\n            for (var i = 0; i < fragment.length; i++) {\n                if (i != 0 && i != fragment.length - 1) {\n                    newFagment.push(fragment[i])\n                    continue\n                }\n                if (fragment[i].type !== 'table') {\n                    newFagment.push(fragment[i])\n                }\n            }\n            return newFagment\n        }\n\n        return fragment\n    }\n\n    editor.isEmpty = element => {\n        if (element.type === 'table') {\n            return false\n        }\n\n        return isEmpty(element)\n    }\n\n    return editor\n}\n\nconst withTableRow = editor => {\n    return editor\n}\n\nconst withTableCell = editor => {\n    const { deleteBackward, deleteForward } = editor\n\n    editor.deleteBackward = unit => {\n        const { selection } = editor\n\n        if (selection && Range.isCollapsed(selection)) {\n            const [cell] = Editor.nodes(editor, {\n                match: n =>\n                    !Editor.isEditor(n) &&\n                    SlateElement.isElement(n) &&\n                    n.type === 'table-cell',\n            })\n\n            if (cell) {\n                const [, cellPath] = cell\n                const start = Editor.start(editor, cellPath)\n\n                if (Point.equals(selection.anchor, start)) {\n                    return\n                }\n            }\n        }\n\n        deleteBackward(unit)\n    }\n\n    editor.deleteForward = unit => {\n        const { selection } = editor\n\n        if (selection && Range.isCollapsed(selection)) {\n            const [cell] = Editor.nodes(editor, {\n                match: n =>\n                    !Editor.isEditor(n) &&\n                    SlateElement.isElement(n) &&\n                    n.type === 'table-cell',\n            })\n\n            if (cell) {\n                const [, cellPath] = cell\n                const end = Editor.end(editor, cellPath)\n\n                if (Point.equals(selection.anchor, end)) {\n                    return\n                }\n            }\n        }\n\n        deleteForward(unit)\n    }\n\n    return editor\n}\n\nconst withTableCellMerged = editor => {\n    const { isVoid } = editor\n\n    editor.isVoid = element => {\n        return element.type === 'table-cell-merged' ? true : isVoid(element);\n    }\n\n    return editor\n}\n\nexport { withTable, withTableRow, withTableCell, withTableCellMerged }","import { MergeCellsOutlined, SplitCellsOutlined } from '@ant-design/icons';\nimport Single from '@/components/button/single';\nimport { useSlate } from 'slate-react';\nimport { mergeCells, splitCells } from './utils/node';\nimport React from 'react';\n\nconst LeafBar = props => {\n\tconst editor = useSlate();\n\n\treturn (\n\t\t<>\n\t\t\t<Single\n\t\t\t\tselected={false}\n\t\t\t\tdescription=\"合并单元格\"\n\t\t\t\tcontent={<MergeCellsOutlined style={{ color: '#237804' }} />}\n\t\t\t\tonClick={() => {\n\t\t\t\t\tmergeCells(editor);\n\t\t\t\t}}\n\t\t\t/>\n\t\t\t<Single\n\t\t\t\tselected={false}\n\t\t\t\tdescription=\"拆分单元格\"\n\t\t\t\tcontent={<SplitCellsOutlined style={{ color: '#237804' }} />}\n\t\t\t\tonClick={() => {\n\t\t\t\t\tsplitCells(editor);\n\t\t\t\t}}\n\t\t\t/>\n\t\t</>\n\t);\n};\n\nexport { LeafBar };\n","import { AddMenu } from \"./menu\"\nimport { Element, RowElement, CellElement, MergedElement } from \"./element\"\nimport { withTable, withTableCell, withTableRow, withTableCellMerged } from \"./plugin\"\nimport { LeafBar } from \"./toolbar\"\n\nconst Table = {\n    type: 'table',\n    IsBlock: true,\n    Level: 1,\n    AddMenu,\n    Element,\n    Plugin: withTable,\n    LeafBar,\n}\n\nconst TableRow = {\n    type: 'table-row',\n    IsBlock: false,\n    Element: RowElement,\n    Plugin: withTableRow,\n}\n\nconst TableCell = {\n    type: 'table-cell',\n    IsBlock: false,\n    Element: CellElement,\n    Plugin: withTableCell,\n}\n\nconst TableCellMerged = {\n    type: 'table-cell-merged',\n    IsBlock: false,\n    Element: MergedElement,\n    Plugin: withTableCellMerged,\n}\n\nexport { Table, TableRow, TableCell, TableCellMerged }","import { Transforms } from 'slate';\nimport { ReactEditor } from 'slate-react';\n\nconst setNodeTag = (editor, element, key, value, at = null) => {\n    if (at) {\n        Transforms.setNodes(editor, { [key]: value }, { at: at });\n    } else if (!element) {\n        // 如果没有传入对象，则操作当前行\n        Transforms.setNodes(editor, { [key]: value });\n    } else {\n        const checkedAt = ReactEditor.findPath(editor, element);\n        Transforms.setNodes(editor, { [key]: value }, { at: checkedAt });\n    }\n}\n\nconst setDivider = (editor, element) => {\n    setNodeTag(editor, element, 'type', 'divider')\n}\n\nconst setTextAlign = (editor, element, textAlign) => {\n    setNodeTag(editor, element, 'textAlign', textAlign)\n}\n\nexport { setDivider, setTextAlign }","import { Button } from 'antd';\nimport {\n\tMinusSquareOutlined,\n\tAlignLeftOutlined,\n\tAlignCenterOutlined,\n\tAlignRightOutlined,\n} from '@ant-design/icons';\nimport Select from '@/components/button/select';\nimport { setDivider, setTextAlign } from './utils/node';\nimport { useSlate } from 'slate-react';\nimport React from 'react';\n\nconst EditMenu = props => {\n\tconst editor = useSlate();\n\tconst { element } = props;\n\n\treturn (\n\t\t<Select\n\t\t\tselected={element.textAlign}\n\t\t\tbuttons={textAlignButtonList}\n\t\t\tonChange={key => {\n\t\t\t\tsetTextAlign(editor, element, key);\n\t\t\t}}\n\t\t/>\n\t);\n};\n\nconst AddMenu = props => {\n\tconst editor = useSlate();\n\tconst { element } = props;\n\n\treturn (\n\t\t<Button\n\t\t\ttype=\"text\"\n\t\t\ticon={<MinusSquareOutlined style={{ color: '#237804' }} />}\n\t\t\tstyle={{ width: '100%', textAlign: 'left' }}\n\t\t\tonMouseDown={() => {\n\t\t\t\tsetDivider(editor, element);\n\t\t\t}}\n\t\t>\n\t\t\t文字分割线\n\t\t</Button>\n\t);\n};\n\nconst textAlignButtonList = [\n\t{\n\t\tkey: 'left',\n\t\tcontent: <AlignLeftOutlined />,\n\t\tdescription: '左对齐',\n\t},\n\t{\n\t\tkey: 'center',\n\t\tcontent: <AlignCenterOutlined />,\n\t\tdescription: '居中',\n\t},\n\t{\n\t\tkey: 'right',\n\t\tcontent: <AlignRightOutlined />,\n\t\tdescription: '右对齐',\n\t},\n];\n\nexport { EditMenu, AddMenu };\n","import { Divider } from 'antd';\nimport { memo } from 'react';\nimport React from 'react';\n\nconst Element = memo(props => {\n\t// 基础配置\n\tconst { attributes, children, element } = props;\n\n\treturn (\n\t\t<div {...attributes}>\n\t\t\t<Divider orientation={element.textAlign || 'center'} style={{ color: '#262626' }}>\n\t\t\t\t{children}\n\t\t\t</Divider>\n\t\t</div>\n\t);\n});\n\nexport { Element };\n","const withDivider = editor => {\n    const { isEmpty } = editor\n\n    editor.isEmpty = element => {\n        if (element.type === 'divider') {\n            return false\n        }\n\n        return isEmpty(element)\n    }\n\n    return editor\n}\n\nexport { withDivider }","import { EditMenu, AddMenu } from \"./menu\"\nimport { Element } from \"./element\"\nimport { withDivider } from \"./plugin\"\n\nconst Divider = {\n    type: 'divider',\n    IsBlock: true,\n    Level: 1,\n    AddMenu,\n    EditMenu,\n    Element,\n    Plugin: withDivider,\n}\n\nexport { Divider }","import { Transforms } from 'slate';\nimport { ReactEditor } from 'slate-react';\n\nconst setNodeTag = (editor, element, key, value, at = null) => {\n    if (at) {\n        Transforms.setNodes(editor, { [key]: value }, { at: at });\n    } else if (!element) {\n        // 如果没有传入对象，则操作当前行\n        Transforms.setNodes(editor, { [key]: value });\n    } else {\n        const checkedAt = ReactEditor.findPath(editor, element);\n        Transforms.setNodes(editor, { [key]: value }, { at: checkedAt });\n    }\n}\n\nconst setHr = (editor, element) => {\n    setNodeTag(editor, element, 'type', 'hr')\n}\n\nexport { setHr }","import { Button } from 'antd';\nimport { MinusCircleOutlined } from '@ant-design/icons';\nimport { setHr } from './utils/node';\nimport { useSlate } from 'slate-react';\nimport React from 'react';\n\nconst AddMenu = props => {\n\tconst editor = useSlate();\n\tconst { element } = props;\n\n\treturn (\n\t\t<Button\n\t\t\ttype=\"text\"\n\t\t\ticon={<MinusCircleOutlined style={{ color: '#d48806' }} />}\n\t\t\tstyle={{ width: '100%', textAlign: 'left' }}\n\t\t\tonMouseDown={() => {\n\t\t\t\tsetHr(editor, element);\n\t\t\t}}\n\t\t>\n\t\t\t纯分割线\n\t\t</Button>\n\t);\n};\n\nexport { AddMenu };\n","import { Divider } from 'antd';\nimport { memo } from 'react';\nimport React from 'react';\n\nconst Element = memo(props => {\n\t// 基础配置\n\tconst { attributes, children } = props;\n\n\treturn (\n\t\t<div {...attributes} style={{ height: '10px' }}>\n\t\t\t<Divider />\n\t\t\t{children}\n\t\t</div>\n\t);\n});\n\nexport { Element };\n","const withHr = editor => {\n    const { isEmpty, isVoid } = editor\n\n    editor.isEmpty = element => {\n        if (element.type === 'hr') {\n            return false\n        }\n\n        return isEmpty(element)\n    }\n\n    editor.isVoid = element => {\n        return element.type === 'hr' ? true : isVoid(element);\n    }\n\n    return editor\n}\n\nexport { withHr }","import { AddMenu } from \"./menu\"\nimport { Element } from \"./element\"\nimport { withHr } from \"./plugin\"\n\nconst Hr = {\n    type: 'hr',\n    IsBlock: true,\n    Level: 1,\n    AddMenu,\n    Element,\n    Plugin: withHr,\n}\n\nexport { Hr }","import { useSlate, ReactEditor } from 'slate-react';\nimport { Editor } from 'slate';\nimport { Button, message } from 'antd';\nimport { CopyOutlined } from '@ant-design/icons';\nimport { useState } from 'react';\nimport { memo } from 'react';\nimport React from 'react';\n\nconst execCoy = text => {\n\tconst input = document.createElement('TEXTAREA');\n\tinput.style.opacity = 0;\n\tinput.style.position = 'absolute';\n\tinput.style.left = '-100000px';\n\tdocument.body.appendChild(input);\n\n\tinput.value = text;\n\tinput.select();\n\tinput.setSelectionRange(0, text.length);\n\tdocument.execCommand('copy');\n\tdocument.body.removeChild(input);\n};\n\nconst Element = memo(props => {\n\t// 子组件\n\tconst { element, children } = props;\n\t// 基础配置\n\tconst { attributes } = props;\n\n\tconst [hover, setHover] = useState();\n\n\tconst editor = useSlate();\n\n\treturn (\n\t\t<div\n\t\t\tstyle={{\n\t\t\t\tbackgroundColor: '#fafafa',\n\t\t\t\twidth: '100%',\n\t\t\t\tpadding: '10px',\n\t\t\t\tcolor: '#000000',\n\t\t\t\tfontSize: '1em',\n\t\t\t\ttabSize: 4,\n\t\t\t\tmarginTop: '10px',\n\t\t\t\tmarginBottom: '10px',\n\t\t\t\tposition: 'relative',\n\t\t\t}}\n\t\t\tonMouseOver={() => {\n\t\t\t\tsetHover(true);\n\t\t\t}}\n\t\t\tonMouseLeave={() => {\n\t\t\t\tsetHover(false);\n\t\t\t}}\n\t\t\t{...attributes}\n\t\t>\n\t\t\t<div\n\t\t\t\tcontentEditable={false}\n\t\t\t\tonClick={() => {\n\t\t\t\t\tconst codeStringArr = [];\n\t\t\t\t\tfor (var child of element.children) {\n\t\t\t\t\t\tconst at = ReactEditor.findPath(editor, child);\n\t\t\t\t\t\tcodeStringArr.push(Editor.string(editor, at));\n\t\t\t\t\t}\n\n\t\t\t\t\texecCoy(codeStringArr.join('\\n'));\n\t\t\t\t\tmessage.success('代码拷贝成功～');\n\t\t\t\t}}\n\t\t\t\tstyle={{\n\t\t\t\t\tdisplay: hover ? 'inline' : 'none',\n\t\t\t\t\tposition: 'absolute',\n\t\t\t\t\ttop: '0.5em',\n\t\t\t\t\tright: '0.5em',\n\t\t\t\t}}\n\t\t\t>\n\t\t\t\t<Button icon={<CopyOutlined style={{ color: '#5b8c00' }} />}>{element.language}</Button>\n\t\t\t</div>\n\t\t\t<div style={{ overflowX: 'auto' }}>{children}</div>\n\t\t</div>\n\t);\n});\n\nconst CodeLineElement = props => {\n\t// 子组件\n\tconst { children } = props;\n\t// 基础配置\n\tconst { attributes } = props;\n\n\treturn (\n\t\t<div\n\t\t\tstyle={{\n\t\t\t\tminWidth: '3000px', // 宽度至少3000px，保证代码行内不换行\n\t\t\t\tfontFamily: `monospace`,\n\t\t\t}}\n\t\t\t{...attributes}\n\t\t>\n\t\t\t{children}\n\t\t</div>\n\t);\n};\n\nexport { Element, CodeLineElement };\n","import { Transforms } from 'slate';\nimport { ReactEditor } from 'slate-react';\n\nconst setNodeTag = (editor, element, key, value, at = null) => {\n    if (at) {\n        Transforms.setNodes(editor, { [key]: value }, { at: at });\n    } else if (!element) {\n        // 如果没有传入对象，则操作当前行\n        Transforms.setNodes(editor, { [key]: value });\n    } else {\n        const checkedAt = ReactEditor.findPath(editor, element);\n        Transforms.setNodes(editor, { [key]: value }, { at: checkedAt });\n    }\n}\n\nconst setLanguage = (editor, element, language) => {\n    setNodeTag(editor, element, ['language'], language)\n}\n\nconst setCode = (editor, element) => {\n    const code = {\n        type: 'code',\n        language: '',\n        children: [\n            {\n                type: 'codeLine',\n                children: [\n                    {\n                        text: '',\n                    },\n                ],\n            },\n        ],\n    }\n\n    const at = ReactEditor.findPath(editor, element)\n\n    Transforms.removeNodes(editor, { at });\n    Transforms.insertNodes(editor, code, { at });\n}\n\nexport { setCode, setLanguage }","import { Button } from 'antd';\nimport { CodepenOutlined } from '@ant-design/icons';\nimport { setCode, setLanguage } from './utils/node';\nimport { useSlate } from 'slate-react';\nimport { Select } from 'antd';\nimport Prism from 'prismjs';\nimport 'prismjs/components/prism-sql';\nimport 'prismjs/components/prism-go';\nimport 'prismjs/components/prism-python';\nimport 'prismjs/components/prism-typescript';\nimport 'prismjs/components/prism-php';\nimport 'prismjs/components/prism-c';\nimport 'prismjs/components/prism-java';\nimport 'prismjs/components/prism-ruby';\nimport 'prismjs/components/prism-json';\nimport 'prismjs/components/prism-markdown';\nimport React from 'react';\n\nconst { Option } = Select;\n\nconst EditMenu = props => {\n\tconst { element } = props;\n\tconst editor = useSlate();\n\n\tconst options = [];\n\tfor (var language in Prism.languages) {\n\t\toptions.push(\n\t\t\t<Option key={language} value={language}>\n\t\t\t\t{language}\n\t\t\t</Option>\n\t\t);\n\t}\n\n\treturn (\n\t\t<Select\n\t\t\tvalue={element.language}\n\t\t\tonChange={v => {\n\t\t\t\tsetLanguage(editor, element, v);\n\t\t\t}}\n\t\t\tshowSearch\n\t\t\tstyle={{ width: '100%' }}\n\t\t\tplaceholder=\"搜索语言\"\n\t\t\toptionFilterProp=\"children\"\n\t\t\tfilterOption={(input, option) => option.children.toLowerCase().indexOf(input.toLowerCase()) >= 0}\n\t\t\tfilterSort={(optionA, optionB) =>\n\t\t\t\toptionA.children.toLowerCase().localeCompare(optionB.children.toLowerCase())\n\t\t\t}\n\t\t>\n\t\t\t{options}\n\t\t</Select>\n\t);\n};\n\nconst AddMenu = props => {\n\tconst editor = useSlate();\n\tconst { element } = props;\n\n\treturn (\n\t\t<Button\n\t\t\ttype=\"text\"\n\t\t\ticon={<CodepenOutlined style={{ color: '#262626' }} />}\n\t\t\tstyle={{ width: '100%', textAlign: 'left' }}\n\t\t\tonMouseDown={() => {\n\t\t\t\tsetCode(editor, element);\n\t\t\t}}\n\t\t>\n\t\t\t代码块\n\t\t</Button>\n\t);\n};\n\nexport { EditMenu, AddMenu };\n","import {\n    Editor,\n    Range,\n    Point,\n    Element as SlateElement,\n    Transforms,\n    Node,\n    Path,\n} from 'slate'\n\nconst withCode = editor => {\n    const { isEmpty, deleteBackward, insertFragment } = editor\n\n    editor.isEmpty = element => {\n        if (element.type === 'code') {\n            return false\n        }\n\n        return isEmpty(element)\n    }\n\n    editor.insertFragment = node => {\n        if (!Array.isArray(node)) {\n            insertFragment(node)\n            return\n        }\n\n        const { selection } = editor\n\n        if (selection) {\n            const { anchor, focus } = selection\n            const commom = Node.common(editor, anchor.path, focus.path)\n            const path = commom[1]\n\n            // 获得tablePath\n            let codePath = [...path]\n            while (true) {\n                // 如果不是在同一个table中，不再继续处理\n                if (codePath.length == 0) {\n                    return insertFragment(node)\n                }\n\n                const n = Node.get(editor, codePath)\n                if (n.type && n.type == 'code') {\n                    break\n                }\n\n                codePath = Path.parent(codePath)\n            }\n\n            const texts = []\n            for (var child of node) {\n                if (child.type === 'code') {\n                    for (var c of child.children) {\n                        texts.push({\n                            type: 'codeLine',\n                            children: [\n                                {\n                                    text: Node.string(c)\n                                }\n                            ]\n                        })\n                    }\n                } else {\n                    texts.push({\n                        type: 'codeLine',\n                        children: [\n                            {\n                                text: Node.string(child)\n                            }\n                        ]\n                    })\n                }\n            }\n\n            Transforms.insertNodes(editor, texts)\n\n            return\n        }\n\n        return insertFragment(node)\n    }\n\n    editor.deleteBackward = unit => {\n        const { selection } = editor\n\n        if (selection && Range.isCollapsed(selection)) {\n            const [code] = Editor.nodes(editor, {\n                match: n =>\n                    !Editor.isEditor(n) &&\n                    SlateElement.isElement(n) &&\n                    n.type === 'code',\n            })\n\n            if (code) {\n                const [, codePath] = code\n                const start = Editor.start(editor, codePath)\n\n                if (Point.equals(selection.anchor, start)) {\n                    Transforms.setNodes(editor, { type: 'paragraph' }, { at: [...codePath, 0] })\n\n                    deleteBackward(unit)\n\n                    return\n                }\n            }\n        }\n\n        deleteBackward(unit)\n    }\n\n    return editor\n}\n\nconst withCodeLine = editor => {\n    const { isEmpty, insertBreak, insertText, onTabDown } = editor\n\n    editor.isEmpty = element => {\n        if (element.type === 'codeLine') {\n            return false\n        }\n\n        return isEmpty(element)\n    }\n\n    // 输入tab事件拦截，return的是true就代码事件被重置\n    editor.onTabDown = () => {\n        const block = Editor.above(editor, {\n            match: n => Editor.isBlock(editor, n),\n        });\n        if (!!block) {\n            const [element, path] = block;\n\n            if (!element.type || element.type === 'codeLine') {\n                insertText(\"\\t\");\n\n                return true;\n            }\n        }\n\n        if (!onTabDown) {\n            return false\n        }\n\n        return onTabDown();\n    };\n\n    editor.insertBreak = () => {\n        const block = Editor.above(editor, {\n            match: n => Editor.isBlock(editor, n),\n        });\n        if (!!block) {\n            const [element, path] = block;\n\n            if (element.type && element.type == 'codeLine') {\n                const codeArr = Editor.string(editor, path).split(/\\t/);\n\n                if (codeArr.length === 1) {\n                    insertBreak();\n                } else {\n                    const tabArr = [];\n                    for (let i = 0; i < codeArr.length - 1; i++) {\n                        if (codeArr[i] != '') {\n                            break\n                        }\n\n                        tabArr.push(\"\\t\");\n                    }\n                    insertBreak();\n\n                    if (tabArr.length > 0) {\n                        insertText(tabArr.join(''));\n                    }\n                }\n\n                return;\n            }\n        }\n\n        insertBreak();\n    };\n\n\n    return editor\n}\n\nexport { withCode, withCodeLine }","import { Editor } from 'slate'\nimport Prism from 'prismjs'\nimport 'prismjs/components/prism-sql'\nimport 'prismjs/components/prism-go'\nimport 'prismjs/components/prism-python'\nimport 'prismjs/components/prism-typescript'\nimport 'prismjs/components/prism-php'\nimport 'prismjs/components/prism-c'\nimport 'prismjs/components/prism-java'\nimport 'prismjs/components/prism-ruby'\nimport 'prismjs/components/prism-json'\nimport 'prismjs/components/prism-markdown'\n\nconst CodeDcorate = (editor, [node, path]) => {\n    // 判断是否设置了语言，并且是否支持对应语言\n    if (!node.language) {\n        return []\n    }\n\n    const grammar = Prism.languages[node.language];\n    if (!grammar) {\n        return []\n    }\n\n    if (!node.children) {\n        return []\n    }\n\n    let texts = []\n    for (let i = 0; i < node.children.length; i++) {\n        const linePath = path.concat(i);\n\n        texts = texts.concat(Editor.string(editor, linePath));\n    }\n\n    const tokens = Prism.tokenize(texts.join('\\n'), grammar);\n    const ranges = [];\n    let offset = 0;\n    let lineOrder = 0;\n\n    const calculate = (childrenTokens, childrenType = null) => {\n        const tokensForEach = (token, accu) => {\n            if (typeof token === 'string') {\n                if (token.indexOf('\\n') > -1) {\n                    const ts = token.split(/\\n/)\n\n                    offset = ts[ts.length - 1].length\n                    lineOrder += ts.length - 1\n                    return\n                }\n\n                if (!!childrenType) {\n                    const linePath = path.concat(lineOrder);\n                    ranges.push({\n                        anchor: { path: linePath, offset },\n                        focus: { path: linePath, offset: offset + token.length },\n                        codeType: childrenType,\n                    })\n                }\n\n                offset += token.length;\n            } else {\n                if (typeof token.content === 'string') {\n                    const { content } = token;\n\n                    if (content.indexOf('\\n') > -1) {\n                        const cs = content.split(/\\n/);\n                        for (let i = 0; i < cs.length; i++) {\n                            const linePath = path.concat(lineOrder);\n                            if (i === 0) {\n                                ranges.push({\n                                    anchor: { path: linePath, offset },\n                                    focus: { path: linePath, offset: offset + cs[i].length },\n                                    codeType: token.type,\n                                });\n                            } else {\n                                ranges.push({\n                                    anchor: { path: linePath, offset: 0 },\n                                    focus: { path: linePath, offset: offset + cs[i].length },\n                                    codeType: token.type,\n                                });\n\n                                offset = cs[i].length;\n                            }\n\n                            i < cs.length - 1 && lineOrder++;\n                        }\n                    } else {\n                        const linePath = path.concat(lineOrder);\n                        ranges.push({\n                            anchor: { path: linePath, offset },\n                            focus: { path: linePath, offset: offset + token.length },\n                            codeType: token.type,\n                        });\n\n                        offset += token.length;\n                    }\n                } else {\n                    calculate(token.content, token.alias || token.type);\n                }\n            }\n        }\n\n        childrenTokens.forEach(tokensForEach);\n    }\n\n    calculate(tokens)\n    return ranges\n}\n\nexport { CodeDcorate }","const codeColorConfig = {\n    comment: 'slategray',\n    operator: '#9a6e3a',\n    url: '#9a6e3a',\n    keyword: '#07a',\n    variable: '#e90',\n    regex: '#e90',\n    number: '#905',\n    boolean: '#905',\n    tag: '#905',\n    constant: '#905',\n    symbol: '#905',\n    selector: '#905',\n    'attr-name': '#905',\n    punctuation: '#999',\n    string: '#690',\n    char: '#690',\n    function: '#dd4a68',\n    'class-name': '#dd4a68',\n    builtin: '#1d39c4',\n}\n\nexport { codeColorConfig }","import { codeColorConfig } from './utils/config';\nimport React from 'react';\n\nconst Leaf = ({ attributes, children, leaf }) => {\n\tif (!leaf.codeType || !codeColorConfig[leaf.codeType]) {\n\t\treturn <span {...attributes}>{children}</span>;\n\t}\n\n\treturn (\n\t\t<span style={{ color: codeColorConfig[leaf.codeType] }} {...attributes}>\n\t\t\t{children}\n\t\t</span>\n\t);\n};\n\nexport { Leaf };\n","import { Element, CodeLineElement } from \"./element\"\nimport { AddMenu, EditMenu } from './menu'\nimport { withCode, withCodeLine } from './plugin'\nimport { CodeDcorate } from \"./deorate\"\nimport { Leaf } from \"./leaf\"\n\nconst Code = {\n    type: 'code',\n    IsBlock: true,\n    AddMenu,\n    EditMenu,\n    Element,\n    Plugin: withCode,\n    Decorate: CodeDcorate,\n    Leaf\n}\n\nconst CodeLine = {\n    type: 'codeLine',\n    IsBlock: false,\n    Element: CodeLineElement,\n    Plugin: withCodeLine,\n}\n\nexport { Code, CodeLine }","import { Transforms } from 'slate';\nimport { ReactEditor } from 'slate-react';\n\nconst setNodeTag = (editor, element, key, value, at = null) => {\n    if (at) {\n        Transforms.setNodes(editor, { [key]: value }, { at: at });\n    } else if (!element) {\n        // 如果没有传入对象，则操作当前行\n        Transforms.setNodes(editor, { [key]: value });\n    } else {\n        const checkedAt = ReactEditor.findPath(editor, element);\n        Transforms.setNodes(editor, { [key]: value }, { at: checkedAt });\n    }\n}\n\nconst setVideo = (editor, element, src) => {\n    if (element) {\n        const at = ReactEditor.findPath(editor, element);\n        const cardBlock = {\n            type: 'video',\n            src: src,\n            width: 700,\n            children: [\n                {\n                    text: '',\n                }\n            ]\n        };\n\n        Transforms.setNodes(editor, cardBlock, { at });\n    }\n}\n\nconst setTextAlign = (editor, element, textAlign) => {\n    setNodeTag(editor, element, 'textAlign', textAlign)\n}\n\nconst setWidth = (editor, element, width) => {\n    if (width < 40 || width > 2000) {\n        return\n    }\n\n    setNodeTag(editor, element, 'width', width)\n}\n\nexport { setTextAlign, setWidth, setVideo }","import { Button, Popover, Input } from 'antd';\nimport {\n\tVideoCameraOutlined,\n\tAlignLeftOutlined,\n\tAlignCenterOutlined,\n\tAlignRightOutlined,\n\tMinusCircleOutlined,\n\tPlusCircleOutlined,\n} from '@ant-design/icons';\nimport Select from '@/components/button/select';\nimport { setVideo, setTextAlign, setWidth } from './utils/node';\nimport { useSlate } from 'slate-react';\nimport Single from '@/components/button/single';\nimport { useState } from 'react';\nimport isUrl from 'is-url';\nimport imageExtensions from 'image-extensions';\nimport React from 'react';\n\n// 判断是不是图片链接\nconst isImageUrl = url => {\n\tif (!url) return false;\n\tif (!isUrl(url)) return false;\n\tconst ext = new URL(url).pathname.split('.').pop();\n\treturn imageExtensions.includes(ext);\n};\n\nconst EditMenu = props => {\n\tconst editor = useSlate();\n\tconst { element } = props;\n\n\treturn (\n\t\t<>\n\t\t\t<Select\n\t\t\t\tselected={element.textAlign}\n\t\t\t\tbuttons={textAlignButtonList}\n\t\t\t\tonChange={key => {\n\t\t\t\t\tsetTextAlign(editor, element, key);\n\t\t\t\t}}\n\t\t\t/>\n\t\t\t<hr style={{ border: '1px solid #f5f5f5' }} />\n\t\t\t<Button\n\t\t\t\tsize=\"small\"\n\t\t\t\ttype=\"text\"\n\t\t\t\ticon={<MinusCircleOutlined style={{ color: '#389e0d' }} />}\n\t\t\t\tonMouseDown={() => {\n\t\t\t\t\tsetWidth(editor, element, element.width - 20);\n\t\t\t\t}}\n\t\t\t/>\n\t\t\t<Button\n\t\t\t\tsize=\"small\"\n\t\t\t\ttype=\"text\"\n\t\t\t\ticon={<PlusCircleOutlined style={{ color: '#f5222d' }} />}\n\t\t\t\tonMouseDown={() => {\n\t\t\t\t\tsetWidth(editor, element, element.width + 20);\n\t\t\t\t}}\n\t\t\t/>\n\t\t</>\n\t);\n};\n\nconst AddMenu = props => {\n\tconst editor = useSlate();\n\tconst { element } = props;\n\n\tconst URL = Props => {\n\t\tconst [value, setValue] = useState('');\n\n\t\treturn (\n\t\t\t<>\n\t\t\t\t<div style={{ display: 'inline-block', width: '280px' }}>\n\t\t\t\t\t<Input value={value} placeholder=\"输入视频地址\" onChange={v => setValue(v.target.value)} />\n\t\t\t\t</div>\n\t\t\t\t&nbsp;\n\t\t\t\t<Single\n\t\t\t\t\tselected={true}\n\t\t\t\t\tdescription=\"video的url\"\n\t\t\t\t\tcontent=\"确认\"\n\t\t\t\t\tonClick={() => {\n\t\t\t\t\t\tsetVideo(editor, element, value);\n\t\t\t\t\t}}\n\t\t\t\t/>\n\t\t\t</>\n\t\t);\n\t};\n\n\tconst edit = () => {\n\t\treturn <>{<URL />}</>;\n\t};\n\n\treturn (\n\t\t<Popover content={edit()} placement=\"topRight\">\n\t\t\t<Button\n\t\t\t\ttype=\"text\"\n\t\t\t\ticon={<VideoCameraOutlined style={{ color: '#00474f' }} />}\n\t\t\t\tstyle={{ width: '100%', textAlign: 'left' }}\n\t\t\t>\n\t\t\t\t视频\n\t\t\t</Button>\n\t\t</Popover>\n\t);\n};\n\nconst textAlignButtonList = [\n\t{\n\t\tkey: 'left',\n\t\tcontent: <AlignLeftOutlined />,\n\t\tdescription: '左对齐',\n\t},\n\t{\n\t\tkey: 'center',\n\t\tcontent: <AlignCenterOutlined />,\n\t\tdescription: '居中',\n\t},\n\t{\n\t\tkey: 'right',\n\t\tcontent: <AlignRightOutlined />,\n\t\tdescription: '右对齐',\n\t},\n];\n\nexport { EditMenu, AddMenu };\n","import { memo } from 'react';\nimport React from 'react';\n\nconst Element = memo(props => {\n\t// 基础配置\n\tconst { attributes, children, element } = props;\n\n\treturn (\n\t\t<div {...attributes} style={{ width: '100%', textAlign: element.textAlign || 'left' }}>\n\t\t\t<iframe\n\t\t\t\tsrc={element.src}\n\t\t\t\tscrolling=\"no\"\n\t\t\t\tborder={0}\n\t\t\t\tframeBorder=\"no\"\n\t\t\t\tframespacing={0}\n\t\t\t\tallowFullScreen={true}\n\t\t\t\tstyle={{\n\t\t\t\t\twidth: `${element.width}px`,\n\t\t\t\t\theight: `${element.width * 0.7}px`,\n\t\t\t\t\tmaxWidth: '100%',\n\t\t\t\t}}\n\t\t\t></iframe>\n\t\t\t{children}\n\t\t</div>\n\t);\n});\n\nexport { Element };\n","const withVideo = editor => {\n    const { isEmpty, isVoid } = editor\n\n    editor.isEmpty = element => {\n        if (element.type === 'video') {\n            return false\n        }\n\n        return isEmpty(element)\n    }\n\n    editor.isVoid = element => {\n        return element.type === 'video' ? true : isVoid(element);\n    }\n\n    return editor\n}\n\nexport { withVideo }","import { EditMenu, AddMenu } from \"./menu\"\nimport { Element } from \"./element\"\nimport { withVideo } from \"./plugin\"\n\nconst Video = {\n    type: 'video',\n    IsBlock: true,\n    AddMenu,\n    EditMenu,\n    Element,\n    Plugin: withVideo,\n}\n\nexport { Video }","import { Transforms, Path, Editor } from 'slate';\nimport { ReactEditor } from 'slate-react';\n\nconst deleteNode = (editor, element, at = null) => {\n    if (!at) {\n        at = ReactEditor.findPath(editor, element);\n    }\n    // 判断当前内容同级别是否还有内容，如果只有自己，则只清空格式\n    let [el,] = Editor.node(editor, {})\n    el = getFromNodeEntry(el, Path.parent(at))\n    if (el.children.length > 1) {\n        Transforms.removeNodes(editor, { at });\n    } else {\n        Transforms.removeNodes(editor, { at });\n        const node = {\n            type: 'paragraph',\n            children: [{ text: '' }],\n        }\n        Transforms.insertNodes(editor, node, { at })\n    }\n}\n\nconst insertNextEmptyNode = (editor, element) => {\n    const node = {\n        type: 'paragraph',\n        children: [{ text: '' }],\n    }\n\n    const at = ReactEditor.findPath(editor, element);\n\n    Transforms.insertNodes(editor, node, { at: Path.next(at) })\n}\n\nconst insertPreviousEmptyNode = (editor, element) => {\n    const node = {\n        type: 'paragraph',\n        children: [{ text: '' }],\n    }\n\n    const at = ReactEditor.findPath(editor, element);\n\n    Transforms.insertNodes(editor, node, { at })\n}\n\nconst getFromNodeEntry = (nodeEntry, path) => {\n    let element = nodeEntry\n\n    for (var i of path) {\n        element = element.children[i]\n    }\n\n    return element\n}\n\nexport { deleteNode, insertNextEmptyNode, insertPreviousEmptyNode }","import {\n\tDeleteOutlined,\n\tPlusCircleOutlined,\n\tEditOutlined,\n\tUpCircleOutlined,\n\tDownCircleOutlined,\n} from '@ant-design/icons';\nimport { Popover, Button } from 'antd';\nimport { ReactEditor, useSlate } from 'slate-react';\nimport React, { useState } from 'react';\nimport { deleteNode, insertNextEmptyNode, insertPreviousEmptyNode } from './node';\n\nconst Menu = props => {\n\tconst { element, children, plugins, editMenu } = props;\n\tconst editor = useSlate();\n\n\t// 如果editor有设置isEmpty函数就用editor的\n\tconst isEmpty = editor.isEmpty(element);\n\n\tconst AddMenu = props => {\n\t\tconst at = ReactEditor.findPath(editor, element);\n\t\tconst level = at.length;\n\n\t\tconst addMenuList = [];\n\t\tfor (var i = 0; i < plugins.length; i++) {\n\t\t\tif (!plugins[i].IsBlock) {\n\t\t\t\tcontinue;\n\t\t\t}\n\n\t\t\tif (plugins[i].Level && plugins[i].Level < level) {\n\t\t\t\tcontinue;\n\t\t\t}\n\n\t\t\taddMenuList.push(<span key={i}>{plugins[i].AddMenu(props)}</span>);\n\t\t\taddMenuList.push(<hr key={`${i}hr`} style={{ border: '1px solid #f5f5f5' }} />);\n\t\t}\n\n\t\treturn <div style={{ width: '200px' }}>{addMenuList}</div>;\n\t};\n\n\tconst EditMenu = props => {\n\t\treturn (\n\t\t\t<div style={{ width: '200px' }}>\n\t\t\t\t{editMenu ? editMenu(props) : null}\n\t\t\t\t{editMenu ? <hr style={{ border: '1px solid #f5f5f5' }} /> : null}\n\t\t\t\t<Button\n\t\t\t\t\ttype=\"text\"\n\t\t\t\t\ticon={<DeleteOutlined style={{ color: 'red' }} />}\n\t\t\t\t\tstyle={{ width: '100%', textAlign: 'left' }}\n\t\t\t\t\tonMouseDown={() => deleteNode(editor, element)}\n\t\t\t\t>\n\t\t\t\t\t清空当前行\n\t\t\t\t</Button>\n\t\t\t\t<hr style={{ border: '1px solid #f5f5f5' }} />\n\t\t\t\t<Button\n\t\t\t\t\ttype=\"text\"\n\t\t\t\t\ticon={<UpCircleOutlined style={{ color: '#096dd9' }} />}\n\t\t\t\t\tstyle={{ width: '100%', textAlign: 'left' }}\n\t\t\t\t\tonMouseDown={() => insertPreviousEmptyNode(editor, element)}\n\t\t\t\t>\n\t\t\t\t\t上方插入空白行\n\t\t\t\t</Button>\n\t\t\t\t<hr style={{ border: '1px solid #f5f5f5' }} />\n\t\t\t\t<Button\n\t\t\t\t\ttype=\"text\"\n\t\t\t\t\ticon={<DownCircleOutlined style={{ color: '#237804' }} />}\n\t\t\t\t\tstyle={{ width: '100%', textAlign: 'left' }}\n\t\t\t\t\tonMouseDown={() => insertNextEmptyNode(editor, element)}\n\t\t\t\t>\n\t\t\t\t\t下方插入空白行\n\t\t\t\t</Button>\n\t\t\t</div>\n\t\t);\n\t};\n\n\tconst EditIcon = () => {\n\t\tif (isEmpty) {\n\t\t\treturn <PlusCircleOutlined />;\n\t\t} else {\n\t\t\treturn <EditOutlined />;\n\t\t}\n\t};\n\n\tconst LeftMenu = () => {\n\t\tif (isEmpty) {\n\t\t\treturn <AddMenu {...props} />;\n\t\t} else {\n\t\t\treturn <EditMenu {...props} />;\n\t\t}\n\t};\n\n\tconst [isEdit, setIsEdit] = useState(false);\n\n\tconst HoverMenu = () => {\n\t\treturn (\n\t\t\t<div onMouseOver={() => setIsEdit(true)} onMouseLeave={() => setIsEdit(false)}>\n\t\t\t\t{isEdit ? <LeftMenu /> : <EditIcon />}\n\t\t\t</div>\n\t\t);\n\t};\n\n\treturn (\n\t\t<Popover content={<HoverMenu />} placement=\"leftTop\">\n\t\t\t<div\n\t\t\t\tstyle={{\n\t\t\t\t\tbackgroundColor: isEdit ? '#e6f7ff' : '',\n\t\t\t\t}}\n\t\t\t>\n\t\t\t\t{children}\n\t\t\t</div>\n\t\t</Popover>\n\t);\n};\n\nexport { Menu };\n","import React, { useMemo, useCallback, useState } from 'react';\nimport { createEditor, Transforms } from 'slate';\nimport { Slate, Editable, withReact } from 'slate-react';\nimport { withHistory } from 'slate-history';\nimport { Paragraph, Link, Star } from './plugins/paragraph';\nimport { Card } from './plugins/card';\nimport { Image } from './plugins/image';\nimport { Table, TableRow, TableCell, TableCellMerged } from './plugins/table';\nimport { Divider } from './plugins/divider';\nimport { Hr } from './plugins/hr';\nimport { Code, CodeLine } from './plugins/code';\nimport { Video } from './plugins/video';\nimport { Menu } from './menu';\nimport _ from 'lodash';\nimport { Affix } from 'antd';\n\nimport './index.css';\n\nconst defaultPlugins = [\n\t// 段落\n\tParagraph,\n\tLink,\n\tStar,\n\t// 卡片\n\tCard,\n\t// 图片\n\tImage,\n\t// 表格\n\tTable,\n\tTableRow,\n\tTableCell,\n\tTableCellMerged,\n\t// 代码块\n\tCode,\n\tCodeLine,\n\t// 分割线\n\tDivider,\n\tHr,\n\t// 视频\n\tVideo,\n];\n\nconst withCommon = editor => {\n\teditor.readOnly = false;\n\teditor.param = {};\n\tconst { onChange } = editor;\n\tconst _onChange = _.throttle(onChange, 16);\n\teditor.onChange = () => {\n\t\t_onChange();\n\t};\n\treturn editor;\n};\n\nconst SEditor = props => {\n\tconst { value, onChange, plugins, param } = props;\n\tconst readOnly = !!props.readOnly;\n\n\tconst newPlugins = [...defaultPlugins, ...plugins];\n\n\tconst editor = useMemo(() => {\n\t\tlet reditor = withCommon(withHistory(withReact(createEditor())));\n\n\t\t// 排在前边的插件，在wrap的时候放在最外层，保证优先执行\n\t\tfor (var i = newPlugins.length - 1; i >= 0; i--) {\n\t\t\tif (newPlugins[i].Plugin) {\n\t\t\t\treditor = newPlugins[i].Plugin(reditor);\n\t\t\t}\n\t\t}\n\n\t\treturn reditor;\n\t}, []);\n\n\teditor.readOnly = readOnly;\n\teditor.param = param;\n\n\tconst renderElement = useCallback(props => {\n\t\tconst { attributes, children, element } = props;\n\n\t\tif (!element.type) {\n\t\t\telement.type = 'paragraph';\n\t\t}\n\n\t\tfor (var i = 0; i < newPlugins.length; i++) {\n\t\t\tconst Ele = newPlugins[i].Element;\n\t\t\tif (newPlugins[i].type === element.type) {\n\t\t\t\tif (newPlugins[i].IsBlock) {\n\t\t\t\t\treturn (\n\t\t\t\t\t\t<Menu element={element} plugins={newPlugins} editMenu={newPlugins[i].EditMenu}>\n\t\t\t\t\t\t\t<Ele attributes={attributes} children={children} element={element} />\n\t\t\t\t\t\t</Menu>\n\t\t\t\t\t);\n\t\t\t\t} else {\n\t\t\t\t\treturn <Ele attributes={attributes} children={children} element={element} />;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\treturn <span {...attributes}>{children}</span>;\n\t}, []);\n\n\tconst renderElementReadOnly = useCallback(props => {\n\t\tconst { attributes, children, element } = props;\n\n\t\tif (!element.type) {\n\t\t\telement.type = 'paragraph';\n\t\t}\n\n\t\tfor (var i = 0; i < newPlugins.length; i++) {\n\t\t\tif (newPlugins[i].type === element.type) {\n\t\t\t\treturn newPlugins[i].Element({ attributes, children, element });\n\t\t\t}\n\t\t}\n\n\t\treturn <span {...attributes}>{children}</span>;\n\t}, []);\n\n\tconst renderLeaf = useCallback(({ attributes, children, leaf }) => {\n\t\tfor (var i = 0; i < newPlugins.length; i++) {\n\t\t\tif (newPlugins[i].Leaf) {\n\t\t\t\tchildren = newPlugins[i].Leaf({ attributes, children, leaf });\n\t\t\t}\n\t\t}\n\n\t\treturn <span {...attributes}>{children}</span>;\n\t}, []);\n\n\tconst Toolbar = props => {\n\t\tconst tools = [];\n\t\tfor (var i = 0; i < newPlugins.length; i++) {\n\t\t\tif (newPlugins[i].LeafBar) {\n\t\t\t\ttools.push(<span key={newPlugins[i].type}>{newPlugins[i].LeafBar(props)}</span>);\n\t\t\t}\n\t\t}\n\n\t\treturn <div>{tools}</div>;\n\t};\n\n\tconst onKeyDown = useCallback(event => {\n\t\t// 监听tab的快捷方式\n\t\tif (event.key == 'Tab' && editor.onTabDown && editor.onTabDown()) {\n\t\t\tevent.preventDefault();\n\t\t}\n\t}, []);\n\n\tconst Decorate = useCallback(([node, path]) => {\n\t\tfor (var i = 0; i < newPlugins.length; i++) {\n\t\t\tif (newPlugins[i].Decorate && newPlugins[i].type === node.type) {\n\t\t\t\treturn newPlugins[i].Decorate(editor, [node, path]);\n\t\t\t}\n\t\t}\n\n\t\treturn [];\n\t}, []);\n\treturn (\n\t\t<Slate editor={editor} value={value} onChange={onChange}>\n\t\t\t{readOnly ? null : (\n\t\t\t\t<>\n\t\t\t\t\t<Affix offsetTop={0}>\n\t\t\t\t\t\t<div style={{ padding: '10px', background: '#bae7ff' }}>\n\t\t\t\t\t\t\t<Toolbar />\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</Affix>\n\t\t\t\t\t<br />\n\t\t\t\t</>\n\t\t\t)}\n\t\t\t<Editable\n\t\t\t\tstyle={{\n\t\t\t\t\tfontSize: '16px',\n\t\t\t\t\tfontFamily: `-apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial,\n                    'Noto Sans', sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol',\n                    'Noto Color Emoji'`,\n\t\t\t\t}}\n\t\t\t\trenderElement={readOnly ? renderElementReadOnly : renderElement}\n\t\t\t\trenderLeaf={renderLeaf}\n\t\t\t\tonKeyDown={onKeyDown}\n\t\t\t\tdecorate={Decorate}\n\t\t\t\tspellCheck={false}\n\t\t\t\treadOnly={readOnly}\n\t\t\t\tscrollSelectionIntoView={(editor, domRange) => {}}\n\t\t\t\tplaceholder=\"输入文本\"\n\t\t\t/>\n\t\t</Slate>\n\t);\n};\n\nexport default SEditor;\n"],"names":["isObject","o","Object","prototype","toString","call","isPlainObject","undefined","ctor","constructor","prot","hasOwnProperty","n","r","arguments","length","t","Array","e","process","env","NODE_ENV","i","Y","apply","Error","map","join","Q","getPrototypeOf","Function","Z","isArray","L","s","v","keys","nn","forEach","u","has","a","get","f","set","delete","add","c","X","Map","q","Set","p","l","slice","rn","writable","configurable","enumerable","value","create","d","y","clear","h","freeze","isFrozen","b","tn","_","U","j","O","g","S","w","m","P","M","x","H","A","I","k","R","D","concat","F","z","getOwnPropertyDescriptor","E","N","T","C","en","on","Proxy","revocable","revoke","proxy","J","push","K","from","G","W","Symbol","B","Reflect","for","0","1","2","3","4","5","6","7","8","9","10","11","12","13","14","15","16","17","18","20","21","22","23","24","ownKeys","getOwnPropertySymbols","getOwnPropertyNames","getOwnPropertyDescriptors","deleteProperty","defineProperty","setPrototypeOf","un","this","isNaN","parseInt","produce","Promise","then","produceWithPatches","useProxies","setUseProxies","autoFreeze","setAutoFreeze","createDraft","finishDraft","applyPatches","path","op","$","an","fn","ln","bind","dn","_defineProperty","obj","key","DIRTY_PATHS","WeakMap","DIRTY_PATH_KEYS","FLUSHING","NORMALIZING","PATH_REFS","POINT_REFS","RANGE_REFS","ownKeys$9","object","enumerableOnly","symbols","filter","sym","_objectSpread$9","target","source","defineProperties","createEditor","editor","children","operations","selection","marks","isInline","isVoid","onChange","ref","Editor","pathRefs","PathRef","transform","_ref","pointRefs","PointRef","_ref2","rangeRefs","RangeRef","dirtyPaths","dirtyPathKeys","_path","oldDirtyPaths","oldDirtyPathKeys","Path","operationCanTransformPath","getDirtyPaths","Transforms","normalize","type","resolve","addMark","Range","isExpanded","setNodes","match","Text","isText","split","deleteBackward","unit","isCollapsed","reverse","deleteForward","deleteFragment","direction","getFragment","Node","fragment","insertBreak","splitNodes","always","insertFragment","insertNode","node","insertNodes","insertText","text","normalizeNode","entry","Element","isElement","at","voids","shouldHaveInlines","isEditor","_child","isLast","currentNode","prev","removeNodes","equals","loose","mergeNodes","removeMark","unsetNodes","levels","_path2","descendants","nodes","_ref3","_path3","ancestors","previousPath","previous","_path4","newPath","ancestor","_ancestor","oldAncestors","newAncestors","_p","newParent","newIndex","resultPath","_path5","_path6","_levels","nextPath","next","_objectWithoutPropertiesLoose","excluded","sourceKeys","indexOf","_objectWithoutProperties","sourceSymbolKeys","propertyIsEnumerable","CodepointType","getCharacterDistance","str","char","isRTL","isLTR","codepoints","codepointsIteratorRTL","left","None","right","distance","gb12Or13","code","codePointAt","getCodepointType","intersects","ZWJ","ExtPict","endsWithEmojiZWJ","substring","RI","endsWithOddNumberOfRIs","isBoundaryPair","SPACE","PUNCTUATION","CHAMELEON","getWordDistance","dist","started","charDist","remaining","splitByCharacterDistance","isWordCharacter","test","nextChar","nextRemaining","end","char1","charAt","isLowSurrogate","charCodeAt","char2","isHighSurrogate","charCode","reExtend","rePrepend","reSpacingMark","reL","reV","reT","reLV","reLVT","reExtPict","Any","search","Extend","Prepend","SpacingMark","V","LV","LVT","NonBoundaryPairs","findIndex","endingEmojiZWJ","endingRIs","isNodeList","isAncestor","isElementList","every","val","isElementProps","props","isElementType","elementVal","elementKey","matches","element","_excluded$4","_excluded2$3","ownKeys$8","_objectSpread$8","IS_EDITOR_CACHE","above","mode","after","options","range","anchor","point","edge","focus","positions","before","start","edges","first","hasBlocks","some","isBlock","hasInlines","hasTexts","cachedIsEditor","isRange","Operation","isOperationList","isEnd","Point","isEdge","isStart","isEmpty","isNormalizing","offset","last","leaf","_node","prevPath","block","prevNode","blockPath","pointAfterLocation","parent","to","span","isPath","includes","universal","Span","isSpan","pass","isLower","hit","compare","emit","allPathKeys","force","popDirtyPath","pop","allPaths","withoutNormalizing","dirtyPath","max","_dirtyPath","_entry","parentPath","lastPath","depth","firstPath","common","isPoint","hasPath","pathRef","affinity","current","unref","refs","pointRef","isNewBlock","blockText","leafTextRemaining","leafTextOffset","string","isFirst","calcDistance","pointBeforeLocation","rangeRef","setNormalizing","unhangRange","endBlock","skip","isBefore","void","_excluded$3","_excluded2$2","IS_NODE_LIST_CACHE","root","child","index","JSON","stringify","another","descendant","elements","extractProps","_leaf","splice","isNode","cachedResult","isTextProps","visited","isAfter","nextIndex","texts","ownKeys$7","_objectSpread$7","isNodeOperation","isOperation","endsWith","position","properties","newProperties","isSelectionOperation","isTextOperation","inverse","isSibling","inversePath","inverseNewPath","_properties","_newProperties","paths","av","min","Math","endsAfter","as","bs","bv","endsAt","endsBefore","hasPrevious","isChild","isCommon","isDescendant","isParent","list","operation","relative","_op","_op2","_op3","_position","copy","_op4","onp","ownKeys$6","_objectSpread$6","result","_excluded$2","ownKeys$5","_objectSpread$5","isBackward","rs","re","ts","te","isAfterStart","isBeforeEnd","intersection","rest","s1","e1","s2","e2","isForward","points","affinityFocus","affinityAnchor","isDeepEqual","_key","_excluded$1","_excluded2$1","ownKeys$4","_objectSpread$4","omitText","isTextList","decorations","dec","leaves","_off","assign","middle","off","ownKeys$3","_objectSpread$3","applyToDraft","_point","_node2","_parent","_index","_point2","_key2","_node3","_parent2","_index2","truePath","_point3","_key3","_index3","_point4","_key4","_prev","preferNext","_offset","_text","_node4","_before","_after","_point5","_key5","_key6","_key7","_node5","_key8","_value","_path7","_before3","_after3","_node6","_parent4","_index4","newNode","_before2","_after2","_point6","_key9","GeneralTransforms","isDraft","_excluded","_excluded2","ownKeys$2","_objectSpread$2","NodeTransforms","hanging","select","_matchPath","isAtEnd","liftNodes","matchPath","_toPath","toPath","moveNodes","splitPath","_toPath2","commonPath","isPreviousSibling","emptyAncestor","hasSingleChildNest","emptyRef","toRef","targets","depths","_ref4","splitMode","endAtEndOfNode","startAtStartOfNode","hasChanges","height","deleteRange","beforeRef","highest","voidMatch","afterRef","voidNode","voidPath","afterPath","highestPath","lowestPath","unwrapNodes","_ref5","_loop","wrapNodes","rootPath","commonNode","wrapperPath","wrapper","ownKeys$1","_objectSpread$1","SelectionTransforms","collapse","deselect","move","opts","setSelection","setPoint","oldProps","newProps","TextTransforms","furthestVoid","_end","endOfDoc","startBlock","isAcrossBlocks","isSingleText","startVoid","endVoid","startRef","endRef","inlineElementMatch","_inlinePath","isBlockStart","isBlockEnd","isBlockEmpty","mergeStart","mergeEnd","matcher","starts","middles","ends","starting","inlineMatch","inlinePath","isInlineStart","isInlineEnd","middleRef","blockPathRef","_end2","_objectSpread","RTL","LTR","rtl","RegExp","ltr","String","nodeType","clientHeight","scrollHeight","clientWidth","scrollWidth","getComputedStyle","overflowY","overflowX","ownerDocument","defaultView","frameElement","window","scrollMode","inline","boundary","skipOverflowHiddenElements","TypeError","document","scrollingElement","documentElement","parentElement","body","visualViewport","width","innerWidth","innerHeight","scrollX","pageXOffset","scrollY","pageYOffset","getBoundingClientRect","top","bottom","borderLeftWidth","borderTopWidth","borderRightWidth","borderBottomWidth","offsetWidth","offsetHeight","scrollLeft","scrollTop","el","isOptionsObject","defaultBehavior","actions","behavior","canSmoothScroll","style","scroll","getOptions","scrollIntoView","isTargetAttached","isConnected","contains","compute","computeOptions","exports","IS_MAC","navigator","platform","MODIFIERS","alt","control","meta","shift","ALIASES","break","cmd","command","ctl","ctrl","del","down","esc","ins","mod","opt","option","return","space","spacebar","up","win","windows","CODES","backspace","tab","enter","pause","capslock","escape"," ","pageup","pagedown","home","arrowleft","arrowup","arrowright","arrowdown","insert","numlock","scrolllock",";","=",",","-",".","/","`","[","\\","]","'","isHotkey","hotkey","event","check","array","compareHotkey","parseHotkey","byKey","ret","values","replace","_iteratorNormalCompletion","_didIteratorError","_iteratorError","_step","_iterator","iterator","done","optional","name","toKeyName","modifier","which","toKeyCode","err","expected","actual","toLowerCase","toUpperCase","useSlateStatic","ReactEditor","findPath","React","createElement","ZeroWidthString","TextString","isTrailing","isLineBreak","useRef","forceUpdateCount","textContent","data-slate-string","data-slate-zero-width","data-slate-length","NODE_TO_INDEX","NODE_TO_PARENT","EDITOR_TO_WINDOW","EDITOR_TO_ELEMENT","ELEMENT_TO_NODE","NODE_TO_ELEMENT","NODE_TO_KEY","EDITOR_TO_KEY_TO_ELEMENT","IS_READ_ONLY","IS_FOCUSED","EDITOR_TO_ON_CHANGE","EDITOR_TO_RESTORE_DOM","PLACEHOLDER_SYMBOL","Leaf","renderPlaceholder","renderLeaf","DefaultLeaf","placeholderRef","useEffect","placeholderEl","editorEl","querySelector","minHeight","placeholderProps","placeholder","attributes","data-slate-placeholder","pointerEvents","maxWidth","display","opacity","userSelect","textDecoration","contentEditable","Fragment","data-slate-leaf","MemoizedLeaf","memo","Text$1","IS_IOS","userAgent","MSStream","IS_APPLE","IS_ANDROID","IS_FIREFOX","IS_SAFARI","IS_EDGE_LEGACY","IS_CHROME","IS_CHROME_LEGACY","IS_FIREFOX_LEGACY","IS_QQBROWSER","CAN_USE_DOM","HAS_BEFORE_INPUT_SUPPORT","globalThis","InputEvent","getTargetRanges","useIsomorphicLayoutEffect","useLayoutEffect","shallowCompare","obj1","obj2","isDecoratorRangeListEqual","other","rangeOwnProps","otherOwnProps","findKey","id","KEY_TO_ELEMENT","data-slate-node","MemoizedText","renderElement","DefaultElement","readOnly","useReadOnly","useChildren","dir","getDirection","Tag","data-slate-spacer","color","outline","MemoizedElement","EditorContext","createContext","useContext","DecorateContext","useDecorate","SelectedContext","useSelected","decorate","isLeafBlock","Element$1","sel","ds","Provider","HOTKEYS","bold","compose","moveBackward","moveForward","moveWordBackward","moveWordForward","extendBackward","extendForward","italic","splitBlock","undo","APPLE_HOTKEYS","moveLineBackward","moveLineForward","deleteLineBackward","deleteLineForward","deleteWordBackward","deleteWordForward","extendLineBackward","extendLineForward","redo","transposeCharacter","WINDOWS_HOTKEYS","generic","apple","isGeneric","isKeyHotkey","isApple","isWindows","Hotkeys","isBold","isCompose","isMoveBackward","isMoveForward","isDeleteBackward","isDeleteForward","isDeleteLineBackward","isDeleteLineForward","isDeleteWordBackward","isDeleteWordForward","isExtendBackward","isExtendForward","isExtendLineBackward","isExtendLineForward","isItalic","isMoveLineBackward","isMoveLineForward","isMoveWordBackward","isMoveWordForward","isRedo","isSplitBlock","isTransposeCharacter","isUndo","ReadOnlyContext","SlateContext","useSlate","context","getDefaultView","isDOMComment","isDOMNode","isDOMElement","isDOMSelection","anchorNode","Selection","isDOMText","isPlainTextOnlyPaste","clipboardData","getData","types","normalizeDOMPoint","domPoint","childNodes","getEditableChildAndIndex","getEditableChild","hasShadowRoot","activeElement","shadowRoot","triedForward","triedBackward","getAttribute","getPlainText","domNode","nodeValue","childNode","getPropertyValue","tagName","catchSlateFragment","getSlateFragmentAttribute","dataTransfer","getClipboardData","DataTransfer","setData","AS_NATIVE","NATIVE_OPERATIONS","asNative","onFlushed","isNative","flushNativeEvents","nativeOps","Children","Editable$1","autoFocus","defaultDecorate","onDOMBeforeInput","propsOnDOMBeforeInput","DefaultPlaceholder","scrollSelectionIntoView","defaultScrollSelectionIntoView","Component","isComposing","setIsComposing","useState","state","useMemo","hasInsertPrefixInCompositon","isDraggingInternally","isUpdatingSelection","latestElement","domSelection","findDocumentOrShadowRoot","getSelection","isFocused","hasDomSelection","newDomRange","editorElement","hasDomSelectionInEditor","focusNode","slateRange","toSlateRange","exactMatch","hasRange","toDOMRange","setBaseAndExtent","endContainer","endOffset","startContainer","startOffset","removeAllRanges","setTimeout","toDOMNode","useCallback","hasEditableTarget","isDOMEventHandled","inputType","data","native","preventDefault","startsWith","targetRange","getWindow","insertData","onDOMSelectionChange","addEventListener","removeEventListener","throttle","anchorNodeSelectable","isTargetInsideVoid","focusNodeSelectable","scheduleOnDOMSelectionChange","data-gramm","role","spellCheck","autoCorrect","autoCapitalize","data-slate-editor","suppressContentEditableWarning","whiteSpace","wordWrap","onBeforeInput","isEventHandled","onInput","onBlur","relatedTarget","hasAttribute","hasDOMNode","toSlateNode","onClick","_start","hasTarget","onCompositionEnd","currentTextNode","leafPath","onCompositionUpdate","onCompositionStart","onCopy","setFragmentData","onCut","onDragOver","onDragStart","onDrop","draggedRange","findEventRange","onDragEnd","onFocus","onKeyDown","nativeEvent","maybeHistoryEditor","_maybeHistoryEditor","onPaste","domRange","leafEl","editable","slateNode","handler","shouldTreatEventAsHandled","isDefaultPrevented","isPropagationStopped","defaultPrevented","Key","unshift","getRootNode","Document","ShadowRoot","isReadOnly","blur","preventScroll","rangeCount","targetEl","message","closest","isContentEditable","toDOMPoint","querySelectorAll","attr","domAnchor","domFocus","createRange","startNode","endNode","isStartAtZeroWidth","isEndAtZeroWidth","setStart","setEnd","domEl","clientX","clientY","rect","isPrev","caretRangeFromPoint","caretPositionFromPoint","offsetNode","toSlatePoint","_domNode$textContent","leafNode","nearestNode","nearestOffset","parentNode","textNode","contents","cloneContents","removeChild","focusOffset","anchorOffset","collapsed","getDiffStart","getDiffEnd","prevLength","nextLength","getDiffOffsets","sliceText","offsets","diffText","removeText","combineInsertedText","insertedText","reduce","acc","getTextInsertion","prevText","nextText","textDiff","normalizeTextInsertionRange","insertionRange","characterBeforeAnchor","characterAfterAnchor","gatherMutationData","mutations","addedNodes","removedNodes","characterDataMutations","mutation","addedNode","removedNode","textInsertion","parentDOMNode","HTMLElement","isDeletion","isReplaceExpandedSelection","isTextInsertion","_ref6","isRemoveLeafNodes","_ref7","restoreDOM","onRestoreDOM","console","error","AndroidInputManager","flush","reconcileMutations","mutationData","replaceExpandedSelection","removeLeafNodes","insertion","useMutationObserver","callback","mutationObserver","MutationObserver","disconnect","observe","useTrackUserInput","receivedUserInput","animationFrameRef","onUserInput","cancelAnimationFrame","requestAnimationFrame","MUTATION_OBSERVER_CONFIG","childList","characterData","characterDataOldValue","subtree","useAndroidInputManager","inputManager","timeoutId","isReconciling","clearTimeout","AndroidEditable","contentKey","setContentKey","_unused","_unused2","FocusedContext","useFocused","Slate","setKey","onContextChange","setIsFocused","doRectsIntersect","compareRect","areRangesSameLine","range1","range2","rect1","rect2","findCurrentLineRange","parentRange","parentRangeBoundary","floor","withReact","parentBlockEntry","parentBlockPath","parentElementRange","currentLineRange","attach","trim","cloneRange","setEndAfter","zw","isNewline","appendChild","encoded","btoa","encodeURIComponent","setAttribute","div","innerHTML","decoded","decodeURIComponent","atob","parsed","parse","line","ReactDOM","unstable_batchedUpdates","Editable","History","isHistory","redos","undos","SAVING","MERGING","HistoryEditor","isHistoryEditor","history","isMerging","isSaving","withoutMerging","withoutSaving","withHistory","batch","lastBatch","lastOp","overwrite","shouldOverwrite","save","merge","shouldSave","shouldMerge","shouldClear","getLetterByOrder","order","fromCodePoint","orderUse","uListUse","setNodeTag","checkedAt","setChecked","checked","setTitle","title","setTextAlign","textAlign","setQuote","quote","setListOrder","listOrder","setNextListOrder","nextBlock","indentation","setList","setIndentation","wrapLink","url","unWrapLink","SlateElement","setURL","setLinkTarget","setStarNum","number","insertStar","IndentationText","icon","marginLeft","minWidth","marginRight","flex","onMouseDown","cursor","CheckSquareOutlined","BorderOutlined","fontSize","padding","borderLeft","wordBreak","LinkElement","LinkEditor","setValue","Input","Single","selected","description","content","info","DeleteOutlined","marginTop","Select","notNull","buttons","isUrl","open","Tooltip","overlayStyle","destroyTooltipOnHide","StarElement","focused","borderRadius","boxShadow","Rate","disabled","allowClear","backgroundColor","underline","strikethrough","fontColor","isColorActive","isFormatActive","format","isLinkActive","backgroundColorList","fontColorList","normalConfig","BoldOutlined","ItalicOutlined","UnderlineOutlined","StrikethroughOutlined","CodeOutlined","execCoy","input","setSelectionRange","execCommand","LeafBar","getActiveColor","colorList","getColorList","BgColorsOutlined","FontColorsOutlined","getFormatActiveKeys","border","Muti","selectedKeys","FormatPainterOutlined","cache","LinkBar","LinkOutlined","StarBar","StarFilled","formatPrinter","normalArr","insertEndBreak","nextData","withParagraph","onTabDown","line1","allParagraph","beforeText","config","markdownKeys","strArr","withLink","withStar","Menu","titleButtonList","listButtonList","quoteButtonList","textAlignButtonList","UnorderedListOutlined","OrderedListOutlined","InfoCircleOutlined","AlignLeftOutlined","AlignCenterOutlined","AlignRightOutlined","Paragraph","IsBlock","AddMenu","EditMenu","Plugin","Link","Star","setIcon","setIconColor","iconColor","setCardType","cardType","setCard","iconMap","tag","TagOutlined","tags","TagsOutlined","sound","SoundOutlined","question","QuestionCircleOutlined","thunderbolt","ThunderboltOutlined","star","StarOutlined","setting","SettingOutlined","schedule","ScheduleOutlined","pushpin","PushpinOutlined","MessageOutlined","heart","HeartOutlined","edit","EditOutlined","snipets","SnippetsOutlined","aliwangwang","AliwangwangOutlined","wechat","WechatOutlined","weibo","WeiboOutlined","warning","WarningOutlined","careUP","CaretUpOutlined","careDown","CaretDownOutlined","smile","SmileOutlined","iconColorList","cardTypeList","CheckCircleOutlined","ExclamationCircleOutlined","CloseCircleOutlined","getIconList","FontSizeOutlined","getIconColorList","Button","CreditCardOutlined","paddingTop","paddingBottom","Alert","showIcon","withCard","Card","setImage","src","insertImage","image","getInsertImageCallBack","setWidth","isImageUrl","ext","URL","pathname","imageExtensions","size","MinusCircleOutlined","PlusCircleOutlined","Popover","Props","placement","PictureOutlined","fallback","Image","withImage","files","onUploadImage","file","param","setTable","rows","cells","tableBlock","addRow","cellPath","isNext","table","getTableFromCell","tablePath","atRow","mergedCols","row","cellElement","rowSpan","colSpan","col","cell","newCell","deleteRow","newRowSpan","addCol","getCellPathInTable","mergedRows","emptyCol","deleteCol","getRowFromCell","atCol","newColSpan","setColWidth","splitCells","nodeEntry","cellInTable","tableElement","mergeCells","tableSelection","startInTable","endInTable","startElement","cellMerged","clearTableSelection","getAllSpanCells","mergedCellRowCols","rowElement","getTableSelection","level","anchorPathInTable","focusPathInTable","minRow","maxRow","minCol","maxCol","getCuerrentSelection","minR","minC","maxR","maxC","change","isCellInTableSelection","atInTable","ir","isLineCrossAnyCells","ar","ic","ac","isLineCrossCell","lineStart","lineEnd","cellStart","cellEnd","rowPath","len","settitle","TableInput","TableOutlined","tr0","marginBottom","overflow","borderCollapse","RowElement","rowPathInTable","cellSort","InsertRowLeftOutlined","DeleteColumnOutlined","InsertRowRightOutlined","editorColMenu","colEditor","RowEditor","InsertRowAboveOutlined","DeleteRowOutlined","InsertRowBelowOutlined","CellElement","verticalAlign","tdProps","MergedElement","withTable","startEl","endEl","hasTable","startRow","startCol","endRow","endCol","newFagment","withTableRow","withTableCell","withTableCellMerged","MergeCellsOutlined","SplitCellsOutlined","Table","Level","TableRow","TableCell","TableCellMerged","setDivider","MinusSquareOutlined","Divider","orientation","withDivider","setHr","withHr","Hr","hover","setHover","tabSize","onMouseOver","onMouseLeave","codeStringArr","success","CopyOutlined","language","CodeLineElement","fontFamily","setLanguage","setCode","Option","Prism","languages","showSearch","optionFilterProp","filterOption","filterSort","optionA","optionB","localeCompare","CodepenOutlined","withCode","codePath","withCodeLine","codeArr","tabArr","CodeDcorate","grammar","linePath","tokens","tokenize","ranges","lineOrder","calculate","childrenTokens","childrenType","token","accu","codeType","cs","alias","codeColorConfig","comment","operator","keyword","variable","regex","constant","symbol","selector","punctuation","builtin","Code","Decorate","CodeLine","setVideo","VideoCameraOutlined","scrolling","frameBorder","framespacing","allowFullScreen","withVideo","Video","deleteNode","getFromNodeEntry","insertNextEmptyNode","insertPreviousEmptyNode","EditIcon","LeftMenu","plugins","editMenu","addMenuList","UpCircleOutlined","DownCircleOutlined","isEdit","setIsEdit","defaultPlugins","withCommon","_onChange","SEditor","Toolbar","tools","newPlugins","reditor","Ele","renderElementReadOnly","Affix","offsetTop","background"],"mappings":"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"}